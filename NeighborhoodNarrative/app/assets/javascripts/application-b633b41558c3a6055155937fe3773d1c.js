/*!
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=ot.type(e);return"function"===i||ot.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(ot.isFunction(t))return ot.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return ot.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ht.test(t))return ot.filter(t,e,i);t=ot.filter(t,e)}return ot.grep(e,function(e){return ot.inArray(e,t)>=0!==i})}function o(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function r(e){var t=wt[e]={};return ot.each(e.match(bt)||[],function(e,i){t[i]=!0}),t}function s(){pt.addEventListener?(pt.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1)):(pt.detachEvent("onreadystatechange",a),e.detachEvent("onload",a))}function a(){(pt.addEventListener||"load"===event.type||"complete"===pt.readyState)&&(s(),ot.ready())}function l(e,t,i){if(void 0===i&&1===e.nodeType){var n="data-"+t.replace(St,"-$1").toLowerCase();if(i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Tt.test(i)?ot.parseJSON(i):i}catch(o){}ot.data(e,t,i)}else i=void 0}return i}function c(e){var t;for(t in e)if(("data"!==t||!ot.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,i,n){if(ot.acceptData(e)){var o,r,s=ot.expando,a=e.nodeType,l=a?ot.cache:e,c=a?e[s]:e[s]&&s;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof t)return c||(c=a?e[s]=G.pop()||ot.guid++:s),l[c]||(l[c]=a?{}:{toJSON:ot.noop}),("object"==typeof t||"function"==typeof t)&&(n?l[c]=ot.extend(l[c],t):l[c].data=ot.extend(l[c].data,t)),r=l[c],n||(r.data||(r.data={}),r=r.data),void 0!==i&&(r[ot.camelCase(t)]=i),"string"==typeof t?(o=r[t],null==o&&(o=r[ot.camelCase(t)])):o=r,o}}function d(e,t,i){if(ot.acceptData(e)){var n,o,r=e.nodeType,s=r?ot.cache:e,a=r?e[ot.expando]:ot.expando;if(s[a]){if(t&&(n=i?s[a]:s[a].data)){ot.isArray(t)?t=t.concat(ot.map(t,ot.camelCase)):t in n?t=[t]:(t=ot.camelCase(t),t=t in n?[t]:t.split(" ")),o=t.length;for(;o--;)delete n[t[o]];if(i?!c(n):!ot.isEmptyObject(n))return}(i||(delete s[a].data,c(s[a])))&&(r?ot.cleanData([e],!0):it.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function h(){return!0}function f(){return!1}function p(){try{return pt.activeElement}catch(e){}}function m(e){var t=Ft.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function g(e,t){var i,n,o=0,r=typeof e.getElementsByTagName!==xt?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==xt?e.querySelectorAll(t||"*"):void 0;if(!r)for(r=[],i=e.childNodes||e;null!=(n=i[o]);o++)!t||ot.nodeName(n,t)?r.push(n):ot.merge(r,g(n,t));return void 0===t||t&&ot.nodeName(e,t)?ot.merge([e],r):r}function v(e){Dt.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return ot.nodeName(e,"table")&&ot.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==ot.find.attr(e,"type"))+"/"+e.type,e}function w(e){var t=Yt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){for(var i,n=0;null!=(i=e[n]);n++)ot._data(i,"globalEval",!t||ot._data(t[n],"globalEval"))}function C(e,t){if(1===t.nodeType&&ot.hasData(e)){var i,n,o,r=ot._data(e),s=ot._data(t,r),a=r.events;if(a){delete s.handle,s.events={};for(i in a)for(n=0,o=a[i].length;o>n;n++)ot.event.add(t,i,a[i][n])}s.data&&(s.data=ot.extend({},s.data))}}function x(e,t){var i,n,o;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!it.noCloneEvent&&t[ot.expando]){o=ot._data(t);for(n in o.events)ot.removeEvent(t,n,o.handle);t.removeAttribute(ot.expando)}"script"===i&&t.text!==e.text?(b(t).text=e.text,w(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),it.html5Clone&&e.innerHTML&&!ot.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Dt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function T(t,i){var n,o=ot(i.createElement(t)).appendTo(i.body),r=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(o[0]))?n.display:ot.css(o[0],"display");return o.detach(),r}function S(e){var t=pt,i=Zt[e];return i||(i=T(e,t),"none"!==i&&i||(Qt=(Qt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Qt[0].contentWindow||Qt[0].contentDocument).document,t.write(),t.close(),i=T(e,t),Qt.detach()),Zt[e]=i),i}function k(e,t){return{get:function(){var i=e();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}function A(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,o=hi.length;o--;)if(t=hi[o]+i,t in e)return t;return n}function E(e,t){for(var i,n,o,r=[],s=0,a=e.length;a>s;s++)n=e[s],n.style&&(r[s]=ot._data(n,"olddisplay"),i=n.style.display,t?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Et(n)&&(r[s]=ot._data(n,"olddisplay",S(n.nodeName)))):(o=Et(n),(i&&"none"!==i||!o)&&ot._data(n,"olddisplay",o?i:ot.css(n,"display"))));for(s=0;a>s;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[s]||"":"none"));return e}function M(e,t,i){var n=li.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function D(e,t,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===t?1:0,s=0;4>r;r+=2)"margin"===i&&(s+=ot.css(e,i+At[r],!0,o)),n?("content"===i&&(s-=ot.css(e,"padding"+At[r],!0,o)),"margin"!==i&&(s-=ot.css(e,"border"+At[r]+"Width",!0,o))):(s+=ot.css(e,"padding"+At[r],!0,o),"padding"!==i&&(s+=ot.css(e,"border"+At[r]+"Width",!0,o)));return s}function R(e,t,i){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=ei(e),s=it.boxSizing&&"border-box"===ot.css(e,"boxSizing",!1,r);if(0>=o||null==o){if(o=ti(e,t,r),(0>o||null==o)&&(o=e.style[t]),ni.test(o))return o;n=s&&(it.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+D(e,t,i||(s?"border":"content"),n,r)+"px"}function N(e,t,i,n,o){return new N.prototype.init(e,t,i,n,o)}function P(){return setTimeout(function(){fi=void 0}),fi=ot.now()}function O(e,t){var i,n={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)i=At[o],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function H(e,t,i){for(var n,o=(bi[t]||[]).concat(bi["*"]),r=0,s=o.length;s>r;r++)if(n=o[r].call(i,t,e))return n}function F(e,t,i){var n,o,r,s,a,l,c,u,d=this,h={},f=e.style,p=e.nodeType&&Et(e),m=ot._data(e,"fxshow");i.queue||(a=ot._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,ot.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],c=ot.css(e,"display"),u="none"===c?ot._data(e,"olddisplay")||S(e.nodeName):c,"inline"===u&&"none"===ot.css(e,"float")&&(it.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?f.zoom=1:f.display="inline-block")),i.overflow&&(f.overflow="hidden",it.shrinkWrapBlocks()||d.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}));for(n in t)if(o=t[n],mi.exec(o)){if(delete t[n],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!m||void 0===m[n])continue;p=!0}h[n]=m&&m[n]||ot.style(e,n)}else c=void 0;if(ot.isEmptyObject(h))"inline"===("none"===c?S(e.nodeName):c)&&(f.display=c);else{m?"hidden"in m&&(p=m.hidden):m=ot._data(e,"fxshow",{}),r&&(m.hidden=!p),p?ot(e).show():d.done(function(){ot(e).hide()}),d.done(function(){var t;ot._removeData(e,"fxshow");for(t in h)ot.style(e,t,h[t])});for(n in h)s=H(p?m[n]:0,n,d),n in m||(m[n]=s.start,p&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function I(e,t){var i,n,o,r,s;for(i in e)if(n=ot.camelCase(i),o=t[n],r=e[i],ot.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),s=ot.cssHooks[n],s&&"expand"in s){r=s.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=o)}else t[n]=o}function B(e,t,i){var n,o,r=0,s=yi.length,a=ot.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=fi||P(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,r=1-n,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(r);return a.notifyWith(e,[c,r,i]),1>r&&l?i:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:ot.extend({},t),opts:ot.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:fi||P(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ot.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)c.tweens[i].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(I(u,c.opts.specialEasing);s>r;r++)if(n=yi[r].call(c,e,u,c.opts))return n;return ot.map(u,H,c),ot.isFunction(c.opts.start)&&c.opts.start.call(e,c),ot.fx.timer(ot.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function z(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,r=t.toLowerCase().match(bt)||[];if(ot.isFunction(i))for(;n=r[o++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function L(e,t,i,n){function o(a){var l;return r[a]=!0,ot.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=e===ji;return o(t.dataTypes[0])||!r["*"]&&o("*")}function W(e,t){var i,n,o=ot.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&ot.extend(!0,e,i),e}function V(e,t,i){for(var n,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(s in a)if(a[s]&&a[s].test(o)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}n||(n=s)}r=r||n}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}function j(e,t,i,n){var o,r,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=c[l+" "+r]||c["* "+r],!s)for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[o]:c[o]!==!0&&(r=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function q(e,t,i,n){var o;if(ot.isArray(t))ot.each(t,function(t,o){i||Yi.test(e)?n(e,o):q(e+"["+("object"==typeof o?t:"")+"]",o,i,n)});else if(i||"object"!==ot.type(t))n(e,t);else for(o in t)q(e+"["+o+"]",t[o],i,n)}function U(){try{return new e.XMLHttpRequest}catch(t){}}function $(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Y(e){return ot.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G=[],K=G.slice,X=G.concat,J=G.push,Q=G.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,it={},nt="1.11.1",ot=function(e,t){return new ot.fn.init(e,t)},rt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,at=/-([\da-z])/gi,lt=function(e,t){return t.toUpperCase()};ot.fn=ot.prototype={jquery:nt,constructor:ot,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=ot.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ot.each(this,e,t)},map:function(e){return this.pushStack(ot.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:G.sort,splice:G.splice},ot.extend=ot.fn.extend=function(){var e,t,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||ot.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(o=arguments[a]))for(n in o)e=s[n],i=o[n],s!==i&&(c&&i&&(ot.isPlainObject(i)||(t=ot.isArray(i)))?(t?(t=!1,r=e&&ot.isArray(e)?e:[]):r=e&&ot.isPlainObject(e)?e:{},s[n]=ot.extend(c,r,i)):void 0!==i&&(s[n]=i));return s},ot.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ot.type(e)},isArray:Array.isArray||function(e){return"array"===ot.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ot.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ot.type(e)||e.nodeType||ot.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(it.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&ot.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(st,"ms-").replace(at,lt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var o,r=0,s=e.length,a=i(e);if(n){if(a)for(;s>r&&(o=t.apply(e[r],n),o!==!1);r++);else for(r in e)if(o=t.apply(e[r],n),o===!1)break}else if(a)for(;s>r&&(o=t.call(e[r],r,e[r]),o!==!1);r++);else for(r in e)if(o=t.call(e[r],r,e[r]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(rt,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?ot.merge(n,"string"==typeof e?[e]:e):J.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(Q)return Q.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;i>n;)e[o++]=t[n++];if(i!==i)for(;void 0!==t[n];)e[o++]=t[n++];return e.length=o,e},grep:function(e,t,i){for(var n,o=[],r=0,s=e.length,a=!i;s>r;r++)n=!t(e[r],r),n!==a&&o.push(e[r]);return o},map:function(e,t,n){var o,r=0,s=e.length,a=i(e),l=[];if(a)for(;s>r;r++)o=t(e[r],r,n),null!=o&&l.push(o);else for(r in e)o=t(e[r],r,n),null!=o&&l.push(o);return X.apply([],l)},guid:1,proxy:function(e,t){var i,n,o;return"string"==typeof t&&(o=e[t],t=e,e=o),ot.isFunction(e)?(i=K.call(arguments,2),n=function(){return e.apply(t||this,i.concat(K.call(arguments)))},n.guid=e.guid=e.guid||ot.guid++,n):void 0},now:function(){return+new Date},support:it}),ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ct=/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */
function(e){function t(e,t,i,n){var o,r,s,a,l,c,d,f,p,m;if((t?t.ownerDocument||t:L)!==N&&R(t),t=t||N,i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=t.nodeType)&&9!==a)return[];if(O&&!n){if(o=yt.exec(e))if(s=o[1]){if(9===a){if(r=t.getElementById(s),!r||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&B(t,r)&&r.id===s)return i.push(r),i}else{if(o[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((s=o[3])&&_.getElementsByClassName&&t.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(s)),i}if(_.qsa&&(!H||!H.test(e))){if(f=d=z,p=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=S(e),(d=t.getAttribute("id"))?f=d.replace(wt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=c.length;l--;)c[l]=f+h(c[l]);p=bt.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(i,p.querySelectorAll(m)),i}catch(g){}finally{d||t.removeAttribute("id")}}}return A(e.replace(lt,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>C.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[z]=!0,e}function o(e){var t=N.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var i=e.split("|"),n=e.length;n--;)C.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var o,r=e([],i.length,t),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function u(e){return e&&typeof e.getElementsByTagName!==Y&&e}function d(){}function h(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function f(e,t,i){var n=t.dir,o=i&&"parentNode"===n,r=V++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,r)}:function(t,i,s){var a,l,c=[W,r];if(s){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||o){if(l=t[z]||(t[z]={}),(a=l[n])&&a[0]===W&&a[1]===r)return c[2]=a[2];if(l[n]=c,c[2]=e(t,i,s))return!0}}}function p(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function m(e,i,n){for(var o=0,r=i.length;r>o;o++)t(e,i[o],n);return n}function g(e,t,i,n,o){for(var r,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(!i||i(r,n,o))&&(s.push(r),c&&t.push(a));return s}function v(e,t,i,o,r,s){return o&&!o[z]&&(o=v(o)),r&&!r[z]&&(r=v(r,s)),n(function(n,s,a,l){var c,u,d,h=[],f=[],p=s.length,v=n||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!n&&t?v:g(v,h,e,a,l),b=i?r||(n?e:p||o)?[]:s:y;if(i&&i(y,b,a,l),o)for(c=g(b,f),o(c,[],a,l),u=c.length;u--;)(d=c[u])&&(b[f[u]]=!(y[f[u]]=d));if(n){if(r||e){if(r){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(y[u]=d);r(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=r?tt.call(n,d):h[u])>-1&&(n[c]=!(s[c]=d))}}else b=g(b===s?b.splice(p,b.length):b),r?r(null,s,b,l):Z.apply(s,b)})}function y(e){for(var t,i,n,o=e.length,r=C.relative[e[0].type],s=r||C.relative[" "],a=r?1:0,l=f(function(e){return e===t},s,!0),c=f(function(e){return tt.call(t,e)>-1},s,!0),u=[function(e,i,n){return!r&&(n||i!==E)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];o>a;a++)if(i=C.relative[e[a].type])u=[f(p(u),i)];else{if(i=C.filter[e[a].type].apply(null,e[a].matches),i[z]){for(n=++a;o>n&&!C.relative[e[n].type];n++);return v(a>1&&p(u),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(lt,"$1"),i,n>a&&y(e.slice(a,n)),o>n&&y(e=e.slice(n)),o>n&&h(e))}u.push(i)}return p(u)}function b(e,i){var o=i.length>0,r=e.length>0,s=function(n,s,a,l,c){var u,d,h,f=0,p="0",m=n&&[],v=[],y=E,b=n||r&&C.find.TAG("*",c),w=W+=null==y?1:Math.random()||.1,_=b.length;for(c&&(E=s!==N&&s);p!==_&&null!=(u=b[p]);p++){if(r&&u){for(d=0;h=e[d++];)if(h(u,s,a)){l.push(u);break}c&&(W=w)}o&&((u=!h&&u)&&f--,n&&m.push(u))}if(f+=p,o&&p!==f){for(d=0;h=i[d++];)h(m,v,s,a);if(n){if(f>0)for(;p--;)m[p]||v[p]||(v[p]=J.call(l));v=g(v)}Z.apply(l,v),c&&!n&&v.length>0&&f+i.length>1&&t.uniqueSort(l)}return c&&(W=w,E=y),m};return o?n(s):s}var w,_,C,x,T,S,k,A,E,M,D,R,N,P,O,H,F,I,B,z="sizzle"+-new Date,L=e.document,W=0,V=0,j=i(),q=i(),U=i(),$=function(e,t){return e===t&&(D=!0),0},Y="undefined",G=1<<31,K={}.hasOwnProperty,X=[],J=X.pop,Q=X.push,Z=X.push,et=X.slice,tt=X.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=ot.replace("w","w#"),st="\\["+nt+"*("+ot+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",at=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),dt=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(at),ft=new RegExp("^"+rt+"$"),pt={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),Ct=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(X=et.call(L.childNodes),L.childNodes),X[L.childNodes.length].nodeType}catch(xt){Z={apply:X.length?function(e,t){Q.apply(e,et.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}_=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},R=t.setDocument=function(e){var t,i=e?e.ownerDocument||e:L,n=i.defaultView;return i!==N&&9===i.nodeType&&i.documentElement?(N=i,P=i.documentElement,O=!T(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){R()},!1):n.attachEvent&&n.attachEvent("onunload",function(){R()})),_.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=o(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=vt.test(i.getElementsByClassName)&&o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),_.getById=o(function(e){return P.appendChild(e).id=z,!i.getElementsByName||!i.getElementsByName(z).length}),_.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==Y&&O){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},C.filter.ID=function(e){var t=e.replace(_t,Ct);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(_t,Ct);return function(e){var i=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return i&&i.value===t}}),C.find.TAG=_.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},C.find.CLASS=_.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Y&&O?t.getElementsByClassName(e):void 0},F=[],H=[],(_.qsa=vt.test(i.querySelectorAll))&&(o(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&H.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||H.push("\\["+nt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||H.push(":checked")}),o(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&H.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),H.push(",.*:")})),(_.matchesSelector=vt.test(I=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(e){_.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),F.push("!=",at)}),H=H.length&&new RegExp(H.join("|")),F=F.length&&new RegExp(F.join("|")),t=vt.test(P.compareDocumentPosition),B=t||vt.test(P.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=t?function(e,t){if(e===t)return D=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!_.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===L&&B(L,e)?-1:t===i||t.ownerDocument===L&&B(L,t)?1:M?tt.call(M,e)-tt.call(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return D=!0,0;var n,o=0,r=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!r||!a)return e===i?-1:t===i?1:r?-1:a?1:M?tt.call(M,e)-tt.call(M,t):0;if(r===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?s(l[o],c[o]):l[o]===L?-1:c[o]===L?1:0},i):N},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==N&&R(e),i=i.replace(dt,"='$1']"),!(!_.matchesSelector||!O||F&&F.test(i)||H&&H.test(i)))try{var n=I.call(e,i);if(n||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return t(i,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&R(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&R(e);var i=C.attrHandle[t.toLowerCase()],n=i&&K.call(C.attrHandle,t.toLowerCase())?i(e,t,!O):void 0;return void 0!==n?n:_.attributes||!O?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,o=0;if(D=!_.detectDuplicates,M=!_.sortStable&&e.slice(0),e.sort($),D){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return M=null,e},x=t.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=x(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=x(t);return i},C=t.selectors={cacheLength:50,createPseudo:n,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_t,Ct),e[3]=(e[3]||e[4]||e[5]||"").replace(_t,Ct),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ht.test(i)&&(t=S(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_t,Ct).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(o){var r=t.attr(o,e);return null==r?"!="===i:i?(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r+" ").indexOf(n)>-1:"|="===i?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var c,u,d,h,f,p,m=r!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(u=g[z]||(g[z]={}),c=u[e]||[],f=c[0]===W&&c[1],h=c[0]===W&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[W,f,h];break}}else if(y&&(c=(t[z]||(t[z]={}))[e])&&c[0]===W)h=c[1];else for(;(d=++f&&d&&d[m]||(h=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[z]||(d[z]={}))[e]=[W,h]),d!==t)););return h-=o,h===n||h%n===0&&h/n>=0}}},PSEUDO:function(e,i){var o,r=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[z]?r(i):r.length>1?(o=[e,e,"",i],C.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,o=r(e,i),s=o.length;s--;)n=tt.call(e,o[s]),e[n]=!(t[n]=o[s])}):function(e){return r(e,0,o)}):r}},pseudos:{not:n(function(e){var t=[],i=[],o=k(e.replace(lt,"$1"));return o[z]?n(function(e,t,i,n){for(var r,s=o(e,null,n,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,n,r){return t[0]=e,o(t,null,r,i),!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:n(function(e){return ft.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_t,Ct).toLowerCase(),function(t){var i;do if(i=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[0>i?i+t:i]}),even:c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,S=t.tokenize=function(e,i){var n,o,r,s,a,l,c,u=q[e+" "];if(u)return i?0:u.slice(0);for(a=e,l=[],c=C.preFilter;a;){(!n||(o=ct.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=ut.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(lt," ")}),a=a.slice(n.length));for(s in C.filter)!(o=pt[s].exec(a))||c[s]&&!(o=c[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):q(e,l).slice(0)},k=t.compile=function(e,t){var i,n=[],o=[],r=U[e+" "];if(!r){for(t||(t=S(e)),i=t.length;i--;)r=y(t[i]),r[z]?n.push(r):o.push(r);r=U(e,b(o,n)),r.selector=e}return r},A=t.select=function(e,t,i,n){var o,r,s,a,l,c="function"==typeof e&&e,d=!n&&S(e=c.selector||e);if(i=i||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&_.getById&&9===t.nodeType&&O&&C.relative[r[1].type]){if(t=(C.find.ID(s.matches[0].replace(_t,Ct),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=pt.needsContext.test(e)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((l=C.find[a])&&(n=l(s.matches[0].replace(_t,Ct),bt.test(r[0].type)&&u(t.parentNode)||t))){if(r.splice(o,1),e=n.length&&h(r),!e)return Z.apply(i,n),i;break}}return(c||k(e,d))(n,t,!O,i,bt.test(e)&&u(t.parentNode)||t),i},_.sortStable=z.split("").sort($).join("")===z,_.detectDuplicates=!!D,R(),_.sortDetached=o(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(it,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);ot.find=ct,ot.expr=ct.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=ct.uniqueSort,ot.text=ct.getText,ot.isXMLDoc=ct.isXML,ot.contains=ct.contains;var ut=ot.expr.match.needsContext,dt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;ot.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ot.find.matchesSelector(n,e)?[n]:[]:ot.find.matches(e,ot.grep(t,function(e){return 1===e.nodeType}))},ot.fn.extend({find:function(e){var t,i=[],n=this,o=n.length;if("string"!=typeof e)return this.pushStack(ot(e).filter(function(){for(t=0;o>t;t++)if(ot.contains(n[t],this))return!0}));for(t=0;o>t;t++)ot.find(e,n[t],i);return i=this.pushStack(o>1?ot.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&ut.test(e)?ot(e):e||[],!1).length}});var ft,pt=e.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=ot.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:mt.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||ft).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ot?t[0]:t,ot.merge(this,ot.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:pt,!0)),dt.test(i[1])&&ot.isPlainObject(t))for(i in t)ot.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(n=pt.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return ft.find(e);this.length=1,this[0]=n}return this.context=pt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ot.isFunction(e)?"undefined"!=typeof ft.ready?ft.ready(e):e(ot):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ot.makeArray(e,this))};gt.prototype=ot.fn,ft=ot(pt);var vt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};ot.extend({dir:function(e,t,i){for(var n=[],o=e[t];o&&9!==o.nodeType&&(void 0===i||1!==o.nodeType||!ot(o).is(i));)1===o.nodeType&&n.push(o),o=o[t];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),ot.fn.extend({has:function(e){var t,i=ot(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(ot.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,n=0,o=this.length,r=[],s=ut.test(e)||"string"!=typeof e?ot(e,t||this.context):0;o>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&ot.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?ot.unique(r):r)},index:function(e){return e?"string"==typeof e?ot.inArray(this[0],ot(e)):ot.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ot.unique(ot.merge(this.get(),ot(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ot.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ot.dir(e,"parentNode")},parentsUntil:function(e,t,i){return ot.dir(e,"parentNode",i)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return ot.dir(e,"nextSibling")},prevAll:function(e){return ot.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ot.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return ot.dir(e,"previousSibling",i)},siblings:function(e){return ot.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ot.sibling(e.firstChild)},contents:function(e){return ot.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ot.merge([],e.childNodes)}},function(e,t){ot.fn[e]=function(i,n){var o=ot.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=ot.filter(n,o)),this.length>1&&(yt[e]||(o=ot.unique(o)),vt.test(e)&&(o=o.reverse())),this.pushStack(o)}});var bt=/\S+/g,wt={};ot.Callbacks=function(e){e="string"==typeof e?wt[e]||r(e):ot.extend({},e);var t,i,n,o,s,a,l=[],c=!e.once&&[],u=function(r){for(i=e.memory&&r,n=!0,s=a||0,a=0,o=l.length,t=!0;l&&o>s;s++)if(l[s].apply(r[0],r[1])===!1&&e.stopOnFalse){i=!1;break}t=!1,l&&(c?c.length&&u(c.shift()):i?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function r(t){ot.each(t,function(t,i){var n=ot.type(i);"function"===n?e.unique&&d.has(i)||l.push(i):i&&i.length&&"string"!==n&&r(i)})}(arguments),t?o=l.length:i&&(a=n,u(i))}return this},remove:function(){return l&&ot.each(arguments,function(e,i){for(var n;(n=ot.inArray(i,l,n))>-1;)l.splice(n,1),t&&(o>=n&&o--,s>=n&&s--)}),this},has:function(e){return e?ot.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,i||d.disable(),this},locked:function(){return!c},fireWith:function(e,i){return!l||n&&!c||(i=i||[],i=[e,i.slice?i.slice():i],t?c.push(i):u(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},ot.extend({Deferred:function(e){var t=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ot.Deferred(function(i){ot.each(t,function(t,r){var s=ot.isFunction(e[t])&&e[t];o[r[1]](function(){var e=s&&s.apply(this,arguments);e&&ot.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ot.extend(e,n):n}},o={};return n.pipe=n.then,ot.each(t,function(e,r){var s=r[2],a=r[3];n[r[1]]=s.add,a&&s.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?n:this,arguments),this},o[r[0]+"With"]=s.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,r=K.call(arguments),s=r.length,a=1!==s||e&&ot.isFunction(e.promise)?s:0,l=1===a?e:ot.Deferred(),c=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?K.call(arguments):o,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(t=new Array(s),i=new Array(s),n=new Array(s);s>o;o++)r[o]&&ot.isFunction(r[o].promise)?r[o].promise().done(c(o,n,r)).fail(l.reject).progress(c(o,i,t)):--a;return a||l.resolveWith(n,r),l.promise()}});var _t;ot.fn.ready=function(e){return ot.ready.promise().done(e),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ot.readyWait++:ot.ready(!0)},ready:function(e){if(e===!0?!--ot.readyWait:!ot.isReady){if(!pt.body)return setTimeout(ot.ready);ot.isReady=!0,e!==!0&&--ot.readyWait>0||(_t.resolveWith(pt,[ot]),ot.fn.triggerHandler&&(ot(pt).triggerHandler("ready"),ot(pt).off("ready")))}}}),ot.ready.promise=function(t){if(!_t)if(_t=ot.Deferred(),"complete"===pt.readyState)setTimeout(ot.ready);else if(pt.addEventListener)pt.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1);else{pt.attachEvent("onreadystatechange",a),e.attachEvent("onload",a);var i=!1;try{i=null==e.frameElement&&pt.documentElement}catch(n){}i&&i.doScroll&&!function o(){if(!ot.isReady){try{i.doScroll("left")}catch(e){return setTimeout(o,50)}s(),ot.ready()}}()}return _t.promise(t)};var Ct,xt="undefined";for(Ct in ot(it))break;it.ownLast="0"!==Ct,it.inlineBlockNeedsLayout=!1,ot(function(){var e,t,i,n;i=pt.getElementsByTagName("body")[0],i&&i.style&&(t=pt.createElement("div"),n=pt.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==xt&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",it.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(n))}),function(){var e=pt.createElement("div");if(null==it.deleteExpando){it.deleteExpando=!0;try{delete e.test}catch(t){it.deleteExpando=!1}}e=null}(),ot.acceptData=function(e){var t=ot.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return 1!==i&&9!==i?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,St=/([A-Z])/g;ot.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ot.cache[e[ot.expando]]:e[ot.expando],!!e&&!c(e)},data:function(e,t,i){return u(e,t,i)},removeData:function(e,t){return d(e,t)},_data:function(e,t,i){return u(e,t,i,!0)},_removeData:function(e,t){return d(e,t,!0)}}),ot.fn.extend({data:function(e,t){var i,n,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=ot.data(r),1===r.nodeType&&!ot._data(r,"parsedAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=ot.camelCase(n.slice(5)),l(r,n,o[n])));ot._data(r,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ot.data(this,e)}):arguments.length>1?this.each(function(){ot.data(this,e,t)}):r?l(r,e,ot.data(r,e)):void 0},removeData:function(e){return this.each(function(){ot.removeData(this,e)})}}),ot.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=ot._data(e,t),i&&(!n||ot.isArray(i)?n=ot._data(e,t,ot.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=ot.queue(e,t),n=i.length,o=i.shift(),r=ot._queueHooks(e,t),s=function(){ot.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ot._data(e,i)||ot._data(e,i,{empty:ot.Callbacks("once memory").add(function(){ot._removeData(e,t+"queue"),ot._removeData(e,i)})})}}),ot.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?ot.queue(this[0],e):void 0===t?this:this.each(function(){var i=ot.queue(this,e,t);ot._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&ot.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ot.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=ot.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)i=ot._data(r[s],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(t)}});var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,At=["Top","Right","Bottom","Left"],Et=function(e,t){return e=t||e,"none"===ot.css(e,"display")||!ot.contains(e.ownerDocument,e)},Mt=ot.access=function(e,t,i,n,o,r,s){var a=0,l=e.length,c=null==i;if("object"===ot.type(i)){o=!0;for(a in i)ot.access(e,t,a,i[a],!0,r,s)}else if(void 0!==n&&(o=!0,ot.isFunction(n)||(s=!0),c&&(s?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(ot(e),i)})),t))for(;l>a;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return o?e:c?t.call(e):l?t(e[0],i):r},Dt=/^(?:checkbox|radio)$/i;!function(){var e=pt.createElement("input"),t=pt.createElement("div"),i=pt.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",it.leadingWhitespace=3===t.firstChild.nodeType,it.tbody=!t.getElementsByTagName("tbody").length,it.htmlSerialize=!!t.getElementsByTagName("link").length,it.html5Clone="<:nav></:nav>"!==pt.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,i.appendChild(e),it.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,i.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",it.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,it.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){it.noCloneEvent=!1}),t.cloneNode(!0).click()),null==it.deleteExpando){it.deleteExpando=!0;try{delete t.test}catch(n){it.deleteExpando=!1}}}(),function(){var t,i,n=pt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(it[t+"Bubbles"]=i in e)||(n.setAttribute(i,"t"),it[t+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Rt=/^(?:input|select|textarea)$/i,Nt=/^key/,Pt=/^(?:mouse|pointer|contextmenu)|click/,Ot=/^(?:focusinfocus|focusoutblur)$/,Ht=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(e,t,i,n,o){var r,s,a,l,c,u,d,h,f,p,m,g=ot._data(e);if(g){for(i.handler&&(l=i,i=l.handler,o=l.selector),i.guid||(i.guid=ot.guid++),(s=g.events)||(s=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof ot===xt||e&&ot.event.triggered===e.type?void 0:ot.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(bt)||[""],a=t.length;a--;)r=Ht.exec(t[a])||[],f=m=r[1],p=(r[2]||"").split(".").sort(),f&&(c=ot.event.special[f]||{},f=(o?c.delegateType:c.bindType)||f,c=ot.event.special[f]||{},d=ot.extend({type:f,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&ot.expr.match.needsContext.test(o),namespace:p.join(".")},l),(h=s[f])||(h=s[f]=[],h.delegateCount=0,c.setup&&c.setup.call(e,n,p,u)!==!1||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),ot.event.global[f]=!0);e=null}},remove:function(e,t,i,n,o){var r,s,a,l,c,u,d,h,f,p,m,g=ot.hasData(e)&&ot._data(e);if(g&&(u=g.events)){for(t=(t||"").match(bt)||[""],c=t.length;c--;)if(a=Ht.exec(t[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(d=ot.event.special[f]||{},f=(n?d.delegateType:d.bindType)||f,h=u[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=h.length;r--;)s=h[r],!o&&m!==s.origType||i&&i.guid!==s.guid||a&&!a.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(h.splice(r,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(e,s));l&&!h.length&&(d.teardown&&d.teardown.call(e,p,g.handle)!==!1||ot.removeEvent(e,f,g.handle),delete u[f])}else for(f in u)ot.event.remove(e,f+t[c],i,n,!0);ot.isEmptyObject(u)&&(delete g.handle,ot._removeData(e,"events"))}},trigger:function(t,i,n,o){var r,s,a,l,c,u,d,h=[n||pt],f=tt.call(t,"type")?t.type:t,p=tt.call(t,"namespace")?t.namespace.split("."):[];if(a=u=n=n||pt,3!==n.nodeType&&8!==n.nodeType&&!Ot.test(f+ot.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),s=f.indexOf(":")<0&&"on"+f,t=t[ot.expando]?t:new ot.Event(f,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:ot.makeArray(i,[t]),c=ot.event.special[f]||{},o||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!o&&!c.noBubble&&!ot.isWindow(n)){for(l=c.delegateType||f,Ot.test(l+f)||(a=a.parentNode);a;a=a.parentNode)h.push(a),u=a;
u===(n.ownerDocument||pt)&&h.push(u.defaultView||u.parentWindow||e)}for(d=0;(a=h[d++])&&!t.isPropagationStopped();)t.type=d>1?l:c.bindType||f,r=(ot._data(a,"events")||{})[t.type]&&ot._data(a,"handle"),r&&r.apply(a,i),r=s&&a[s],r&&r.apply&&ot.acceptData(a)&&(t.result=r.apply(a,i),t.result===!1&&t.preventDefault());if(t.type=f,!o&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(h.pop(),i)===!1)&&ot.acceptData(n)&&s&&n[f]&&!ot.isWindow(n)){u=n[s],u&&(n[s]=null),ot.event.triggered=f;try{n[f]()}catch(m){}ot.event.triggered=void 0,u&&(n[s]=u)}return t.result}},dispatch:function(e){e=ot.event.fix(e);var t,i,n,o,r,s=[],a=K.call(arguments),l=(ot._data(this,"events")||{})[e.type]||[],c=ot.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=ot.event.handlers.call(this,e,l),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(n=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(n.namespace))&&(e.handleObj=n,e.data=n.data,i=((ot.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,o,r,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],r=0;a>r;r++)n=t[r],i=n.selector+" ",void 0===o[i]&&(o[i]=n.needsContext?ot(i,this).index(l)>=0:ot.find(i,this,null,[l]).length),o[i]&&o.push(n);o.length&&s.push({elem:l,handlers:o})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},fix:function(e){if(e[ot.expando])return e;var t,i,n,o=e.type,r=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Pt.test(o)?this.mouseHooks:Nt.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new ot.Event(r),t=n.length;t--;)i=n[t],e[i]=r[i];return e.target||(e.target=r.srcElement||pt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,o,r=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||pt,o=n.documentElement,i=n.body,e.pageX=t.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ot.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ot.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var o=ot.extend(new ot.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?ot.event.trigger(o,null,t):ot.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},ot.removeEvent=pt.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===xt&&(e[n]=null),e.detachEvent(n,i))},ot.Event=function(e,t){return this instanceof ot.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?h:f):this.type=e,t&&ot.extend(this,t),this.timeStamp=e&&e.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(e,t)},ot.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ot.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,r=e.handleObj;return(!o||o!==n&&!ot.contains(n,o))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),it.submitBubbles||(ot.event.special.submit={setup:function(){return ot.nodeName(this,"form")?!1:void ot.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=ot.nodeName(t,"input")||ot.nodeName(t,"button")?t.form:void 0;i&&!ot._data(i,"submitBubbles")&&(ot.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),ot._data(i,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ot.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ot.nodeName(this,"form")?!1:void ot.event.remove(this,"._submit")}}),it.changeBubbles||(ot.event.special.change={setup:function(){return Rt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ot.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ot.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ot.event.simulate("change",this,e,!0)})),!1):void ot.event.add(this,"beforeactivate._change",function(e){var t=e.target;Rt.test(t.nodeName)&&!ot._data(t,"changeBubbles")&&(ot.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ot.event.simulate("change",this.parentNode,e,!0)}),ot._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ot.event.remove(this,"._change"),!Rt.test(this.nodeName)}}),it.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){ot.event.simulate(t,e.target,ot.event.fix(e),!0)};ot.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=ot._data(n,t);o||n.addEventListener(e,i,!0),ot._data(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=ot._data(n,t)-1;o?ot._data(n,t,o):(n.removeEventListener(e,i,!0),ot._removeData(n,t))}}}),ot.fn.extend({on:function(e,t,i,n,o){var r,s;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(r in e)this.on(r,t,i,e[r],o);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=f;else if(!n)return this;return 1===o&&(s=n,n=function(e){return ot().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=ot.guid++)),this.each(function(){ot.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,ot(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=f),this.each(function(){ot.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){ot.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?ot.event.trigger(e,t,i,!0):void 0}});var Ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",It=/ jQuery\d+="(?:null|\d+)"/g,Bt=new RegExp("<(?:"+Ft+")[\\s/>]","i"),zt=/^\s+/,Lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Wt=/<([\w:]+)/,Vt=/<tbody/i,jt=/<|&#?\w+;/,qt=/<(?:script|style|link)/i,Ut=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^$|\/(?:java|ecma)script/i,Yt=/^true\/(.*)/,Gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Kt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:it.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Xt=m(pt),Jt=Xt.appendChild(pt.createElement("div"));Kt.optgroup=Kt.option,Kt.tbody=Kt.tfoot=Kt.colgroup=Kt.caption=Kt.thead,Kt.th=Kt.td,ot.extend({clone:function(e,t,i){var n,o,r,s,a,l=ot.contains(e.ownerDocument,e);if(it.html5Clone||ot.isXMLDoc(e)||!Bt.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(Jt.innerHTML=e.outerHTML,Jt.removeChild(r=Jt.firstChild)),!(it.noCloneEvent&&it.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ot.isXMLDoc(e)))for(n=g(r),a=g(e),s=0;null!=(o=a[s]);++s)n[s]&&x(o,n[s]);if(t)if(i)for(a=a||g(e),n=n||g(r),s=0;null!=(o=a[s]);s++)C(o,n[s]);else C(e,r);return n=g(r,"script"),n.length>0&&_(n,!l&&g(e,"script")),n=a=o=null,r},buildFragment:function(e,t,i,n){for(var o,r,s,a,l,c,u,d=e.length,h=m(t),f=[],p=0;d>p;p++)if(r=e[p],r||0===r)if("object"===ot.type(r))ot.merge(f,r.nodeType?[r]:r);else if(jt.test(r)){for(a=a||h.appendChild(t.createElement("div")),l=(Wt.exec(r)||["",""])[1].toLowerCase(),u=Kt[l]||Kt._default,a.innerHTML=u[1]+r.replace(Lt,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!it.leadingWhitespace&&zt.test(r)&&f.push(t.createTextNode(zt.exec(r)[0])),!it.tbody)for(r="table"!==l||Vt.test(r)?"<table>"!==u[1]||Vt.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)ot.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(ot.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else f.push(t.createTextNode(r));for(a&&h.removeChild(a),it.appendChecked||ot.grep(g(f,"input"),v),p=0;r=f[p++];)if((!n||-1===ot.inArray(r,n))&&(s=ot.contains(r.ownerDocument,r),a=g(h.appendChild(r),"script"),s&&_(a),i))for(o=0;r=a[o++];)$t.test(r.type||"")&&i.push(r);return a=null,h},cleanData:function(e,t){for(var i,n,o,r,s=0,a=ot.expando,l=ot.cache,c=it.deleteExpando,u=ot.event.special;null!=(i=e[s]);s++)if((t||ot.acceptData(i))&&(o=i[a],r=o&&l[o])){if(r.events)for(n in r.events)u[n]?ot.event.remove(i,n):ot.removeEvent(i,n,r.handle);l[o]&&(delete l[o],c?delete i[a]:typeof i.removeAttribute!==xt?i.removeAttribute(a):i[a]=null,G.push(o))}}}),ot.fn.extend({text:function(e){return Mt(this,function(e){return void 0===e?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?ot.filter(e,this):this,o=0;null!=(i=n[o]);o++)t||1!==i.nodeType||ot.cleanData(g(i)),i.parentNode&&(t&&ot.contains(i.ownerDocument,i)&&_(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ot.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ot.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ot.clone(this,e,t)})},html:function(e){return Mt(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(It,""):void 0;if(!("string"!=typeof e||qt.test(e)||!it.htmlSerialize&&Bt.test(e)||!it.leadingWhitespace&&zt.test(e)||Kt[(Wt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Lt,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(ot.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ot.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=X.apply([],e);var i,n,o,r,s,a,l=0,c=this.length,u=this,d=c-1,h=e[0],f=ot.isFunction(h);if(f||c>1&&"string"==typeof h&&!it.checkClone&&Ut.test(h))return this.each(function(i){var n=u.eq(i);f&&(e[0]=h.call(this,i,n.html())),n.domManip(e,t)});if(c&&(a=ot.buildFragment(e,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(r=ot.map(g(a,"script"),b),o=r.length;c>l;l++)n=a,l!==d&&(n=ot.clone(n,!0,!0),o&&ot.merge(r,g(n,"script"))),t.call(this[l],n,l);if(o)for(s=r[r.length-1].ownerDocument,ot.map(r,w),l=0;o>l;l++)n=r[l],$t.test(n.type||"")&&!ot._data(n,"globalEval")&&ot.contains(s,n)&&(n.src?ot._evalUrl&&ot._evalUrl(n.src):ot.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Gt,"")));a=i=null}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ot.fn[e]=function(e){for(var i,n=0,o=[],r=ot(e),s=r.length-1;s>=n;n++)i=n===s?this:this.clone(!0),ot(r[n])[t](i),J.apply(o,i.get());return this.pushStack(o)}});var Qt,Zt={};!function(){var e;it.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,i,n;return i=pt.getElementsByTagName("body")[0],i&&i.style?(t=pt.createElement("div"),n=pt.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==xt&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(pt.createElement("div")).style.width="5px",e=3!==t.offsetWidth),i.removeChild(n),e):void 0}}();var ei,ti,ii=/^margin/,ni=new RegExp("^("+kt+")(?!px)[a-z%]+$","i"),oi=/^(top|right|bottom|left)$/;e.getComputedStyle?(ei=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},ti=function(e,t,i){var n,o,r,s,a=e.style;return i=i||ei(e),s=i?i.getPropertyValue(t)||i[t]:void 0,i&&(""!==s||ot.contains(e.ownerDocument,e)||(s=ot.style(e,t)),ni.test(s)&&ii.test(t)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r)),void 0===s?s:s+""}):pt.documentElement.currentStyle&&(ei=function(e){return e.currentStyle},ti=function(e,t,i){var n,o,r,s,a=e.style;return i=i||ei(e),s=i?i[t]:void 0,null==s&&a&&a[t]&&(s=a[t]),ni.test(s)&&!oi.test(t)&&(n=a.left,o=e.runtimeStyle,r=o&&o.left,r&&(o.left=e.currentStyle.left),a.left="fontSize"===t?"1em":s,s=a.pixelLeft+"px",a.left=n,r&&(o.left=r)),void 0===s?s:s+""||"auto"}),function(){function t(){var t,i,n,o;i=pt.getElementsByTagName("body")[0],i&&i.style&&(t=pt.createElement("div"),n=pt.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=s=!1,l=!0,e.getComputedStyle&&(r="1%"!==(e.getComputedStyle(t,null)||{}).top,s="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,o=t.appendChild(pt.createElement("div")),o.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=t.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===o[0].offsetHeight,a&&(o[0].style.display="",o[1].style.display="none",a=0===o[0].offsetHeight),i.removeChild(n))}var i,n,o,r,s,a,l;i=pt.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=i.getElementsByTagName("a")[0],n=o&&o.style,n&&(n.cssText="float:left;opacity:.5",it.opacity="0.5"===n.opacity,it.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===i.style.backgroundClip,it.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,ot.extend(it,{reliableHiddenOffsets:function(){return null==a&&t(),a},boxSizingReliable:function(){return null==s&&t(),s},pixelPosition:function(){return null==r&&t(),r},reliableMarginRight:function(){return null==l&&t(),l}}))}(),ot.swap=function(e,t,i,n){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];o=i.apply(e,n||[]);for(r in t)e.style[r]=s[r];return o};var ri=/alpha\([^)]*\)/i,si=/opacity\s*=\s*([^)]*)/,ai=/^(none|table(?!-c[ea]).+)/,li=new RegExp("^("+kt+")(.*)$","i"),ci=new RegExp("^([+-])=("+kt+")","i"),ui={position:"absolute",visibility:"hidden",display:"block"},di={letterSpacing:"0",fontWeight:"400"},hi=["Webkit","O","Moz","ms"];ot.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ti(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":it.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=ot.camelCase(t),l=e.style;if(t=ot.cssProps[a]||(ot.cssProps[a]=A(l,a)),s=ot.cssHooks[t]||ot.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(o=s.get(e,!1,n))?o:l[t];if(r=typeof i,"string"===r&&(o=ci.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(ot.css(e,t)),r="number"),null!=i&&i===i&&("number"!==r||ot.cssNumber[a]||(i+="px"),it.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),!(s&&"set"in s&&void 0===(i=s.set(e,i,n)))))try{l[t]=i}catch(c){}}},css:function(e,t,i,n){var o,r,s,a=ot.camelCase(t);return t=ot.cssProps[a]||(ot.cssProps[a]=A(e.style,a)),s=ot.cssHooks[t]||ot.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=ti(e,t,n)),"normal"===r&&t in di&&(r=di[t]),""===i||i?(o=parseFloat(r),i===!0||ot.isNumeric(o)?o||0:r):r}}),ot.each(["height","width"],function(e,t){ot.cssHooks[t]={get:function(e,i,n){return i?ai.test(ot.css(e,"display"))&&0===e.offsetWidth?ot.swap(e,ui,function(){return R(e,t,n)}):R(e,t,n):void 0},set:function(e,i,n){var o=n&&ei(e);return M(e,i,n?D(e,t,n,it.boxSizing&&"border-box"===ot.css(e,"boxSizing",!1,o),o):0)}}}),it.opacity||(ot.cssHooks.opacity={get:function(e,t){return si.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,o=ot.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===ot.trim(r.replace(ri,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=ri.test(r)?r.replace(ri,o):r+" "+o)}}),ot.cssHooks.marginRight=k(it.reliableMarginRight,function(e,t){return t?ot.swap(e,{display:"inline-block"},ti,[e,"marginRight"]):void 0}),ot.each({margin:"",padding:"",border:"Width"},function(e,t){ot.cssHooks[e+t]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];4>n;n++)o[e+At[n]+t]=r[n]||r[n-2]||r[0];return o}},ii.test(e)||(ot.cssHooks[e+t].set=M)}),ot.fn.extend({css:function(e,t){return Mt(this,function(e,t,i){var n,o,r={},s=0;if(ot.isArray(t)){for(n=ei(e),o=t.length;o>s;s++)r[t[s]]=ot.css(e,t[s],!1,n);return r}return void 0!==i?ot.style(e,t,i):ot.css(e,t)},e,t,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Et(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=N,N.prototype={constructor:N,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(ot.cssNumber[i]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,i=N.propHooks[this.prop];return this.pos=t=this.options.duration?ot.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ot.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ot.fx.step[e.prop]?ot.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ot.cssProps[e.prop]]||ot.cssHooks[e.prop])?ot.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ot.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ot.fx=N.prototype.init,ot.fx.step={};var fi,pi,mi=/^(?:toggle|show|hide)$/,gi=new RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),vi=/queueHooks$/,yi=[F],bi={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),o=gi.exec(t),r=o&&o[3]||(ot.cssNumber[e]?"":"px"),s=(ot.cssNumber[e]||"px"!==r&&+n)&&gi.exec(ot.css(i.elem,e)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+n||1;do a=a||".5",s/=a,ot.style(i.elem,e,s+r);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(s=i.start=+s||+n||0,i.unit=r,i.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),i}]};ot.Animation=ot.extend(B,{tweener:function(e,t){ot.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,o=e.length;o>n;n++)i=e[n],bi[i]=bi[i]||[],bi[i].unshift(t)},prefilter:function(e,t){t?yi.unshift(e):yi.push(e)}}),ot.speed=function(e,t,i){var n=e&&"object"==typeof e?ot.extend({},e):{complete:i||!i&&t||ot.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ot.isFunction(t)&&t};return n.duration=ot.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ot.fx.speeds?ot.fx.speeds[n.duration]:ot.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ot.isFunction(n.old)&&n.old.call(this),n.queue&&ot.dequeue(this,n.queue)},n},ot.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Et).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=ot.isEmptyObject(e),r=ot.speed(t,i,n),s=function(){var t=B(this,ot.extend({},e),r);(o||ot._data(this,"finish"))&&t.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=ot.timers,s=ot._data(this);if(o)s[o]&&s[o].stop&&n(s[o]);else for(o in s)s[o]&&s[o].stop&&vi.test(o)&&n(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(i),t=!1,r.splice(o,1));(t||!i)&&ot.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=ot._data(this),n=i[e+"queue"],o=i[e+"queueHooks"],r=ot.timers,s=n?n.length:0;for(i.finish=!0,ot.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;s>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ot.each(["toggle","show","hide"],function(e,t){var i=ot.fn[t];ot.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(O(t,!0),e,n,o)}}),ot.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ot.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ot.timers=[],ot.fx.tick=function(){var e,t=ot.timers,i=0;for(fi=ot.now();i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||ot.fx.stop(),fi=void 0},ot.fx.timer=function(e){ot.timers.push(e),e()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){pi||(pi=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(pi),pi=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(e,t){return e=ot.fx?ot.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e,t,i,n,o;t=pt.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=t.getElementsByTagName("a")[0],i=pt.createElement("select"),o=i.appendChild(pt.createElement("option")),e=t.getElementsByTagName("input")[0],n.style.cssText="top:1px",it.getSetAttribute="t"!==t.className,it.style=/top/.test(n.getAttribute("style")),it.hrefNormalized="/a"===n.getAttribute("href"),it.checkOn=!!e.value,it.optSelected=o.selected,it.enctype=!!pt.createElement("form").enctype,i.disabled=!0,it.optDisabled=!o.disabled,e=pt.createElement("input"),e.setAttribute("value",""),it.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),it.radioValue="t"===e.value}();var wi=/\r/g;ot.fn.extend({val:function(e){var t,i,n,o=this[0];{if(arguments.length)return n=ot.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=n?e.call(this,i,ot(this).val()):e,null==o?o="":"number"==typeof o?o+="":ot.isArray(o)&&(o=ot.map(o,function(e){return null==e?"":e+""})),t=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=ot.valHooks[o.type]||ot.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(wi,""):null==i?"":i)}}}),ot.extend({valHooks:{option:{get:function(e){var t=ot.find.attr(e,"value");return null!=t?t:ot.trim(ot.text(e))}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,s=r?null:[],a=r?o+1:n.length,l=0>o?a:r?o:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==o||(it.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&ot.nodeName(i.parentNode,"optgroup"))){if(t=ot(i).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var i,n,o=e.options,r=ot.makeArray(t),s=o.length;s--;)if(n=o[s],ot.inArray(ot.valHooks.option.get(n),r)>=0)try{n.selected=i=!0}catch(a){n.scrollHeight}else n.selected=!1;return i||(e.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(e,t){return ot.isArray(t)?e.checked=ot.inArray(ot(e).val(),t)>=0:void 0}},it.checkOn||(ot.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var _i,Ci,xi=ot.expr.attrHandle,Ti=/^(?:checked|selected)$/i,Si=it.getSetAttribute,ki=it.input;ot.fn.extend({attr:function(e,t){return Mt(this,ot.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ot.removeAttr(this,e)})}}),ot.extend({attr:function(e,t,i){var n,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===xt?ot.prop(e,t,i):(1===r&&ot.isXMLDoc(e)||(t=t.toLowerCase(),n=ot.attrHooks[t]||(ot.expr.match.bool.test(t)?Ci:_i)),void 0===i?n&&"get"in n&&null!==(o=n.get(e,t))?o:(o=ot.find.attr(e,t),null==o?void 0:o):null!==i?n&&"set"in n&&void 0!==(o=n.set(e,i,t))?o:(e.setAttribute(t,i+""),i):void ot.removeAttr(e,t))},removeAttr:function(e,t){var i,n,o=0,r=t&&t.match(bt);if(r&&1===e.nodeType)for(;i=r[o++];)n=ot.propFix[i]||i,ot.expr.match.bool.test(i)?ki&&Si||!Ti.test(i)?e[n]=!1:e[ot.camelCase("default-"+i)]=e[n]=!1:ot.attr(e,i,""),e.removeAttribute(Si?i:n)},attrHooks:{type:{set:function(e,t){if(!it.radioValue&&"radio"===t&&ot.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),Ci={set:function(e,t,i){return t===!1?ot.removeAttr(e,i):ki&&Si||!Ti.test(i)?e.setAttribute(!Si&&ot.propFix[i]||i,i):e[ot.camelCase("default-"+i)]=e[i]=!0,i}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(e,t){var i=xi[t]||ot.find.attr;xi[t]=ki&&Si||!Ti.test(t)?function(e,t,n){var o,r;return n||(r=xi[t],xi[t]=o,o=null!=i(e,t,n)?t.toLowerCase():null,xi[t]=r),o}:function(e,t,i){return i?void 0:e[ot.camelCase("default-"+t)]?t.toLowerCase():null}}),ki&&Si||(ot.attrHooks.value={set:function(e,t,i){return ot.nodeName(e,"input")?void(e.defaultValue=t):_i&&_i.set(e,t,i)}}),Si||(_i={set:function(e,t,i){var n=e.getAttributeNode(i);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},xi.id=xi.name=xi.coords=function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},ot.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:void 0},set:_i.set},ot.attrHooks.contenteditable={set:function(e,t,i){_i.set(e,""===t?!1:t,i)}},ot.each(["width","height"],function(e,t){ot.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),it.style||(ot.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Ai=/^(?:input|select|textarea|button|object)$/i,Ei=/^(?:a|area)$/i;ot.fn.extend({prop:function(e,t){return Mt(this,ot.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ot.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),ot.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,o,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return r=1!==s||!ot.isXMLDoc(e),r&&(t=ot.propFix[t]||t,o=ot.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=ot.find.attr(e,"tabindex");return t?parseInt(t,10):Ai.test(e.nodeName)||Ei.test(e.nodeName)&&e.href?0:-1}}}}),it.hrefNormalized||ot.each(["href","src"],function(e,t){ot.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),it.optSelected||(ot.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this}),it.enctype||(ot.propFix.enctype="encoding");var Mi=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(e){var t,i,n,o,r,s,a=0,l=this.length,c="string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(bt)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Mi," "):" ")){for(r=0;o=t[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s=ot.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(e){var t,i,n,o,r,s,a=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(bt)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Mi," "):"")){for(r=0;o=t[r++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");s=e?ot.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(ot.isFunction(e)?function(i){ot(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,o=ot(this),r=e.match(bt)||[];t=r[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(i===xt||"boolean"===i)&&(this.className&&ot._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ot._data(this,"__className__")||"")
})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Mi," ").indexOf(t)>=0)return!0;return!1}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ot.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ot.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Di=ot.now(),Ri=/\?/,Ni=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ot.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var i,n=null,o=ot.trim(t+"");return o&&!ot.trim(o.replace(Ni,function(e,t,o,r){return i&&t&&(n=0),0===n?e:(i=o||t,n+=!r-!o,"")}))?Function("return "+o)():ot.error("Invalid JSON: "+t)},ot.parseXML=function(t){var i,n;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(n=new DOMParser,i=n.parseFromString(t,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t))}catch(o){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+t),i};var Pi,Oi,Hi=/#.*$/,Fi=/([?&])_=[^&]*/,Ii=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zi=/^(?:GET|HEAD)$/,Li=/^\/\//,Wi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Vi={},ji={},qi="*/".concat("*");try{Oi=location.href}catch(Ui){Oi=pt.createElement("a"),Oi.href="",Oi=Oi.href}Pi=Wi.exec(Oi.toLowerCase())||[],ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Oi,type:"GET",isLocal:Bi.test(Pi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,ot.ajaxSettings),t):W(ot.ajaxSettings,e)},ajaxPrefilter:z(Vi),ajaxTransport:z(ji),ajax:function(e,t){function i(e,t,i,n){var o,u,v,y,w,C=t;2!==b&&(b=2,a&&clearTimeout(a),c=void 0,s=n||"",_.readyState=e>0?4:0,o=e>=200&&300>e||304===e,i&&(y=V(d,_,i)),y=j(d,y,_,o),o?(d.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(ot.lastModified[r]=w),w=_.getResponseHeader("etag"),w&&(ot.etag[r]=w)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=y.state,u=y.data,v=y.error,o=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),_.status=e,_.statusText=(t||C)+"",o?p.resolveWith(h,[u,C,_]):p.rejectWith(h,[_,C,v]),_.statusCode(g),g=void 0,l&&f.trigger(o?"ajaxSuccess":"ajaxError",[_,d,o?u:v]),m.fireWith(h,[_,C]),l&&(f.trigger("ajaxComplete",[_,d]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,r,s,a,l,c,u,d=ot.ajaxSetup({},t),h=d.context||d,f=d.context&&(h.nodeType||h.jquery)?ot(h):ot.event,p=ot.Deferred(),m=ot.Callbacks("once memory"),g=d.statusCode||{},v={},y={},b=0,w="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!u)for(u={};t=Ii.exec(s);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return b||(e=y[i]=y[i]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||w;return c&&c.abort(t),i(0,t),this}};if(p.promise(_).complete=m.add,_.success=_.done,_.error=_.fail,d.url=((e||d.url||Oi)+"").replace(Hi,"").replace(Li,Pi[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=ot.trim(d.dataType||"*").toLowerCase().match(bt)||[""],null==d.crossDomain&&(n=Wi.exec(d.url.toLowerCase()),d.crossDomain=!(!n||n[1]===Pi[1]&&n[2]===Pi[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Pi[3]||("http:"===Pi[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ot.param(d.data,d.traditional)),L(Vi,d,t,_),2===b)return _;l=d.global,l&&0===ot.active++&&ot.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!zi.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(Ri.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Fi.test(r)?r.replace(Fi,"$1_="+Di++):r+(Ri.test(r)?"&":"?")+"_="+Di++)),d.ifModified&&(ot.lastModified[r]&&_.setRequestHeader("If-Modified-Since",ot.lastModified[r]),ot.etag[r]&&_.setRequestHeader("If-None-Match",ot.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&_.setRequestHeader("Content-Type",d.contentType),_.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+qi+"; q=0.01":""):d.accepts["*"]);for(o in d.headers)_.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(d.beforeSend.call(h,_,d)===!1||2===b))return _.abort();w="abort";for(o in{success:1,error:1,complete:1})_[o](d[o]);if(c=L(ji,d,t,_)){_.readyState=1,l&&f.trigger("ajaxSend",[_,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){_.abort("timeout")},d.timeout));try{b=1,c.send(v,i)}catch(C){if(!(2>b))throw C;i(-1,C)}}else i(-1,"No Transport");return _},getJSON:function(e,t,i){return ot.get(e,t,i,"json")},getScript:function(e,t){return ot.get(e,void 0,t,"script")}}),ot.each(["get","post"],function(e,t){ot[t]=function(e,i,n,o){return ot.isFunction(i)&&(o=o||n,n=i,i=void 0),ot.ajax({url:e,type:t,dataType:o,data:i,success:n})}}),ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ot.fn[t]=function(e){return this.on(t,e)}}),ot._evalUrl=function(e){return ot.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(e){if(ot.isFunction(e))return this.each(function(t){ot(this).wrapAll(e.call(this,t))});if(this[0]){var t=ot(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(ot.isFunction(e)?function(t){ot(this).wrapInner(e.call(this,t))}:function(){var t=ot(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ot.isFunction(e);return this.each(function(i){ot(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!it.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ot.css(e,"display"))},ot.expr.filters.visible=function(e){return!ot.expr.filters.hidden(e)};var $i=/%20/g,Yi=/\[\]$/,Gi=/\r?\n/g,Ki=/^(?:submit|button|image|reset|file)$/i,Xi=/^(?:input|select|textarea|keygen)/i;ot.param=function(e,t){var i,n=[],o=function(e,t){t=ot.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(e)||e.jquery&&!ot.isPlainObject(e))ot.each(e,function(){o(this.name,this.value)});else for(i in e)q(i,e[i],t,o);return n.join("&").replace($i,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ot.prop(this,"elements");return e?ot.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ot(this).is(":disabled")&&Xi.test(this.nodeName)&&!Ki.test(e)&&(this.checked||!Dt.test(e))}).map(function(e,t){var i=ot(this).val();return null==i?null:ot.isArray(i)?ot.map(i,function(e){return{name:t.name,value:e.replace(Gi,"\r\n")}}):{name:t.name,value:i.replace(Gi,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||$()}:U;var Ji=0,Qi={},Zi=ot.ajaxSettings.xhr();e.ActiveXObject&&ot(e).on("unload",function(){for(var e in Qi)Qi[e](void 0,!0)}),it.cors=!!Zi&&"withCredentials"in Zi,Zi=it.ajax=!!Zi,Zi&&ot.ajaxTransport(function(e){if(!e.crossDomain||it.cors){var t;return{send:function(i,n){var o,r=e.xhr(),s=++Ji;if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)r[o]=e.xhrFields[o];e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)void 0!==i[o]&&r.setRequestHeader(o,i[o]+"");r.send(e.hasContent&&e.data||null),t=function(i,o){var a,l,c;if(t&&(o||4===r.readyState))if(delete Qi[s],t=void 0,r.onreadystatechange=ot.noop,o)4!==r.readyState&&r.abort();else{c={},a=r.status,"string"==typeof r.responseText&&(c.text=r.responseText);try{l=r.statusText}catch(u){l=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&n(a,l,c,r.getAllResponseHeaders())},e.async?4===r.readyState?setTimeout(t):r.onreadystatechange=Qi[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ot.globalEval(e),e}}}),ot.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ot.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=pt.head||ot("head")[0]||pt.documentElement;return{send:function(n,o){t=pt.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||o(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||ot.expando+"_"+Di++;return this[e]=!0,e}}),ot.ajaxPrefilter("json jsonp",function(t,i,n){var o,r,s,a=t.jsonp!==!1&&(tn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=ot.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(tn,"$1"+o):t.jsonp!==!1&&(t.url+=(Ri.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||ot.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},n.always(function(){e[o]=r,t[o]&&(t.jsonpCallback=i.jsonpCallback,en.push(o)),s&&ot.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),ot.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||pt;var n=dt.exec(e),o=!i&&[];return n?[t.createElement(n[1])]:(n=ot.buildFragment([e],t,o),o&&o.length&&ot(o).remove(),ot.merge([],n.childNodes))};var nn=ot.fn.load;ot.fn.load=function(e,t,i){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var n,o,r,s=this,a=e.indexOf(" ");return a>=0&&(n=ot.trim(e.slice(a,e.length)),e=e.slice(0,a)),ot.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&ot.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(n?ot("<div>").append(ot.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){s.each(i,o||[e.responseText,t,e])}),this},ot.expr.filters.animated=function(e){return ot.grep(ot.timers,function(t){return e===t.elem}).length};var on=e.document.documentElement;ot.offset={setOffset:function(e,t,i){var n,o,r,s,a,l,c,u=ot.css(e,"position"),d=ot(e),h={};"static"===u&&(e.style.position="relative"),a=d.offset(),r=ot.css(e,"top"),l=ot.css(e,"left"),c=("absolute"===u||"fixed"===u)&&ot.inArray("auto",[r,l])>-1,c?(n=d.position(),s=n.top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),ot.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+o),"using"in t?t.using.call(e,h):d.css(h)}},ot.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ot.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return t=r.documentElement,ot.contains(t,o)?(typeof o.getBoundingClientRect!==xt&&(n=o.getBoundingClientRect()),i=Y(r),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n},position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===ot.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ot.nodeName(e[0],"html")||(i=e.offset()),i.top+=ot.css(e[0],"borderTopWidth",!0),i.left+=ot.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ot.css(n,"marginTop",!0),left:t.left-i.left-ot.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||on;e&&!ot.nodeName(e,"html")&&"static"===ot.css(e,"position");)e=e.offsetParent;return e||on})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);ot.fn[e]=function(n){return Mt(this,function(e,n,o){var r=Y(e);return void 0===o?r?t in r?r[t]:r.document.documentElement[n]:e[n]:void(r?r.scrollTo(i?ot(r).scrollLeft():o,i?o:ot(r).scrollTop()):e[n]=o)},e,n,arguments.length,null)}}),ot.each(["top","left"],function(e,t){ot.cssHooks[t]=k(it.pixelPosition,function(e,i){return i?(i=ti(e,t),ni.test(i)?ot(e).position()[t]+"px":i):void 0})}),ot.each({Height:"height",Width:"width"},function(e,t){ot.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){ot.fn[n]=function(n,o){var r=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||o===!0?"margin":"border");return Mt(this,function(t,i,n){var o;return ot.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===n?ot.css(t,i,s):ot.style(t,i,n,s)},t,r?n:void 0,r,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var rn=e.jQuery,sn=e.$;return ot.noConflict=function(t){return e.$===ot&&(e.$=sn),t&&e.jQuery===ot&&(e.jQuery=rn),ot},typeof t===xt&&(e.jQuery=e.$=ot),ot}),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var i,n=e(document);e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var i=e('meta[name="csrf-token"]').attr("content");i&&t.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),i=e("meta[name=csrf-param]").attr("content");e('form input[name="'+i+'"]').val(t)},fire:function(t,i,n){var o=e.Event(i);return t.trigger(o,n),o.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},handleRemote:function(n){var o,r,s,a,l,c;if(i.fire(n,"ajax:before")){if(a=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){o=n.attr("method"),r=n.attr("action"),s=n.serializeArray();var u=n.data("ujs:submit-button");u&&(s.push(u),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(o=n.data("method"),r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(o=n.data("method")||"get",r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(o=n.data("method"),r=i.href(n),s=n.data("params")||null);return c={type:o||"GET",data:s,dataType:l,beforeSend:function(e,o){return o.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),i.fire(n,"ajax:beforeSend",[e,o])?void n.trigger("ajax:send",e):!1},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},crossDomain:i.isCrossDomain(r)},a&&(c.xhrFields={withCredentials:a}),r&&(c.url=r),i.ajax(c)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var i=document.createElement("a");try{return i.href=e,i.href=i.href,!i.protocol||!i.host||t.protocol+"//"+t.host!=i.protocol+"//"+i.host}catch(n){return!0}},handleMethod:function(n){var o=i.href(n),r=n.data("method"),s=n.attr("target"),a=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+o+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l===t||a===t||i.isCrossDomain(o)||(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},formElements:function(t,i){return t.is("form")?e(t[0].elements).filter(i):t.find(i)},disableFormElements:function(t){i.formElements(t,i.disableSelector).each(function(){i.disableFormElement(e(this))})},disableFormElement:function(e){var i,n;i=e.is("button")?"html":"val",n=e.data("disable-with"),e.data("ujs:enable-with",e[i]()),n!==t&&e[i](n),e.prop("disabled",!0)},enableFormElements:function(t){i.formElements(t,i.enableSelector).each(function(){i.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,n=e.data("confirm"),o=!1;return n?(i.fire(e,"confirm")&&(o=i.confirm(n),t=i.fire(e,"confirm:complete",[o])),o&&t):!0},blankInputs:function(t,i,n){var o,r,s=e(),a=i||"input,textarea",l=t.find(a);return l.each(function(){if(o=e(this),r=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!r==!n){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;s=s.add(o)}}),s.length?s:!1},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var n=e.data("disable-with");e.data("ujs:enable-with",e.html()),n!==t&&e.html(n),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(e(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var o=e(this),r=o.data("method"),s=o.data("params"),a=n.metaKey||n.ctrlKey;if(!i.allowAction(o))return i.stopEverything(n);if(!a&&o.is(i.linkDisableSelector)&&i.disableElement(o),o.data("remote")!==t){if(a&&(!r||"GET"===r)&&!s)return!0;var l=i.handleRemote(o);return l===!1?i.enableElement(o):l.error(function(){i.enableElement(o)}),!1}return o.data("method")?(i.handleMethod(o),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var o=i.handleRemote(n);return o===!1?i.enableFormElement(n):o.error(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var o,r,s=e(this),a=s.data("remote")!==t;if(!i.allowAction(s))return i.stopEverything(n);if(s.attr("novalidate")==t&&(o=i.blankInputs(s,i.requiredInputSelector),o&&i.fire(s,"ajax:aborted:required",[o])))return i.stopEverything(n);if(a){if(r=i.nonBlankInputs(s,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(s)},13);var l=i.fire(s,"ajax:aborted:file",[r]);return l||setTimeout(function(){i.enableFormElements(s)},13),l}return i.handleRemote(s),!1}setTimeout(function(){i.disableFormElements(s)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var o=n.attr("name"),r=o?{name:o,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&i.disableFormElements(e(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&i.enableFormElements(e(this))}),e(function(){i.refreshCSRFTokens()}))}(jQuery),function(){function e(e,t,i){for(var n=(i||0)-1,o=e?e.length:0;++n<o;)if(e[n]===t)return n;return-1}function t(e,t){for(var i=e.criteria,n=t.criteria,o=-1,r=i.length;++o<r;){var s=i[o],a=n[o];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return e.index-t.index}function i(e){return"\\"+x[e]}function n(e,t,i){t||(t=0),"undefined"==typeof i&&(i=e?e.length:0);for(var n=-1,o=i-t||0,r=Array(0>o?0:o);++n<o;)r[n]=e[t+n];return r}function o(x){function S(e){return e instanceof S?e:new k(e)}function k(e,t){this.__chain__=!!t,this.__wrapped__=e}function A(e){function t(){if(o){var e=n(o);ji.apply(e,arguments)}if(this instanceof t){var s=E(i.prototype),a=i.apply(s,e||arguments);return nt(a)?a:s}return i.apply(r,e||arguments)}var i=e[0],o=e[2],r=e[4];return t}function E(e){return nt(e)?$i(e):{}}function D(e,t,i){if("function"!=typeof e)return hi;if("undefined"==typeof t||!("prototype"in e))return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)};case 4:return function(i,n,o,r){return e.call(t,i,n,o,r)}}return Zt(e,t)}function R(e){function t(){var e=c?a:this;if(r){var p=n(r);ji.apply(p,arguments)}if((s||d)&&(p||(p=n(arguments)),s&&ji.apply(p,s),d&&p.length<l))return o|=16,R([i,h?o:-4&o,p,null,a,l]);if(p||(p=arguments),u&&(i=e[f]),this instanceof t){e=E(i.prototype);var m=i.apply(e,p);return nt(m)?m:e}return i.apply(e,p)}var i=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],c=1&o,u=2&o,d=4&o,h=8&o,f=i;return t}function N(e,t){for(var i=-1,n=L(),o=e?e.length:0,r=[];++i<o;){var s=e[i];n(t,s)<0&&r.push(s)}return r}function P(e,t,i,n){for(var o=(n||0)-1,r=e?e.length:0,s=[];++o<r;){var a=e[o];if(a&&"object"==typeof a&&"number"==typeof a.length&&(tn(a)||j(a))){t||(a=P(a,t,i));var l=-1,c=a.length,u=s.length;for(s.length+=c;++l<c;)s[u++]=a[l]}else i||s.push(a)}return s}function O(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;var o=typeof e,r=typeof t;if(!(e!==e||e&&C[o]||t&&C[r]))return!1;if(null==e||null==t)return e===t;var s=Ii.call(e),l=Ii.call(t);if(s!=l)return!1;switch(s){case m:case g:return+e==+t;case y:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case w:case _:return e==Ni(t)}var c=s==p;if(!c){var u=e instanceof S,d=t instanceof S;if(u||d)return O(u?e.__wrapped__:e,d?t.__wrapped__:t,i,n);if(s!=b)return!1;var h=e.constructor,f=t.constructor;if(h!=f&&!(it(h)&&h instanceof h&&it(f)&&f instanceof f)&&"constructor"in e&&"constructor"in t)return!1}i||(i=[]),n||(n=[]);for(var v=i.length;v--;)if(i[v]==e)return n[v]==t;var x=!0,T=0;if(i.push(e),n.push(t),c){if(T=t.length,x=T==e.length)for(;T--&&(x=O(e[T],t[T],i,n)););}else cn(t,function(t,o,r){return Vi.call(r,o)?(T++,!(x=Vi.call(e,o)&&O(e[o],t,i,n))&&a):void 0}),x&&cn(e,function(e,t,i){return Vi.call(i,t)?!(x=--T>-1)&&a:void 0});return i.pop(),n.pop(),x}function H(e,t){return e+Wi(Zi()*(t-e+1))}function F(e,t,i){for(var n=-1,o=L(),r=e?e.length:0,s=[],a=i?[]:s;++n<r;){var l=e[n],c=i?i(l,n,e):l;(t?!n||a[a.length-1]!==c:o(a,c)<0)&&(i&&a.push(c),s.push(l))}return s}function I(e){return function(t,i,n){var o={};i=ui(i,n,3);var r=-1,s=t?t.length:0;if("number"==typeof s)for(;++r<s;){var a=t[r];e(o,a,i(a,r,t),t)}else un(t,function(t,n,r){e(o,t,i(t,n,r),r)});return o}}function B(e,t,i,n,o,r){var s=2&t,a=16&t,l=32&t;if(!s&&!it(e))throw new Pi;a&&!i.length&&(t&=-17,a=i=!1),l&&!n.length&&(t&=-33,l=n=!1);var c=1==t||17===t?A:R;return c([e,t,i,n,o,r])}function z(e){return rn[e]}function L(){var t=(t=S.indexOf)===zt?e:t;return t}function W(e){return"function"==typeof e&&Bi.test(e)}function V(e){return sn[e]}function j(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ii.call(e)==f||!1}function q(e){if(!e)return e;for(var t=1,i=arguments.length;i>t;t++){var n=arguments[t];if(n)for(var o in n)e[o]=n[o]}return e}function U(e){return nt(e)?tn(e)?n(e):q({},e):e}function $(e){if(!e)return e;for(var t=1,i=arguments.length;i>t;t++){var n=arguments[t];if(n)for(var o in n)"undefined"==typeof e[o]&&(e[o]=n[o])}return e}function Y(e){var t=[];return cn(e,function(e,i){it(e)&&t.push(i)}),t.sort()}function G(e,t){return e?Vi.call(e,t):!1}function K(e){for(var t=-1,i=on(e),n=i.length,o={};++t<n;){var r=i[t];o[e[r]]=r}return o}function X(e){return e===!0||e===!1||e&&"object"==typeof e&&Ii.call(e)==m||!1}function J(e){return e&&"object"==typeof e&&Ii.call(e)==g||!1}function Q(e){return e&&1===e.nodeType||!1}function Z(e){if(!e)return!0;if(tn(e)||lt(e))return!e.length;for(var t in e)if(Vi.call(e,t))return!1;return!0}function et(e,t){return O(e,t)}function tt(e){return Gi(e)&&!Ki(parseFloat(e))}function it(e){return"function"==typeof e}function nt(e){return!(!e||!C[typeof e])}function ot(e){return st(e)&&e!=+e}function rt(e){return null===e}function st(e){return"number"==typeof e||e&&"object"==typeof e&&Ii.call(e)==y||!1}function at(e){return e&&C[typeof e]&&Ii.call(e)==w||!1}function lt(e){return"string"==typeof e||e&&"object"==typeof e&&Ii.call(e)==_||!1}function ct(e){return"undefined"==typeof e}function ut(e){var t=[];cn(e,function(e,i){t.push(i)}),t=N(t,P(arguments,!0,!1,1));for(var i=-1,n=t.length,o={};++i<n;){var r=t[i];o[r]=e[r]}return o}function dt(e){for(var t=-1,i=on(e),n=i.length,o=ki(n);++t<n;){var r=i[t];o[t]=[r,e[r]]}return o}function ht(e){for(var t=-1,i=P(arguments,!0,!1,1),n=i.length,o={};++t<n;){var r=i[t];r in e&&(o[r]=e[r])}return o}function ft(e){for(var t=-1,i=on(e),n=i.length,o=ki(n);++t<n;)o[t]=e[i[t]];return o}function pt(e,t){var i=L(),n=e?e.length:0,o=!1;return n&&"number"==typeof n?o=i(e,t)>-1:un(e,function(e){return(o=e===t)&&a}),o}function mt(e,t,i){var n=!0;t=ui(t,i,3);var o=-1,r=e?e.length:0;if("number"==typeof r)for(;++o<r&&(n=!!t(e[o],o,e)););else un(e,function(e,i,o){return!(n=!!t(e,i,o))&&a});return n}function gt(e,t,i){var n=[];t=ui(t,i,3);var o=-1,r=e?e.length:0;if("number"==typeof r)for(;++o<r;){var s=e[o];t(s,o,e)&&n.push(s)}else un(e,function(e,i,o){t(e,i,o)&&n.push(e)});return n}function vt(e,t,i){t=ui(t,i,3);var n=-1,o=e?e.length:0;if("number"!=typeof o){var r;return un(e,function(e,i,n){return t(e,i,n)?(r=e,a):void 0}),r}for(;++n<o;){var s=e[n];if(t(s,n,e))return s}}function yt(e,t){return Ot(e,t,!0)}function bt(e,t,i){var n=-1,o=e?e.length:0;if(t=t&&"undefined"==typeof i?t:D(t,i,3),"number"==typeof o)for(;++n<o&&t(e[n],n,e)!==a;);else un(e,t)}function wt(e,t){var i=e?e.length:0;if("number"==typeof i)for(;i--&&t(e[i],i,e)!==!1;);else{var n=on(e);i=n.length,un(e,function(e,o,r){return o=n?n[--i]:--i,t(r[o],o,r)===!1&&a})}}function _t(e,t){var i=n(arguments,2),o=-1,r="function"==typeof t,s=e?e.length:0,a=ki("number"==typeof s?s:0);return bt(e,function(e){a[++o]=(r?t:e[t]).apply(e,i)}),a}function Ct(e,t,i){var n=-1,o=e?e.length:0;if(t=ui(t,i,3),"number"==typeof o)for(var r=ki(o);++n<o;)r[n]=t(e[n],n,e);else r=[],un(e,function(e,i,o){r[++n]=t(e,i,o)});return r}function xt(e,t,i){var n=-1/0,o=n;"function"!=typeof t&&i&&i[t]===e&&(t=null);var r=-1,s=e?e.length:0;if(null==t&&"number"==typeof s)for(;++r<s;){var a=e[r];a>o&&(o=a)}else t=ui(t,i,3),bt(e,function(e,i,r){var s=t(e,i,r);s>n&&(n=s,o=e)});return o}function Tt(e,t,i){var n=1/0,o=n;"function"!=typeof t&&i&&i[t]===e&&(t=null);var r=-1,s=e?e.length:0;if(null==t&&"number"==typeof s)for(;++r<s;){var a=e[r];o>a&&(o=a)}else t=ui(t,i,3),bt(e,function(e,i,r){var s=t(e,i,r);n>s&&(n=s,o=e)});return o}function St(e,t,i,n){if(!e)return i;var o=arguments.length<3;t=ui(t,n,4);var r=-1,s=e.length;if("number"==typeof s)for(o&&(i=e[++r]);++r<s;)i=t(i,e[r],r,e);else un(e,function(e,n,r){i=o?(o=!1,e):t(i,e,n,r)});return i}function kt(e,t,i,n){var o=arguments.length<3;return t=ui(t,n,4),wt(e,function(e,n,r){i=o?(o=!1,e):t(i,e,n,r)}),i}function At(e,t,i){return t=ui(t,i,3),gt(e,function(e,i,n){return!t(e,i,n)})}function Et(e,t,i){if(e&&"number"!=typeof e.length&&(e=ft(e)),null==t||i)return e?e[H(0,e.length-1)]:r;var n=Mt(e);return n.length=Qi(Ji(0,t),n.length),n}function Mt(e){var t=-1,i=e?e.length:0,n=ki("number"==typeof i?i:0);return bt(e,function(e){var i=H(0,++t);n[t]=n[i],n[i]=e}),n}function Dt(e){var t=e?e.length:0;return"number"==typeof t?t:on(e).length}function Rt(e,t,i){var n;t=ui(t,i,3);var o=-1,r=e?e.length:0;if("number"==typeof r)for(;++o<r&&!(n=t(e[o],o,e)););else un(e,function(e,i,o){return(n=t(e,i,o))&&a});return!!n}function Nt(e,i,n){var o=-1,r=e?e.length:0,s=ki("number"==typeof r?r:0);for(i=ui(i,n,3),bt(e,function(e,t,n){s[++o]={criteria:[i(e,t,n)],index:o,value:e}}),r=s.length,s.sort(t);r--;)s[r]=s[r].value;return s}function Pt(e){return tn(e)?n(e):e&&"number"==typeof e.length?Ct(e):ft(e)}function Ot(e,t,i){return i&&Z(t)?r:(i?vt:gt)(e,t)}function Ht(e){for(var t=-1,i=e?e.length:0,n=[];++t<i;){var o=e[t];o&&n.push(o)}return n}function Ft(e){return N(e,P(arguments,!0,!0,1))}function It(e,t,i){var o=0,s=e?e.length:0;if("number"!=typeof t&&null!=t){var a=-1;for(t=ui(t,i,3);++a<s&&t(e[a],a,e);)o++}else if(o=t,null==o||i)return e?e[0]:r;return n(e,0,Qi(Ji(0,o),s))}function Bt(e,t){return P(e,t)}function zt(t,i,n){if("number"==typeof n){var o=t?t.length:0;n=0>n?Ji(0,o+n):n||0}else if(n){var r=$t(t,i);return t[r]===i?r:-1}return e(t,i,n)}function Lt(e,t,i){var o=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var s=r;for(t=ui(t,i,3);s--&&t(e[s],s,e);)o++}else o=null==t||i?1:t||o;return n(e,0,Qi(Ji(0,r-o),r))}function Wt(){for(var e=[],t=-1,i=arguments.length;++t<i;){var n=arguments[t];(tn(n)||j(n))&&e.push(n)}var o=e[0],r=-1,s=L(),a=o?o.length:0,l=[];e:for(;++r<a;)if(n=o[r],s(l,n)<0){for(var t=i;--t;)if(s(e[t],n)<0)continue e;l.push(n)}return l}function Vt(e,t,i){var o=0,s=e?e.length:0;if("number"!=typeof t&&null!=t){var a=s;for(t=ui(t,i,3);a--&&t(e[a],a,e);)o++}else if(o=t,null==o||i)return e?e[s-1]:r;return n(e,Ji(0,s-o))}function jt(e,t,i){var n=e?e.length:0;for("number"==typeof i&&(n=(0>i?Ji(0,n+i):Qi(i,n-1))+1);n--;)if(e[n]===t)return n;return-1}function qt(e,t,i){e=+e||0,i=+i||1,null==t&&(t=e,e=0);for(var n=-1,o=Ji(0,zi((t-e)/i)),r=ki(o);++n<o;)r[n]=e,e+=i;return r}function Ut(e,t,i){if("number"!=typeof t&&null!=t){var o=0,r=-1,s=e?e.length:0;for(t=ui(t,i,3);++r<s&&t(e[r],r,e);)o++}else o=null==t||i?1:Ji(0,t);return n(e,o)}function $t(e,t,i,n){var o=0,r=e?e.length:o;for(i=i?ui(i,n,1):hi,t=i(t);r>o;){var s=o+r>>>1;i(e[s])<t?o=s+1:r=s}return o}function Yt(){return F(P(arguments,!0,!0))
}function Gt(e,t,i,n){return"boolean"!=typeof t&&null!=t&&(n=i,i="function"!=typeof t&&n&&n[t]===e?null:t,t=!1),null!=i&&(i=ui(i,n,3)),F(e,t,i)}function Kt(e){return N(e,n(arguments,1))}function Xt(){for(var e=-1,t=xt(pn(arguments,"length")),i=ki(0>t?0:t);++e<t;)i[e]=pn(arguments,e);return i}function Jt(e,t){var i=-1,n=e?e.length:0,o={};for(t||!n||tn(e[0])||(t=[]);++i<n;){var r=e[i];t?o[r]=t[i]:r&&(o[r[0]]=r[1])}return o}function Qt(e,t){if(!it(t))throw new Pi;return function(){return--e<1?t.apply(this,arguments):void 0}}function Zt(e,t){return arguments.length>2?B(e,17,n(arguments,2),null,t):B(e,1,null,null,t)}function ei(e){for(var t=arguments.length>1?P(arguments,!0,!1,1):Y(e),i=-1,n=t.length;++i<n;){var o=t[i];e[o]=B(e[o],1,null,null,e)}return e}function ti(){for(var e=arguments,t=e.length;t--;)if(!it(e[t]))throw new Pi;return function(){for(var t=arguments,i=e.length;i--;)t=[e[i].apply(this,t)];return t[0]}}function ii(e,t,i){var n,o,s,a,l,c,u,d=0,h=!1,f=!0;if(!it(e))throw new Pi;if(t=Ji(0,t)||0,i===!0){var p=!0;f=!1}else nt(i)&&(p=i.leading,h="maxWait"in i&&(Ji(t,i.maxWait)||0),f="trailing"in i?i.trailing:f);var m=function(){var i=t-(mn()-a);if(0>=i){o&&Li(o);var h=u;o=c=u=r,h&&(d=mn(),s=e.apply(l,n),c||o||(n=l=null))}else c=Ui(m,i)},g=function(){c&&Li(c),o=c=u=r,(f||h!==t)&&(d=mn(),s=e.apply(l,n),c||o||(n=l=null))};return function(){if(n=arguments,a=mn(),l=this,u=f&&(c||!p),h===!1)var i=p&&!c;else{o||p||(d=a);var r=h-(a-d),v=0>=r;v?(o&&(o=Li(o)),d=a,s=e.apply(l,n)):o||(o=Ui(g,r))}return v&&c?c=Li(c):c||t===h||(c=Ui(m,t)),i&&(v=!0,s=e.apply(l,n)),!v||c||o||(n=l=null),s}}function ni(e){if(!it(e))throw new Pi;var t=n(arguments,1);return Ui(function(){e.apply(r,t)},1)}function oi(e,t){if(!it(e))throw new Pi;var i=n(arguments,2);return Ui(function(){e.apply(r,i)},t)}function ri(e,t){var i={};return function(){var n=t?t.apply(this,arguments):l+arguments[0];return Vi.call(i,n)?i[n]:i[n]=e.apply(this,arguments)}}function si(e){var t,i;if(!it(e))throw new Pi;return function(){return t?i:(t=!0,i=e.apply(this,arguments),e=null,i)}}function ai(e){return B(e,16,n(arguments,1))}function li(e,t,i){var n=!0,o=!0;if(!it(e))throw new Pi;return i===!1?n=!1:nt(i)&&(n="leading"in i?i.leading:n,o="trailing"in i?i.trailing:o),i={},i.leading=n,i.maxWait=t,i.trailing=o,ii(e,t,i)}function ci(e,t){return B(t,16,[e])}function ui(e,t,i){var n=typeof e;if(null==e||"function"==n)return D(e,t,i);if("object"!=n)return mi(e);var o=on(e);return function(t){for(var i=o.length,n=!1;i--&&(n=t[o[i]]===e[o[i]]););return n}}function di(e){return null==e?"":Ni(e).replace(ln,z)}function hi(e){return e}function fi(e){bt(Y(e),function(t){var i=S[t]=e[t];S.prototype[t]=function(){var e=[this.__wrapped__];ji.apply(e,arguments);var t=i.apply(S,e);return this.__chain__?new k(t,!0):t}})}function pi(){return x._=Fi,this}function mi(e){return function(t){return t[e]}}function gi(e,t){return null==e&&null==t&&(t=1),e=+e||0,null==t?(t=e,e=0):t=+t||0,e+Wi(Zi()*(t-e+1))}function vi(e,t){if(e){var i=e[t];return it(i)?e[t]():i}}function yi(e,t,n){var o=S,r=o.templateSettings;e=Ni(e||""),n=$({},n,r);var s=0,a="__p += '",l=n.variable,c=Ri((n.escape||u).source+"|"+(n.interpolate||u).source+"|"+(n.evaluate||u).source+"|$","g");e.replace(c,function(t,n,o,r,l){return a+=e.slice(s,l).replace(d,i),n&&(a+="' +\n_.escape("+n+") +\n'"),r&&(a+="';\n"+r+";\n__p += '"),o&&(a+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),s=l+t.length,t}),a+="';\n",l||(l="obj",a="with ("+l+" || {}) {\n"+a+"\n}\n"),a="function("+l+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+a+"return __p\n}";try{var h=Ei("_","return "+a)(o)}catch(f){throw f.source=a,f}return t?h(t):(h.source=a,h)}function bi(e,t,i){e=(e=+e)>-1?e:0;var n=-1,o=ki(e);for(t=D(t,i,1);++n<e;)o[n]=t(n);return o}function wi(e){return null==e?"":Ni(e).replace(an,V)}function _i(e){var t=++s+"";return e?e+t:t}function Ci(e){return e=new k(e),e.__chain__=!0,e}function xi(e,t){return t(e),e}function Ti(){return this.__chain__=!0,this}function Si(){return this.__wrapped__}x=x?M.defaults(T.Object(),x,M.pick(T,h)):T;var ki=x.Array,Ai=x.Date,Ei=x.Function,Mi=x.Math,Di=x.Object,Ri=x.RegExp,Ni=x.String,Pi=x.TypeError,Oi=[],Hi=Di.prototype,Fi=x._,Ii=Hi.toString,Bi=Ri("^"+Ni(Ii).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),zi=Mi.ceil,Li=x.clearTimeout,Wi=Mi.floor,Vi=Hi.hasOwnProperty,ji=Oi.push,qi=Hi.propertyIsEnumerable,Ui=x.setTimeout,$i=W($i=Di.create)&&$i,Yi=W(Yi=ki.isArray)&&Yi,Gi=x.isFinite,Ki=x.isNaN,Xi=W(Xi=Di.keys)&&Xi,Ji=Mi.max,Qi=Mi.min,Zi=Mi.random;k.prototype=S.prototype;var en={};!function(){var e={0:1,length:1};en.spliceObjects=(Oi.splice.call(e,0,1),!e[0])}(1),S.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:c,variable:""},$i||(E=function(){function e(){}return function(t){if(nt(t)){e.prototype=t;var i=new e;e.prototype=null}return i||x.Object()}}()),j(arguments)||(j=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Vi.call(e,"callee")&&!qi.call(e,"callee")||!1});var tn=Yi||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ii.call(e)==p||!1},nn=function(e){var t,i=e,n=[];if(!i)return n;if(!C[typeof e])return n;for(t in i)Vi.call(i,t)&&n.push(t);return n},on=Xi?function(e){return nt(e)?Xi(e):[]}:nn,rn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},sn=K(rn),an=Ri("("+on(sn).join("|")+")","g"),ln=Ri("["+on(rn).join("")+"]","g"),cn=function(e,t){var i,n=e,o=n;if(!n)return o;if(!C[typeof n])return o;for(i in n)if(t(n[i],i,e)===a)return o;return o},un=function(e,t){var i,n=e,o=n;if(!n)return o;if(!C[typeof n])return o;for(i in n)if(Vi.call(n,i)&&t(n[i],i,e)===a)return o;return o};it(/x/)&&(it=function(e){return"function"==typeof e&&Ii.call(e)==v});var dn=I(function(e,t,i){Vi.call(e,i)?e[i]++:e[i]=1}),hn=I(function(e,t,i){(Vi.call(e,i)?e[i]:e[i]=[]).push(t)}),fn=I(function(e,t,i){e[i]=t}),pn=Ct,mn=W(mn=Ai.now)&&mn||function(){return(new Ai).getTime()};return S.after=Qt,S.bind=Zt,S.bindAll=ei,S.chain=Ci,S.compact=Ht,S.compose=ti,S.countBy=dn,S.debounce=ii,S.defaults=$,S.defer=ni,S.delay=oi,S.difference=Ft,S.filter=gt,S.flatten=Bt,S.forEach=bt,S.functions=Y,S.groupBy=hn,S.indexBy=fn,S.initial=Lt,S.intersection=Wt,S.invert=K,S.invoke=_t,S.keys=on,S.map=Ct,S.max=xt,S.memoize=ri,S.min=Tt,S.omit=ut,S.once=si,S.pairs=dt,S.partial=ai,S.pick=ht,S.pluck=pn,S.range=qt,S.reject=At,S.rest=Ut,S.shuffle=Mt,S.sortBy=Nt,S.tap=xi,S.throttle=li,S.times=bi,S.toArray=Pt,S.union=Yt,S.uniq=Gt,S.values=ft,S.where=Ot,S.without=Kt,S.wrap=ci,S.zip=Xt,S.collect=Ct,S.drop=Ut,S.each=bt,S.extend=q,S.methods=Y,S.object=Jt,S.select=gt,S.tail=Ut,S.unique=Gt,S.clone=U,S.contains=pt,S.escape=di,S.every=mt,S.find=vt,S.has=G,S.identity=hi,S.indexOf=zt,S.isArguments=j,S.isArray=tn,S.isBoolean=X,S.isDate=J,S.isElement=Q,S.isEmpty=Z,S.isEqual=et,S.isFinite=tt,S.isFunction=it,S.isNaN=ot,S.isNull=rt,S.isNumber=st,S.isObject=nt,S.isRegExp=at,S.isString=lt,S.isUndefined=ct,S.lastIndexOf=jt,S.mixin=fi,S.noConflict=pi,S.random=gi,S.reduce=St,S.reduceRight=kt,S.result=vi,S.runInContext=o,S.size=Dt,S.some=Rt,S.sortedIndex=$t,S.template=yi,S.unescape=wi,S.uniqueId=_i,S.all=mt,S.any=Rt,S.detect=vt,S.findWhere=yt,S.foldl=St,S.foldr=kt,S.include=pt,S.inject=St,S.first=It,S.last=Vt,S.sample=Et,S.take=It,S.head=It,fi(S),S.VERSION="2.4.1",S.prototype.chain=Ti,S.prototype.value=Si,bt(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Oi[e];S.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),en.spliceObjects||0!==e.length||delete e[0],this}}),bt(["concat","join","slice"],function(e){var t=Oi[e];S.prototype[e]=function(){var e=this.__wrapped__,i=t.apply(e,arguments);return this.__chain__&&(i=new k(i),i.__chain__=!0),i}}),S}var r,s=0,a={},l=+new Date+"",c=/<%=([\s\S]+?)%>/g,u=/($^)/,d=/['\n\r\t\u2028\u2029\\]/g,h=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],f="[object Arguments]",p="[object Array]",m="[object Boolean]",g="[object Date]",v="[object Function]",y="[object Number]",b="[object Object]",w="[object RegExp]",_="[object String]",C={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},x={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},T=C[typeof window]&&window||this,S=C[typeof exports]&&exports&&!exports.nodeType&&exports,k=C[typeof module]&&module&&!module.nodeType&&module,A=k&&k.exports===S&&S,E=C[typeof global]&&global;!E||E.global!==E&&E.window!==E||(T=E);var M=o();S&&k?A?(k.exports=M)._=M:S._=M:T._=M}.call(this),function(e,t){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,o){e.Backbone=t(e,o,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");t(e,exports,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,n){{var o=e.Backbone,r=[],s=(r.push,r.slice);r.splice}t.VERSION="1.1.2",t.$=n,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var o=this,r=i.once(function(){o.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var o,r,s,a,l,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(a=e?[e]:i.keys(this._events),l=0,u=a.length;u>l;l++)if(e=a[l],s=this._events[e]){if(this._events[e]=o=[],t||n)for(d=0,h=s.length;h>d;d++)r=s[d],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&o.push(r);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&u(i,t),n&&u(n,arguments),this},stopListening:function(e,t,n){var o=this._listeningTo;if(!o)return this;var r=!t&&!n;n||"object"!=typeof t||(n=this),e&&((o={})[e._listenId]=e);for(var s in o)e=o[s],e.off(t,n,this),(r||i.isEmpty(e._events))&&delete this._listeningTo[s];return this}},l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)e[t].apply(e,[o,i[o]].concat(n));return!1}if(l.test(i)){for(var r=i.split(l),s=0,a=r.length;a>s;s++)e[t].apply(e,[r[s]].concat(n));return!1}return!0},u=function(e,t){var i,n=-1,o=e.length,r=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t);return}},d={listenTo:"on",listenToOnce:"once"};i.each(d,function(e,t){a[t]=function(t,n,o){var r=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=i.uniqueId("l"));return r[s]=t,o||"object"!=typeof n||(o=this),t[e](n,o,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(t,a);var h=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(h.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var o,r,s,a,l,c,u,d;if(null==e)return this;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;s=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(o in r)t=r[o],i.isEqual(d[o],t)||a.push(o),i.isEqual(u[o],t)?delete this.changed[o]:this.changed[o]=t,s?delete d[o]:d[o]=t;if(!l){a.length&&(this._pending=n);for(var h=0,f=a.length;f>h;h++)this.trigger("change:"+a[h],this,d[a[h]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,n=!1,o=this._changing?this._previousAttributes:this.attributes;for(var r in e)i.isEqual(o[r],t=e[r])||((n||(n={}))[r]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),void t.trigger("sync",t,i,e)):!1},I(this,e),this.sync("read",this,e)},save:function(e,t,n){var o,r,s,a=this.attributes;if(null==e||"object"==typeof e?(o=e,n=t):(o={})[e]=t,n=i.extend({validate:!0},n),o&&!n.wait){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;o&&n.wait&&(this.attributes=i.extend({},a,o)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=a;var t=l.parse(e,n);return n.wait&&(t=i.extend(o||{},t)),i.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),void l.trigger("sync",l,e,n))},I(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=o),s=this.sync(r,this,n),o&&n.wait&&(this.attributes=a),s},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&o(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;I(this,e);var r=this.sync("delete",this,e);return e.wait||o(),r},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(e){h.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}});var p=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(p.prototype,a,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,g))},remove:function(e,t){var n=!i.isArray(e);e=n?[e]:i.clone(e),t||(t={});var o,r,s,a;for(o=0,r=e.length;r>o;o++)a=e[o]=this.get(e[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,t.silent||(t.index=s,a.trigger("remove",a,this,t)),this._removeReference(a,t));return n?e[0]:e},set:function(e,t){t=i.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?e?[e]:[]:i.clone(e);var o,r,s,a,l,c,u,d=t.at,f=this.model,p=this.comparator&&null==d&&t.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=t.add,_=t.merge,C=t.remove,x=!p&&w&&C?[]:!1;for(o=0,r=e.length;r>o;o++){if(l=e[o]||{},s=l instanceof h?a=l:l[f.prototype.idAttribute||"id"],c=this.get(s))C&&(b[c.cid]=!0),_&&(l=l===a?a.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),p&&!u&&c.hasChanged(g)&&(u=!0)),e[o]=c;else if(w){if(a=e[o]=this._prepareModel(l,t),!a)continue;v.push(a),this._addReference(a,t)}a=c||a,!x||!a.isNew()&&b[a.id]||x.push(a),b[a.id]=!0}if(C){for(o=0,r=this.length;r>o;++o)b[(a=this.models[o]).cid]||y.push(a);y.length&&this.remove(y,t)}if(v.length||x&&x.length)if(p&&(u=!0),this.length+=v.length,null!=d)for(o=0,r=v.length;r>o;o++)this.models.splice(d+o,0,v[o]);else{x&&(this.models.length=0);var T=x||v;for(o=0,r=T.length;r>o;o++)this.models.push(T[o])}if(u&&this.sort({silent:!0}),!t.silent){for(o=0,r=v.length;r>o;o++)(a=v[o]).trigger("add",a,this,t);(u||x&&x.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,o=this.models.length;o>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return s.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var o=e.reset?"reset":"set";n[o](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,o=t.success;return t.success=function(e,i){t.wait&&n.add(e,t),o&&o(e,i,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(e){p.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(e){p.prototype[e]=function(t,n){var o=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,o,n)}});var b=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),n){var o=t.match(w),r=o[1],s=o[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,n):this.$el.on(r,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className"));var n=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,o){var r=x[e];i.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=i.result(n,"url")||F()),null!=o.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===s.type||o.emulateJSON||(s.processData=!1),"PATCH"===s.type&&C&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=t.ajax(i.extend(s,o));return n.trigger("request",n,l,o),l};var C=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,A=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(T.prototype,a,{initialize:function(){},route:function(e,n,o){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var r=this;return t.history.route(e,function(i){var s=r._extractParameters(e,i);r.execute(o,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),t.history.trigger("route",r,n,s)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(E,"\\$&").replace(S,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,N=/msie [\w.]+/,P=/\/$/,O=/#.*$/;M.started=!1,i.extend(M.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(P,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(D,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),o=document.documentMode,r=N.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(R,"/"),r&&this._wantsHashChange){var s=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!M.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(O,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new M;var H=function(e,t){var n,o=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,t);var r=function(){this.constructor=n};return r.prototype=o.prototype,n.prototype=new r,e&&i.extend(n.prototype,e),n.__super__=o.prototype,n};h.extend=p.extend=T.extend=b.extend=M.extend=H;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};return t}),// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
function(e,t){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(i,n){return e.Marionette=t(e,i,n)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=t(e,i,n)}else e.Marionette=t(e,e.Backbone,e._)}(this,function(e,t,i){"use strict";// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
!function(e,t){var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===i?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(e,t),e.ChildViewContainer.VERSION="0.1.4",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer}(t,i),// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
function(e,t){var i=e.Wreqr,n=e.Wreqr={};return e.Wreqr.VERSION="1.3.1",e.Wreqr.noConflict=function(){return e.Wreqr=i,this},n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,t),n.CommandStorage=function(){var i=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(i.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),i}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,i,n){var o=this.storage.getCommands(e);t.each(o.instances,function(e){i.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var i,n=e.storageType||this.storageType;i=t.isFunction(n)?new n:n,this.storage=i}})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.hasHandler(e)?this.getHandler(e).apply(this,t):void 0}})}(n),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,t),n.Channel=function(){var i=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(i.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,i,n){if(i){n=n||this;var o="vent"===e?"on":"setHandler";t.each(i,function(i,r){this[e][o](r,t.bind(i,n))},this)}}}),i}(n),n.radio=function(e){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(i.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var i=this._channels[t];return i||(i=new e.Channel(t),this._channels[t]=i),i},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(n[e],function(t){this[e][t]=o(this,e,t)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},o=function(e,t,i){return function(n){var o=e._getChannel(n)[t],r=Array.prototype.slice.call(arguments,1);return o[i].apply(o,r)}};return new i}(n),e.Wreqr}(t,i);var n=e.Marionette,o=t.Marionette={};o.VERSION="2.2.2",o.noConflict=function(){return e.Marionette=n,this},t.Marionette=o,o.Deferred=t.$.Deferred;var r=Array.prototype.slice;o.extend=t.Model.extend,o.getOption=function(e,t){if(e&&t){var i;return i=e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},o.proxyGetOption=function(e){return o.getOption(this,e)},o.normalizeMethods=function(e){var t={};return i.each(e,function(e,n){i.isFunction(e)||(e=this[e]),e&&(t[n]=e)},this),t},o.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},o.normalizeUIKeys=function(e,t){return"undefined"!=typeof e?(e=i.clone(e),i.each(i.keys(e),function(i){var n=o.normalizeUIString(i,t);n!==i&&(e[n]=e[i],delete e[i])}),e):void 0},o.normalizeUIValues=function(e,t){return"undefined"!=typeof e?(i.each(e,function(n,r){i.isString(n)&&(e[r]=o.normalizeUIString(n,t))}),e):void 0},o.actAsCollection=function(e,t){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){e[n]=function(){var e=i.values(i.result(this,t)),o=[e].concat(i.toArray(arguments));return i[n].apply(i,o)}})},o.triggerMethod=function(e){function t(e,t,i){return i.toUpperCase()}var n,o=/(^|:)(\w)/gi,r="on"+e.replace(o,t),s=this[r];return i.isFunction(s)&&(n=s.apply(this,i.tail(arguments))),i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n},o.triggerMethodOn=function(e,t){var n,r=i.tail(arguments,2);return n=i.isFunction(e.triggerMethod)?e.triggerMethod:o.triggerMethod,n.apply(e,[t].concat(r))},o.MonitorDOMRefresh=function(e){function n(e){e._isShown=!0,r(e)}function o(e){e._isRendered=!0,r(e)}function r(e){e._isShown&&e._isRendered&&s(e)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function s(i){return t.$.contains(e,i.el)}return function(e){e.listenTo(e,"show",function(){n(e)}),e.listenTo(e,"render",function(){o(e)})}}(document.documentElement),function(e){function t(t,n,o,r){var s=r.split(/\s+/);i.each(s,function(i){var r=t[i];if(!r)throw new e.Error('Method "'+i+'" was configured as an event handler, but does not exist.');t.listenTo(n,o,r)})}function n(e,t,i,n){e.listenTo(t,i,n)}function o(e,t,n,o){var r=o.split(/\s+/);i.each(r,function(i){var o=e[i];e.stopListening(t,n,o)})}function r(e,t,i,n){e.stopListening(t,i,n)}function s(t,n,o,r,s){if(n&&o){if(!i.isFunction(o)&&!i.isObject(o))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});i.isFunction(o)&&(o=o.call(t)),i.each(o,function(e,o){i.isFunction(e)?r(t,n,o,e):s(t,n,o,e)})}}e.bindEntityEvents=function(e,i,o){s(e,i,o,n,t)},e.unbindEntityEvents=function(e,t,i){s(e,t,i,r,o)},e.proxyBindEntityEvents=function(t,i){return e.bindEntityEvents(this,t,i)},e.proxyUnbindEntityEvents=function(t,i){return e.unbindEntityEvents(this,t,i)}}(o);var s=["description","fileName","lineNumber","name","message","number"];return o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(e,t){i.isObject(e)?(t=e,e=t.message):t||(t={});var n=Error.call(this,e);i.extend(this,i.pick(n,s),i.pick(t,s)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,o.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),o.Error.extend=o.extend,o.Callbacks=function(){this._deferred=o.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(e,t){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),n.then(function(i){t&&(i.context=t),e.call(i.context,i.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=o.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,t.Events,{destroy:function(){var e=r.call(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.triggerMethod.apply(this,["destroy"].concat(e)),this.stopListening(),this.off(),this},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption}),o.Object=function(e){this.options=i.extend({},i.result(this,"options"),e),this.initialize.apply(this,arguments)},o.Object.extend=o.extend,i.extend(o.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),i.extend(o.Object.prototype,t.Events),o.Region=function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'});if(this.$el=this.getEl(this.el),this.initialize){var i=r.apply(arguments);this.initialize.apply(this,i)}},i.extend(o.Region,{buildRegion:function(e,t){if(i.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(i.isFunction(e))return this._buildRegionFromRegionClass(e);throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,n){var o=e.regionClass||n,r=i.omit(e,"selector","regionClass");e.selector&&!r.el&&(r.el=e.selector);var s=new o(r);return e.parentEl&&(s.getEl=function(n){if(i.isObject(n))return t.$(n);var o=e.parentEl;return i.isFunction(o)&&(o=o()),o.find(n)}),s},_buildRegionFromRegionClass:function(e){return new e}}),i.extend(o.Region.prototype,t.Events,{show:function(e,t){this._ensureElement();var i=t||{},n=e!==this.currentView,r=!!i.preventDestroy,s=!!i.forceShow,a=!!this.currentView,l=n&&!r,c=n||s;return a&&this.triggerMethod("before:swapOut",this.currentView),l&&this.empty(),c?(e.once("destroy",this.empty,this),e.render(),a&&this.triggerMethod("before:swap",e),this.triggerMethod("before:show",e),o.triggerMethodOn(e,"before:show"),this.attachHtml(e),a&&this.triggerMethod("swapOut",this.currentView),this.currentView=e,a&&this.triggerMethod("swap",e),this.triggerMethod("show",e),o.triggerMethodOn(e,"show"),this):this},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length)throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(e){return t.$(e)},attachHtml:function(e){this.el.innerHTML="",this.el.appendChild(e.el)},empty:function(){var e=this.currentView;if(e)return e.off("destroy",this.empty,this),this.triggerMethod("before:empty",e),this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,this},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&e.remove()},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this},getOption:o.proxyGetOption,triggerMethod:o.triggerMethod}),o.Region.extend=o.extend,o.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.call(this,t)},addRegions:function(e,t){i.isFunction(e)&&(e=e.apply(this,arguments));var n={};return i.each(e,function(e,o){i.isString(e)&&(e={selector:e}),e.selector&&(e=i.defaults({},e,t));var r=this.addRegion(o,e);n[o]=r},this),n},addRegion:function(t,i){var n;return n=i instanceof e.Region?i:e.Region.buildRegion(i,e.Region),this.triggerMethod("before:add:region",t,n),this._store(t,n),this.triggerMethod("add:region",t,n),n},get:function(e){return this._regions[e]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return i.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return i.each(e,function(e){e.empty()},this),e},destroy:function(){return this.removeRegions(),e.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete this._regions[e],this._setLength(),this.triggerMethod("remove:region",e,t)},_setLength:function(){this.length=i.size(this._regions)}});return e.actAsCollection(t.prototype,"_regions"),t}(o),o.TemplateCache=function(e){this.templateId=e},i.extend(o.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new o.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=r.call(arguments),i=t.length;if(i>0)for(e=0;i>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var i=t.$(e).html();if(!i||0===i.length)throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return i},compileTemplate:function(e){return i.template(e)}}),o.Renderer={render:function(e,t){if(!e)throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var i;return(i="function"==typeof e?e:o.TemplateCache.get(e))(t)}},o.View=t.View.extend({constructor:function(e){i.bindAll(this,"render"),this.options=i.extend({},i.result(this,"options"),i.isFunction(e)?e.call(this):e),this._behaviors=o.Behaviors(this),t.View.apply(this,arguments),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,r.call(arguments,1))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return i.isFunction(t)&&(t=t.call(this)),i.extend(e,t)},normalizeUIKeys:function(e){var t=i.result(this,"ui"),n=i.result(this,"_uiBindings");return o.normalizeUIKeys(e,n||t)},normalizeUIValues:function(e){var t=i.result(this,"ui"),n=i.result(this,"_uiBindings");return o.normalizeUIValues(e,n||t)},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(t,function(t,i){e[i]=this._buildViewTrigger(t)},this),e}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var n=e||this.events;i.isFunction(n)&&(n=n.call(this)),n=this.normalizeUIKeys(n),i.isUndefined(e)&&(this.events=n);var o={},r=i.result(this,"behaviorEvents")||{},s=this.configureTriggers(),a=i.result(this,"behaviorTriggers")||{};i.extend(o,r,n,s,a),t.View.prototype.delegateEvents.call(this,o)},undelegateEvents:function(){var e=r.call(arguments);return t.View.prototype.undelegateEvents.apply(this,e),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(!this.isDestroyed){var e=r.call(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.remove(),i.invoke(this._behaviors,"destroy",e),this}},bindUIElements:function(){this._bindUIElements(),i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(e),function(t){var i=e[t];this.ui[t]=this.$(i)},this)}},unbindUIElements:function(){this._unbindUIElements(),i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=i.isObject(e),n=i.defaults({},t?e:{},{preventDefault:!0,stopPropagation:!0}),o=t?n.event:e;return function(e){e&&(e.preventDefault&&n.preventDefault&&e.preventDefault(),e.stopPropagation&&n.stopPropagation&&e.stopPropagation());var t={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,t)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return i.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){var e=arguments,t=o.triggerMethod,n=t.apply(this,e);return i.each(this._behaviors,function(i){t.apply(i,e)}),n},normalizeMethods:o.normalizeMethods,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=i.partial(this.serializeModel,this.model).apply(this,arguments):this.collection&&(e={items:i.partial(this.serializeCollection,this.collection).apply(this,arguments)}),e},serializeCollection:function(e){return e.toJSON.apply(e,r.call(arguments,1))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(e!==!1){if(!e)throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.serializeData();t=this.mixinTemplateHelpers(t);var i=o.Renderer.render(e,t,this);return this.attachElContent(i),this}},attachElContent:function(e){return this.$el.html(e),this},destroy:function(){return this.isDestroyed?void 0:o.View.prototype.destroy.apply(this,arguments)}}),o.CollectionView=o.View.extend({childViewEventPrefix:"childview",constructor:function(e){var t=e||{};this.sort=i.isUndefined(t.sort)?!0:t.sort,this.once("render",this._initialEvents),this._initChildViewStorage(),o.View.apply(this,arguments),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(e,t){o.triggerMethodOn(t,e)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e){this.destroyEmptyView();var t=this.getChildView(e),i=this.collection.indexOf(e);this.addChild(e,t,i)},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},onShowCalled:function(){this.children.each(i.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){var e=this.collection.find(function(e,t){var i=this.children.findByModel(e);return!i||i._index!==t},this);e&&this.resortView()},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getChildView(t),this.addChild(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new t.Model;this.addEmptyView(i,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(n)&&(n=n.call(this));var r=this.buildChildView(e,t,n);this.proxyChildEvents(r),this._isShown&&o.triggerMethodOn(r,"before:show"),this.children.add(r),this.renderChildView(r,-1),this._isShown&&o.triggerMethodOn(r,"show")},getChildView:function(){var e=this.getOption("childView");if(!e)throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return e},addChild:function(e,t,n){var o=this.getOption("childViewOptions");i.isFunction(o)&&(o=o.call(this,e,n));var r=this.buildChildView(e,t,o);return this._updateIndices(r,!0,n),this._addChildView(r,n),r},_updateIndices:function(e,t,i){this.sort&&(t?(e._index=i,this.children.each(function(t){t._index>=e._index&&t._index++})):this.children.each(function(t){t._index>=e._index&&t._index--}))},_addChildView:function(e,t){this.proxyChildEvents(e),this.triggerMethod("before:add:child",e),this.children.add(e),this.renderChildView(e,t),this._isShown&&!this.isBuffering&&o.triggerMethodOn(e,"show"),this.triggerMethod("add:child",e)},renderChildView:function(e,t){return e.render(),this.attachHtml(this,e,t),e},buildChildView:function(e,t,n){var o=i.extend({model:e},n);return new t(o)},removeChildView:function(e){return e&&(this.triggerMethod("before:remove:child",e),e.destroy?e.destroy():e.remove&&e.remove(),this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1)),e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},attachHtml:function(e,t,i){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e._insertBefore(t,i)||e._insertAfter(t)},_insertBefore:function(e,t){var i,n=this.sort&&t<this.children.length-1;return n&&(i=this.children.find(function(e){return e._index===t+1})),i?(i.$el.before(e.el),!0):!1},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){return this.isDestroyed?void 0:(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),o.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){var e=this.children.map(i.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),e},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var n=r.call(arguments),o=n[0],s=this.normalizeMethods(i.result(this,"childEvents"));n[0]=t+":"+o,n.splice(1,0,e),"undefined"!=typeof s&&i.isFunction(s[o])&&s[o].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)},this)}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(){var e=this.getOption("childView")||this.constructor;if(!e)throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return e},serializeData:function(){var e={};return this.model&&(e=i.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&o.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),i=o.Renderer.render(t,e,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){var i=this.getChildViewContainer(e);i.append(t)},_insertAfter:function(e){var t=this.getChildViewContainer(this);t.append(e.el)},getChildViewContainer:function(e){if("$childViewContainer"in e)return e.$childViewContainer;var t,n=o.getOption(e,"childViewContainer");if(n){var r=i.isFunction(n)?n.call(e):n;if(t="@"===r.charAt(0)&&e.ui?e.ui[r.substr(4)]:e.$(r),t.length<=0)throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else t=e.$el;return e.$childViewContainer=t,t},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),o.LayoutView=o.ItemView.extend({regionClass:o.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),o.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t=this,i={regionClass:this.getOption("regionClass"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,i)},_initializeRegions:function(e){var t;this._initRegionManager(),t=i.isFunction(this.regions)?this.regions(e):this.regions||{};var n=this.getOption.call(e,"regions");i.isFunction(n)&&(n=n.call(this,e)),i.extend(t,n),t=this.normalizeUIValues(t),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.emptyRegions(),this.regionManager.each(function(e){e.reset()})},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})}}),o.Behavior=function(e,t){function i(t,i){this.view=i,this.defaults=e.result(this,"defaults")||{},this.options=e.extend({},this.defaults,t),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return e.extend(i.prototype,t.Events,{initialize:function(){},destroy:function(){this.stopListening()},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),i.extend=o.extend,i}(i,t),o.Behaviors=function(e,t){function i(e,n){return t.isObject(e.behaviors)?(n=i.parseBehaviors(e,n||t.result(e,"behaviors")),i.wrap(e,n,t.keys(o)),n):{}}function n(e,i){this._view=e,this._viewUI=t.result(e,"ui"),this._behaviors=i,this._triggers={}}var o={behaviorTriggers:function(e,t){var i=new n(this,t);return i.buildBehaviorTriggers()},behaviorEvents:function(i,n){var o={},r=t.result(this,"ui");return t.each(n,function(i,n){var s={},a=t.clone(t.result(i,"events"))||{},l=t.result(i,"ui"),c=t.extend({},r,l);a=e.normalizeUIKeys(a,c),t.each(t.keys(a),function(e){var o=new Array(n+2).join(" "),r=e+o,l=t.isFunction(a[e])?a[e]:i[a[e]];s[r]=t.bind(l,i)}),o=t.extend(o,s)}),o}};return t.extend(i,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(e,n){return e.behaviorClass?e.behaviorClass:t.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[n]:i.behaviorsLookup[n]},parseBehaviors:function(e,n){return t.chain(n).map(function(n,o){var r=i.getBehaviorClass(n,o),s=new r(n,e),a=i.parseBehaviors(e,t.result(s,"behaviors"));return[s].concat(a)}).flatten().value()},wrap:function(e,i,n){t.each(n,function(n){e[n]=t.partial(o[n],e[n],i)})}}),t.extend(n.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var o=t.extend({},this._viewUI,t.result(i,"ui")),r=t.clone(t.result(i,"triggers"))||{};r=e.normalizeUIKeys(r,o),t.each(r,t.partial(this._setHandlerForBehavior,i,n),this)},_setHandlerForBehavior:function(e,t,i,n){var o=n.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[o]=this._view._buildViewTrigger(i)}}),i}(o,i),o.AppRouter=t.Router.extend({constructor:function(e){t.Router.apply(this,arguments),this.options=e||{};var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},_processOnRoute:function(e,t){var n=i.invert(this.getOption("appRoutes"))[e];i.isFunction(this.onRoute)&&this.onRoute(e,n,t)},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,n){var r=e[n];if(!r)throw new o.Error('Method "'+n+'" was not found on the controller');this.route(t,n,i.bind(r,e))},getOption:o.proxyGetOption}),o.Application=function(e){this.options=e,this._initializeRegions(e),this._initCallbacks=new o.Callbacks,this.submodules={},i.extend(this,e),this._initChannel(),this.initialize.apply(this,arguments)},i.extend(o.Application.prototype,t.Events,{initialize:function(){},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var i=o.Module.getClass(t),n=r.call(arguments);return n.unshift(this),i.create.apply(i,n)},getRegionManager:function(){return new o.RegionManager
},_initializeRegions:function(e){var t=i.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var n=o.getOption(e,"regions");return i.isFunction(n)&&(n=n.call(this,e)),i.extend(t,n),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this.listenTo(this._regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this._regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this._regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption}),o.Application.extend=o.extend,o.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,i.isFunction(this.initialize)&&this.initialize(e,t,this.options)},o.Module.extend=o.extend,i.extend(o.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var r=i.flatten([this,this.app,t,o,t.$,i,n]);e.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod}),i.extend(o.Module,{create:function(e,t,n){var o=e,s=r.call(arguments);s.splice(0,3),t=t.split(".");var a=t.length,l=[];return l[a-1]=n,i.each(t,function(t,i){var r=o;o=this._getModule(r,t,e,n),this._addModuleDefinition(r,o,l[i],s)},this),o},_getModule:function(e,t,n,o){var r=i.extend({},o),s=this.getClass(o),a=e[t];return a||(a=new s(t,n,r),e[t]=a,e.submodules[t]=a),a},getClass:function(e){var t=o.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,n){var o=this._getDefine(i),r=this._getStartWithParent(i,t);o&&t.addDefinition(o,n),this._addStartWithParent(e,t,r)},_getStartWithParent:function(e,t){var n;return i.isFunction(e)&&e.prototype instanceof o.Module?(n=t.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(e)?(n=e.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(e){return!i.isFunction(e)||e.prototype instanceof o.Module?i.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,i){t.startWithParent=t.startWithParent&&i,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),o}),/**
 * This script gives you the zone info key representing your device's time zone setting.
 *
 * @name jsTimezoneDetect
 * @version 1.0.4
 * @author Jon Nylander
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://pellepim.bitbucket.org/jstz/
 *
 * Copyright (c) Jon Nylander
 */
function(e){var t=function(){"use strict";var e="s",i=function(e){var t=-e.getTimezoneOffset();return null!==t?t:0},n=function(e,t,i){var n=new Date;return void 0!==e&&n.setFullYear(e),n.setDate(i),n.setMonth(t),n},o=function(e){return i(n(e,0,2))},r=function(e){return i(n(e,5,2))},s=function(e){var t=e.getMonth()>7?r(e.getFullYear()):o(e.getFullYear()),n=i(e);return t-n!==0},a=function(){var t=o(),i=r(),n=o()-r();return 0>n?t+",1":n>0?i+",1,"+e:t+",0"},l=function(){var e=a();return new t.TimeZone(t.olson.timezones[e])},c=function(e){var t=new Date(2010,6,15,1,0,0,0),i={"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Asia/Gaza":new Date(2009,2,28,0,30,0,0),"Africa/Cairo":new Date(2009,3,25,0,30,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":t,"Asia/Yekaterinburg":t,"Asia/Omsk":t,"Asia/Krasnoyarsk":t,"Asia/Irkutsk":t,"Asia/Yakutsk":t,"Asia/Vladivostok":t,"Asia/Kamchatka":t,"Europe/Minsk":t,"Australia/Perth":new Date(2008,10,1,1,0,0,0)};return i[e]};return{determine:l,date_is_dst:s,dst_start_for:c}}();t.TimeZone=function(e){"use strict";var i={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"],"Asia/Baghdad":["Europe/Minsk"]},n=e,o=function(){for(var e=i[n],o=e.length,r=0,s=e[0];o>r;r+=1)if(s=e[r],t.date_is_dst(t.dst_start_for(s)))return void(n=s)},r=function(){return"undefined"!=typeof i[n]};return r()&&o(),{name:function(){return n}}},t.olson={},t.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"Etc/GMT+2","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},"undefined"!=typeof exports?exports.jstz=t:e.jstz=t}(this),function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(e,t){return At.call(e,t)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(e){_t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function r(e,t){var i=!0;return p(function(){return i&&(o(e),i=!1),t.apply(this,arguments)},t)}function s(e,t){yi[e]||(o(t),yi[e]=!0)}function a(e,t){return function(i){return v(e.call(this,i),t)}}function l(e,t){return function(i){return this.localeData().ordinal(e.call(this,i),t)}}function c(e,t){var i,n,o=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(o,"months");return 0>t-r?(i=e.clone().add(o-1,"months"),n=(t-r)/(r-i)):(i=e.clone().add(o+1,"months"),n=(t-r)/(i-r)),-(o+n)}function u(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&12>t&&(t+=12),n||12!==t||(t=0),t):t}function d(){}function h(e,t){t!==!1&&P(e),m(this,e),this._d=new Date(+e._d),wi===!1&&(wi=!0,_t.updateOffset(this),wi=!1)}function f(e){var t=k(e),i=t.year||0,n=t.quarter||0,o=t.month||0,r=t.week||0,s=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*a,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=_t.localeData(),this._bubble()}function p(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t){var i,n,o;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Ft.length>0)for(i in Ft)n=Ft[i],o=t[n],"undefined"!=typeof o&&(e[n]=o);return e}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e,t,i){for(var n=""+Math.abs(e),o=e>=0;n.length<t;)n="0"+n;return(o?i?"+":"":"-")+n}function y(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function b(e,t){var i;return t=B(t,e),e.isBefore(t)?i=y(e,t):(i=y(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function w(e,t){return function(i,n){var o,r;return null===n||isNaN(+n)||(s(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),r=i,i=n,n=r),i="string"==typeof i?+i:i,o=_t.duration(i,n),_(this,o,e),this}}function _(e,t,i,n){var o=t._milliseconds,r=t._days,s=t._months;n=null==n?!0:n,o&&e._d.setTime(+e._d+o*i),r&&mt(e,"Date",pt(e,"Date")+r*i),s&&ft(e,pt(e,"Month")+s*i),n&&_t.updateOffset(e,r||s)}function C(e){return"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function T(e,t,i){var n,o=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(n=0;o>n;n++)(i&&e[n]!==t[n]||!i&&E(e[n])!==E(t[n]))&&s++;return s+r}function S(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=di[e]||hi[t]||t}return e}function k(e){var t,n,o={};for(n in e)i(e,n)&&(t=S(n),t&&(o[t]=e[n]));return o}function A(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}_t[t]=function(o,r){var s,a,l=_t._locale[t],c=[];if("number"==typeof o&&(r=o,o=e),a=function(e){var t=_t().utc().set(n,e);return l.call(_t._locale,t,o||"")},null!=r)return a(r);for(s=0;i>s;s++)c.push(a(s));return c}}function E(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function M(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function D(e,t,i){return ct(_t([e,11,31+t-i]),t,i).week}function R(e){return N(e)?366:365}function N(e){return e%4===0&&e%100!==0||e%400===0}function P(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Mt]<0||e._a[Mt]>11?Mt:e._a[Dt]<1||e._a[Dt]>M(e._a[Et],e._a[Mt])?Dt:e._a[Rt]<0||e._a[Rt]>24||24===e._a[Rt]&&(0!==e._a[Nt]||0!==e._a[Pt]||0!==e._a[Ot])?Rt:e._a[Nt]<0||e._a[Nt]>59?Nt:e._a[Pt]<0||e._a[Pt]>59?Pt:e._a[Ot]<0||e._a[Ot]>999?Ot:-1,e._pf._overflowDayOfYear&&(Et>t||t>Dt)&&(t=Dt),e._pf.overflow=t)}function O(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function H(e){return e?e.toLowerCase().replace("_","-"):e}function F(e){for(var t,i,n,o,r=0;r<e.length;){for(o=H(e[r]).split("-"),t=o.length,i=H(e[r+1]),i=i?i.split("-"):null;t>0;){if(n=I(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&T(o,i,!0)>=t-1)break;t--}r++}return null}function I(e){var t=null;if(!Ht[e]&&It)try{t=_t.locale(),require("./locale/"+e),_t.locale(t)}catch(i){}return Ht[e]}function B(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(_t.isMoment(e)||x(e)?+e:+_t(e))-+i,i._d.setTime(+i._d+n),_t.updateOffset(i,!1),i):_t(e).local()}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function L(e){var t,i,n=e.match(Wt);for(t=0,i=n.length;i>t;t++)n[t]=vi[n[t]]?vi[n[t]]:z(n[t]);return function(o){var r="";for(t=0;i>t;t++)r+=n[t]instanceof Function?n[t].call(o,e):n[t];return r}}function W(e,t){return e.isValid()?(t=V(t,e.localeData()),fi[t]||(fi[t]=L(t)),fi[t](e)):e.localeData().invalidDate()}function V(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(Vt.lastIndex=0;n>=0&&Vt.test(e);)e=e.replace(Vt,i),Vt.lastIndex=0,n-=1;return e}function j(e,t){var i,n=t._strict;switch(e){case"Q":return Zt;case"DDDD":return ti;case"YYYY":case"GGGG":case"gggg":return n?ii:Ut;case"Y":case"G":case"g":return oi;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?ni:$t;case"S":if(n)return Zt;case"SS":if(n)return ei;case"SSS":if(n)return ti;case"DDD":return qt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Gt;case"a":case"A":return t._locale._meridiemParse;case"x":return Jt;case"X":return Qt;case"Z":case"ZZ":return Kt;case"T":return Xt;case"SSSS":return Yt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?ei:jt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return jt;case"Do":return n?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return i=new RegExp(Q(J(e.replace("\\","")),"i"))}}function q(e){e=e||"";var t=e.match(Kt)||[],i=t[t.length-1]||[],n=(i+"").match(ci)||["-",0,0],o=+(60*n[1])+E(n[2]);return"+"===n[0]?o:-o}function U(e,t,i){var n,o=i._a;switch(e){case"Q":null!=t&&(o[Mt]=3*(E(t)-1));break;case"M":case"MM":null!=t&&(o[Mt]=E(t)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(t,e,i._strict),null!=n?o[Mt]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[Dt]=E(t));break;case"Do":null!=t&&(o[Dt]=E(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=E(t));break;case"YY":o[Et]=_t.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":o[Et]=E(t);break;case"a":case"A":i._meridiem=t;break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":o[Rt]=E(t);break;case"m":case"mm":o[Nt]=E(t);break;case"s":case"ss":o[Pt]=E(t);break;case"S":case"SS":case"SSS":case"SSSS":o[Ot]=E(1e3*("0."+t));break;case"x":i._d=new Date(E(t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=q(t);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(t),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=E(t));break;case"gg":case"GG":i._w=i._w||{},i._w[e]=_t.parseTwoDigitYear(t)}}function $(e){var i,n,o,r,s,a,l;i=e._w,null!=i.GG||null!=i.W||null!=i.E?(s=1,a=4,n=t(i.GG,e._a[Et],ct(_t(),1,4).year),o=t(i.W,1),r=t(i.E,1)):(s=e._locale._week.dow,a=e._locale._week.doy,n=t(i.gg,e._a[Et],ct(_t(),s,a).year),o=t(i.w,1),null!=i.d?(r=i.d,s>r&&++o):r=null!=i.e?i.e+s:s),l=ut(n,o,r,a,s),e._a[Et]=l.year,e._dayOfYear=l.dayOfYear}function Y(e){var i,n,o,r,s=[];if(!e._d){for(o=K(e),e._w&&null==e._a[Dt]&&null==e._a[Mt]&&$(e),e._dayOfYear&&(r=t(e._a[Et],o[Et]),e._dayOfYear>R(r)&&(e._pf._overflowDayOfYear=!0),n=rt(r,0,e._dayOfYear),e._a[Mt]=n.getUTCMonth(),e._a[Dt]=n.getUTCDate()),i=0;3>i&&null==e._a[i];++i)e._a[i]=s[i]=o[i];for(;7>i;i++)e._a[i]=s[i]=null==e._a[i]?2===i?1:0:e._a[i];24===e._a[Rt]&&0===e._a[Nt]&&0===e._a[Pt]&&0===e._a[Ot]&&(e._nextDay=!0,e._a[Rt]=0),e._d=(e._useUTC?rt:ot).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Rt]=24)}}function G(e){var t;e._d||(t=k(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],Y(e))}function K(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function X(t){if(t._f===_t.ISO_8601)return void et(t);t._a=[],t._pf.empty=!0;var i,n,o,r,s,a=""+t._i,l=a.length,c=0;for(o=V(t._f,t._locale).match(Wt)||[],i=0;i<o.length;i++)r=o[i],n=(a.match(j(r,t))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&t._pf.unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),c+=n.length),vi[r]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(r),U(r,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=l-c,a.length>0&&t._pf.unusedInput.push(a),t._pf.bigHour===!0&&t._a[Rt]<=12&&(t._pf.bigHour=e),t._a[Rt]=u(t._locale,t._a[Rt],t._meridiem),Y(t),P(t)}function J(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o})}function Q(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(e){var t,i,o,r,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(r=0;r<e._f.length;r++)s=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=n(),t._f=e._f[r],X(t),O(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==o||o>s)&&(o=s,i=t));p(e,i||t)}function et(e){var t,i,n=e._i,o=ri.exec(n);if(o){for(e._pf.iso=!0,t=0,i=ai.length;i>t;t++)if(ai[t][1].exec(n)){e._f=ai[t][0]+(o[6]||" ");break}for(t=0,i=li.length;i>t;t++)if(li[t][1].exec(n)){e._f+=li[t][0];break}n.match(Kt)&&(e._f+="Z"),X(e)}else e._isValid=!1}function tt(e){et(e),e._isValid===!1&&(delete e._isValid,_t.createFromInputFallback(e))}function it(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function nt(t){var i,n=t._i;n===e?t._d=new Date:x(n)?t._d=new Date(+n):null!==(i=Bt.exec(n))?t._d=new Date(+i[1]):"string"==typeof n?tt(t):C(n)?(t._a=it(n.slice(0),function(e){return parseInt(e,10)}),Y(t)):"object"==typeof n?G(t):"number"==typeof n?t._d=new Date(n):_t.createFromInputFallback(t)}function ot(e,t,i,n,o,r,s){var a=new Date(e,t,i,n,o,r,s);return 1970>e&&a.setFullYear(e),a}function rt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function st(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function at(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}function lt(e,t,i){var n=_t.duration(e).abs(),o=kt(n.as("s")),r=kt(n.as("m")),s=kt(n.as("h")),a=kt(n.as("d")),l=kt(n.as("M")),c=kt(n.as("y")),u=o<pi.s&&["s",o]||1===r&&["m"]||r<pi.m&&["mm",r]||1===s&&["h"]||s<pi.h&&["hh",s]||1===a&&["d"]||a<pi.d&&["dd",a]||1===l&&["M"]||l<pi.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=i,at.apply({},u)}function ct(e,t,i){var n,o=i-t,r=i-e.day();return r>o&&(r-=7),o-7>r&&(r+=7),n=_t(e).add(r,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ut(e,t,i,n,o){var r,s,a=rt(e,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:o,r=o-a+(a>n?7:0)-(o>a?7:0),s=7*(t-1)+(i-o)+r+1,{year:s>0?e:e-1,dayOfYear:s>0?s:R(e-1)+s}}function dt(t){var i,n=t._i,o=t._f;return t._locale=t._locale||_t.localeData(t._l),null===n||o===e&&""===n?_t.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),_t.isMoment(n)?new h(n,!0):(o?C(o)?Z(t):X(t):nt(t),i=new h(t),i._nextDay&&(i.add(1,"d"),i._nextDay=e),i))}function ht(e,t){var i,n;if(1===t.length&&C(t[0])&&(t=t[0]),!t.length)return _t();for(i=t[0],n=1;n<t.length;++n)t[n][e](i)&&(i=t[n]);return i}function ft(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),M(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function pt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function mt(e,t,i){return"Month"===t?ft(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function gt(e,t){return function(i){return null!=i?(mt(this,e,i),_t.updateOffset(this,t),this):pt(this,e)}}function vt(e){return 400*e/146097}function yt(e){return 146097*e/400}function bt(e){_t.duration.fn[e]=function(){return this._data[e]}}function wt(e){"undefined"==typeof ender&&(Ct=St.moment,St.moment=e?r("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",_t):_t)}for(var _t,Ct,xt,Tt="2.9.0",St="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,kt=Math.round,At=Object.prototype.hasOwnProperty,Et=0,Mt=1,Dt=2,Rt=3,Nt=4,Pt=5,Ot=6,Ht={},Ft=[],It="undefined"!=typeof module&&module&&module.exports,Bt=/^\/?Date\((\-?\d+)/i,zt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Lt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Wt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Vt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,jt=/\d\d?/,qt=/\d{1,3}/,Ut=/\d{1,4}/,$t=/[+\-]?\d{1,6}/,Yt=/\d+/,Gt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Kt=/Z|[\+\-]\d\d:?\d\d/gi,Xt=/T/i,Jt=/[\+\-]?\d+/,Qt=/[\+\-]?\d+(\.\d{1,3})?/,Zt=/\d/,ei=/\d\d/,ti=/\d{3}/,ii=/\d{4}/,ni=/[+-]?\d{6}/,oi=/[+-]?\d+/,ri=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,si="YYYY-MM-DDTHH:mm:ssZ",ai=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],li=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ci=/([\+\-]|\d\d)/gi,ui=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),di={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},hi={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},fi={},pi={s:45,m:45,h:22,d:26,M:11},mi="DDD w W M D d".split(" "),gi="M D H h m s w W".split(" "),vi={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+v(Math.abs(e),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return E(this.milliseconds()/100)},SS:function(){return v(E(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+v(E(e/60),2)+":"+v(E(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+v(E(e/60),2)+v(E(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},yi={},bi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],wi=!1;mi.length;)xt=mi.pop(),vi[xt+"o"]=l(vi[xt],xt);for(;gi.length;)xt=gi.pop(),vi[xt+xt]=a(vi[xt],2);vi.DDDD=a(vi.DDD,3),p(d.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,i){var n,o,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=_t.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=_t([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,i){var n=this._calendar[e];return"function"==typeof n?n.apply(t,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(e,t,i,n):o.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ct(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),_t=function(t,i,o,r){var s;return"boolean"==typeof o&&(r=o,o=e),s={},s._isAMomentObject=!0,s._i=t,s._f=i,s._l=o,s._strict=r,s._isUTC=!1,s._pf=n(),dt(s)},_t.suppressDeprecationWarnings=!1,_t.createFromInputFallback=r("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),_t.min=function(){var e=[].slice.call(arguments,0);return ht("isBefore",e)},_t.max=function(){var e=[].slice.call(arguments,0);return ht("isAfter",e)},_t.utc=function(t,i,o,r){var s;return"boolean"==typeof o&&(r=o,o=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=o,s._i=t,s._f=i,s._strict=r,s._pf=n(),dt(s).utc()},_t.unix=function(e){return _t(1e3*e)},_t.duration=function(e,t){var n,o,r,s,a=e,l=null;return _t.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(l=zt.exec(e))?(n="-"===l[1]?-1:1,a={y:0,d:E(l[Dt])*n,h:E(l[Rt])*n,m:E(l[Nt])*n,s:E(l[Pt])*n,ms:E(l[Ot])*n}):(l=Lt.exec(e))?(n="-"===l[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:r(l[2]),M:r(l[3]),d:r(l[4]),h:r(l[5]),m:r(l[6]),s:r(l[7]),w:r(l[8])}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(s=b(_t(a.from),_t(a.to)),a={},a.ms=s.milliseconds,a.M=s.months),o=new f(a),_t.isDuration(e)&&i(e,"_locale")&&(o._locale=e._locale),o},_t.version=Tt,_t.defaultFormat=si,_t.ISO_8601=function(){},_t.momentProperties=Ft,_t.updateOffset=function(){},_t.relativeTimeThreshold=function(t,i){return pi[t]===e?!1:i===e?pi[t]:(pi[t]=i,!0)},_t.lang=r("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return _t.locale(e,t)}),_t.locale=function(e,t){var i;return e&&(i="undefined"!=typeof t?_t.defineLocale(e,t):_t.localeData(e),i&&(_t.duration._locale=_t._locale=i)),_t._locale._abbr},_t.defineLocale=function(e,t){return null!==t?(t.abbr=e,Ht[e]||(Ht[e]=new d),Ht[e].set(t),_t.locale(e),Ht[e]):(delete Ht[e],null)},_t.langData=r("moment.langData is deprecated. Use moment.localeData instead.",function(e){return _t.localeData(e)}),_t.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return _t._locale;if(!C(e)){if(t=I(e))return t;e=[e]}return F(e)},_t.isMoment=function(e){return e instanceof h||null!=e&&i(e,"_isAMomentObject")},_t.isDuration=function(e){return e instanceof f};for(xt=bi.length-1;xt>=0;--xt)A(bi[xt]);_t.normalizeUnits=function(e){return S(e)},_t.invalid=function(e){var t=_t.utc(0/0);return null!=e?p(t._pf,e):t._pf.userInvalidated=!0,t},_t.parseZone=function(){return _t.apply(null,arguments).parseZone()},_t.parseTwoDigitYear=function(e){return E(e)+(E(e)>68?1900:2e3)},_t.isDate=x,p(_t.fn=h.prototype,{clone:function(){return _t(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=_t(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():W(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return O(this)},isDSTShifted:function(){return this._a?this.isValid()&&T(this._a,(this._isUTC?_t.utc(this._a):_t(this._a)).toArray())>0:!1},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=W(this,e||_t.defaultFormat);return this.localeData().postformat(t)},add:w(1,"add"),subtract:w(-1,"subtract"),diff:function(e,t,i){var n,o,r=B(e,this),s=6e4*(r.utcOffset()-this.utcOffset());return t=S(t),"year"===t||"month"===t||"quarter"===t?(o=c(this,r),"quarter"===t?o/=3:"year"===t&&(o/=12)):(n=this-r,o="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-s)/864e5:"week"===t?(n-s)/6048e5:n),i?o:g(o)},from:function(e,t){return _t.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(_t(),e)},calendar:function(e){var t=e||_t(),i=B(t,this).startOf("day"),n=this.diff(i,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,_t(t)))},isLeapYear:function(){return N(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=st(e,this.localeData()),this.add(e-t,"d")):t},month:gt("Month",!0),startOf:function(e){switch(e=S(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=S(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var i;return t=S("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=_t.isMoment(e)?e:_t(e),+this>+e):(i=_t.isMoment(e)?+e:+_t(e),i<+this.clone().startOf(t))},isBefore:function(e,t){var i;return t=S("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=_t.isMoment(e)?e:_t(e),+e>+this):(i=_t.isMoment(e)?+e:+_t(e),+this.clone().endOf(t)<i)},isBetween:function(e,t,i){return this.isAfter(e,i)&&this.isBefore(t,i)},isSame:function(e,t){var i;return t=S(t||"millisecond"),"millisecond"===t?(e=_t.isMoment(e)?e:_t(e),+this===+e):(i=+_t(e),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))},min:r("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=_t.apply(null,arguments),this>e?this:e
}),max:r("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=_t.apply(null,arguments),e>this?this:e}),zone:r("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var i,n=this._offset||0;return null!=e?("string"==typeof e&&(e=q(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==e&&(!t||this._changeInProgress?_(this,_t.duration(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(q(this._i)),this},hasAlignedHourOffset:function(e){return e=e?_t(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return M(this.year(),this.month())},dayOfYear:function(e){var t=kt((_t(this).startOf("day")-_t(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ct(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ct(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ct(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return D(this.year(),e.dow,e.doy)},get:function(e){return e=S(e),this[e]()},set:function(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else e=S(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var i;return t===e?this._locale._abbr:(i=_t.localeData(t),null!=i&&(this._locale=i),this)},lang:r("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),_t.fn.millisecond=_t.fn.milliseconds=gt("Milliseconds",!1),_t.fn.second=_t.fn.seconds=gt("Seconds",!1),_t.fn.minute=_t.fn.minutes=gt("Minutes",!1),_t.fn.hour=_t.fn.hours=gt("Hours",!0),_t.fn.date=gt("Date",!0),_t.fn.dates=r("dates accessor is deprecated. Use date instead.",gt("Date",!0)),_t.fn.year=gt("FullYear",!0),_t.fn.years=r("years accessor is deprecated. Use year instead.",gt("FullYear",!0)),_t.fn.days=_t.fn.day,_t.fn.months=_t.fn.month,_t.fn.weeks=_t.fn.week,_t.fn.isoWeeks=_t.fn.isoWeek,_t.fn.quarters=_t.fn.quarter,_t.fn.toJSON=_t.fn.toISOString,_t.fn.isUTC=_t.fn.isUtc,p(_t.duration.fn=f.prototype,{_bubble:function(){var e,t,i,n=this._milliseconds,o=this._days,r=this._months,s=this._data,a=0;s.milliseconds=n%1e3,e=g(n/1e3),s.seconds=e%60,t=g(e/60),s.minutes=t%60,i=g(t/60),s.hours=i%24,o+=g(i/24),a=g(vt(o)),o-=g(yt(a)),r+=g(o/30),o%=30,a+=g(r/12),r%=12,s.days=o,s.months=r,s.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*E(this._months/12)},humanize:function(e){var t=lt(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var i=_t.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=_t.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=S(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,i;if(e=S(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,i=this._months+12*vt(t),"month"===e?i:i/12;switch(t=this._days+Math.round(yt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:_t.fn.lang,locale:_t.fn.locale,toIsoString:r("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||o||r?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(r?r+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),_t.duration.fn.toString=_t.duration.fn.toISOString;for(xt in ui)i(ui,xt)&&bt(xt.toLowerCase());_t.duration.fn.asMilliseconds=function(){return this.as("ms")},_t.duration.fn.asSeconds=function(){return this.as("s")},_t.duration.fn.asMinutes=function(){return this.as("m")},_t.duration.fn.asHours=function(){return this.as("h")},_t.duration.fn.asDays=function(){return this.as("d")},_t.duration.fn.asWeeks=function(){return this.as("weeks")},_t.duration.fn.asMonths=function(){return this.as("M")},_t.duration.fn.asYears=function(){return this.as("y")},_t.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===E(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),It?module.exports=_t:"function"==typeof define&&define.amd?(define(function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(St.moment=Ct),_t}),wt(!0)):wt()}.call(this),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["moment"],t):"object"==typeof exports?module.exports=t(require("moment")):t(e.moment)}(this,function(e){"use strict";function t(e){return e>96?e-87:e>64?e-29:e-48}function i(e){var i,n=0,o=e.split("."),r=o[0],s=o[1]||"",a=1,l=0,c=1;for(45===e.charCodeAt(0)&&(n=1,c=-1),n;n<r.length;n++)i=t(r.charCodeAt(n)),l=60*l+i;for(n=0;n<s.length;n++)a/=60,i=t(s.charCodeAt(n)),l+=i*a;return l*c}function n(e){for(var t=0;t<e.length;t++)e[t]=i(e[t])}function o(e,t){for(var i=0;t>i;i++)e[i]=Math.round((e[i-1]||0)+6e4*e[i]);e[t-1]=1/0}function r(e,t){var i,n=[];for(i=0;i<t.length;i++)n[i]=e[t[i]];return n}function s(e){var t=e.split("|"),i=t[2].split(" "),s=t[3].split(""),a=t[4].split(" ");return n(i),n(s),n(a),o(a,s.length),{name:t[0],abbrs:r(t[1].split(" "),s),offsets:r(i,s),untils:a}}function a(e){e&&this._set(s(e))}function l(e){return(e||"").toLowerCase().replace(/\//g,"_")}function c(e){var t,i,n;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)i=new a(e[t]),n=l(i.name),T[n]=i,f(n)}function u(e){return T[l(e)]||null}function d(){var e,t=[];for(e in T)T.hasOwnProperty(e)&&T[e]&&t.push(T[e].name);return t.sort()}function h(e){var t,i;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)i=e[t].split("|"),m(i[0],i[1]),m(i[1],i[0])}function f(e){if(S[e]){var t,i=T[e],n=S[e];for(t=0;t<n.length;t++)p(i,n[t]);S[e]=null}}function p(e,t){var i=T[l(t)]=new a;i._set(e),i.name=t}function m(e,t){e=l(e),T[e]?p(T[e],t):(S[e]=S[e]||[],S[e].push(t))}function g(e){c(e.zones),h(e.links),w.dataVersion=e.version}function v(e){return v.didShowError||(v.didShowError=!0,b("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!u(e)}function y(e){return!(!e._a||void 0!==e._tzm)}function b(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function w(t){var i=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],o=u(n),r=e.utc.apply(null,i);return o&&!e.isMoment(t)&&y(r)&&r.add(o.parse(r),"minutes"),r.tz(n),r}function _(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function C(e){return function(){return this._z=null,e.apply(this,arguments)}}if(void 0!==e.tz)return e;var x="0.3.0",T={},S={},k=e.version.split("."),A=+k[0],E=+k[1];(2>A||2===A&&6>E)&&b("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),a.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets},_index:function(e){var t,i=+e,n=this.untils;for(t=0;t<n.length;t++)if(i<n[t])return t},parse:function(e){var t,i,n,o,r=+e,s=this.offsets,a=this.untils,l=a.length-1;for(o=0;l>o;o++)if(t=s[o],i=s[o+1],n=s[o?o-1:o],i>t&&w.moveAmbiguousForward?t=i:t>n&&w.moveInvalidForward&&(t=n),r<a[o]-6e4*t)return s[o];return s[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},w.version=x,w.dataVersion="",w._zones=T,w._links=S,w.add=c,w.link=h,w.load=g,w.zone=u,w.zoneExists=v,w.names=d,w.Zone=a,w.unpack=s,w.unpackBase60=i,w.needsOffset=y,w.moveInvalidForward=!0,w.moveAmbiguousForward=!1;var M=e.fn;e.tz=w,e.defaultZone=null,e.updateOffset=function(t,i){var n;void 0===t._z&&(t._z=e.defaultZone),t._z&&(n=t._z.offset(t),Math.abs(n)<16&&(n/=60),void 0!==t.utcOffset?t.utcOffset(-n,i):t.zone(n,i))},M.tz=function(t){return t?(this._z=u(t),this._z?e.updateOffset(this):b("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},M.zoneName=_(M.zoneName),M.zoneAbbr=_(M.zoneAbbr),M.utc=C(M.utc),e.tz.setDefault=function(t){return(2>A||2===A&&9>E)&&b("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?u(t):null,e};var D=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(D)?(D.push("_z"),D.push("_a")):D&&(D._z=null),g({version:"2014j",zones:["Africa/Abidjan|GMT|0|0|","Africa/Addis_Ababa|EAT|-30|0|","Africa/Algiers|CET|-10|0|","Africa/Bangui|WAT|-10|0|","Africa/Blantyre|CAT|-20|0|","Africa/Cairo|EET EEST|-20 -30|0101010101010101010101010101010|1Cby0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0 1o10 jz0 gN0 pb0 1qN0 dX0 e10 xz0 1o10 bb0 e10 An0 1o10 5z0 e10 FX0 1o10 2L0 e10 IL0 1C10 Lz0","Africa/Casablanca|WET WEST|0 -10|01010101010101010101010101010101010101010|1Cco0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0","Africa/Ceuta|CET CEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Africa/Johannesburg|SAST|-20|0|","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1C1c0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0","America/Adak|HAST HADT|a0 90|01010101010101010101010|1BR00 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1BQX0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anguilla|AST|40|0|","America/Araguaina|BRT BRST|30 20|010|1IdD0 Lz0","America/Argentina/Buenos_Aires|ART|30|0|","America/Asuncion|PYST PYT|30 40|01010101010101010101010|1C430 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0","America/Atikokan|EST|50|0|","America/Bahia|BRT BRST|30 20|010|1FJf0 Rb0","America/Bahia_Banderas|MST CDT CST|70 50 60|01212121212121212121212|1C1l0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Belem|BRT|30|0|","America/Belize|CST|60|0|","America/Boa_Vista|AMT|40|0|","America/Bogota|COT|50|0|","America/Boise|MST MDT|70 60|01010101010101010101010|1BQV0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Campo_Grande|AMST AMT|30 40|01010101010101010101010|1BIr0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Cancun|CST CDT|60 50|01010101010101010101010|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Caracas|VET|4u|0|","America/Cayenne|GFT|30|0|","America/Chicago|CST CDT|60 50|01010101010101010101010|1BQU0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1C1l0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Creston|MST|70|0|","America/Dawson|PST PDT|80 70|01010101010101010101010|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Detroit|EST EDT|50 40|01010101010101010101010|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Eirunepe|AMT ACT|40 50|01|1KLE0","America/Glace_Bay|AST ADT|40 30|01010101010101010101010|1BQS0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Godthab|WGT WGST|30 20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Goose_Bay|AST ADT|40 30|01010101010101010101010|1BQQ1 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Grand_Turk|EST EDT AST|50 40 40|0101010101012|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Guayaquil|ECT|50|0|","America/Guyana|GYT|40|0|","America/Havana|CST CDT|50 40|01010101010101010101010|1BQR0 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0","America/La_Paz|BOT|40|0|","America/Lima|PET|50|0|","America/Metlakatla|PST|80|0|","America/Miquelon|PMST PMDT|30 20|01010101010101010101010|1BQR0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Montevideo|UYST UYT|20 30|01010101010101010101010|1BQQ0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10","America/Noronha|FNT|20|0|","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|01232323232323232323232|1BQV0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|SRT|30|0|","America/Port-au-Prince|EST EDT|50 40|0101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Santa_Isabel|PST PDT|80 70|01010101010101010101010|1C1m0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Santiago|CLST CLT|30 40|01010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0","America/Sao_Paulo|BRST BRT|20 30|01010101010101010101010|1BIq0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Scoresbysund|EGT EGST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1BQPv 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Antarctica/Casey|CAST AWST|-b0 -80|0101|1BN30 40P0 KL0","Antarctica/Davis|DAVT DAVT|-50 -70|0101|1BPw0 3Wn0 KN0","Antarctica/DumontDUrville|DDUT|-a0|0|","Antarctica/Macquarie|AEDT MIST|-b0 -b0|01|1C140","Antarctica/Mawson|MAWT|-50|0|","Antarctica/McMurdo|NZDT NZST|-d0 -c0|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Antarctica/Rothera|ROTT|30|0|","Antarctica/Syowa|SYOT|-30|0|","Antarctica/Troll|UTC CEST|0 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Antarctica/Vostok|VOST|-60|0|","Asia/Aden|AST|-30|0|","Asia/Almaty|ALMT|-60|0|","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1BVy0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Anadyr|ANAT ANAST ANAT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Aqtau|AQTT|-50|0|","Asia/Ashgabat|TMT|-50|0|","Asia/Baku|AZT AZST|-40 -50|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Bangkok|ICT|-70|0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1BWm0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0","Asia/Bishkek|KGT|-60|0|","Asia/Brunei|BNT|-80|0|","Asia/Calcutta|IST|-5u|0|","Asia/Chita|YAKT YAKST YAKT IRKT|-90 -a0 -a0 -80|01023|1BWh0 1qM0 WM0 8Hz0","Asia/Choibalsan|CHOT|-80|0|","Asia/Chongqing|CST|-80|0|","Asia/Dacca|BDT|-60|0|","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1C0m0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0","Asia/Dili|TLT|-90|0|","Asia/Dubai|GST|-40|0|","Asia/Dushanbe|TJT|-50|0|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1BVW1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0","Asia/Hebron|EET EEST|-20 -30|0101010101010101010101010|1BVy0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0","Asia/Hong_Kong|HKT|-80|0|","Asia/Hovd|HOVT|-70|0|","Asia/Irkutsk|IRKT IRKST IRKT|-80 -90 -90|01020|1BWi0 1qM0 WM0 8Hz0","Asia/Istanbul|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Jakarta|WIB|-70|0|","Asia/Jayapura|WIT|-90|0|","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1BVA0 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0","Asia/Kabul|AFT|-4u|0|","Asia/Kamchatka|PETT PETST PETT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Karachi|PKT|-50|0|","Asia/Kashgar|XJT|-60|0|","Asia/Kathmandu|NPT|-5J|0|","Asia/Khandyga|VLAT VLAST VLAT YAKT YAKT|-a0 -b0 -b0 -a0 -90|010234|1BWg0 1qM0 WM0 17V0 7zD0","Asia/Krasnoyarsk|KRAT KRAST KRAT|-70 -80 -80|01020|1BWj0 1qM0 WM0 8Hz0","Asia/Kuala_Lumpur|MYT|-80|0|","Asia/Magadan|MAGT MAGST MAGT MAGT|-b0 -c0 -c0 -a0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Makassar|WITA|-80|0|","Asia/Manila|PHT|-80|0|","Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Novokuznetsk|KRAT NOVST NOVT NOVT|-70 -70 -60 -70|01230|1BWj0 1qN0 WM0 8Hz0","Asia/Novosibirsk|NOVT NOVST NOVT|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Omsk|OMST OMSST OMST|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Oral|ORAT|-50|0|","Asia/Pyongyang|KST|-90|0|","Asia/Qyzylorda|QYZT|-60|0|","Asia/Rangoon|MMT|-6u|0|","Asia/Sakhalin|SAKT SAKST SAKT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Samarkand|UZT|-50|0|","Asia/Singapore|SGT|-80|0|","Asia/Srednekolymsk|MAGT MAGST MAGT SRET|-b0 -c0 -c0 -b0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Tbilisi|GET|-40|0|","Asia/Tehran|IRST IRDT|-3u -4u|01010101010101010101010|1BTUu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0","Asia/Thimbu|BTT|-60|0|","Asia/Tokyo|JST|-90|0|","Asia/Ulaanbaatar|ULAT|-80|0|","Asia/Ust-Nera|MAGT MAGST MAGT VLAT VLAT|-b0 -c0 -c0 -b0 -a0|010234|1BWf0 1qM0 WM0 17V0 7zD0","Asia/Vladivostok|VLAT VLAST VLAT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Yakutsk|YAKT YAKST YAKT|-90 -a0 -a0|01020|1BWh0 1qM0 WM0 8Hz0","Asia/Yekaterinburg|YEKT YEKST YEKT|-50 -60 -60|01020|1BWl0 1qM0 WM0 8Hz0","Asia/Yerevan|AMT AMST|-40 -50|01010|1BWm0 1qM0 WM0 1qM0","Atlantic/Azores|AZOT AZOST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Canary|WET WEST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Cape_Verde|CVT|10|0|","Atlantic/South_Georgia|GST|20|0|","Atlantic/Stanley|FKST FKT|30 40|010|1C6R0 U10","Australia/ACT|AEDT AEST|-b0 -a0|01010101010101010101010|1C140 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1C14u 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Brisbane|AEST|-a0|0|","Australia/Darwin|ACST|-9u|0|","Australia/Eucla|ACWST|-8J|0|","Australia/LHI|LHDT LHST|-b0 -au|01010101010101010101010|1C130 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu","Australia/Perth|AWST|-80|0|","Chile/EasterIsland|EASST EAST|50 60|01010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0","Eire|GMT IST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Belfast|GMT BST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Kaliningrad|EET EEST FET|-20 -30 -30|01020|1BWo0 1qM0 WM0 8Hz0","Europe/Minsk|EET EEST FET MSK|-20 -30 -30 -30|01023|1BWo0 1qM0 WM0 8Hy0","Europe/Moscow|MSK MSD MSK|-30 -40 -40|01020|1BWn0 1qM0 WM0 8Hz0","Europe/Samara|SAMT SAMST SAMT|-40 -40 -30|0120|1BWm0 1qN0 WM0","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|01010101023|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0","Europe/Volgograd|MSK MSK|-30 -40|01010|1BWn0 1qM0 WM0 8Hz0","HST|HST|a0|0|","Indian/Chagos|IOT|-60|0|","Indian/Christmas|CXT|-70|0|","Indian/Cocos|CCT|-6u|0|","Indian/Kerguelen|TFT|-50|0|","Indian/Mahe|SCT|-40|0|","Indian/Maldives|MVT|-50|0|","Indian/Mauritius|MUT|-40|0|","Indian/Reunion|RET|-40|0|","Kwajalein|MHT|-c0|0|","MET|MET MEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","NZ-CHAT|CHADT CHAST|-dJ -cJ|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Apia|SST SDT WSDT WSST|b0 a0 -e0 -d0|01012323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Bougainville|PGT BST|-a0 -b0|01|1NwE0","Pacific/Chuuk|CHUT|-a0|0|","Pacific/Efate|VUT|-b0|0|","Pacific/Enderbury|PHOT|-d0|0|","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0","Pacific/Fiji|FJST FJT|-d0 -c0|01010101010101010101010|1BWe0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 xA0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0","Pacific/Funafuti|TVT|-c0|0|","Pacific/Galapagos|GALT|60|0|","Pacific/Gambier|GAMT|90|0|","Pacific/Guadalcanal|SBT|-b0|0|","Pacific/Guam|ChST|-a0|0|","Pacific/Kiritimati|LINT|-e0|0|","Pacific/Kosrae|KOST|-b0|0|","Pacific/Marquesas|MART|9u|0|","Pacific/Midway|SST|b0|0|","Pacific/Nauru|NRT|-c0|0|","Pacific/Niue|NUT|b0|0|","Pacific/Norfolk|NFT|-bu|0|","Pacific/Noumea|NCT|-b0|0|","Pacific/Palau|PWT|-90|0|","Pacific/Pohnpei|PONT|-b0|0|","Pacific/Port_Moresby|PGT|-a0|0|","Pacific/Rarotonga|CKT|a0|0|","Pacific/Tahiti|TAHT|a0|0|","Pacific/Tarawa|GILT|-c0|0|","Pacific/Tongatapu|TOT|-d0|0|","Pacific/Wake|WAKT|-c0|0|","Pacific/Wallis|WFT|-c0|0|"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Addis_Ababa|Africa/Asmara","Africa/Addis_Ababa|Africa/Asmera","Africa/Addis_Ababa|Africa/Dar_es_Salaam","Africa/Addis_Ababa|Africa/Djibouti","Africa/Addis_Ababa|Africa/Juba","Africa/Addis_Ababa|Africa/Kampala","Africa/Addis_Ababa|Africa/Khartoum","Africa/Addis_Ababa|Africa/Mogadishu","Africa/Addis_Ababa|Africa/Nairobi","Africa/Addis_Ababa|Indian/Antananarivo","Africa/Addis_Ababa|Indian/Comoro","Africa/Addis_Ababa|Indian/Mayotte","Africa/Algiers|Africa/Tunis","Africa/Bangui|Africa/Brazzaville","Africa/Bangui|Africa/Douala","Africa/Bangui|Africa/Kinshasa","Africa/Bangui|Africa/Lagos","Africa/Bangui|Africa/Libreville","Africa/Bangui|Africa/Luanda","Africa/Bangui|Africa/Malabo","Africa/Bangui|Africa/Ndjamena","Africa/Bangui|Africa/Niamey","Africa/Bangui|Africa/Porto-Novo","Africa/Blantyre|Africa/Bujumbura","Africa/Blantyre|Africa/Gaborone","Africa/Blantyre|Africa/Harare","Africa/Blantyre|Africa/Kigali","Africa/Blantyre|Africa/Lubumbashi","Africa/Blantyre|Africa/Lusaka","Africa/Blantyre|Africa/Maputo","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Ceuta|Arctic/Longyearbyen","Africa/Ceuta|Atlantic/Jan_Mayen","Africa/Ceuta|CET","Africa/Ceuta|Europe/Amsterdam","Africa/Ceuta|Europe/Andorra","Africa/Ceuta|Europe/Belgrade","Africa/Ceuta|Europe/Berlin","Africa/Ceuta|Europe/Bratislava","Africa/Ceuta|Europe/Brussels","Africa/Ceuta|Europe/Budapest","Africa/Ceuta|Europe/Busingen","Africa/Ceuta|Europe/Copenhagen","Africa/Ceuta|Europe/Gibraltar","Africa/Ceuta|Europe/Ljubljana","Africa/Ceuta|Europe/Luxembourg","Africa/Ceuta|Europe/Madrid","Africa/Ceuta|Europe/Malta","Africa/Ceuta|Europe/Monaco","Africa/Ceuta|Europe/Oslo","Africa/Ceuta|Europe/Paris","Africa/Ceuta|Europe/Podgorica","Africa/Ceuta|Europe/Prague","Africa/Ceuta|Europe/Rome","Africa/Ceuta|Europe/San_Marino","Africa/Ceuta|Europe/Sarajevo","Africa/Ceuta|Europe/Skopje","Africa/Ceuta|Europe/Stockholm","Africa/Ceuta|Europe/Tirane","Africa/Ceuta|Europe/Vaduz","Africa/Ceuta|Europe/Vatican","Africa/Ceuta|Europe/Vienna","Africa/Ceuta|Europe/Warsaw","Africa/Ceuta|Europe/Zagreb","Africa/Ceuta|Europe/Zurich","Africa/Ceuta|Poland","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Anguilla|America/Antigua","America/Anguilla|America/Aruba","America/Anguilla|America/Barbados","America/Anguilla|America/Blanc-Sablon","America/Anguilla|America/Curacao","America/Anguilla|America/Dominica","America/Anguilla|America/Grenada","America/Anguilla|America/Guadeloupe","America/Anguilla|America/Kralendijk","America/Anguilla|America/Lower_Princes","America/Anguilla|America/Marigot","America/Anguilla|America/Martinique","America/Anguilla|America/Montserrat","America/Anguilla|America/Port_of_Spain","America/Anguilla|America/Puerto_Rico","America/Anguilla|America/Santo_Domingo","America/Anguilla|America/St_Barthelemy","America/Anguilla|America/St_Kitts","America/Anguilla|America/St_Lucia","America/Anguilla|America/St_Thomas","America/Anguilla|America/St_Vincent","America/Anguilla|America/Tortola","America/Anguilla|America/Virgin","America/Argentina/Buenos_Aires|America/Argentina/Catamarca","America/Argentina/Buenos_Aires|America/Argentina/ComodRivadavia","America/Argentina/Buenos_Aires|America/Argentina/Cordoba","America/Argentina/Buenos_Aires|America/Argentina/Jujuy","America/Argentina/Buenos_Aires|America/Argentina/La_Rioja","America/Argentina/Buenos_Aires|America/Argentina/Mendoza","America/Argentina/Buenos_Aires|America/Argentina/Rio_Gallegos","America/Argentina/Buenos_Aires|America/Argentina/Salta","America/Argentina/Buenos_Aires|America/Argentina/San_Juan","America/Argentina/Buenos_Aires|America/Argentina/San_Luis","America/Argentina/Buenos_Aires|America/Argentina/Tucuman","America/Argentina/Buenos_Aires|America/Argentina/Ushuaia","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Buenos_Aires|America/Catamarca","America/Argentina/Buenos_Aires|America/Cordoba","America/Argentina/Buenos_Aires|America/Jujuy","America/Argentina/Buenos_Aires|America/Mendoza","America/Argentina/Buenos_Aires|America/Rosario","America/Atikokan|America/Cayman","America/Atikokan|America/Coral_Harbour","America/Atikokan|America/Jamaica","America/Atikokan|America/Panama","America/Atikokan|EST","America/Atikokan|Jamaica","America/Belem|America/Fortaleza","America/Belem|America/Maceio","America/Belem|America/Recife","America/Belem|America/Santarem","America/Belize|America/Costa_Rica","America/Belize|America/El_Salvador","America/Belize|America/Guatemala","America/Belize|America/Managua","America/Belize|America/Regina","America/Belize|America/Swift_Current","America/Belize|America/Tegucigalpa","America/Belize|Canada/East-Saskatchewan","America/Belize|Canada/Saskatchewan","America/Boa_Vista|America/Manaus","America/Boa_Vista|America/Porto_Velho","America/Boa_Vista|Brazil/West","America/Boise|America/Cambridge_Bay","America/Boise|America/Denver","America/Boise|America/Edmonton","America/Boise|America/Inuvik","America/Boise|America/Ojinaga","America/Boise|America/Shiprock","America/Boise|America/Yellowknife","America/Boise|Canada/Mountain","America/Boise|MST7MDT","America/Boise|Navajo","America/Boise|US/Mountain","America/Campo_Grande|America/Cuiaba","America/Cancun|America/Merida","America/Cancun|America/Mexico_City","America/Cancun|America/Monterrey","America/Cancun|Mexico/General","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Creston|America/Dawson_Creek","America/Creston|America/Hermosillo","America/Creston|America/Phoenix","America/Creston|MST","America/Creston|US/Arizona","America/Dawson|America/Ensenada","America/Dawson|America/Los_Angeles","America/Dawson|America/Tijuana","America/Dawson|America/Vancouver","America/Dawson|America/Whitehorse","America/Dawson|Canada/Pacific","America/Dawson|Canada/Yukon","America/Dawson|Mexico/BajaNorte","America/Dawson|PST8PDT","America/Dawson|US/Pacific","America/Dawson|US/Pacific-New","America/Detroit|America/Fort_Wayne","America/Detroit|America/Indiana/Indianapolis","America/Detroit|America/Indiana/Marengo","America/Detroit|America/Indiana/Petersburg","America/Detroit|America/Indiana/Vevay","America/Detroit|America/Indiana/Vincennes","America/Detroit|America/Indiana/Winamac","America/Detroit|America/Indianapolis","America/Detroit|America/Iqaluit","America/Detroit|America/Kentucky/Louisville","America/Detroit|America/Kentucky/Monticello","America/Detroit|America/Louisville","America/Detroit|America/Montreal","America/Detroit|America/Nassau","America/Detroit|America/New_York","America/Detroit|America/Nipigon","America/Detroit|America/Pangnirtung","America/Detroit|America/Thunder_Bay","America/Detroit|America/Toronto","America/Detroit|Canada/Eastern","America/Detroit|EST5EDT","America/Detroit|US/East-Indiana","America/Detroit|US/Eastern","America/Detroit|US/Michigan","America/Eirunepe|America/Porto_Acre","America/Eirunepe|America/Rio_Branco","America/Eirunepe|Brazil/Acre","America/Glace_Bay|America/Halifax","America/Glace_Bay|America/Moncton","America/Glace_Bay|America/Thule","America/Glace_Bay|Atlantic/Bermuda","America/Glace_Bay|Canada/Atlantic","America/Havana|Cuba","America/Metlakatla|Pacific/Pitcairn","America/Noronha|Brazil/DeNoronha","America/Santiago|Antarctica/Palmer","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/McMurdo|Antarctica/South_Pole","Antarctica/McMurdo|NZ","Antarctica/McMurdo|Pacific/Auckland","Asia/Aden|Asia/Baghdad","Asia/Aden|Asia/Bahrain","Asia/Aden|Asia/Kuwait","Asia/Aden|Asia/Qatar","Asia/Aden|Asia/Riyadh","Asia/Aqtau|Asia/Aqtobe","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Calcutta|Asia/Colombo","Asia/Calcutta|Asia/Kolkata","Asia/Chongqing|Asia/Chungking","Asia/Chongqing|Asia/Harbin","Asia/Chongqing|Asia/Macao","Asia/Chongqing|Asia/Macau","Asia/Chongqing|Asia/Shanghai","Asia/Chongqing|Asia/Taipei","Asia/Chongqing|PRC","Asia/Chongqing|ROC","Asia/Dacca|Asia/Dhaka","Asia/Dubai|Asia/Muscat","Asia/Hong_Kong|Hongkong","Asia/Istanbul|Europe/Istanbul","Asia/Istanbul|Turkey","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kashgar|Asia/Urumqi","Asia/Kathmandu|Asia/Katmandu","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|EET","Asia/Nicosia|Europe/Athens","Asia/Nicosia|Europe/Bucharest","Asia/Nicosia|Europe/Chisinau","Asia/Nicosia|Europe/Helsinki","Asia/Nicosia|Europe/Kiev","Asia/Nicosia|Europe/Mariehamn","Asia/Nicosia|Europe/Nicosia","Asia/Nicosia|Europe/Riga","Asia/Nicosia|Europe/Sofia","Asia/Nicosia|Europe/Tallinn","Asia/Nicosia|Europe/Tiraspol","Asia/Nicosia|Europe/Uzhgorod","Asia/Nicosia|Europe/Vilnius","Asia/Nicosia|Europe/Zaporozhye","Asia/Pyongyang|Asia/Seoul","Asia/Pyongyang|ROK","Asia/Samarkand|Asia/Tashkent","Asia/Singapore|Singapore","Asia/Tehran|Iran","Asia/Thimbu|Asia/Thimphu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Atlantic/Canary|Atlantic/Faeroe","Atlantic/Canary|Atlantic/Faroe","Atlantic/Canary|Atlantic/Madeira","Atlantic/Canary|Europe/Lisbon","Atlantic/Canary|Portugal","Atlantic/Canary|WET","Australia/ACT|Australia/Canberra","Australia/ACT|Australia/Currie","Australia/ACT|Australia/Hobart","Australia/ACT|Australia/Melbourne","Australia/ACT|Australia/NSW","Australia/ACT|Australia/Sydney","Australia/ACT|Australia/Tasmania","Australia/ACT|Australia/Victoria","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/LHI|Australia/Lord_Howe","Australia/Perth|Australia/West","Chile/EasterIsland|Pacific/Easter","Eire|Europe/Dublin","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belfast|Europe/Guernsey","Europe/Belfast|Europe/Isle_of_Man","Europe/Belfast|Europe/Jersey","Europe/Belfast|Europe/London","Europe/Belfast|GB","Europe/Belfast|GB-Eire","Europe/Moscow|W-SU","HST|Pacific/Honolulu","HST|Pacific/Johnston","HST|US/Hawaii","Kwajalein|Pacific/Kwajalein","Kwajalein|Pacific/Majuro","NZ-CHAT|Pacific/Chatham","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Guam|Pacific/Saipan","Pacific/Midway|Pacific/Pago_Pago","Pacific/Midway|Pacific/Samoa","Pacific/Midway|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]}),e
}),/*!
 * jquery-timepicker v1.6.9 - A jQuery timepicker plugin inspired by Google Calendar. It supports both mouse and keyboard navigation.
 * Copyright (c) 2015 Jon Thornton - http://jonthornton.github.com/jquery-timepicker/
 * License: MIT
 */
function(e){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){var t=e[0];return t.offsetWidth>0&&t.offsetHeight>0}function i(t){if(t.minTime&&(t.minTime=b(t.minTime)),t.maxTime&&(t.maxTime=b(t.maxTime)),t.durationTime&&"function"!=typeof t.durationTime&&(t.durationTime=b(t.durationTime)),"now"==t.scrollDefault?t.scrollDefault=b(new Date):t.scrollDefault?t.scrollDefault=b(t.scrollDefault):t.minTime&&(t.scrollDefault=t.minTime),t.scrollDefault&&(t.scrollDefault=t.roundingFunction(t.scrollDefault,t)),"string"===e.type(t.timeFormat)&&t.timeFormat.match(/[gh]/)&&(t._twelveHourTime=!0),t.disableTimeRanges.length>0){for(var i in t.disableTimeRanges)t.disableTimeRanges[i]=[b(t.disableTimeRanges[i][0]),b(t.disableTimeRanges[i][1])];t.disableTimeRanges=t.disableTimeRanges.sort(function(e,t){return e[0]-t[0]});for(var i=t.disableTimeRanges.length-1;i>0;i--)t.disableTimeRanges[i][0]<=t.disableTimeRanges[i-1][1]&&(t.disableTimeRanges[i-1]=[Math.min(t.disableTimeRanges[i][0],t.disableTimeRanges[i-1][0]),Math.max(t.disableTimeRanges[i][1],t.disableTimeRanges[i-1][1])],t.disableTimeRanges.splice(i,1))}return t}function n(t){var i=t.data("timepicker-settings"),n=t.data("timepicker-list");if(n&&n.length&&(n.remove(),t.data("timepicker-list",!1)),i.useSelect){n=e("<select />",{"class":"ui-timepicker-select"});var s=n}else{n=e("<ul />",{"class":"ui-timepicker-list"});var s=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});s.css({display:"none",position:"absolute"}).append(n)}if(i.noneOption)if(i.noneOption===!0&&(i.noneOption=i.useSelect?"Time...":"None"),e.isArray(i.noneOption)){for(var a in i.noneOption)if(parseInt(a,10)==a){var c=o(i.noneOption[a],i.useSelect);n.append(c)}}else{var c=o(i.noneOption,i.useSelect);n.append(c)}if(i.className&&s.addClass(i.className),(null!==i.minTime||null!==i.durationTime)&&i.showDuration){{"function"==typeof i.step?"function":i.step}s.addClass("ui-timepicker-with-duration"),s.addClass("ui-timepicker-step-"+i.step)}var d=i.minTime;"function"==typeof i.durationTime?d=b(i.durationTime()):null!==i.durationTime&&(d=i.durationTime);var h=null!==i.minTime?i.minTime:0,p=null!==i.maxTime?i.maxTime:h+_-1;h>p&&(p+=_),p===_-1&&"string"===e.type(i.timeFormat)&&i.show2400&&(p=_);var m=i.disableTimeRanges,w=0,C=m.length,T=i.step;"function"!=typeof T&&(T=function(){return i.step});for(var a=h,S=0;p>=a;S++,a+=60*T(S)){var k=a,A=y(k,i);if(i.useSelect){var E=e("<option />",{value:A});E.text(A)}else{var E=e("<li />");E.data("time",86400>=k?k:k%86400),E.text(A)}if((null!==i.minTime||null!==i.durationTime)&&i.showDuration){var M=v(a-d,i.step);if(i.useSelect)E.text(E.text()+" ("+M+")");else{var D=e("<span />",{"class":"ui-timepicker-duration"});D.text(" ("+M+")"),E.append(D)}}C>w&&(k>=m[w][1]&&(w+=1),m[w]&&k>=m[w][0]&&k<m[w][1]&&(i.useSelect?E.prop("disabled",!0):E.addClass("ui-timepicker-disabled"))),n.append(E)}if(s.data("timepicker-input",t),t.data("timepicker-list",s),i.useSelect)t.val()&&n.val(r(b(t.val()),i)),n.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),n.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),n.on("change",function(){f(t,e(this).val(),"select")}),f(t,n.val(),"initial"),t.hide().after(n);else{var R=i.appendTo;"string"==typeof R?R=e(R):"function"==typeof R&&(R=R(t)),R.append(s),u(t,n),n.on("mousedown","li",function(){t.off("focus.timepicker"),t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack"),t.on("focus.timepicker",x.show)}),l(t)||t[0].focus(),n.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),g(t)&&(t.trigger("hideTimepicker"),n.on("mouseup.timepicker","li",function(){n.off("mouseup.timepicker"),s.hide()}))})}}function o(t,i){var n,o,r;return"object"==typeof t?(n=t.label,o=t.className,r=t.value):"string"==typeof t?n=t:e.error("Invalid noneOption value"),i?e("<option />",{value:r,"class":o,text:n}):e("<li />",{"class":o,text:n}).data("time",r)}function r(e,t){return e=t.roundingFunction(e,t),null!==e?y(e,t):void 0}function s(){return new Date(1970,1,1,0,0,0)}function a(t){var i=e(t.target),n=i.closest(".ui-timepicker-input");0===n.length&&0===i.closest(".ui-timepicker-wrapper").length&&(x.hide(),e(document).unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}function l(e){var t=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function c(t,i,n){if(!n&&0!==n)return!1;var o=t.data("timepicker-settings"),r=!1,n=o.roundingFunction(n,o);return i.find("li").each(function(t,i){var o=e(i);if("number"==typeof o.data("time"))return o.data("time")==n?(r=o,!1):void 0}),r}function u(e,t){t.find("li").removeClass("ui-timepicker-selected");var i=b(h(e),e.data("timepicker-settings"));if(null!==i){var n=c(e,t,i);if(n){var o=n.offset().top-t.offset().top;(o+n.outerHeight()>t.outerHeight()||0>o)&&t.scrollTop(t.scrollTop()+n.position().top-n.outerHeight()),n.addClass("ui-timepicker-selected")}}}function d(t,i){if(""!==this.value&&"timepicker"!=i){var n=e(this);if(!n.is(":focus")||t&&"change"==t.type){var o=n.data("timepicker-settings"),r=b(this.value,o);if(null===r)return void n.trigger("timeFormatError");var s=!1;null!==o.minTime&&r<o.minTime?s=!0:null!==o.maxTime&&r>o.maxTime&&(s=!0),e.each(o.disableTimeRanges,function(){return r>=this[0]&&r<this[1]?(s=!0,!1):void 0}),o.forceRoundTime&&(r=o.roundingFunction(r,o));var a=y(r,o);s?f(n,a,"error")&&n.trigger("timeRangeError"):f(n,a)}}}function h(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function f(e,t,i){if(e.is("input")){e.val(t);var n=e.data("timepicker-settings");n.useSelect&&"select"!=i&&"initial"!=i&&e.data("timepicker-list").val(r(b(t),n))}return e.data("ui-timepicker-value")!=t?(e.data("ui-timepicker-value",t),"select"==i?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=i&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function p(i){var n=e(this),o=n.data("timepicker-list");if(!o||!t(o)){if(40!=i.keyCode)return!0;x.show.call(n.get(0)),o=n.data("timepicker-list"),l(n)||n.focus()}switch(i.keyCode){case 13:return g(n)&&x.hide.apply(this),i.preventDefault(),!1;case 38:var r=o.find(".ui-timepicker-selected");return r.length?r.is(":first-child")||(r.removeClass("ui-timepicker-selected"),r.prev().addClass("ui-timepicker-selected"),r.prev().position().top<r.outerHeight()&&o.scrollTop(o.scrollTop()-r.outerHeight())):(o.find("li").each(function(t,i){return e(i).position().top>0?(r=e(i),!1):void 0}),r.addClass("ui-timepicker-selected")),!1;case 40:return r=o.find(".ui-timepicker-selected"),0===r.length?(o.find("li").each(function(t,i){return e(i).position().top>0?(r=e(i),!1):void 0}),r.addClass("ui-timepicker-selected")):r.is(":last-child")||(r.removeClass("ui-timepicker-selected"),r.next().addClass("ui-timepicker-selected"),r.next().position().top+2*r.outerHeight()>o.outerHeight()&&o.scrollTop(o.scrollTop()+r.outerHeight())),!1;case 27:o.find("li").removeClass("ui-timepicker-selected"),x.hide();break;case 9:x.hide();break;default:return!0}}function m(i){var n=e(this),o=n.data("timepicker-list");if(!o||!t(o))return!0;switch(i.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:n.data("timepicker-settings").typeaheadHighlight?u(n,o):o.hide()}}function g(e){var t=e.data("timepicker-settings"),i=e.data("timepicker-list"),n=null,o=i.find(".ui-timepicker-selected");return o.hasClass("ui-timepicker-disabled")?!1:(o.length&&(n=o.data("time")),null!==n&&("string"!=typeof n&&(n=y(n,t)),f(e,n,"select")),!0)}function v(e,t){e=Math.abs(e);var i,n,o=Math.round(e/60),r=[];return 60>o?r=[o,C.mins]:(i=Math.floor(o/60),n=o%60,30==t&&30==n&&(i+=C.decimal+5),r.push(i),r.push(1==i?C.hr:C.hrs),30!=t&&n&&(r.push(n),r.push(C.mins))),r.join(" ")}function y(t,i){if(null!==t){var n=new Date(w.valueOf()+1e3*t);if(!isNaN(n.getTime())){if("function"===e.type(i.timeFormat))return i.timeFormat(n);for(var o,r,s="",a=0;a<i.timeFormat.length;a++)switch(r=i.timeFormat.charAt(a)){case"a":s+=n.getHours()>11?C.pm:C.am;break;case"A":s+=n.getHours()>11?C.PM:C.AM;break;case"g":o=n.getHours()%12,s+=0===o?"12":o;break;case"G":o=n.getHours(),t===_&&(o=24),s+=o;break;case"h":o=n.getHours()%12,0!==o&&10>o&&(o="0"+o),s+=0===o?"12":o;break;case"H":o=n.getHours(),t===_&&(o=24),s+=o>9?o:"0"+o;break;case"i":var l=n.getMinutes();s+=l>9?l:"0"+l;break;case"s":t=n.getSeconds(),s+=t>9?t:"0"+t;break;case"\\":a++,s+=i.timeFormat.charAt(a);break;default:s+=r}return s}}}function b(e,t){if(""===e)return null;if(!e||e+0==e)return e;if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();e=e.toLowerCase().replace(/[\s\.]/g,""),("a"==e.slice(-1)||"p"==e.slice(-1))&&(e+="m");var i="("+C.am.replace(".","")+"|"+C.pm.replace(".","")+"|"+C.AM.replace(".","")+"|"+C.PM.replace(".","")+")?",n=new RegExp("^"+i+"([0-2]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+i+"$"),o=e.match(n);if(!o)return null;var r=parseInt(1*o[2],10),s=o[1]||o[5],a=r;if(12>=r&&s){var l=s==C.pm||s==C.PM;a=12==r?l?12:0:r+(l?12:0)}var c=1*o[3]||0,u=1*o[4]||0,d=3600*a+60*c+u;if(!s&&t&&t._twelveHourTime&&t.scrollDefault){var h=d-t.scrollDefault;0>h&&h>=_/-2&&(d=(d+_/2)%_)}return d}var w=s(),_=86400,C={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},x={init:function(t){return this.each(function(){var o=e(this),r=[];for(var s in e.fn.timepicker.defaults)o.data(s)&&(r[s]=o.data(s));var a=e.extend({},e.fn.timepicker.defaults,r,t);a.lang&&(C=e.extend(C,a.lang)),a=i(a),o.data("timepicker-settings",a),o.addClass("ui-timepicker-input"),a.useSelect?n(o):(o.prop("autocomplete","off"),o.on("click.timepicker focus.timepicker",x.show),o.on("change.timepicker",d),o.on("keydown.timepicker",p),o.on("keyup.timepicker",m),d.call(o.get(0)))})},show:function(i){var o=e(this),r=o.data("timepicker-settings");if(i){if(!r.showOnFocus)return!0;i.preventDefault()}if(r.useSelect)return void o.data("timepicker-list").focus();l(o)&&o.blur();var s=o.data("timepicker-list");if(!o.prop("readonly")&&(s&&0!==s.length&&"function"!=typeof r.durationTime||(n(o),s=o.data("timepicker-list")),!t(s))){o.data("ui-timepicker-value",o.val()),u(o,s),x.hide(),s.show();var d={};d.left=r.orientation.match(/r/)?o.offset().left+o.outerWidth()-s.outerWidth()+parseInt(s.css("marginLeft").replace("px",""),10):o.offset().left+parseInt(s.css("marginLeft").replace("px",""),10);var f;f=r.orientation.match(/t/)?"t":r.orientation.match(/b/)?"b":o.offset().top+o.outerHeight(!0)+s.outerHeight()>e(window).height()+e(window).scrollTop()?"t":"b","t"==f?(s.addClass("ui-timepicker-positioned-top"),d.top=o.offset().top-s.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10)):(s.removeClass("ui-timepicker-positioned-top"),d.top=o.offset().top+o.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10)),s.offset(d);var p=s.find(".ui-timepicker-selected");if(p.length||(h(o)?p=c(o,s,b(h(o))):r.scrollDefault&&(p=c(o,s,r.scrollDefault))),p&&p.length){var m=s.scrollTop()+p.position().top-p.outerHeight();s.scrollTop(m)}else s.scrollTop(0);return e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",a),e(window).on("resize.ui-timepicker",a),r.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",a),o.trigger("showTimepicker"),this}},hide:function(){var i=e(this),n=i.data("timepicker-settings");return n&&n.useSelect&&i.blur(),e(".ui-timepicker-wrapper").each(function(){var i=e(this);if(t(i)){var n=i.data("timepicker-input"),o=n.data("timepicker-settings");o&&o.selectOnBlur&&g(n),i.hide(),n.trigger("hideTimepicker")}}),this},option:function(t,o){return this.each(function(){var r=e(this),s=r.data("timepicker-settings"),a=r.data("timepicker-list");if("object"==typeof t)s=e.extend(s,t);else if("string"==typeof t&&"undefined"!=typeof o)s[t]=o;else if("string"==typeof t)return s[t];s=i(s),r.data("timepicker-settings",s),a&&(a.remove(),r.data("timepicker-list",!1)),s.useSelect&&n(r)})},getSecondsFromMidnight:function(){return b(h(this))},getTime:function(e){var t=this,i=h(t);if(!i)return null;var n=b(i);if(null===n)return null;e||(e=new Date);var o=new Date(e);return o.setHours(n/3600),o.setMinutes(n%3600/60),o.setSeconds(n%60),o.setMilliseconds(0),o},setTime:function(e){var t=this,i=t.data("timepicker-settings");if(i.forceRoundTime)var n=r(b(e),i);else var n=y(b(e),i);return f(t,n),t.data("timepicker-list")&&u(t,t.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var t=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),t.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};e.fn.timepicker=function(t){return this.length?x[t]?this.hasClass("ui-timepicker-input")?x[t].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.timepicker"):x.init.apply(this,arguments):this},e.fn.timepicker.defaults={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,showOnFocus:!0,timeFormat:"g:ia",scrollDefault:null,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,roundingFunction:function(e,t){if(null===e)return null;var i=e%(60*t.step);return i>=30*t.step?e+=60*t.step-i:e-=i,e},appendTo:"body",orientation:"l",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1,show2400:!1}}),/*!
Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com

Version 1.4.2
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011-2015 Harvest http://getharvest.com

MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
*/
function(){var e,t,i,n,o,r={}.hasOwnProperty,s=function(e,t){function i(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};n=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,n,o,r,s;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),title:e.title?e.title:void 0,children:0,disabled:e.disabled,classes:e.className}),r=e.childNodes,s=[],n=0,o=r.length;o>n;n++)i=r[n],s.push(this.add_option(i,t,e.disabled));return s},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,title:e.title?e.title:void 0,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t,group_label:null!=t?this.parsed[t].label:null,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(e){var t,i;return null==e||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(i,function(e){return t[e]||"&amp;"})):e},e}(),n.select_to_array=function(e){var t,i,o,r,s;for(i=new n,s=e.childNodes,o=0,r=s.length;r>o;o++)t=s[o],i.add_node(t);return i.parsed},t=function(){function e(t,i){this.form_field=t,this.options=null!=i?i:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.choice_label=function(e){return this.include_group_label_in_selected&&null!=e.group_label?"<b class='group-name'>"+e.group_label+"</b>"+e.html:e.html},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(e){var t,i,n,o,r;for(t="",r=this.results_data,n=0,o=r.length;o>n;n++)i=r[n],t+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=e?e.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(i)));return t},e.prototype.result_add_option=function(e){var t,i;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=document.createElement("li"),i.className=t.join(" "),i.style.cssText=e.style,i.setAttribute("data-option-array-index",e.array_index),i.innerHTML=e.search_text,e.title&&(i.title=e.title),this.outerHTML(i)):""},e.prototype.result_add_group=function(e){var t,i;return(e.search_match||e.group_match)&&e.active_options>0?(t=[],t.push("group-result"),e.classes&&t.push(e.classes),i=document.createElement("li"),i.className=t.join(" "),i.innerHTML=e.search_text,e.title&&(i.title=e.title),this.outerHTML(i)):""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.reset_single_select_options=function(){var e,t,i,n,o;for(n=this.results_data,o=[],t=0,i=n.length;i>t;t++)e=n[t],o.push(e.selected?e.selected=!1:void 0);return o},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,i,n,o,r,s,a,l,c,u,d;for(this.no_results_clear(),n=0,r=this.get_search_text(),e=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(e,"i"),i=this.get_search_regex(e),d=this.results_data,c=0,u=d.length;u>c;c++)t=d[c],t.search_match=!1,o=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(o=this.results_data[t.group_array_index],0===o.active_options&&o.search_match&&(n+=1),o.active_options+=1),t.search_text=t.group?t.label:t.html,(!t.group||this.group_search)&&(t.search_match=this.search_string_match(t.search_text,i),t.search_match&&!t.group&&(n+=1),t.search_match?(r.length&&(s=t.search_text.search(l),a=t.search_text.substr(0,s+r.length)+"</em>"+t.search_text.substr(s+r.length),t.search_text=a.substr(0,s)+"<em>"+a.substr(s)),null!=o&&(o.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),1>n&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.get_search_regex=function(e){var t;return t=this.search_contains?"":"^",new RegExp(t+e,"i")},e.prototype.search_string_match=function(e,t){var i,n,o,r;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(n=e.replace(/\[|\]/g,"").split(" "),n.length))for(o=0,r=n.length;r>o;o++)if(i=n[o],t.test(i))return!0},e.prototype.choices_count=function(){var e,t,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,t=0,i=n.length;i>t;t++)e=n[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){return this.touch_started?this.search_results_mouseup(e):void 0},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),e=jQuery,e.fn.extend({chosen:function(n){return t.browser_is_supported()?this.each(function(){var t,o;t=e(this),o=t.data("chosen"),"destroy"===n&&o instanceof i?o.destroy():o instanceof i||t.data("chosen",new i(this,n))}):this}}),i=function(t){function i(){return o=i.__super__.constructor.apply(this,arguments)}return s(i,t),i.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var t,i;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),i={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",i),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},i.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var e=this;return this.container.bind("touchstart.chosen",function(t){return e.container_mousedown(t),t.preventDefault()}),this.container.bind("touchend.chosen",function(t){return e.container_mouseup(t),t.preventDefault()}),this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},i.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},i.prototype.search_results_mousewheel=function(e){var t;return e.originalEvent&&(t=e.originalEvent.deltaY||-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.container.removeClass("chosen-with-dropup"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.test_dropup=function(){var t,i,n;return n=e(window).height(),t=this.container.offset().top+this.container.height()-e(window).scrollTop(),i=this.dropdown.height()+t,i>n?!0:!1},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.test_dropup()&&this.container.addClass("chosen-with-dropup"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(t){var i;return i=e(t.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(e){var t,i,n,o,r;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),o=n+r,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=o)return this.search_results.scrollTop(t-n>0?t-n:0);if(r>i)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.test_dropup()&&this.container.addClass("chosen-with-dropup"),this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(e){return this.search_results.html(e)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.container.removeClass("chosen-with-dropup"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},i.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},i.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(t){var i,n,o=this;return i=e("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(t)+"</span>"),t.disabled?i.addClass("search-choice-disabled"):(n=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),n.bind("click.chosen",function(e){return o.choice_destroy_link_click(e)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},i.prototype.choice_destroy=function(e){return this.result_deselect(e[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(e){var t,i;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),t.addClass("result-selected"),i=this.results_data[t[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(this.choice_label(i)),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.show_search_field_default(),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,e.preventDefault(),this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(e)},i.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return e("<div/>").text(e.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var e,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null!=e?this.result_do_highlight(e):void 0},i.prototype.no_results=function(t){var i;return i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(t),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:this.results_showing&&e.preventDefault();break;case 32:this.disable_search&&e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var t,i,n,o,r,s,a,l,c;if(this.is_multiple){for(n=0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",s=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=s.length;c>l;l++)o=s[l],r+=o+":"+this.search_field.css(o)+";";return t=e("<div />",{style:r}),t.text(this.search_field.val()),e("body").append(t),a=t.width()+25,t.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(t)}.call(this);var Yesware=Yesware||{};Yesware.Timezones=Yesware.Timezones||{},function(e){function t(e){var t="("+moment.tz(e).format("[GMT] Z")+") ";if(-1===e.indexOf("/"))return t+e;var i=e.split("/");return t+i.slice(1).reverse().join(", ").split("_").join(" ")}function i(){var e=[];for(var t in jstz.olson.timezones){var i=jstz.olson.timezones[t];e.push(i)}return e}function n(){function e(e,i){var n=(new Date).getTime(),o=moment.tz.zone(e).offset(n),r=moment.tz.zone(i).offset(n);if(o!=r)return r-o;var s=t(e),a=t(i);return s.localeCompare(a)}function n(e){return!e.match("^Etc/")||r.indexOf(e)>=0}for(var o=moment.tz.names(),r=i(),s=0;s<r.length;s++){var a=r[s];o.indexOf(a)<0&&(moment.tz.zone(a)?o.push(a):console.log("JSTZ Zone "+a+" does not exist in moment.js!"))}return o.filter(n).sort(e)}e.populateTimezones=function(e){$.each(n(),function(i,n){e.append('<option value="'+n+'">'+t(n)+"</option>")})}}(Yesware.Timezones),function(e){function t(e,t,i,n,o,r){var s=moment().tz(e);return s.year(t),s.month(i),s.date(n),s.hours(o),s.minutes(r),s.seconds(0),s.milliseconds(0),s}function i(e){var t;if(e._isAMomentObject&&(t=e),t||(t=e.datetime,"string"==typeof t&&(t=n(t,e.timezone))),!t)throw"ywDatetimePicker: Could not determine datetime from supplied parameters";return t}function n(e,t){if("tomorrow_morning"===e)return o(t);throw"Unrecognized datetime string: "+e}function o(e){return moment().tz(e).add(1,"days").hours(9).minute(0).second(0).millisecond(0)}var r=function(e,t){_.bindAll(this,"date","destroy"),this._$container=e,this._options=t,this.api={date:this.date,destroy:this.destroy},this.initialize()};!function(n){n.datePickerTemplate=function(){return'<div class="yw-datetime-controls"><div class="yw-datetime-date-label"></div><div class="yw-datetime-date-control"><input class="yw-datetime-date" type="text" /><span class="yw-input-decorator yw-icon-calendar"></span></div><div class="yw-datetime-time-label"></div><div class="yw-datetime-time-container"><div class="yw-datetime-time-control"><input class="yw-datetime-time" type="text" /><span class="yw-input-decorator yw-icon-clock"></span></div></div><div class="yw-datetime-zone-container"><button class="yw-datetime-zone-button">Time zone</button><div class="yw-datetime-zone-control"><select class="yw-datetime-zone"></select></div></div></div>'},n.initialize=function(){this._$container.html(this.datePickerTemplate()),this._$date=this._$container.find(".yw-datetime-date"),this._$time=this._$container.find(".yw-datetime-time"),this._$zone=this._$container.find(".yw-datetime-zone"),this._$zoneControl=this._$container.find(".yw-datetime-zone-control"),this._$zoneButton=this._$container.find(".yw-datetime-zone-button"),this._$timeContainer=this._$container.find(".yw-datetime-time-container"),this._$zoneContainer=this._$container.find(".yw-datetime-zone-container"),this.wireCheckInputText(),Yesware.Timezones.populateTimezones(this._$zone),this.wireDatepicker(),this.initTimepicker(),this.initZonepicker(),this.wireCheckTimeRange(),this.setDate({datetime:this._options.datetime,timezone:this._options.timezone})},n.initTimepicker=function(){this._options.hideTimepicker&&this._$timeContainer.hide(),this.wireTimepicker()},n.initZonepicker=function(){this._options.hideZonepicker&&this._$zoneContainer.hide(),this.wireZonepicker()},n.destroy=function(){this._$date.datepicker("destroy"),this._$time.timepicker("remove"),this._$zone.chosen("destroy"),this._$container.empty()},n.date=function(e){return"undefined"==typeof e?this.getDate():void this.setDate(e)},n.setCalendarRange=function(e,t){function i(e){return new Date(e.year(),e.month(),e.date())}var n=e._isAMomentObject?i(e):e,o=t._isAMomentObject?i(t):t;this._$date.datepicker("option",{minDate:n,maxDate:o})},n.wireCheckTimeRange=function(){var e=this,t=e._options.datetimeRange;t&&(e.setCalendarRange(e.minDate(),e.maxDate()),e._$date.on("change",function(){e.checkTimeRange()}),e._$time.on("change",function(){e.checkTimeRange()}))},n.checkTimeRange=function(){var t=this._options.datetimeRange;if(t){var i=this.getDate();i&&(i.isBefore(this.minDate())?(e(this.api).trigger("invalid_date:min",i),this.setDate(this.minDate())):i.isAfter(this.maxDate())&&(e(this.api).trigger("invalid_date:max",i),this.setDate(this.maxDate())))}},n.wireCheckInputText=function(){var t=this;this._options.showNowAsWords&&(this._options.hideZonepicker=!0,e(this.api).on("change",function(){t.checkInputText()}))},n.checkInputText=function(){var e=moment(),t=this.getDate();if(t){if(t.utcOffset()!==e.utcOffset())throw"ywDatetimePicker: showNowAsWords and alternate timezones are incompatible";t.isSame(e,"day")&&this._$date.val("Today"),(t.isBefore(e)||t.isSame(e,"minute"))&&this._$time.val("Now")}},n.minDate=function(){var e=this._options.datetimeRange;return e?_.result(e,"min"):null},n.maxDate=function(){var e=this._options.datetimeRange;return e?_.result(e,"max"):null},n.getDate=function(){var e=this._$zone.find("option:selected").val();if(!e)return null;var i=this._$date.datepicker("getDate");if(!i)return null;var n,o=i.getFullYear(),r=i.getMonth(),s=i.getDate();if(n="Now"===this._$time.val()?new Date:this._$time.timepicker("getTime"),!n)return null;var a=this._options.hideTimepicker?0:n.getMinutes(),l=this._options.hideTimepicker?0:n.getHours();return t(e,o,r,s,l,a)},n.setDate=function(t){var n=i(t),o=n.tz()||t.timezone||e.fn.ywDatetimePicker.defaults.timezone;this._$date.datepicker("setDate",new Date(n.format("YYYY"),n.format("MM")-1,n.format("DD"))),this._$time.timepicker("setTime",n.format("h:mm A")),this._$zone.chosen().val(o).trigger("chosen:updated"),e(this.api).trigger("change",this.getDate())
},n.wireTimepicker=function(){var t=this;this._$time.timepicker({className:"yw-timelist-base",appendTo:this._$container,typeaheadHighlight:!1}),this._$time.on("change",function(){e(t.api).trigger("change",t.getDate())})},n.wireZonepicker=function(){var t=this;this._$zone.chosen(),this._$zoneControl.hide(),this._$zoneButton.click(function(){t._$zoneControl.show(),t._$zoneButton.off("click"),t._$zoneButton.prop("disabled",!0),t._$zone.on("change",function(){e(t.api).trigger("change",t.getDate())})})},n.wireDatepicker=function(){var t=this;this._$date.datepicker({dateFormat:"mm/dd/yy",beforeShow:function(e,t){var i=t.dpDiv.parent();i.hasClass("yw-calendar-base")||t.dpDiv.wrap('<div class="yw-calendar-base"></div>')},onSelect:function(){t.checkTimeRange(),e(t.api).trigger("change",t.getDate())}})}}(r.prototype),e.fn.ywDatetimePicker=function(t){var i=e.extend(!0,{},e.fn.ywDatetimePicker.defaults,t),n=new r(this,i);return n.api},e.fn.ywDatetimePicker.defaults={datetime:"tomorrow_morning",timezone:jstz.determine().name()}}(jQuery),/*
 * qTip2 - Pretty powerful tooltips - v2.2.1
 * http://qtip2.com
 *
 * Copyright (c) 2014 
 * Released under the MIT licenses
 * http://jquery.org/license
 *
 * Date: Sat Sep 6 2014 06:25 EDT-0400
 * Plugins: tips viewport imagemap svg modal ie6
 * Styles: core basic css3
 */
function(e,t,i){!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):jQuery&&!jQuery.fn.qtip&&e(jQuery)}(function(n){"use strict";function o(e,t,i,o){this.id=i,this.target=e,this.tooltip=R,this.elements={target:e},this._id=q+"-"+i,this.timers={img:{}},this.options=t,this.plugins={},this.cache={event:{},target:n(),disabled:D,attr:o,onTooltip:D,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=D}function r(e){return e===R||"object"!==n.type(e)}function s(e){return!(n.isFunction(e)||e&&e.attr||e.length||"object"===n.type(e)&&(e.jquery||e.then))}function a(e){var t,i,o,a;return r(e)?D:(r(e.metadata)&&(e.metadata={type:e.metadata}),"content"in e&&(t=e.content,r(t)||t.jquery||t.done?t=e.content={text:i=s(t)?D:t}:i=t.text,"ajax"in t&&(o=t.ajax,a=o&&o.once!==D,delete t.ajax,t.text=function(e,t){var r=i||n(this).attr(t.options.content.attr)||"Loading...",s=n.ajax(n.extend({},o,{context:t})).then(o.success,R,o.error).then(function(e){return e&&a&&t.set("content.text",e),e},function(e,i,n){t.destroyed||0===e.status||t.set("content.text",i+": "+n)});return a?r:(t.set("content.text",r),s)}),"title"in t&&(n.isPlainObject(t.title)&&(t.button=t.title.button,t.title=t.title.text),s(t.title||D)&&(t.title=D))),"position"in e&&r(e.position)&&(e.position={my:e.position,at:e.position}),"show"in e&&r(e.show)&&(e.show=e.show.jquery?{target:e.show}:e.show===M?{ready:M}:{event:e.show}),"hide"in e&&r(e.hide)&&(e.hide=e.hide.jquery?{target:e.hide}:{event:e.hide}),"style"in e&&r(e.style)&&(e.style={classes:e.style}),n.each(j,function(){this.sanitize&&this.sanitize(e)}),e)}function l(e,t){for(var i,n=0,o=e,r=t.split(".");o=o[r[n++]];)n<r.length&&(i=o);return[i||e,r.pop()]}function c(e,t){var i,n,o;for(i in this.checks)for(n in this.checks[i])(o=new RegExp(n,"i").exec(e))&&(t.push(o),("builtin"===i||this.plugins[i])&&this.checks[i][n].apply(this.plugins[i]||this,t))}function u(e){return Y.concat("").join(e?"-"+e+" ":" ")}function d(e,t){return t>0?setTimeout(n.proxy(e,this),t):void e.call(this)}function h(e){this.tooltip.hasClass(et)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=d.call(this,function(){this.toggle(M,e)},this.options.show.delay))}function f(e){if(!this.tooltip.hasClass(et)&&!this.destroyed){var t=n(e.relatedTarget),i=t.closest(G)[0]===this.tooltip[0],o=t[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==t[0]&&"mouse"===this.options.position.target&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(e.type)&&(i||o))try{e.preventDefault(),e.stopImmediatePropagation()}catch(r){}else this.timers.hide=d.call(this,function(){this.toggle(D,e)},this.options.hide.delay,this)}}function p(e){!this.tooltip.hasClass(et)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=d.call(this,function(){this.hide(e)},this.options.hide.inactive))}function m(e){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(e)}function g(e,i,o){n(t.body).delegate(e,(i.split?i:i.join("."+q+" "))+"."+q,function(){var e=T.api[n.attr(this,$)];e&&!e.disabled&&o.apply(e,arguments)})}function v(e,i,r){var s,l,c,u,d,h=n(t.body),f=e[0]===t?h:e,p=e.metadata?e.metadata(r.metadata):R,m="html5"===r.metadata.type&&p?p[r.metadata.name]:R,g=e.data(r.metadata.name||"qtipopts");try{g="string"==typeof g?n.parseJSON(g):g}catch(v){}if(u=n.extend(M,{},T.defaults,r,"object"==typeof g?a(g):R,a(m||p)),l=u.position,u.id=i,"boolean"==typeof u.content.text){if(c=e.attr(u.content.attr),u.content.attr===D||!c)return D;u.content.text=c}if(l.container.length||(l.container=h),l.target===D&&(l.target=f),u.show.target===D&&(u.show.target=f),u.show.solo===M&&(u.show.solo=l.container.closest("body")),u.hide.target===D&&(u.hide.target=f),u.position.viewport===M&&(u.position.viewport=l.container),l.container=l.container.eq(0),l.at=new k(l.at,M),l.my=new k(l.my),e.data(q))if(u.overwrite)e.qtip("destroy",!0);else if(u.overwrite===D)return D;return e.attr(U,i),u.suppress&&(d=e.attr("title"))&&e.removeAttr("title").attr(it,d).attr("title",""),s=new o(e,u,i,!!c),e.data(q,s),s}function y(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e,t){var n,o,r=t.charAt(0).toUpperCase()+t.slice(1),s=(t+" "+vt.join(r+" ")+r).split(" "),a=0;if(gt[t])return e.css(gt[t]);for(;n=s[a++];)if((o=e.css(n))!==i)return gt[t]=n,o}function w(e,t){return Math.ceil(parseFloat(b(e,t)))}function _(e,t){this._ns="tip",this.options=t,this.offset=t.offset,this.size=[t.width,t.height],this.init(this.qtip=e)}function C(e,t){this.options=t,this._ns="-modal",this.init(this.qtip=e)}function x(e){this._ns="ie6",this.init(this.qtip=e)}var T,S,k,A,E,M=!0,D=!1,R=null,N="x",P="y",O="width",H="height",F="top",I="left",B="bottom",z="right",L="center",W="flipinvert",V="shift",j={},q="qtip",U="data-hasqtip",$="data-qtip-id",Y=["ui-widget","ui-tooltip"],G="."+q,K="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),X=q+"-fixed",J=q+"-default",Q=q+"-focus",Z=q+"-hover",et=q+"-disabled",tt="_replacedByqTip",it="oldtitle",nt={ie:function(){for(var e=4,i=t.createElement("div");(i.innerHTML="<!--[if gt IE "+e+"]><i></i><![endif]-->")&&i.getElementsByTagName("i")[0];e+=1);return e>4?e:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||D};S=o.prototype,S._when=function(e){return n.when.apply(n,e)},S.render=function(e){if(this.rendered||this.destroyed)return this;var t,i=this,o=this.options,r=this.cache,s=this.elements,a=o.content.text,l=o.content.title,c=o.content.button,u=o.position,d=("."+this._id+" ",[]);return n.attr(this.target[0],"aria-describedby",this._id),r.posClass=this._createPosClass((this.position={my:u.my,at:u.at}).my),this.tooltip=s.tooltip=t=n("<div/>",{id:this._id,"class":[q,J,o.style.classes,r.posClass].join(" "),width:o.style.width||"",height:o.style.height||"",tracking:"mouse"===u.target&&u.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":D,"aria-describedby":this._id+"-content","aria-hidden":M}).toggleClass(et,this.disabled).attr($,this.id).data(q,this).appendTo(u.container).append(s.content=n("<div />",{"class":q+"-content",id:this._id+"-content","aria-atomic":M})),this.rendered=-1,this.positioning=M,l&&(this._createTitle(),n.isFunction(l)||d.push(this._updateTitle(l,D))),c&&this._createButton(),n.isFunction(a)||d.push(this._updateContent(a,D)),this.rendered=M,this._setWidget(),n.each(j,function(e){var t;"render"===this.initialize&&(t=this(i))&&(i.plugins[e]=t)}),this._unassignEvents(),this._assignEvents(),this._when(d).then(function(){i._trigger("render"),i.positioning=D,i.hiddenDuringWait||!o.show.ready&&!e||i.toggle(M,r.event,D),i.hiddenDuringWait=D}),T.api[this.id]=this,this},S.destroy=function(e){function t(){if(!this.destroyed){this.destroyed=M;var e,t=this.target,i=t.attr(it);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),n.each(this.plugins,function(){this.destroy&&this.destroy()});for(e in this.timers)clearTimeout(this.timers[e]);t.removeData(q).removeAttr($).removeAttr(U).removeAttr("aria-describedby"),this.options.suppress&&i&&t.attr("title",i).removeAttr(it),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=R,delete T.api[this.id]}}return this.destroyed?this.target:(e===M&&"hide"!==this.triggering||!this.rendered?t.call(this):(this.tooltip.one("tooltiphidden",n.proxy(t,this)),!this.triggering&&this.hide()),this.target)},A=S.checks={builtin:{"^id$":function(e,t,i,o){var r=i===M?T.nextid:i,s=q+"-"+r;r!==D&&r.length>0&&!n("#"+s).length?(this._id=s,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):e[t]=o},"^prerender":function(e,t,i){i&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(e,t,i){this._updateContent(i)},"^content.attr$":function(e,t,i,n){this.options.content.text===this.target.attr(n)&&this._updateContent(this.target.attr(i))},"^content.title$":function(e,t,i){return i?(i&&!this.elements.title&&this._createTitle(),void this._updateTitle(i)):this._removeTitle()},"^content.button$":function(e,t,i){this._updateButton(i)},"^content.title.(text|button)$":function(e,t,i){this.set("content."+t,i)},"^position.(my|at)$":function(e,t,i){"string"==typeof i&&(this.position[t]=e[t]=new k(i,"at"===t))},"^position.container$":function(e,t,i){this.rendered&&this.tooltip.appendTo(i)},"^show.ready$":function(e,t,i){i&&(!this.rendered&&this.render(M)||this.toggle(M))},"^style.classes$":function(e,t,i,n){this.rendered&&this.tooltip.removeClass(n).addClass(i)},"^style.(width|height)":function(e,t,i){this.rendered&&this.tooltip.css(t,i)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(e,t,i){this.rendered&&this.tooltip.toggleClass(J,!!i)},"^events.(render|show|move|hide|focus|blur)$":function(e,t,i){this.rendered&&this.tooltip[(n.isFunction(i)?"":"un")+"bind"]("tooltip"+t,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var e=this.options.position;this.tooltip.attr("tracking","mouse"===e.target&&e.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},S.get=function(e){if(this.destroyed)return this;var t=l(this.options,e.toLowerCase()),i=t[0][t[1]];return i.precedance?i.string():i};var ot=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,rt=/^prerender|show\.ready/i;S.set=function(e,t){if(this.destroyed)return this;{var i,o=this.rendered,r=D,s=this.options;this.checks}return"string"==typeof e?(i=e,e={},e[i]=t):e=n.extend({},e),n.each(e,function(t,i){if(o&&rt.test(t))return void delete e[t];var a,c=l(s,t.toLowerCase());a=c[0][c[1]],c[0][c[1]]=i&&i.nodeType?n(i):i,r=ot.test(t)||r,e[t]=[c[0],c[1],i,a]}),a(s),this.positioning=M,n.each(e,n.proxy(c,this)),this.positioning=D,this.rendered&&this.tooltip[0].offsetWidth>0&&r&&this.reposition("mouse"===s.position.target?R:this.cache.event),this},S._update=function(e,t){var i=this,o=this.cache;return this.rendered&&e?(n.isFunction(e)&&(e=e.call(this.elements.target,o.event,this)||""),n.isFunction(e.then)?(o.waiting=M,e.then(function(e){return o.waiting=D,i._update(e,t)},R,function(e){return i._update(e,t)})):e===D||!e&&""!==e?D:(e.jquery&&e.length>0?t.empty().append(e.css({display:"block",visibility:"visible"})):t.html(e),this._waitForContent(t).then(function(e){i.rendered&&i.tooltip[0].offsetWidth>0&&i.reposition(o.event,!e.length)}))):D},S._waitForContent=function(e){var t=this.cache;return t.waiting=M,(n.fn.imagesLoaded?e.imagesLoaded():n.Deferred().resolve([])).done(function(){t.waiting=D}).promise()},S._updateContent=function(e,t){this._update(e,this.elements.content,t)},S._updateTitle=function(e,t){this._update(e,this.elements.title,t)===D&&this._removeTitle(D)},S._createTitle=function(){var e=this.elements,t=this._id+"-title";e.titlebar&&this._removeTitle(),e.titlebar=n("<div />",{"class":q+"-titlebar "+(this.options.style.widget?u("header"):"")}).append(e.title=n("<div />",{id:t,"class":q+"-title","aria-atomic":M})).insertBefore(e.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(e){n(this).toggleClass("ui-state-active ui-state-focus","down"===e.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(e){n(this).toggleClass("ui-state-hover","mouseover"===e.type)}),this.options.content.button&&this._createButton()},S._removeTitle=function(e){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=R,e!==D&&this.reposition())},S._createPosClass=function(e){return q+"-pos-"+(e||this.options.position.my).abbrev()},S.reposition=function(i,o){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=M;var r,s,a,l,c=this.cache,u=this.tooltip,d=this.options.position,h=d.target,f=d.my,p=d.at,m=d.viewport,g=d.container,v=d.adjust,y=v.method.split(" "),b=u.outerWidth(D),w=u.outerHeight(D),_=0,C=0,x=u.css("position"),T={left:0,top:0},S=u[0].offsetWidth>0,k=i&&"scroll"===i.type,A=n(e),E=g[0].ownerDocument,R=this.mouse;if(n.isArray(h)&&2===h.length)p={x:I,y:F},T={left:h[0],top:h[1]};else if("mouse"===h)p={x:I,y:F},(!v.mouse||this.options.hide.distance)&&c.origin&&c.origin.pageX?i=c.origin:!i||i&&("resize"===i.type||"scroll"===i.type)?i=c.event:R&&R.pageX&&(i=R),"static"!==x&&(T=g.offset()),E.body.offsetWidth!==(e.innerWidth||E.documentElement.clientWidth)&&(s=n(t.body).offset()),T={left:i.pageX-T.left+(s&&s.left||0),top:i.pageY-T.top+(s&&s.top||0)},v.mouse&&k&&R&&(T.left-=(R.scrollX||0)-A.scrollLeft(),T.top-=(R.scrollY||0)-A.scrollTop());else{if("event"===h?i&&i.target&&"scroll"!==i.type&&"resize"!==i.type?c.target=n(i.target):i.target||(c.target=this.elements.target):"event"!==h&&(c.target=n(h.jquery?h:this.elements.target)),h=c.target,h=n(h).eq(0),0===h.length)return this;h[0]===t||h[0]===e?(_=nt.iOS?e.innerWidth:h.width(),C=nt.iOS?e.innerHeight:h.height(),h[0]===e&&(T={top:(m||h).scrollTop(),left:(m||h).scrollLeft()})):j.imagemap&&h.is("area")?r=j.imagemap(this,h,p,j.viewport?y:D):j.svg&&h&&h[0].ownerSVGElement?r=j.svg(this,h,p,j.viewport?y:D):(_=h.outerWidth(D),C=h.outerHeight(D),T=h.offset()),r&&(_=r.width,C=r.height,s=r.offset,T=r.position),T=this.reposition.offset(h,T,g),(nt.iOS>3.1&&nt.iOS<4.1||nt.iOS>=4.3&&nt.iOS<4.33||!nt.iOS&&"fixed"===x)&&(T.left-=A.scrollLeft(),T.top-=A.scrollTop()),(!r||r&&r.adjustable!==D)&&(T.left+=p.x===z?_:p.x===L?_/2:0,T.top+=p.y===B?C:p.y===L?C/2:0)}return T.left+=v.x+(f.x===z?-b:f.x===L?-b/2:0),T.top+=v.y+(f.y===B?-w:f.y===L?-w/2:0),j.viewport?(a=T.adjusted=j.viewport(this,T,d,_,C,b,w),s&&a.left&&(T.left+=s.left),s&&a.top&&(T.top+=s.top),a.my&&(this.position.my=a.my)):T.adjusted={left:0,top:0},c.posClass!==(l=this._createPosClass(this.position.my))&&u.removeClass(c.posClass).addClass(c.posClass=l),this._trigger("move",[T,m.elem||m],i)?(delete T.adjusted,o===D||!S||isNaN(T.left)||isNaN(T.top)||"mouse"===h||!n.isFunction(d.effect)?u.css(T):n.isFunction(d.effect)&&(d.effect.call(u,this,n.extend({},T)),u.queue(function(e){n(this).css({opacity:"",height:""}),nt.ie&&this.style.removeAttribute("filter"),e()})),this.positioning=D,this):this},S.reposition.offset=function(e,i,o){function r(e,t){i.left+=t*e.scrollLeft(),i.top+=t*e.scrollTop()}if(!o[0])return i;var s,a,l,c,u=n(e[0].ownerDocument),d=!!nt.ie&&"CSS1Compat"!==t.compatMode,h=o[0];do"static"!==(a=n.css(h,"position"))&&("fixed"===a?(l=h.getBoundingClientRect(),r(u,-1)):(l=n(h).position(),l.left+=parseFloat(n.css(h,"borderLeftWidth"))||0,l.top+=parseFloat(n.css(h,"borderTopWidth"))||0),i.left-=l.left+(parseFloat(n.css(h,"marginLeft"))||0),i.top-=l.top+(parseFloat(n.css(h,"marginTop"))||0),s||"hidden"===(c=n.css(h,"overflow"))||"visible"===c||(s=n(h)));while(h=h.offsetParent);return s&&(s[0]!==u[0]||d)&&r(s,1),i};var st=(k=S.reposition.Corner=function(e,t){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,L).toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!t;var i=e.charAt(0);this.precedance="t"===i||"b"===i?P:N}).prototype;st.invert=function(e,t){this[e]=this[e]===I?z:this[e]===z?I:t||this[e]},st.string=function(e){var t=this.x,i=this.y,n=t!==i?"center"===t||"center"!==i&&(this.precedance===P||this.forceY)?[i,t]:[t,i]:[t];return e!==!1?n.join(" "):n},st.abbrev=function(){var e=this.string(!1);return e[0].charAt(0)+(e[1]&&e[1].charAt(0)||"")},st.clone=function(){return new k(this.string(),this.forceY)},S.toggle=function(e,i){var o=this.cache,r=this.options,s=this.tooltip;if(i){if(/over|enter/.test(i.type)&&o.event&&/out|leave/.test(o.event.type)&&r.show.target.add(i.target).length===r.show.target.length&&s.has(i.relatedTarget).length)return this;o.event=n.event.fix(i)}if(this.waiting&&!e&&(this.hiddenDuringWait=M),!this.rendered)return e?this.render(1):this;if(this.destroyed||this.disabled)return this;var a,l,c,u=e?"show":"hide",d=this.options[u],h=(this.options[e?"hide":"show"],this.options.position),f=this.options.content,p=this.tooltip.css("width"),m=this.tooltip.is(":visible"),g=e||1===d.target.length,v=!i||d.target.length<2||o.target[0]===i.target;return(typeof e).search("boolean|number")&&(e=!m),a=!s.is(":animated")&&m===e&&v,l=a?R:!!this._trigger(u,[90]),this.destroyed?this:(l!==D&&e&&this.focus(i),!l||a?this:(n.attr(s[0],"aria-hidden",!e),e?(this.mouse&&(o.origin=n.event.fix(this.mouse)),n.isFunction(f.text)&&this._updateContent(f.text,D),n.isFunction(f.title)&&this._updateTitle(f.title,D),!E&&"mouse"===h.target&&h.adjust.mouse&&(n(t).bind("mousemove."+q,this._storeMouse),E=M),p||s.css("width",s.outerWidth(D)),this.reposition(i,arguments[2]),p||s.css("width",""),d.solo&&("string"==typeof d.solo?n(d.solo):n(G,d.solo)).not(s).not(d.target).qtip("hide",n.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete o.origin,E&&!n(G+'[tracking="true"]:visible',d.solo).not(s).length&&(n(t).unbind("mousemove."+q),E=D),this.blur(i)),c=n.proxy(function(){e?(nt.ie&&s[0].style.removeAttribute("filter"),s.css("overflow",""),"string"==typeof d.autofocus&&n(this.options.show.autofocus,s).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):s.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(e?"visible":"hidden")},this),d.effect===D||g===D?(s[u](),c()):n.isFunction(d.effect)?(s.stop(1,1),d.effect.call(s,this),s.queue("fx",function(e){c(),e()})):s.fadeTo(90,e?1:0,c),e&&d.target.trigger("qtip-"+this.id+"-inactive"),this))},S.show=function(e){return this.toggle(M,e)},S.hide=function(e){return this.toggle(D,e)},S.focus=function(e){if(!this.rendered||this.destroyed)return this;var t=n(G),i=this.tooltip,o=parseInt(i[0].style.zIndex,10),r=T.zindex+t.length;return i.hasClass(Q)||this._trigger("focus",[r],e)&&(o!==r&&(t.each(function(){this.style.zIndex>o&&(this.style.zIndex=this.style.zIndex-1)}),t.filter("."+Q).qtip("blur",e)),i.addClass(Q)[0].style.zIndex=r),this},S.blur=function(e){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(Q),this._trigger("blur",[this.tooltip.css("zIndex")],e),this)},S.disable=function(e){return this.destroyed?this:("toggle"===e?e=!(this.rendered?this.tooltip.hasClass(et):this.disabled):"boolean"!=typeof e&&(e=M),this.rendered&&this.tooltip.toggleClass(et,e).attr("aria-disabled",e),this.disabled=!!e,this)},S.enable=function(){return this.disable(D)},S._createButton=function(){var e=this,t=this.elements,i=t.tooltip,o=this.options.content.button,r="string"==typeof o,s=r?o:"Close tooltip";t.button&&t.button.remove(),t.button=o.jquery?o:n("<a />",{"class":"qtip-close "+(this.options.style.widget?"":q+"-icon"),title:s,"aria-label":s}).prepend(n("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),t.button.appendTo(t.titlebar||i).attr("role","button").click(function(t){return i.hasClass(et)||e.hide(t),D})},S._updateButton=function(e){if(!this.rendered)return D;var t=this.elements.button;e?this._createButton():t.remove()},S._setWidget=function(){var e=this.options.style.widget,t=this.elements,i=t.tooltip,n=i.hasClass(et);i.removeClass(et),et=e?"ui-state-disabled":"qtip-disabled",i.toggleClass(et,n),i.toggleClass("ui-helper-reset "+u(),e).toggleClass(J,this.options.style.def&&!e),t.content&&t.content.toggleClass(u("content"),e),t.titlebar&&t.titlebar.toggleClass(u("header"),e),t.button&&t.button.toggleClass(q+"-icon",!e)},S._storeMouse=function(e){return(this.mouse=n.event.fix(e)).type="mousemove",this},S._bind=function(e,t,i,o,r){if(e&&i&&t.length){var s="."+this._id+(o?"-"+o:"");return n(e).bind((t.split?t:t.join(s+" "))+s,n.proxy(i,r||this)),this}},S._unbind=function(e,t){return e&&n(e).unbind("."+this._id+(t?"-"+t:"")),this},S._trigger=function(e,t,i){var o=n.Event("tooltip"+e);return o.originalEvent=i&&n.extend({},i)||this.cache.event||R,this.triggering=e,this.tooltip.trigger(o,[this].concat(t||[])),this.triggering=D,!o.isDefaultPrevented()},S._bindEvents=function(e,t,i,o,r,s){var a=i.filter(o).add(o.filter(i)),l=[];a.length&&(n.each(t,function(t,i){var o=n.inArray(i,e);o>-1&&l.push(e.splice(o,1)[0])}),l.length&&(this._bind(a,l,function(e){var t=this.rendered?this.tooltip[0].offsetWidth>0:!1;(t?s:r).call(this,e)}),i=i.not(a),o=o.not(a))),this._bind(i,e,r),this._bind(o,t,s)},S._assignInitialEvents=function(e){function t(e){return this.disabled||this.destroyed?D:(this.cache.event=e&&n.event.fix(e),this.cache.target=e&&n(e.target),clearTimeout(this.timers.show),void(this.timers.show=d.call(this,function(){this.render("object"==typeof e||i.show.ready)},i.prerender?0:i.show.delay)))}var i=this.options,o=i.show.target,r=i.hide.target,s=i.show.event?n.trim(""+i.show.event).split(" "):[],a=i.hide.event?n.trim(""+i.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(i.show.event)&&!/mouse(out|leave)/i.test(i.hide.event)&&a.push("mouseleave"),this._bind(o,"mousemove",function(e){this._storeMouse(e),this.cache.onTarget=M}),this._bindEvents(s,a,o,r,t,function(){return this.timers?void clearTimeout(this.timers.show):D}),(i.show.ready||i.prerender)&&t.call(this,e)},S._assignEvents=function(){var i=this,o=this.options,r=o.position,s=this.tooltip,a=o.show.target,l=o.hide.target,c=r.container,u=r.viewport,d=n(t),g=(n(t.body),n(e)),v=o.show.event?n.trim(""+o.show.event).split(" "):[],y=o.hide.event?n.trim(""+o.hide.event).split(" "):[];n.each(o.events,function(e,t){i._bind(s,"toggle"===e?["tooltipshow","tooltiphide"]:["tooltip"+e],t,null,s)}),/mouse(out|leave)/i.test(o.hide.event)&&"window"===o.hide.leave&&this._bind(d,["mouseout","blur"],function(e){/select|option/.test(e.target.nodeName)||e.relatedTarget||this.hide(e)}),o.hide.fixed?l=l.add(s.addClass(X)):/mouse(over|enter)/i.test(o.show.event)&&this._bind(l,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+o.hide.event).indexOf("unfocus")>-1&&this._bind(c.closest("html"),["mousedown","touchstart"],function(e){var t=n(e.target),i=this.rendered&&!this.tooltip.hasClass(et)&&this.tooltip[0].offsetWidth>0,o=t.parents(G).filter(this.tooltip[0]).length>0;t[0]===this.target[0]||t[0]===this.tooltip[0]||o||this.target.has(t[0]).length||!i||this.hide(e)}),"number"==typeof o.hide.inactive&&(this._bind(a,"qtip-"+this.id+"-inactive",p,"inactive"),this._bind(l.add(s),T.inactiveEvents,p)),this._bindEvents(v,y,a,l,h,f),this._bind(a.add(s),"mousemove",function(e){if("number"==typeof o.hide.distance){var t=this.cache.origin||{},i=this.options.hide.distance,n=Math.abs;(n(e.pageX-t.pageX)>=i||n(e.pageY-t.pageY)>=i)&&this.hide(e)}this._storeMouse(e)}),"mouse"===r.target&&r.adjust.mouse&&(o.hide.event&&this._bind(a,["mouseenter","mouseleave"],function(e){return this.cache?void(this.cache.onTarget="mouseenter"===e.type):D}),this._bind(d,"mousemove",function(e){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(et)&&this.tooltip[0].offsetWidth>0&&this.reposition(e)})),(r.adjust.resize||u.length)&&this._bind(n.event.special.resize?u:g,"resize",m),r.adjust.scroll&&this._bind(g.add(r.container),"scroll",m)},S._unassignEvents=function(){var i=this.options,o=i.show.target,r=i.hide.target,s=n.grep([this.elements.target[0],this.rendered&&this.tooltip[0],i.position.container[0],i.position.viewport[0],i.position.container.closest("html")[0],e,t],function(e){return"object"==typeof e});o&&o.toArray&&(s=s.concat(o.toArray())),r&&r.toArray&&(s=s.concat(r.toArray())),this._unbind(s)._unbind(s,"destroy")._unbind(s,"inactive")},n(function(){g(G,["mouseenter","mouseleave"],function(e){var t="mouseenter"===e.type,i=n(e.currentTarget),o=n(e.relatedTarget||e.target),r=this.options;t?(this.focus(e),i.hasClass(X)&&!i.hasClass(et)&&clearTimeout(this.timers.hide)):"mouse"===r.position.target&&r.position.adjust.mouse&&r.hide.event&&r.show.target&&!o.closest(r.show.target[0]).length&&this.hide(e),i.toggleClass(Z,t)}),g("["+$+"]",K,p)}),T=n.fn.qtip=function(e,t,o){var r=(""+e).toLowerCase(),s=R,l=n.makeArray(arguments).slice(1),c=l[l.length-1],u=this[0]?n.data(this[0],q):R;return!arguments.length&&u||"api"===r?u:"string"==typeof e?(this.each(function(){var e=n.data(this,q);if(!e)return M;if(c&&c.timeStamp&&(e.cache.event=c),!t||"option"!==r&&"options"!==r)e[r]&&e[r].apply(e,l);else{if(o===i&&!n.isPlainObject(t))return s=e.get(t),D;e.set(t,o)}}),s!==R?s:this):"object"!=typeof e&&arguments.length?void 0:(u=a(n.extend(M,{},e)),this.each(function(e){var t,i;return i=n.isArray(u.id)?u.id[e]:u.id,i=!i||i===D||i.length<1||T.api[i]?T.nextid++:i,t=v(n(this),i,u),t===D?M:(T.api[i]=t,n.each(j,function(){"initialize"===this.initialize&&this(t)}),void t._assignInitialEvents(c))}))},n.qtip=o,T.api={},n.each({attr:function(e,t){if(this.length){var i=this[0],o="title",r=n.data(i,"qtip");if(e===o&&r&&"object"==typeof r&&r.options.suppress)return arguments.length<2?n.attr(i,it):(r&&r.options.content.attr===o&&r.cache.attr&&r.set("content.text",t),this.attr(it,t))}return n.fn["attr"+tt].apply(this,arguments)},clone:function(e){var t=(n([]),n.fn["clone"+tt].apply(this,arguments));return e||t.filter("["+it+"]").attr("title",function(){return n.attr(this,it)}).removeAttr(it),t}},function(e,t){if(!t||n.fn[e+tt])return M;var i=n.fn[e+tt]=n.fn[e];n.fn[e]=function(){return t.apply(this,arguments)||i.apply(this,arguments)}}),n.ui||(n["cleanData"+tt]=n.cleanData,n.cleanData=function(e){for(var t,i=0;(t=n(e[i])).length;i++)if(t.attr(U))try{t.triggerHandler("removeqtip")}catch(o){}n["cleanData"+tt].apply(this,arguments)}),T.version="2.2.1",T.nextid=0,T.inactiveEvents=K,T.zindex=15e3,T.defaults={prerender:D,id:D,overwrite:M,suppress:M,content:{text:M,attr:"title",title:D,button:D},position:{my:"top left",at:"bottom right",target:D,container:D,viewport:D,adjust:{x:0,y:0,mouse:M,scroll:M,resize:M,method:"flipinvert flipinvert"},effect:function(e,t){n(this).animate(t,{duration:200,queue:D})}},show:{target:D,event:"mouseenter",effect:M,delay:90,solo:D,ready:D,autofocus:D},hide:{target:D,event:"mouseleave",effect:M,delay:0,fixed:D,inactive:D,leave:"window",distance:D},style:{classes:"",widget:D,width:D,height:D,def:M},events:{render:R,move:R,show:R,hide:R,toggle:R,visible:R,hidden:R,focus:R,blur:R}};var at,lt="margin",ct="border",ut="color",dt="background-color",ht="transparent",ft=" !important",pt=!!t.createElement("canvas").getContext,mt=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,gt={},vt=["Webkit","O","Moz","ms"];if(pt)var yt=e.devicePixelRatio||1,bt=function(){var e=t.createElement("canvas").getContext("2d");return e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||1}(),wt=yt/bt;else var _t=function(e,t,i){return"<qtipvml:"+e+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(t||"")+' style="behavior: url(#default#VML); '+(i||"")+'" />'};n.extend(_.prototype,{init:function(e){var t,i;i=this.element=e.elements.tip=n("<div />",{"class":q+"-tip"}).prependTo(e.tooltip),pt?(t=n("<canvas />").appendTo(this.element)[0].getContext("2d"),t.lineJoin="miter",t.miterLimit=1e5,t.save()):(t=_t("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(t+t),e._bind(n("*",i).add(i),["click","mousedown"],function(e){e.stopPropagation()},this._ns)),e._bind(e.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(e){var t=this.qtip.elements.titlebar;return t&&(e.y===F||e.y===L&&this.element.position().top+this.size[1]/2+this.options.offset<t.outerHeight(M))},_parseCorner:function(e){var t=this.qtip.options.position.my;return e===D||t===D?e=D:e===M?e=new k(t.string()):e.string||(e=new k(e),e.fixed=M),e},_parseWidth:function(e,t,i){var n=this.qtip.elements,o=ct+y(t)+"Width";return(i?w(i,o):w(n.content,o)||w(this._useTitle(e)&&n.titlebar||n.content,o)||w(n.tooltip,o))||0},_parseRadius:function(e){var t=this.qtip.elements,i=ct+y(e.y)+y(e.x)+"Radius";return nt.ie<9?0:w(this._useTitle(e)&&t.titlebar||t.content,i)||w(t.tooltip,i)||0},_invalidColour:function(e,t,i){var n=e.css(t);return!n||i&&n===e.css(i)||mt.test(n)?D:n},_parseColours:function(e){var t=this.qtip.elements,i=this.element.css("cssText",""),o=ct+y(e[e.precedance])+y(ut),r=this._useTitle(e)&&t.titlebar||t.content,s=this._invalidColour,a=[];return a[0]=s(i,dt)||s(r,dt)||s(t.content,dt)||s(t.tooltip,dt)||i.css(dt),a[1]=s(i,o,ut)||s(r,o,ut)||s(t.content,o,ut)||s(t.tooltip,o,ut)||t.tooltip.css(o),n("*",i).add(i).css("cssText",dt+":"+ht+ft+";"+ct+":0"+ft+";"),a},_calculateSize:function(e){var t,i,n,o=e.precedance===P,r=this.options.width,s=this.options.height,a="c"===e.abbrev(),l=(o?r:s)*(a?.5:1),c=Math.pow,u=Math.round,d=Math.sqrt(c(l,2)+c(s,2)),h=[this.border/l*d,this.border/s*d];return h[2]=Math.sqrt(c(h[0],2)-c(this.border,2)),h[3]=Math.sqrt(c(h[1],2)-c(this.border,2)),t=d+h[2]+h[3]+(a?0:h[0]),i=t/d,n=[u(i*r),u(i*s)],o?n:n.reverse()},_calculateTip:function(e,t,i){i=i||1,t=t||this.size;var n=t[0]*i,o=t[1]*i,r=Math.ceil(n/2),s=Math.ceil(o/2),a={br:[0,0,n,o,n,0],bl:[0,0,n,0,0,o],tr:[0,o,n,0,n,o],tl:[0,0,0,o,n,o],tc:[0,o,r,0,n,o],bc:[0,0,n,0,r,o],rc:[0,0,n,s,0,o],lc:[n,0,n,o,0,s]};return a.lt=a.br,a.rt=a.bl,a.lb=a.tr,a.rb=a.tl,a[e.abbrev()]},_drawCoords:function(e,t){e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.closePath()},create:function(){var e=this.corner=(pt||nt.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=e.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(t,i){if(!this.enabled)return this;var o,r,s,a,l,c,u,d,h=this.qtip.elements,f=this.element,p=f.children(),m=this.options,g=this.size,v=m.mimic,y=Math.round;t||(t=this.qtip.cache.corner||this.corner),v===D?v=t:(v=new k(v),v.precedance=t.precedance,"inherit"===v.x?v.x=t.x:"inherit"===v.y?v.y=t.y:v.x===v.y&&(v[t.precedance]=t[t.precedance])),r=v.precedance,t.precedance===N?this._swapDimensions():this._resetDimensions(),o=this.color=this._parseColours(t),o[1]!==ht?(d=this.border=this._parseWidth(t,t[t.precedance]),m.border&&1>d&&!mt.test(o[1])&&(o[0]=o[1]),this.border=d=m.border!==M?m.border:d):this.border=d=0,u=this.size=this._calculateSize(t),f.css({width:u[0],height:u[1],lineHeight:u[1]+"px"}),c=t.precedance===P?[y(v.x===I?d:v.x===z?u[0]-g[0]-d:(u[0]-g[0])/2),y(v.y===F?u[1]-g[1]:0)]:[y(v.x===I?u[0]-g[0]:0),y(v.y===F?d:v.y===B?u[1]-g[1]-d:(u[1]-g[1])/2)],pt?(s=p[0].getContext("2d"),s.restore(),s.save(),s.clearRect(0,0,6e3,6e3),a=this._calculateTip(v,g,wt),l=this._calculateTip(v,this.size,wt),p.attr(O,u[0]*wt).attr(H,u[1]*wt),p.css(O,u[0]).css(H,u[1]),this._drawCoords(s,l),s.fillStyle=o[1],s.fill(),s.translate(c[0]*wt,c[1]*wt),this._drawCoords(s,a),s.fillStyle=o[0],s.fill()):(a=this._calculateTip(v),a="m"+a[0]+","+a[1]+" l"+a[2]+","+a[3]+" "+a[4]+","+a[5]+" xe",c[2]=d&&/^(r|b)/i.test(t.string())?8===nt.ie?2:1:0,p.css({coordsize:u[0]+d+" "+(u[1]+d),antialias:""+(v.string().indexOf(L)>-1),left:c[0]-c[2]*Number(r===N),top:c[1]-c[2]*Number(r===P),width:u[0]+d,height:u[1]+d}).each(function(e){var t=n(this);t[t.prop?"prop":"attr"]({coordsize:u[0]+d+" "+(u[1]+d),path:a,fillcolor:o[0],filled:!!e,stroked:!e}).toggle(!(!d&&!e)),!e&&t.html(_t("stroke",'weight="'+2*d+'px" color="'+o[1]+'" miterlimit="1000" joinstyle="miter"'))})),e.opera&&setTimeout(function(){h.tip.css({display:"inline-block",visibility:"visible"})},1),i!==D&&this.calculate(t,u)},calculate:function(e,t){if(!this.enabled)return D;var i,o,r=this,s=this.qtip.elements,a=this.element,l=this.options.offset,c=(s.tooltip.hasClass("ui-widget"),{});return e=e||this.corner,i=e.precedance,t=t||this._calculateSize(e),o=[e.x,e.y],i===N&&o.reverse(),n.each(o,function(n,o){var a,u,d;o===L?(a=i===P?I:F,c[a]="50%",c[lt+"-"+a]=-Math.round(t[i===P?0:1]/2)+l):(a=r._parseWidth(e,o,s.tooltip),u=r._parseWidth(e,o,s.content),d=r._parseRadius(e),c[o]=Math.max(-r.border,n?u:l+(d>a?d:-a)))}),c[e[i]]-=t[i===N?0:1],a.css({margin:"",top:"",bottom:"",left:"",right:""}).css(c),c},reposition:function(e,t,n){function o(e,t,i,n,o){e===V&&c.precedance===t&&u[n]&&c[i]!==L?c.precedance=c.precedance===N?P:N:e!==V&&u[n]&&(c[t]=c[t]===L?u[n]>0?n:o:c[t]===n?o:n)}function r(e,t,o){c[e]===L?m[lt+"-"+t]=p[e]=s[lt+"-"+t]-u[t]:(a=s[o]!==i?[u[t],-s[t]]:[-u[t],s[t]],(p[e]=Math.max(a[0],a[1]))>a[0]&&(n[t]-=u[t],p[t]=D),m[s[o]!==i?o:t]=p[e])}if(this.enabled){var s,a,l=t.cache,c=this.corner.clone(),u=n.adjusted,d=t.options.position.adjust.method.split(" "),h=d[0],f=d[1]||d[0],p={left:D,top:D,x:0,y:0},m={};
this.corner.fixed!==M&&(o(h,N,P,I,z),o(f,P,N,F,B),(c.string()!==l.corner.string()||l.cornerTop!==u.top||l.cornerLeft!==u.left)&&this.update(c,D)),s=this.calculate(c),s.right!==i&&(s.left=-s.right),s.bottom!==i&&(s.top=-s.bottom),s.user=this.offset,(p.left=h===V&&!!u.left)&&r(N,I,z),(p.top=f===V&&!!u.top)&&r(P,F,B),this.element.css(m).toggle(!(p.x&&p.y||c.x===L&&p.y||c.y===L&&p.x)),n.left-=s.left.charAt?s.user:h!==V||p.top||!p.left&&!p.top?s.left+this.border:0,n.top-=s.top.charAt?s.user:f!==V||p.left||!p.left&&!p.top?s.top+this.border:0,l.cornerLeft=u.left,l.cornerTop=u.top,l.corner=c.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),at=j.tip=function(e){return new _(e,e.options.style.tip)},at.initialize="render",at.sanitize=function(e){if(e.style&&"tip"in e.style){var t=e.style.tip;"object"!=typeof t&&(t=e.style.tip={corner:t}),/string|boolean/i.test(typeof t.corner)||(t.corner=M)}},A.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(e){this.size=[e.width,e.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},n.extend(M,T.defaults,{style:{tip:{corner:M,mimic:D,width:6,height:6,border:M,offset:0}}}),j.viewport=function(i,n,o,r,s,a,l){function c(e,t,i,o,r,s,a,l,c){var u=n[r],y=w[e],b=_[e],C=i===V,x=y===r?c:y===s?-c:-c/2,T=b===r?l:b===s?-l:-l/2,S=g[r]+v[r]-(f?0:h[r]),k=S-u,A=u+c-(a===O?p:m)-S,E=x-(w.precedance===e||y===w[t]?T:0)-(b===L?l/2:0);return C?(E=(y===r?1:-1)*x,n[r]+=k>0?k:A>0?-A:0,n[r]=Math.max(-h[r]+v[r],u-E,Math.min(Math.max(-h[r]+v[r]+(a===O?p:m),u+E),n[r],"center"===y?u-x:1e9))):(o*=i===W?2:0,k>0&&(y!==r||A>0)?(n[r]-=E+o,d.invert(e,r)):A>0&&(y!==s||k>0)&&(n[r]-=(y===L?-E:E)+o,d.invert(e,s)),n[r]<g&&-n[r]>A&&(n[r]=u,d=w.clone())),n[r]-u}var u,d,h,f,p,m,g,v,y=o.target,b=i.elements.tooltip,w=o.my,_=o.at,C=o.adjust,x=C.method.split(" "),T=x[0],S=x[1]||x[0],k=o.viewport,A=o.container,E=(i.cache,{left:0,top:0});return k.jquery&&y[0]!==e&&y[0]!==t.body&&"none"!==C.method?(h=A.offset()||E,f="static"===A.css("position"),u="fixed"===b.css("position"),p=k[0]===e?k.width():k.outerWidth(D),m=k[0]===e?k.height():k.outerHeight(D),g={left:u?0:k.scrollLeft(),top:u?0:k.scrollTop()},v=k.offset()||E,("shift"!==T||"shift"!==S)&&(d=w.clone()),E={left:"none"!==T?c(N,P,T,C.x,I,z,O,r,a):0,top:"none"!==S?c(P,N,S,C.y,F,B,H,s,l):0,my:d}):E},j.polys={polygon:function(e,t){var i,n,o,r={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:D},s=0,a=[],l=1,c=1,u=0,d=0;for(s=e.length;s--;)i=[parseInt(e[--s],10),parseInt(e[s+1],10)],i[0]>r.position.right&&(r.position.right=i[0]),i[0]<r.position.left&&(r.position.left=i[0]),i[1]>r.position.bottom&&(r.position.bottom=i[1]),i[1]<r.position.top&&(r.position.top=i[1]),a.push(i);if(n=r.width=Math.abs(r.position.right-r.position.left),o=r.height=Math.abs(r.position.bottom-r.position.top),"c"===t.abbrev())r.position={left:r.position.left+r.width/2,top:r.position.top+r.height/2};else{for(;n>0&&o>0&&l>0&&c>0;)for(n=Math.floor(n/2),o=Math.floor(o/2),t.x===I?l=n:t.x===z?l=r.width-n:l+=Math.floor(n/2),t.y===F?c=o:t.y===B?c=r.height-o:c+=Math.floor(o/2),s=a.length;s--&&!(a.length<2);)u=a[s][0]-r.position.left,d=a[s][1]-r.position.top,(t.x===I&&u>=l||t.x===z&&l>=u||t.x===L&&(l>u||u>r.width-l)||t.y===F&&d>=c||t.y===B&&c>=d||t.y===L&&(c>d||d>r.height-c))&&a.splice(s,1);r.position={left:a[0][0],top:a[0][1]}}return r},rect:function(e,t,i,n){return{width:Math.abs(i-e),height:Math.abs(n-t),position:{left:Math.min(e,i),top:Math.min(t,n)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(e,t,i,n,o){var r=j.polys._angles[o.abbrev()],s=0===r?0:i*Math.cos(r*Math.PI),a=n*Math.sin(r*Math.PI);return{width:2*i-Math.abs(s),height:2*n-Math.abs(a),position:{left:e+s,top:t+a},adjustable:D}},circle:function(e,t,i,n){return j.polys.ellipse(e,t,i,i,n)}},j.imagemap=function(e,t,i){t.jquery||(t=n(t));var o,r,s,a,l,c=(t.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),u=n('img[usemap="#'+t.parent("map").attr("name")+'"]'),d=n.trim(t.attr("coords")),h=d.replace(/,$/,"").split(",");if(!u.length)return D;if("polygon"===c)a=j.polys.polygon(h,i);else{if(!j.polys[c])return D;for(s=-1,l=h.length,r=[];++s<l;)r.push(parseInt(h[s],10));a=j.polys[c].apply(this,r.concat(i))}return o=u.offset(),o.left+=Math.ceil((u.outerWidth(D)-u.width())/2),o.top+=Math.ceil((u.outerHeight(D)-u.height())/2),a.position.left+=o.left,a.position.top+=o.top,a},j.svg=function(e,i,o){for(var r,s,a,l,c,u,d,h,f,p=(n(t),i[0]),m=n(p.ownerSVGElement),g=p.ownerDocument,v=(parseInt(i.css("stroke-width"),10)||0)/2;!p.getBBox;)p=p.parentNode;if(!p.getBBox||!p.parentNode)return D;switch(p.nodeName){case"ellipse":case"circle":h=j.polys.ellipse(p.cx.baseVal.value,p.cy.baseVal.value,(p.rx||p.r).baseVal.value+v,(p.ry||p.r).baseVal.value+v,o);break;case"line":case"polygon":case"polyline":for(d=p.points||[{x:p.x1.baseVal.value,y:p.y1.baseVal.value},{x:p.x2.baseVal.value,y:p.y2.baseVal.value}],h=[],u=-1,l=d.numberOfItems||d.length;++u<l;)c=d.getItem?d.getItem(u):d[u],h.push.apply(h,[c.x,c.y]);h=j.polys.polygon(h,o);break;default:h=p.getBBox(),h={width:h.width,height:h.height,position:{left:h.x,top:h.y}}}return f=h.position,m=m[0],m.createSVGPoint&&(s=p.getScreenCTM(),d=m.createSVGPoint(),d.x=f.left,d.y=f.top,a=d.matrixTransform(s),f.left=a.x,f.top=a.y),g!==t&&"mouse"!==e.position.target&&(r=n((g.defaultView||g.parentWindow).frameElement).offset(),r&&(f.left+=r.left,f.top+=r.top)),g=n(g),f.left+=g.scrollLeft(),f.top+=g.scrollTop(),h};var Ct,xt,Tt="qtip-modal",St="."+Tt;xt=function(){function e(e){if(n.expr[":"].focusable)return n.expr[":"].focusable;var t,i,o,r=!isNaN(n.attr(e,"tabindex")),s=e.nodeName&&e.nodeName.toLowerCase();return"area"===s?(t=e.parentNode,i=t.name,e.href&&i&&"map"===t.nodeName.toLowerCase()?(o=n("img[usemap=#"+i+"]")[0],!!o&&o.is(":visible")):!1):/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s?e.href||r:r}function i(e){u.length<1&&e.length?e.not("body").blur():u.first().focus()}function o(e){if(l.is(":visible")){var t,o=n(e.target),a=r.tooltip,c=o.closest(G);t=c.length<1?D:parseInt(c[0].style.zIndex,10)>parseInt(a[0].style.zIndex,10),t||o.closest(G)[0]===a[0]||i(o),s=e.target===u[u.length-1]}}var r,s,a,l,c=this,u={};n.extend(c,{init:function(){return l=c.elem=n("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return D}}).hide(),n(t.body).bind("focusin"+St,o),n(t).bind("keydown"+St,function(e){r&&r.options.show.modal.escape&&27===e.keyCode&&r.hide(e)}),l.bind("click"+St,function(e){r&&r.options.show.modal.blur&&r.hide(e)}),c},update:function(t){r=t,u=t.options.show.modal.stealfocus!==D?t.tooltip.find("*").filter(function(){return e(this)}):[]},toggle:function(e,o,s){var u=(n(t.body),e.tooltip),d=e.options.show.modal,h=d.effect,f=o?"show":"hide",p=l.is(":visible"),m=n(St).filter(":visible:not(:animated)").not(u);return c.update(e),o&&d.stealfocus!==D&&i(n(":focus")),l.toggleClass("blurs",d.blur),o&&l.appendTo(t.body),l.is(":animated")&&p===o&&a!==D||!o&&m.length?c:(l.stop(M,D),n.isFunction(h)?h.call(l,o):h===D?l[f]():l.fadeTo(parseInt(s,10)||90,o?1:0,function(){o||l.hide()}),o||l.queue(function(e){l.css({left:"",top:""}),n(St).length||l.detach(),e()}),a=o,r.destroyed&&(r=R),c)}}),c.init()},xt=new xt,n.extend(C.prototype,{init:function(e){var t=e.tooltip;return this.options.on?(e.elements.overlay=xt.elem,t.addClass(Tt).css("z-index",T.modal_zindex+n(St).length),e._bind(t,["tooltipshow","tooltiphide"],function(e,i,o){var r=e.originalEvent;if(e.target===t[0])if(r&&"tooltiphide"===e.type&&/mouse(leave|enter)/.test(r.type)&&n(r.relatedTarget).closest(xt.elem[0]).length)try{e.preventDefault()}catch(s){}else(!r||r&&"tooltipsolo"!==r.type)&&this.toggle(e,"tooltipshow"===e.type,o)},this._ns,this),e._bind(t,"tooltipfocus",function(e,i){if(!e.isDefaultPrevented()&&e.target===t[0]){var o=n(St),r=T.modal_zindex+o.length,s=parseInt(t[0].style.zIndex,10);xt.elem[0].style.zIndex=r-1,o.each(function(){this.style.zIndex>s&&(this.style.zIndex-=1)}),o.filter("."+Q).qtip("blur",e.originalEvent),t.addClass(Q)[0].style.zIndex=r,xt.update(i);try{e.preventDefault()}catch(a){}}},this._ns,this),void e._bind(t,"tooltiphide",function(e){e.target===t[0]&&n(St).filter(":visible").not(t).last().qtip("focus",e)},this._ns,this)):this},toggle:function(e,t,i){return e&&e.isDefaultPrevented()?this:void xt.toggle(this.qtip,!!t,i)},destroy:function(){this.qtip.tooltip.removeClass(Tt),this.qtip._unbind(this.qtip.tooltip,this._ns),xt.toggle(this.qtip,D),delete this.qtip.elements.overlay}}),Ct=j.modal=function(e){return new C(e,e.options.show.modal)},Ct.sanitize=function(e){e.show&&("object"!=typeof e.show.modal?e.show.modal={on:!!e.show.modal}:"undefined"==typeof e.show.modal.on&&(e.show.modal.on=M))},T.modal_zindex=T.zindex-200,Ct.initialize="render",A.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},n.extend(M,T.defaults,{show:{modal:{on:D,effect:M,blur:M,stealfocus:M,escape:M}}});var kt,At='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';n.extend(x.prototype,{_scroll:function(){var t=this.qtip.elements.overlay;t&&(t[0].style.top=n(e).scrollTop()+"px")},init:function(i){var o=i.tooltip;n("select, object").length<1&&(this.bgiframe=i.elements.bgiframe=n(At).appendTo(o),i._bind(o,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=n("<div/>",{id:q+"-rcontainer"}).appendTo(t.body),i.elements.overlay&&i.elements.overlay.addClass("qtipmodal-ie6fix")&&(i._bind(e,["scroll","resize"],this._scroll,this._ns,this),i._bind(o,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var e,t,i=this.qtip.tooltip,n={height:i.outerHeight(D),width:i.outerWidth(D)},o=this.qtip.plugins.tip,r=this.qtip.elements.tip;t=parseInt(i.css("borderLeftWidth"),10)||0,t={left:-t,top:-t},o&&r&&(e="x"===o.corner.precedance?[O,I]:[H,F],t[e[1]]-=r[e[0]]()),this.bgiframe.css(t).css(n)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var e,t,i,n,o=this.qtip.tooltip,r=this.qtip.options.style,s=this.qtip.options.position.container;return this.qtip.drawing=1,r.height&&o.css(H,r.height),r.width?o.css(O,r.width):(o.css(O,"").appendTo(this.redrawContainer),t=o.width(),1>t%2&&(t+=1),i=o.css("maxWidth")||"",n=o.css("minWidth")||"",e=(i+n).indexOf("%")>-1?s.width()/100:0,i=(i.indexOf("%")>-1?e:1)*parseInt(i,10)||t,n=(n.indexOf("%")>-1?e:1)*parseInt(n,10)||0,t=i+n?Math.min(Math.max(t,n),i):t,o.css(O,Math.round(t)).appendTo(s)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([e,this.qtip.tooltip],this._ns)}}),kt=j.ie6=function(e){return 6===nt.ie?new x(e):D},kt.initialize="render",A.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),function(e){var t=e.fn.qtip;t&&(e.fn.qtip=function(e){if(e&&e.content&&e.content.backbone){var i=e.content.backbone.view;delete e.content.backbone,e.content.text="placeholder",e.events=e.events||{};var n=e.events.render;e.events.render=function(e,t){var o=t.elements.content;o.empty(),o.append(i.el),n&&n.apply(this,arguments)}}return t.apply(this,arguments)})}(jQuery),/*
 * pmrpc 0.7.1 - Inter-widget remote procedure call library based on HTML5
 *               postMessage API and JSON-RPC. https://github.com/izuzak/pmrpc
 *
 * Copyright 2012 Ivan Zuzak, Marko Ivankovic
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
pmrpc=self.pmrpc=function(){function e(){for(var e=[],t="89AB",i="0123456789ABCDEF",n=0;36>n;n++)e[n]=i[Math.floor(16*Math.random())];return e[14]="4",e[19]=t[Math.floor(4*Math.random())],e[8]=e[13]=e[18]=e[23]="-",e.join("")}function t(e,t){for(var i=e.whitelist,n=e.blacklist,o=!1,r=!1,s=0;s<i.length;++s)if(t.match(new RegExp(i[s]))){o=!0;break}for(var a=0;a<n.length;++a)if(t.match(new RegExp(n[a]))){r=!0;break}return o&&!r}function i(e,t,i,n){if(!(i instanceof Array)){var o=e.toString(),r=o.substring(o.indexOf("(")+1,o.indexOf(")"));r=""===r?[]:r.split(", ");for(var s={},a=0;a<r.length;a++)s[r[a]]=a;var l=[];for(var c in i){if("undefined"==typeof s[c])throw"No such param: "+c;l[s[c]]=i[c]}i=l}return"undefined"!=typeof n&&(i=i.concat(n)),e.apply(t,i)}function n(e){return"pmrpc."+JSON.stringify(e)}function o(e){return JSON.parse(e.substring("pmrpc.".length))}function r(){var e={};return e.jsonrpc="2.0",e}function s(e,t,i){var n=r();return n.method=e,n.params=t,"undefined"!=typeof i&&(n.id=i),n}function a(e,t,i){var n={};return n.code=e,n.message=t,n.data=i,n}function l(e,t,i){var n=r();return n.id=i,"undefined"==typeof e||null===e?n.result="undefined"===t?null:t:n.error=e,n}function c(e){return e.publicProcedureName in E?!1:(k[e.publicProcedureName]={publicProcedureName:e.publicProcedureName,procedure:e.procedure,context:e.procedure.context,isAsync:"undefined"!=typeof e.isAsynchronous?e.isAsynchronous:!1,acl:"undefined"!=typeof e.acl?e.acl:{whitelist:["(.*)"],blacklist:[]}},!0)}function u(e){return e in E?!1:(delete k[e],!0)}function d(e){return k[e]}function h(e){var t=e.event,i=e.source,n="undefined"!=typeof i&&null!==i;if(0===t.data.indexOf("pmrpc.")){var r=o(t.data);if("undefined"!=typeof r.method){var s={data:t.data,source:n?i:t.source,origin:n?"*":t.origin,shouldCheckACL:!n},a=f(r,s);null!==a&&g(s.source,a,s.origin)}else p(r)}}function f(e,n){if("2.0"!==e.jsonrpc)return l(a(-32600,"Invalid request.","The recived JSON is not a valid JSON-RPC 2.0 request."),null,null);var o=e.id,r=d(e.method);if("undefined"==typeof r)return"undefined"==typeof o?null:l(a(-32601,"Method not found.","The requestd remote procedure does not exist or is not available."),null,o);if(n.shouldCheckACL&&!t(r.acl,n.origin))return"undefined"==typeof o?null:l(a(-2,"Application error.","Access denied on server."),null,o);try{if(r.isAsync){var s=function(e){g(n.source,l(null,e,o),n.origin)},c=function(e){g(n.source,l(a(-1,"Application error.",e.message),null,o),n.origin)};return i(r.procedure,r.context,e.params,[s,c,n]),null}var u=i(r.procedure,r.context,e.params,[n]);return"undefined"==typeof o?null:l(null,u,o)}catch(h){return"undefined"==typeof o?null:h.match("^(No such param)")?l(a(-32602,"Invalid params.",h.message),null,o):l(a(-1,"Application error.",h.message),null,o)}}function p(e){var t=e.id,i=A[t];"undefined"!=typeof i&&null!==i&&(delete A[t],"undefined"==typeof e.error?i.onSuccess({destination:i.destination,publicProcedureName:i.publicProcedureName,params:i.params,status:"success",returnValue:e.result}):i.onError({destination:i.destination,publicProcedureName:i.publicProcedureName,params:i.params,status:"error",message:e.error.message+" "+e.error.data}))}function m(t){if(t.retries&&t.retries<0)throw new Exception("number of retries must be 0 or higher");var i=[];if("undefined"==typeof t.destination||null===t.destination||"workerParent"===t.destination)i=[{context:null,type:"workerParent"}];else if("publish"===t.destination)i=x();else if(t.destination instanceof Array)for(var n=0;n<t.destination.length;n++)i.push("workerParent"===t.destination[n]?{context:null,type:"workerParent"}:"undefined"!=typeof t.destination[n].frames?{context:t.destination[n],type:"window"}:{context:t.destination[n],type:"worker"});else i.push("undefined"!=typeof t.destination.frames?{context:t.destination,type:"window"}:{context:t.destination,type:"worker"});for(var n=0;n<i.length;n++){var o={destination:i[n].context,destinationDomain:"undefined"==typeof t.destinationDomain?["*"]:"string"==typeof t.destinationDomain?[t.destinationDomain]:t.destinationDomain,publicProcedureName:t.publicProcedureName,onSuccess:"undefined"!=typeof t.onSuccess?t.onSuccess:function(){},onError:"undefined"!=typeof t.onError?t.onError:function(){},retries:"undefined"!=typeof t.retries?t.retries:5,timeout:"undefined"!=typeof t.timeout?t.timeout:500,status:"requestNotSent"};isNotification="undefined"==typeof t.onError&&"undefined"==typeof t.onSuccess,params="undefined"!=typeof t.params?t.params:[],callId=e(),A[callId]=o,o.message=isNotification?s(t.publicProcedureName,params):s(t.publicProcedureName,params,callId),v(callId)}}function g(e,t,i){if("undefined"==typeof e||null===e)self.postMessage(n(t));else{if("undefined"!=typeof e.frames)return e.postMessage(n(t),i);e.postMessage(n(t))}}function v(e){var t=A[e];if("undefined"!=typeof t)if(t.retries<=-1)p(l(a(-4,"Application error.","Destination unavailable."),null,e));else{if("requestSent"===t.status)return;if(0===t.retries||"available"===t.status){t.status="requestSent",t.retries=-1,A[e]=t;for(var i=0;i<t.destinationDomain.length;i++)g(t.destination,t.message,t.destinationDomain[i],t),self.setTimeout(function(){v(e)},t.timeout)}else t.status="pinging",t.retries=t.retries-1,m({destination:t.destination,publicProcedureName:"receivePingRequest",onSuccess:function(t){t.returnValue===!0&&"undefined"!=typeof A[e]&&(A[e].status="available",v(e))},params:[t.publicProcedureName],retries:0,destinationDomain:t.destinationDomain}),A[e]=t,self.setTimeout(function(){A[e]&&"pinging"===A[e].status&&v(e)},t.timeout/t.retries)}}function y(e,t,i,n){"addEventListener"in e?e.addEventListener(t,i,n):e.attachEvent("on"+t,i)}function b(e,t,i){return function(n){var o={event:n,source:t,destinationType:i};e(o)}}function w(e){return"undefined"!=typeof d(e)}function _(){var e=[];if("undefined"!=typeof window){e.push({context:window.top,type:"window"});for(var t=0;"undefined"!=typeof e[t];t++)for(var i=e[t],n=0;n<i.context.frames.length;n++)e.push({context:i.context.frames[n],type:"window"})}else e.push({context:this,type:"workerParent"});return e}function C(){return P}function x(){var e=_(),t=C(),i=e.concat(t);return i}function T(){var e=[],t="undefined"!=typeof this.frames?window.location.protocol+"//"+window.location.host+(""!==window.location.port?":"+window.location.port:""):"";for(var i in k)i in E||e.push({publicProcedureName:k[i].publicProcedureName,acl:k[i].acl,origin:t});return e}function S(e){function t(e,t){for(var i=0;i<e.length;i++)e[i].origin.match(new RegExp(o))&&e[i].publicProcedureName.match(new RegExp(r))&&a.push({publicProcedureName:e[i].publicProcedureName,destination:t,procedureACL:e[i].acl,destinationOrigin:e[i].origin})}var i=null;if("undefined"==typeof e.destination){i=x();for(var n=0;n<i.length;n++)i[n]=i[n].context}else i=e.destination;var o="undefined"==typeof e.originRegex?"(.*)":e.originRegex,r="undefined"==typeof e.nameRegex?"(.*)":e.nameRegex,s=i.length,a=[];pmrpc.call({destination:i,destinationDomain:"*",publicProcedureName:"getRegisteredProcedures",onSuccess:function(i){s--,t(i.returnValue,i.destination),0===s&&e.callback(a)},onError:function(){s--,0===s&&e.callback(a)}})}if("undefined"==typeof JSON||"undefined"==typeof JSON.stringify||"undefined"==typeof JSON.parse)throw"pmrpc requires the JSON library";if("undefined"==typeof this.postMessage&&"undefined"==typeof this.onconnect)throw"pmrpc requires the HTML5 cross-document messaging and worker APIs";var k={},A={},E={};if("window"in this){var M=b(h,null,"window");y(this,"message",M,!1)}else if("onmessage"in this){var M=b(h,this,"worker");y(this,"message",M,!1)}else{if(!("onconnect"in this))throw"Pmrpc must be loaded within a browser window or web worker.";var D=function(e){var t=b(h,e.ports[0],"sharedWorker");y(e.ports[0],"message",t,!1),e.ports[0].start()};y(this,"connect",D,!1)}var R=this.Worker;this.nonPmrpcWorker=R;var N=this.SharedWorker;this.nonPmrpcSharedWorker=N;var P=[];return this.Worker=function(e){var t=new R(e);P.push({context:t,type:"worker"});var i=b(h,t,"worker");return y(t,"message",i,!1),t},this.SharedWorker=function(e,t){var i=new N(e,t);P.push({context:i,type:"sharedWorker"});var n=b(h,i.port,"sharedWorker");return y(i.port,"message",n,!1),i.postMessage=function(e,t){return i.port.postMessage(e,t)},i.port.start(),i},c({publicProcedureName:"receivePingRequest",procedure:w}),c({publicProcedureName:"getRegisteredProcedures",procedure:T}),E={getRegisteredProcedures:null,receivePingRequest:null},{register:c,unregister:u,call:m,discover:S}}(),"function"==typeof define&&define.amd&&define(pmrpc),window.Yesware=window.Yesware||{},function(e,t,i){function n(e){function i(t,i){return t(i,function(t){return e[t]&&e[t].available})}function n(e){return o(e)}function o(){return i(t.all,arguments)}function r(){return i(t.any,arguments)}return{isEnabled:n,allEnabled:o,anyEnabled:r}}function o(i,o,r){var s={},a={};r?a.beforeSend=function(e){e.setRequestHeader("Authorization","Bearer "+r)}:s.auth_token=o;var l=e.Deferred(),c=i.indexOf("//")>-1?"":"https://";return t.extend(a,{type:"GET",url:c+i+"/api/v1/availability",data:s}),e.ajax(a).done(function(e){l.resolve(n(e))}).fail(l.reject),l}i.Availabilities={fetch:function(e){return o(e.domain,e.authToken,e.accessToken)}}}(jQuery,_,window.Yesware),this.Yesware=this.Yesware||{},this.Yesware.MadLibs=this.Yesware.MadLibs||{},this.Yesware.MadLibs.HtmlTemplates=this.Yesware.MadLibs.HtmlTemplates||{},this.Yesware.MadLibs.HtmlTemplates["CategoriesView.tpl"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<h3>Personal Categories</h3>\n<ul class="template-category personal-template-category">\n  ',_.forEach(libraries,function(e){__p+="\n    ","User"==e.owner_type&&(__p+="\n      ",_.forEach(e.categories,function(e){__p+='\n        <li data-category-id="'+(null==(__t=e.id)?"":__t)+'" data-usage-event="clickCategory">\n        </li>\n      '}),__p+="\n    "),__p+="\n  "}),__p+='\n</ul>\n\n<h3>Team Categories</h3>\n<ul class="template-category team-template-category">\n  ',_.forEach(libraries,function(e){__p+="\n    ","Team::Team"==e.owner_type&&(__p+="\n      ",_.forEach(e.categories,function(e){__p+='\n        <li data-category-id="'+(null==(__t=e.id)?"":__t)+'" data-usage-event="clickCategory">\n        </li>\n      '}),__p+="\n    "),__p+="\n  "}),__p+="\n</ul>\n";return __p},this.Yesware.MadLibs.HtmlTemplates["CategoryViewTemplate.tpl"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<span class="category-title">'+(null==(__t=category.title)?"":__t)+'</span>\n<div class="category-right">\n  <span class="category-count">'+(null==(__t=category.templates.length)?"":__t)+'</span>\n  <span class="category-disclosure"></span>\n</div>\n',"Team::Team"==library.owner_type&&(__p+='\n  <div class="category-bottom-row">\n    '+(null==(__t=library.owner_name)?"":__t)+"\n  </div>\n"),__p+="\n";return __p},this.Yesware.MadLibs.HtmlTemplates["FetchFailureView.tpl"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="templates-error">\n  <h1>Sorry!</h1>\n\n  <h3>An error occurred fetching your template library.</h3>\n  <br/>\n  <p>Please refresh the page or contact Yesware Support if the problems recurs.</p>\n\n  <p class="error-info">Error: <span>'+(null==(__t=errorText)?"":__t)+"</p>\n</div>\n\n\n";return __p},this.Yesware.MadLibs.HtmlTemplates["ModalLayoutView.tpl"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<header>\n  Yesware Templates\n  <div class="close" data-usage-event="closeTemplatesWidget"></div>\n</header>\n<div class="mini-templates-body">\n  <div class="templates-container"></div>\n  <div class="mini-templates-overlay"></div>\n</div>\n';return __p},this.Yesware.MadLibs.HtmlTemplates["TemplateViewTemplate.tpl"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<span class="template-name">\n  '+(null==(__t=template.title)?"":__t)+'\n</span>\n<span class="template-text">\n  '+(null==(__t=template.bodies.text)?"":__t)+'\n</span>\n\n<div class="template-bottom-row">\n  <span class="template-category-tag">\n    '+(null==(__t=category.title)?"":__t)+"\n  </span>\n  ",category.team&&(__p+='\n    <span class="template-team-tag">\n      '+(null==(__t=category.team)?"":__t)+"\n    </span>\n  "),__p+='\n</div>\n\n<div class="template-quick-insert">Quick Insert</div>\n';return __p},this.Yesware.MadLibs.HtmlTemplates["TemplatesButtonViewTemplate.tpl"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="templates-toggle">Templates</div>';return __p},this.Yesware.MadLibs.HtmlTemplates["TemplatesViewTemplate.tpl"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!-- For when we enable search in the future\n<section class="search-container">\n<input type="text" class="template-search" placeholder="Search by content or #category"/>\n<div class="erase-search" style="display: none;"></div>\n</section>\n<ul class="filter-selector">\n  <li class="filter-recent">Recently Used</li>\n  <li class="filter-favorites">Favorites</li>\n  <li class="filter-all">All</li>\n</ul>\n-->\n<div class="templates-container">\n  <div class="category-header">\n    <a href="#" class="back" data-usage-event="clickBackToAllCategories">\n      &laquo; Categories /\n    </a>\n    '+(null==(__t=category.title)?"":__t)+'\n  </div>\n  <div class="category-templates">\n    <ul class="filtered-templates">\n      ',category.templates.length>0?(__p+="\n        <ul>\n          ",_.each(category.templates,function(e){__p+='\n            <li data-template-id="'+(null==(__t=e.id)?"":__t)+'">\n            </li>\n          '}),__p+="\n        </ul>\n      "):__p+='\n        <div class="category-templates-blank">No templates here</div>\n      ',__p+="\n    </ul>\n  </div>\n</div>\n";return __p},this.Yesware.MadLibs.HtmlTemplates["test.tpl"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<p class="test">Hello  '+(null==(__t=name)?"":__t)+"</p>\n";return __p},window.Yesware=window.Yesware||{},window.Yesware.namespace=function(e){for(var t=e.split("."),i=window.Yesware,n=0;n<t.length;n++)i=i[t[n]]=i[t[n]]||{};return i},Yesware.namespace("MadLibs.Helpers").RequestHelper={sync:function(e,t,i){if(!i.url){var n=Yesware.MadLibs.config.requestScheme||"https://",o=_.result(t,"url");i.url=n+Yesware.MadLibs.config.requestDomain+o}var r=Yesware.MadLibs.config.userAccessToken?{access_token:Yesware.MadLibs.config.userAccessToken}:{auth_token:Yesware.MadLibs.config.userAuthToken};return _.contains(["create","update","patch"],e)?(i.attrs=i.attrs||{},_.extend(i.attrs,r,t.toJSON())):Yesware.MadLibs.config.userAccessToken?i.beforeSend=function(e){e.setRequestHeader("Authorization","Bearer "+Yesware.MadLibs.config.userAccessToken)}:(i.data=i.data||{},_.extend(i.data,r)),Backbone.sync.call(this,e,t,i)}},Yesware.namespace("MadLibs.Helpers").UsagesHelper={logUsage:function(e){var t=$(e.currentTarget).data("usage-event");this.trigger("usage",t),this.trigger("usage:"+t,t)}},Yesware.namespace("MadLibs.Models").AppConfig=Backbone.Model.extend({defaults:function(){return{requestDomain:null,userAuthToken:null,userAccessToken:null}}}),Yesware.namespace("MadLibs.Models").CategoryModel=Backbone.Model.extend({initialize:function(){this.set("templates",new Yesware.MadLibs.Collections.TemplateCollection(this.get("templates")))},defaults:function(){return{id:-1,title:"","private":!1,templates:null}},toJSON:function(){return _.extend(_.clone(this.attributes),{templates:this.get("templates").toJSON()})}}),_.extend(Yesware.MadLibs.Models.CategoryModel.prototype,Yesware.MadLibs.Helpers.RequestHelper),Yesware.namespace("MadLibs.Models").LibraryModel=Backbone.Model.extend({urlRoot:"/api/v1/template_library/libraries",initialize:function(){this.ensureCategories()},defaults:function(){return{id:-1,editable:!1,owner_id:-1,owner_type:"",owner_name:"",categories:null}},url:function(){return this.urlRoot+"/"+this.id},ensureCategories:function(){null==this.get("categories")&&this.set("categories",new Yesware.MadLibs.Collections.CategoryCollection)},parse:function(e){return this.ensureCategories(),e.template_library&&(e=e.template_library),e.categories&&(this.get("categories").reset(e.categories,{parse:!0}),e.categories=this.get("categories")),e},toJSON:function(){return _.extend(Backbone.Model.prototype.toJSON.apply(this),{categories:this.get("categories").toJSON()})}}),_.extend(Yesware.MadLibs.Models.LibraryModel.prototype,Yesware.MadLibs.Helpers.RequestHelper),Yesware.namespace("MadLibs.Models").TemplateModel=Backbone.Model.extend({defaults:function(){return{bodies:{html:"",text:"",unsafe_html:""},id:-1,subject:"",title:""}}}),_.extend(Yesware.MadLibs.Models.TemplateModel.prototype,Yesware.MadLibs.Helpers.RequestHelper),Yesware.namespace("MadLibs.Collections").CategoryCollection=Backbone.Collection.extend({model:Yesware.MadLibs.Models.CategoryModel,initialize:function(e,t){t=t||{},this.libraryId=t.libraryId}}),_.extend(Yesware.MadLibs.Collections.CategoryCollection.prototype,Yesware.MadLibs.Helpers.RequestHelper),Yesware.namespace("MadLibs.Collections").LibraryCollection=Backbone.Collection.extend({model:Yesware.MadLibs.Models.LibraryModel,urlRoot:"/api/v1/template_library/libraries",url:function(){return this.urlRoot},parse:function(e){return e.template_libraries}}),_.extend(Yesware.MadLibs.Collections.LibraryCollection.prototype,Yesware.MadLibs.Helpers.RequestHelper),Yesware.namespace("MadLibs.Collections").TemplateCollection=Backbone.Collection.extend({model:Yesware.MadLibs.Models.TemplateModel}),_.extend(Yesware.MadLibs.Collections.TemplateCollection.prototype,Yesware.MadLibs.Helpers.RequestHelper),Yesware.namespace("MadLibs.Views").CategoriesView=Backbone.View.extend({initialize:function(e){this.dispatcher=e.dispatcher,this.template=Yesware.MadLibs.HtmlTemplates["CategoriesView.tpl"],this.libraries=e.libraries},render:function(){this.$el.html(this.template({libraries:this.libraries.toJSON()}));var e=this;return this.libraries.each(function(t){t.get("categories").each(function(i){new Yesware.MadLibs.Views.CategoryView({el:e.$("[data-category-id='"+i.get("id")+"']"),model:i,library:t,dispatcher:e.dispatcher})})}),this}}),Yesware.namespace("MadLibs.Views").CategoryView=Backbone.View.extend({events:{click:function(e){this.dispatcher.trigger("show_templates",this.model),this.dispatcher.trigger("usage",e)}},initialize:function(e){this.dispatcher=e.dispatcher,this.template=Yesware.MadLibs.HtmlTemplates["CategoryViewTemplate.tpl"],this.library=e.library,this.render()},data:function(){return{category:this.model.toJSON(),library:this.library.toJSON()}},render:function(){this.$el.html(this.template(this.data()))}}),Yesware.namespace("MadLibs.Views").FetchFailureView=Backbone.View.extend({initialize:function(e){this.template=Yesware.MadLibs.HtmlTemplates["FetchFailureView.tpl"],this.status=e.status,this.errorText=e.errorText},render:function(){return this.$el.html(this.template({status:this.status,errorText:this.errorText})),this}}),Yesware.namespace("MadLibs.Views").ModalLayoutView=Backbone.View.extend({events:{"click .close":function(e){this.hideView(),this.dispatcher.trigger("usage",e)}},initialize:function(e){var t=this;this.dispatcher=e.dispatcher,this.template=Yesware.MadLibs.HtmlTemplates["ModalLayoutView.tpl"],this.libraries=new Yesware.MadLibs.Collections.LibraryCollection,this.render(),this.libraries.fetch().done(function(){t.pullLibraryContents(t.libraries)}).fail(function(e,i,n){t.createFetchFailureView(i,n).showFetchFailureView()}),this.dispatcher.on("show_templates",this.showTemplatesView,this),this.dispatcher.on("show_all_categories",function(){this.createCategoriesView(this.libraries).showCategoriesView()},this)},pullLibraryContents:function(e){var t=this,i=[];e.each(function(e){i.push(e.fetch())}),$.when.apply($,i).done(function(){t.createCategoriesView(e).showCategoriesView()}).fail(function(e,i,n){t.createFetchFailureView(i,n).showFetchFailureView()})},render:function(){return this.$el.html(this.template),this},createCategoriesView:function(e){return this.categoriesView=new Yesware.MadLibs.Views.CategoriesView({libraries:e,el:this.$(".templates-container"),dispatcher:this.dispatcher}),this},showCategoriesView:function(){return this.categoriesView.render(),this.$(".mini-templates-overlay").hide(),this},createFetchFailureView:function(e,t){return this.fetchFailureView=new Yesware.MadLibs.Views.FetchFailureView({el:this.$(".templates-container"),status:e,errorText:t}),this},showFetchFailureView:function(){return this.fetchFailureView.render(),this.$(".mini-templates-overlay").hide(),this},hideView:function(){this.$el.closest(".templates-mini").hide()},showTemplatesView:function(e){new Yesware.MadLibs.Views.TemplatesView({el:this.$(".templates-container"),model:e,dispatcher:this.dispatcher})}}),Yesware.namespace("MadLibs.Views").TemplateView=Backbone.View.extend({events:{"click .template-quick-insert":"onTemplateQuickInsert"},initialize:function(e){this.dispatcher=e.dispatcher,this.template=Yesware.MadLibs.HtmlTemplates["TemplateViewTemplate.tpl"],this.category=e.category,this.render()},data:function(){return{template:this.model.toJSON(),category:this.category}},render:function(){this.$el.html(this.template(this.data()))},onTemplateQuickInsert:function(){this.dispatcher.trigger("template-selected",this.model.toJSON())}}),Yesware.namespace("MadLibs.Views").TemplatesButtonView=Backbone.View.extend({initialize:function(e){this.options=e,this.template=Yesware.MadLibs.HtmlTemplates["TemplatesButtonViewTemplate.tpl"],this.modalLayoutView=new Yesware.MadLibs.Views.ModalLayoutView({dispatcher:e.dispatcher}),this.render()},render:function(){return this.$el.html(this.template),this.modalLayoutView.render(),this.wireDialog(),this},destroy:function(){var e=this.$el.find(".templates-toggle");e.qtip("destroy",!0),this.modalLayoutView.remove(),this.stopListening(),this.$el.empty()},wireDialog:function(){var e=this.$el.find(".templates-toggle"),t="qtip-light templates-mini";e.qtip({id:"yesware-templates-"+this.id,content:{backbone:{view:this.modalLayoutView}},position:{my:this.options.my||"bottom center",at:this.options.at||"top center"},show:{event:"click"},hide:{event:"click"},style:{classes:t,tip:{width:12,height:7,offset:75}}})},closeQTip:function(){this.$(".templates-toggle").qtip("hide")}}),Yesware.namespace("MadLibs.Views").TemplatesView=Backbone.View.extend({events:{"click .back":function(e){e.preventDefault(),this.dispatcher.trigger("show_all_categories"),this.dispatcher.trigger("usage",e)}},initialize:function(e){this.dispatcher=e.dispatcher,this.template=Yesware.MadLibs.HtmlTemplates["TemplatesViewTemplate.tpl"],this.render()},data:function(){return{category:this.model.toJSON()}},render:function(){var e=this;return this.$el.html(this.template(this.data())),this.model.get("templates").each(function(t){new Yesware.MadLibs.Views.TemplateView({el:$("[data-template-id='"+t.get("id")+"']"),model:t,category:e.model.toJSON(),dispatcher:e.dispatcher})}),this}}),function(e){var t=-1;e.TemplatesDialog=function(e){if(!e.el)throw"Please specify an element or selector to attach to";if(!e.templateInsertCallback)throw"Please specify a callback to invoke when a template is selected";_.bindAll(this,"_onTemplateInsert","logUsage"),this._instanceId=++t,this._templateInsertCallback=e.templateInsertCallback,this._dispatcher=_.clone(Backbone.Events),this._wireEvents(),this._buttonView=new Yesware.MadLibs.Views.TemplatesButtonView({id:this._instanceId,el:e.el,dispatcher:this._dispatcher,my:e.my,at:e.at})},function(e){e._wireEvents=function(){this._dispatcher.on("template-selected",this._onTemplateInsert),this._dispatcher.on("usage",this.logUsage)},e._onTemplateInsert=function(e){this._templateInsertCallback(e),this._buttonView.closeQTip()},e.destroy=function(){this._buttonView.destroy(),this._dispatcher.off()}}(e.TemplatesDialog.prototype)}(Yesware.namespace("MadLibs")),_.extend(Yesware.MadLibs.TemplatesDialog.prototype,Backbone.Events,Yesware.MadLibs.Helpers.UsagesHelper),function(e){e.init=function(t){e.config={requestDomain:t.requestDomain,userAuthToken:t.userAuthToken,userAccessToken:t.userAccessToken}},e.build=function(t){return new e.TemplatesDialog(t)}}(Yesware.namespace("MadLibs")),/*!
 * jQuery UI Core 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
function(e,t){function i(t,i){var o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,r=o.name,t.href&&r&&"map"===o.nodeName.toLowerCase()?(s=e("img[usemap=#"+r+"]")[0],!!s&&n(s)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var o=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,o,r=e(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),o=isNaN(n);return(o||n>=0)&&i(t,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function o(t,i,n,o){return e.each(r,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var r="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(s,o(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(s,o(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var o,r=e.ui[t].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(e,t,i){var n,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<o.length;n++)e.options[o[n][0]]&&o[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0?!0:(t[n]=1,o=t[n]>0,t[n]=0,o)}})}(jQuery),/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e,t){var i=0,n=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(r){}o(t)},e.widget=function(t,i,n){var o,r,s,a,l={},c=t.split(".")[0];t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}()):void(l[t]=n)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(i){for(var o,r,s=n.call(arguments,1),a=0,l=s.length;l>a;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==t&&(i[o]=e.isPlainObject(r)?e.isPlainObject(i[o])?e.widget.extend({},i[o],r):e.widget.extend({},r):r);return i},e.widget.bridge=function(i,o){var r=o.prototype.widgetFullName||i;e.fn[i]=function(s){var a="string"==typeof s,l=n.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,this.each(a?function(){var n,o=e.data(this,r);return o?e.isFunction(o[s])&&"_"!==s.charAt(0)?(n=o[s].apply(o,l),n!==o&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")}:function(){var t=e.data(this,r);t?t.option(s||{})._init():e.data(this,r,new o(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var o,r,s,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(r=a[i]=e.widget.extend({},this.options[i]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(i=o.pop(),n===t)return r[i]===t?null:r[i];r[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}})}(jQuery),/*!
 * jQuery UI Accordion 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/accordion/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,o=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[n-1]}r&&(e(t.target).attr("tabIndex",-1),e(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,o=n.heightStyle,r=this.element.parent(),s=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),o=i.next(),r=o.attr("id");n||(n=s+"-header-"+t,i.attr("id",n)),r||(r=s+"-panel-"+t,o.attr("id",r)),i.attr("aria-controls",r),o.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===o?(i=r.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===o&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),r=o[0]===n[0],s=r&&i.collapsible,a=s?e():o.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:s?e():o,newPanel:a};t.preventDefault(),r&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=s?!1:this.headers.index(o),this.active=r?e():o,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),r||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&o.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,o){var r,s,a,l=this,c=0,u=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},h=u&&d.down||d,f=function(){l._toggleComplete(o)};return"number"==typeof h&&(a=h),"string"==typeof h&&(s=h),s=s||h.easing||d.easing,a=a||h.duration||d.duration,t.length?e.length?(r=e.show().outerHeight(),t.animate(i,{duration:a,easing:s,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(n,{duration:a,easing:s,complete:f,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(r-t.outerHeight()-c),c=0)}})):t.animate(i,a,s,f):e.animate(n,a,s,f)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),/*!
 * jQuery UI Position 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
function(e,t){function i(e,t,i){return[parseFloat(e[0])*(f.test(e[0])?t/100:1),parseFloat(e[1])*(f.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function o(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var r,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(r!==t)return r;var i,n,o=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=o.children()[0];return e("body").append(o),i=s.offsetWidth,o.css("overflow","scroll"),n=s.offsetWidth,i===n&&(n=o[0].clientWidth),o.remove(),r=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,r="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var r,f,m,g,v,y,b=e(t.of),w=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(w),C=(t.collision||"flip").split(" "),x={};return y=o(b),b[0].preventDefault&&(t.at="left top"),f=y.width,m=y.height,g=y.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):u.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=u.test(n[1])?n[1]:"center",e=d.exec(n[0]),i=d.exec(n[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===C.length&&(C[1]=C[0]),"right"===t.at[0]?v.left+=f:"center"===t.at[0]&&(v.left+=f/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),r=i(x.at,f,m),v.left+=r[0],v.top+=r[1],this.each(function(){var o,c,u=e(this),d=u.outerWidth(),h=u.outerHeight(),p=n(this,"marginLeft"),y=n(this,"marginTop"),T=d+p+n(this,"marginRight")+_.width,S=h+y+n(this,"marginBottom")+_.height,k=e.extend({},v),A=i(x.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?k.left-=d:"center"===t.my[0]&&(k.left-=d/2),"bottom"===t.my[1]?k.top-=h:"center"===t.my[1]&&(k.top-=h/2),k.left+=A[0],k.top+=A[1],e.support.offsetFractions||(k.left=l(k.left),k.top=l(k.top)),o={marginLeft:p,marginTop:y},e.each(["left","top"],function(i,n){e.ui.position[C[i]]&&e.ui.position[C[i]][n](k,{targetWidth:f,targetHeight:m,elemWidth:d,elemHeight:h,collisionPosition:o,collisionWidth:T,collisionHeight:S,offset:[r[0]+A[0],r[1]+A[1]],my:t.my,at:t.at,within:w,elem:u})}),t.using&&(c=function(e){var i=g.left-k.left,n=i+f-d,o=g.top-k.top,r=o+m-h,l={target:{element:b,left:g.left,top:g.top,width:f,height:m},element:{element:u,left:k.left,top:k.top,width:d,height:h},horizontal:0>n?"left":i>0?"right":"center",vertical:0>r?"top":o>0?"bottom":"middle"};d>f&&a(i+n)<f&&(l.horizontal="center"),h>m&&a(o+r)<m&&(l.vertical="middle"),l.important=s(a(i),a(n))>s(a(o),a(r))?"horizontal":"vertical",t.using.call(this,e,l)}),u.offset(e.extend(k,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-r-o;t.collisionWidth>r?l>0&&0>=c?(i=e.left+l+t.collisionWidth-r-o,e.left+=l-i):e.left=c>0&&0>=l?o:l>c?o+r-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-a,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-r-o;t.collisionHeight>r?l>0&&0>=c?(i=e.top+l+t.collisionHeight-r-o,e.top+=l-i):e.top=c>0&&0>=l?o:l>c?o+r-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,o=t.within,r=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-s-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>u?(i=e.left+h+f+p+t.collisionWidth-s-r,(0>i||i<a(u))&&(e.left+=h+f+p)):d>0&&(n=e.left-t.collisionPosition.marginLeft+h+f+p-l,(n>0||a(n)<d)&&(e.left+=h+f+p))},top:function(e,t){var i,n,o=t.within,r=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-s-l,h="top"===t.my[1],f=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(n=e.top+f+p+m+t.collisionHeight-s-r,e.top+f+p+m>u&&(0>n||n<a(u))&&(e.top+=f+p+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+f+p+m-l,e.top+f+p+m>d&&(i>0||a(i)<d)&&(e.top+=f+p+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,o,r,s=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(s?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in n)t.style[r]=n[r];t.appendChild(a),i=s||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=e(a).offset().left,e.support.offsetFractions=o>10&&11>o,t.innerHTML="",i.removeChild(t)}()}(jQuery),/*!
 * jQuery UI Menu 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,o,r,s,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",r=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),r===o?s=!0:r=o+r,a=new RegExp("^"+i(r),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=s&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(r=String.fromCharCode(t.keyCode),a=new RegExp("^"+i(r),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,o,r,s,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-i-n,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.height(),0>o?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-o<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+o>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),/*!
 * jQuery UI Autocomplete 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 *	jquery.ui.menu.js
 */
function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=r?!0:s?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),/*!
 * jQuery UI Button 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e){var t,i,n,o,r="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},c=function(t){var i=t.name,n=t.form,o=e([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),o};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,a=this.options,u="checkbox"===this.type||"radio"===this.type,d=u?"":"ui-state-active",h="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){s.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){s.buttonElement.removeClass(h)}),u&&(this.element.bind("change"+this.eventNamespace,function(){o||s.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){a.disabled||(o=!1,i=e.pageX,n=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){a.disabled||(i!==e.pageX||n!==e.pageY)&&(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||o?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||o)return!1;e(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var t=s.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,void s.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" "+s+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(a),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,r=[];n.primary||n.secondary?(this.options.text&&r.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(r.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),/*!
 * jQuery UI Datepicker 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 *
 * Depends:
 *	jquery.ui.core.js
 */
function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(r.inline?t.parent()[0]:r.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function o(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var r,s="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,o,r;n=t.nodeName.toLowerCase(),o="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),r=this._newInst(e(t),o),r.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,r):o&&this._inlineDatepicker(t,r)},_newInst:function(t,i){var o=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:o,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,s,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,o,r,s=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),s&&(i.append=e("<span class='"+this._appendClass+"'>"+s+"</span>"),t[a?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(o=this._get(i,"buttonText"),r=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):e("<button type='button'></button>").addClass(this._triggerClass).html(r?e("<img/>").attr({src:r,alt:o,title:o}):o)),t[a?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,o,r=new Date(2009,11,20),s=this._get(e,"dateFormat");s.match(/[DM]/)&&(t=function(e){for(i=0,n=0,o=0;o<e.length;o++)e[o].length>i&&(i=e[o].length,n=o);return n},r.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,s,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,r,a){var l,c,u,d,h,f=this._dialogInst;return f||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},e.data(this._dialogInput[0],s,f)),o(f.settings,r||{}),i=i&&i.constructor===Date?this._formatDate(f,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,u/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],s,f),this},_destroyDatepicker:function(t){var i,n=e(t),o=e.data(t,s);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,s),"input"===i?(o.append.remove(),o.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,o=e(t),r=e.data(t,s);o.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,o=e(t),r=e.data(t,s);o.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,s)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,r){var s,a,l,c,u=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):u?"all"===n?e.extend({},u.settings):this._get(u,n):null:(s=n||{},"string"==typeof n&&(s={},s[n]=r),void(u&&(this._curInst===u&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(u,"min"),c=this._getMinMaxDate(u,"max"),o(u.settings,s),null!==l&&s.dateFormat!==t&&s.minDate===t&&(u.settings.minDate=this._formatDate(u,l)),null!==c&&s.dateFormat!==t&&s.maxDate===t&&(u.settings.maxDate=this._formatDate(u,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),u),this._autoSize(u),this._setDate(u,a),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,o,r=e.datepicker._getInst(t.target),s=!0,a=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),s=!1;break;case 13:return o=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",r.dpDiv),o[0]&&e.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,o[0]),i=e.datepicker._get(r,"onSelect"),i?(n=e.datepicker._formatDate(r),i.apply(r.input?r.input[0]:null,[n,r])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,o=e.datepicker._getInst(t.target);return e.datepicker._get(o,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(o){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,r,s,a,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),r=n?n.apply(t,[t,i]):{},r!==!1&&(o(i.settings,r),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|="fixed"===e(this).css("position"),!s}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),a=e.datepicker._checkOffset(i,a,s),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,r=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),o=n[1],s=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&t.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",s*o+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var o=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?o-s:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0),i.top-=Math.min(i.top,i.top+r>c&&c>r?Math.abs(r+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),o=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[o?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,o,r,a=this._curInst;!a||t&&a!==e.data(t,s)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),o=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[i]||e.effects[i])?a.dpDiv.hide(i,e.datepicker._get(a,"showOptions"),n,o):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,r=this._get(a,"onClose"),r&&r.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var o=e(t),r=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(r,i+("M"===n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(t){var i,n=e(t),o=this._getInst(n[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(i=new Date,o.selectedDay=i.getDate(),o.drawMonth=o.selectedMonth=i.getMonth(),o.drawYear=o.selectedYear=i.getFullYear()),this._notifyChange(o),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var o=e(t),r=this._getInst(o[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(o)},_selectDay:function(t,i,n,o){var r,s=e(t);e(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(r=this._getInst(s[0]),r.selectedDay=r.currentDay=e("a",o).html(),r.selectedMonth=r.currentMonth=i,r.selectedYear=r.currentYear=n,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,o=e(t),r=this._getInst(o[0]);i=null!=i?i:this._formatDate(r),r.input&&r.input.val(i),this._updateAlternate(r),n=this._get(r,"onSelect"),n?n.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,o,r=this._get(t,"altField");r&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),o=this.formatDate(i,n,this._getFormatConfig(t)),e(r).each(function(){e(this).val(o)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var o,r,s,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,h=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,p=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,w=function(e){var i=o+1<t.length&&t.charAt(o+1)===e;return i&&o++,i},_=function(e){var t=w(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,o=new RegExp("^\\d{1,"+n+"}"),r=i.substring(l).match(o);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},C=function(t,n,o){var r=-1,s=e.map(w(t)?o:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(s,function(e,t){var n=t[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(r=t[0],l+=n.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==t.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<t.length;o++)if(b)"'"!==t.charAt(o)||w("'")?x():b=!1;else switch(t.charAt(o)){case"d":v=_("d");break;case"D":C("D",d,h);break;case"o":y=_("o");break;case"m":g=_("m");break;case"M":g=C("M",f,p);break;case"y":m=_("y");break;case"@":a=new Date(_("@")),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((_("!")-this._ticksTo1970)/1e4),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":w("'")?x():b=!0;break;default:x()}if(l<i.length&&(s=i.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(r=this._getDaysInMonth(m,g-1),r>=v)break;g++,v-=r}if(a=this._daylightSavingAdjust(new Date(m,g-1,v)),a.getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},u=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",h=!1;if(t)for(n=0;n<e.length;n++)if(h)"'"!==e.charAt(n)||l("'")?d+=e.charAt(n):h=!1;else switch(e.charAt(n)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),o,r);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),s,a);break;case"y":d+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=e.charAt(n)}return d},_possibleChars:function(e){var t,i="",n=!1,o=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||o("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":o("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),r=o,s=this._getFormatConfig(e);try{r=this.parseDate(i,n,s)||o}catch(a){n=t?"":n}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=n?r.getDate():0,e.currentMonth=n?r.getMonth():0,e.currentYear=n?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var o=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},r=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(n){}for(var o=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=o.getFullYear(),s=o.getMonth(),a=o.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":s+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(r,s));break;case"y":case"Y":r+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(r,s))}c=l.exec(i)}return new Date(r,s,a)},s=null==i||""===i?n:"string"==typeof i?r(i):"number"==typeof i?isNaN(i)?n:o(i):new Date(i.getTime());return s=s&&"Invalid Date"===s.toString()?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,o=e.selectedMonth,r=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),o===e.selectedMonth&&r===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,o,r,s,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_,C,x,T,S,k,A,E,M,D,R,N,P,O,H,F,I,B,z,L=new Date,W=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),V=this._get(e,"isRTL"),j=this._get(e,"showButtonPanel"),q=this._get(e,"hideIfNoPrevNext"),U=this._get(e,"navigationAsDateFormat"),$=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),K=1!==$[0]||1!==$[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),Z=e.drawMonth-Y,et=e.drawYear;if(0>Z&&(Z+=12,et--),Q)for(t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-$[0]*$[1]+1,Q.getDate())),t=J&&J>t?J:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=U?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-G,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+i+"</span></a>",o=this._get(e,"nextText"),o=U?this.formatDate(o,this._daylightSavingAdjust(new Date(et,Z+G,1)),this._getFormatConfig(e)):o,r=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+o+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+o+"</span></a>",s=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?X:W,s=U?this.formatDate(s,a,this._getFormatConfig(e)):s,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(V?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(V?"":l)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),h=this._get(e,"dayNames"),f=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",C=0;C<$[0];C++){for(x="",this.maxRows=4,T=0;T<$[1];T++){if(S=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),k=" ui-corner-all",A="",K){if(A+="<div class='ui-datepicker-group",$[1]>1)switch(T){case 0:A+=" ui-datepicker-group-first",k=" ui-corner-"+(V?"right":"left");break;case $[1]-1:A+=" ui-datepicker-group-last",k=" ui-corner-"+(V?"left":"right");break;default:A+=" ui-datepicker-group-middle",k=""}A+="'>"}for(A+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+k+"'>"+(/all|left/.test(k)&&0===C?V?r:n:"")+(/all|right/.test(k)&&0===C?V?n:r:"")+this._generateMonthYearHeader(e,Z,et,J,Q,C>0||T>0,p,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",E=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",_=0;7>_;_++)M=(_+u)%7,E+="<th"+((_+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[M]+"'>"+f[M]+"</span></th>";for(A+=E+"</tr></thead><tbody>",D=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,D)),R=(this._getFirstDayOfMonth(et,Z)-u+7)%7,N=Math.ceil((R+D)/7),P=K&&this.maxRows>N?this.maxRows:N,this.maxRows=P,O=this._daylightSavingAdjust(new Date(et,Z,1-R)),H=0;P>H;H++){for(A+="<tr>",F=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(O)+"</td>":"",_=0;7>_;_++)I=g?g.apply(e.input?e.input[0]:null,[O]):[!0,""],B=O.getMonth()!==Z,z=B&&!y||!I[0]||J&&J>O||Q&&O>Q,F+="<td class='"+((_+u+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(O.getTime()===S.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===O.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+I[1]+(O.getTime()===X.getTime()?" "+this._currentClass:"")+(O.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(B&&!v||!I[2]?"":" title='"+I[2].replace(/'/g,"&#39;")+"'")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(B&&!v?"&#xa0;":z?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===W.getTime()?" ui-state-highlight":"")+(O.getTime()===X.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);A+=F+"</tr>"}Z++,Z>11&&(Z=0,et++),A+="</tbody></table>"+(K?"</div>"+($[0]>0&&T===$[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=A}w+=x}return w+=c,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,i,n,o,r,s,a){var l,c,u,d,h,f,p,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(r||!g)w+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=n.getMonth())&&(!c||u<=o.getMonth())&&(w+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+a[u]+"</option>");w+="</select>"}if(y||(b+=w+(!r&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),f=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},p=f(d[0]),m=Math.max(p,f(d[1]||"")),p=n?Math.max(p,n.getFullYear()):p,m=o?Math.min(m,o.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=p;p++)e.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!r&&g&&v?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),o=e.drawMonth+("M"===i?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+("D"===i?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,r)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)
},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=i&&i>t?i:t;return n&&o>n?n:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var o=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(i,n+(0>t?t:o[0]*o[1]),1));return 0>t&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var i,n,o=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),s=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||t.getTime()>=o.getTime())&&(!r||t.getTime()<=r.getTime())&&(!s||t.getFullYear()>=s)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),/*!
 * jQuery UI Mouse 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */
function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,r="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return o&&!r&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),/*!
 * jQuery UI Draggable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;return o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=e(o.containment),n=i[0],void(n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,o,r,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),o=n.options,r=e.extend({},i,{item:n.element});n.sortables=[],e(o.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,r))})},stop:function(t,i){var n=e(this).data("ui-draggable"),o=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))})},drag:function(t,i){var n=e(this).data("ui-draggable"),o=this;e.each(n.sortables,function(){var r=!1,s=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(s.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,o=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,o,r,s,a,l,c,u,d,h,f=e(this).data("ui-draggable"),p=f.options,m=p.snapTolerance,g=i.offset.left,v=g+f.helperProportions.width,y=i.offset.top,b=y+f.helperProportions.height;for(d=f.snapElements.length-1;d>=0;d--)a=f.snapElements[d].left,l=a+f.snapElements[d].width,c=f.snapElements[d].top,u=c+f.snapElements[d].height,a-m>v||g>l+m||c-m>b||y>u+m||!e.contains(f.snapElements[d].item.ownerDocument,f.snapElements[d].item)?(f.snapElements[d].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,t,e.extend(f._uiHash(),{snapItem:f.snapElements[d].item})),f.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(n=Math.abs(c-b)<=m,o=Math.abs(u-y)<=m,r=Math.abs(a-v)<=m,s=Math.abs(l-g)<=m,n&&(i.position.top=f._convertPositionTo("relative",{top:c-f.helperProportions.height,left:0}).top-f.margins.top),o&&(i.position.top=f._convertPositionTo("relative",{top:u,left:0}).top-f.margins.top),r&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a-f.helperProportions.width}).left-f.margins.left),s&&(i.position.left=f._convertPositionTo("relative",{top:0,left:l}).left-f.margins.left)),h=n||o||r||s,"outer"!==p.snapMode&&(n=Math.abs(c-y)<=m,o=Math.abs(u-b)<=m,r=Math.abs(a-g)<=m,s=Math.abs(l-v)<=m,n&&(i.position.top=f._convertPositionTo("relative",{top:c,left:0}).top-f.margins.top),o&&(i.position.top=f._convertPositionTo("relative",{top:u-f.helperProportions.height,left:0}).top-f.margins.top),r&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a}).left-f.margins.left),s&&(i.position.left=f._convertPositionTo("relative",{top:0,left:l-f.helperProportions.width}).left-f.margins.left)),!f.snapElements[d].snapping&&(n||o||r||s||h)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,t,e.extend(f._uiHash(),{snapItem:f.snapElements[d].item})),f.snapElements[d].snapping=n||o||r||s||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),/*!
 * jQuery UI Resizable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,o,r,s=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),r="ui-resizable-"+n,o=e("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:a.zIndex}),"se"===n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o);this._renderAxis=function(t){var i,n,o,r;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(e(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(i){var n,o,r,s=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=t(this.helper.css("left")),o=t(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,o+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:o},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:o},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===r?this.axis+"-resize":r),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,n=this.helper,o={},r=this.originalMousePosition,s=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,d=t.pageX-r.left||0,h=t.pageY-r.top||0,f=this._change[s];return f?(i=f.apply(this,[t,d,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==a&&(o.top=this.position.top+"px"),this.position.left!==l&&(o.left=this.position.left+"px"),this.size.width!==c&&(o.width=this.size.width+"px"),this.size.height!==u&&(o.height=this.size.height+"px"),n.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(o)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,o,r,s,a,l,c=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,r=n?0:u.sizeDiff.width,s={width:u.helper.width()-r,height:u.helper.height()-o},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,o,r,s,a=this.options;s={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,o=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),o>s.minHeight&&(s.minHeight=o),n<s.maxWidth&&(s.maxWidth=n),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,o=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===o&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===o&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,o=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=i(e.width)&&t.minWidth&&t.minWidth>e.width,a=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),a&&(e.height=t.minHeight),o&&(e.width=t.maxWidth),r&&(e.height=t.maxHeight),s&&u&&(e.left=l-t.minWidth),o&&u&&(e.left=l-t.maxWidth),a&&d&&(e.top=c-t.minHeight),r&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,o,r=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(o=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);o.css({height:r.height()-this.borderDif[0]-this.borderDif[2]||0,width:r.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&e.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,n,o,r,s,a,l,c=e(this).data("ui-resizable"),u=c.options,d=c.element,h=u.containment,f=h instanceof e?h.get(0):/parent/.test(h)?d.parent().get(0):h;f&&(c.containerElement=e(f),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(f),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,o){n[e]=t(i.css("padding"+o))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},o=c.containerOffset,r=c.containerSize.height,s=c.containerSize.width,a=e.ui.hasScroll(f,"left")?f.scrollWidth:s,l=e.ui.hasScroll(f)?f.scrollHeight:r,c.parentData={element:f,left:o.left,top:o.top,width:a,height:l}))},resize:function(t){var i,n,o,r,s=e(this).data("ui-resizable"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||t.shiftKey,d={top:0,left:0},h=s.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-d.left),u&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,i=Math.abs((s._helper?s.offset.left-d.left:s.offset.left-d.left)+s.sizeDiff.width),n=Math.abs((s._helper?s.offset.top-d.top:s.offset.top-l.top)+s.sizeDiff.height),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r&&(i-=s.parentData.left),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,u&&(s.size.height=s.size.width/s.aspectRatio)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,u&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,o=t.containerPosition,r=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0},l=function(t,n){e(t).each(function(){var t=e(this),o=e(this).data("ui-resizable-alsoresize"),r={},s=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var i=(o[t]||0)+(a[t]||0);i&&i>=0&&(r[t]=i||null)}),t.css(r)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):e.each(o.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,o=t.originalSize,r=t.originalPosition,s=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((n.width-o.width)/l)*l,d=Math.round((n.height-o.height)/c)*c,h=o.width+u,f=o.height+d,p=i.maxWidth&&i.maxWidth<h,m=i.maxHeight&&i.maxHeight<f,g=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>f;i.grid=a,g&&(h+=l),v&&(f+=c),p&&(h-=l),m&&(f-=c),/^(se|s|e)$/.test(s)?(t.size.width=h,t.size.height=f):/^(ne)$/.test(s)?(t.size.width=h,t.size.height=f,t.position.top=r.top-d):/^(sw)$/.test(s)?(t.size.width=h,t.size.height=f,t.position.left=r.left-u):(t.size.width=h,t.size.height=f,t.position.top=r.top-d,t.position.left=r.left-u)}})}(jQuery),/*!
 * jQuery UI Dialog 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(o.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var o,r;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),o=n.click,n.click=function(){o.apply(t.element[0],arguments)},r={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(r).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(o))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(o,r){n.position=[r.position.left-i.document.scrollLeft(),r.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",o,t(r))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,o=n.resizable,r=this.uiDialog.css("position"),s="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,o){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(o))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(o,r){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",o,t(r))}}).css("position",r)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(n){var o=this,r=!1,s={};e.each(n,function(e,n){o._setOption(e,n),e in t&&(r=!0),e in i&&(s[e]=n)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(e,t){var i,n,o=this.uiDialog;"dialogClass"===e&&o.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=o.is(":data(ui-draggable)"),i&&!t&&o.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=o.is(":data(ui-resizable)"),n&&!t&&o.resizable("destroy"),n&&"string"==typeof t&&o.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],o=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(o[e]=n[e],n[e]=t)}),i={my:n[0]+(o[0]<0?o[0]:"+"+o[0])+" "+n[1]+(o[1]<0?o[1]:"+"+o[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),/*!
 * jQuery UI Droppable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,o=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,n){if(!i.offset)return!1;var o,r,s=(e.positionAbs||e.position.absolute).left,a=s+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,c=l+e.helperProportions.height,u=i.offset.left,d=u+i.proportions.width,h=i.offset.top,f=h+i.proportions.height;switch(n){case"fit":return s>=u&&d>=a&&l>=h&&f>=c;case"intersect":return u<s+e.helperProportions.width/2&&a-e.helperProportions.width/2<d&&h<l+e.helperProportions.height/2&&c-e.helperProportions.height/2<f;case"pointer":return o=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,r=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(r,h,i.proportions.height)&&t(o,u,i.proportions.width);case"touch":return(l>=h&&f>=l||c>=h&&f>=c||h>l&&c>f)&&(s>=u&&d>=s||a>=u&&d>=a||u>s&&a>d);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,o,r=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(o=0;o<a.length;o++)if(a[o]===r[n].element[0]){r[n].proportions.height=0;continue e}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===s&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions={width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,r,s=e.ui.intersect(t,this,this.options.tolerance),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===o}),r.length&&(n=e.data(r[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),/*!
 * jQuery UI Effects 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */
function(e,t){var i="ui-effects-";e.effects={effect:{}},/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),p(l,function(e,o){var r,s=o.re.exec(t),a=s&&o.parse(s),l=o.space||"rgba";return a?(r=i[l](a),i[u[l].cache]=r[u[l].cache],n=i._rgba=r._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,r.transparent),i):r[t]}function o(e,t,i){return i=(i+1)%1,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var r,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},f=e("<p>")[0],p=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,s,a,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(s),s=t);var d=this,h=e.type(o),f=this._rgba=[];return s!==t&&(o=[o,s,a,l],h="array"),"string"===h?this.parse(n(o)||r._default):"array"===h?(p(u.rgba.props,function(e,t){f[t.idx]=i(o[t.idx],t)}),this):"object"===h?(o instanceof c?p(u,function(e,t){o[t.cache]&&(d[t.cache]=o[t.cache].slice())}):p(u,function(t,n){var r=n.cache;p(n.props,function(e,t){if(!d[r]&&n.to){if("alpha"===e||null==o[e])return;d[r]=n.to(d._rgba)}d[r][t.idx]=i(o[e],t,!0)}),d[r]&&e.inArray(null,d[r].slice(0,3))<0&&(d[r][3]=1,n.from&&(d._rgba=n.from(d[r])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return p(u,function(e,o){var r,s=t[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],p(o.props,function(e,t){return null!=s[t.idx]?i=s[t.idx]===r[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return p(u,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),o=n._space(),r=u[o],s=0===this.alpha()?c("transparent"):this,a=s[r.cache]||r.to(s._rgba),l=a.slice();return n=n[r.cache],p(r.props,function(e,o){var r=o.idx,s=a[r],c=n[r],u=d[o.type]||{};null!==c&&(null===s?l[r]=c:(u.mod&&(c-s>u.mod/2?s+=u.mod:s-c>u.mod/2&&(s-=u.mod)),l[r]=i((c-s)*t+s,o)))}),this[o](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,r=e[2]/255,s=e[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,u=a+l,d=.5*u;return t=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===c?0:.5>=d?c/u:c/(2-u),[Math.round(t)%360,i,d,null==s?1:s]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],r=e[3],s=.5>=n?n*(1+i):n+i-n*i,a=2*n-s;return[Math.round(255*o(a,s,t+1/3)),Math.round(255*o(a,s,t)),Math.round(255*o(a,s,t-1/3)),r]},p(u,function(n,o){var r=o.props,s=o.cache,l=o.to,u=o.from;c.fn[n]=function(n){if(l&&!this[s]&&(this[s]=l(this._rgba)),n===t)return this[s].slice();var o,a=e.type(n),d="array"===a||"object"===a?n:arguments,h=this[s].slice();return p(r,function(e,t){var n=d["object"===a?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),u?(o=c(u(h)),o[s]=h,o):c(h)},p(r,function(t,i){c.fn[t]||(c.fn[t]=function(o){var r,s=e.type(o),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),u=c[i.idx];return"undefined"===s?u:("function"===s&&(o=o.call(this,u),s=e.type(o)),null==o&&i.empty?this:("string"===s&&(r=a.exec(o),r&&(o=u+parseFloat(r[2])*("+"===r[1]?1:-1))),c[i.idx]=o,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");p(i,function(t,i){e.cssHooks[i]={set:function(t,o){var r,s,a="";if("transparent"!==o&&("string"!==e.type(o)||(r=n(o)))){if(o=c(r||o),!h.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{t.style[i]=o}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(s),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},r=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)i=o[n],"string"==typeof o[i]&&(r[e.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(r[i]=o[i]);return r}function n(t,i){var n,o,s={};for(n in i)o=i[n],t[n]!==o&&(r[n]||(e.fx.step[n]||!isNaN(parseFloat(o)))&&(s[n]=o));return s}var o=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,r,s,a){var l=e.speed(r,s,a);return this.queue(function(){var r,s=e(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){var t=e(this);return{el:t,start:i(this)}}),r=function(){e.each(o,function(e,i){t[i]&&s[i+"Class"](t[i])})},r(),c=c.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){r(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(i,n,o,r){return n?e.effects.animateClass.call(this,{add:i},n,o,r):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(i){return function(n,o,r,s,a){return"boolean"==typeof o||o===t?r?e.effects.animateClass.call(this,o?{add:n}:{remove:n},r,s,a):i.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},o,r,s)}}(e.fn.toggleClass),switchClass:function(t,i,n,o,r){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,r)}})}(),function(){function n(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),e.isFunction(n)&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function o(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var o,r;for(r=0;r<n.length;r++)null!==n[r]&&(o=e.data(i+n[r]),o===t&&(o=""),e.css(n[r],o))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(s){r=document.body}return t.wrap(n),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,o){return o=o||{},e.each(i,function(e,i){var r=t.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])}),o}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(r)&&r.call(o[0]),e.isFunction(t)&&t()}var o=e(this),r=i.complete,a=i.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),n()):s.call(o[0],i,n)}var i=n.apply(this,arguments),o=i.mode,r=i.queue,s=e.effects.effect[i.effect];return e.fx.off||!s?o?this[o](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):r===!1?this.each(t):this.queue(r||"fx",t)},show:function(e){return function(t){if(o(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(o(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(o(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),/*!
 * jQuery UI Effects Blind 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/blind-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(n,o){var r,s,a,l=e(this),c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(l,n.mode||"hide"),d=n.direction||"up",h=t.test(d),f=h?"height":"width",p=h?"top":"left",m=i.test(d),g={},v="show"===u;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),r=e.effects.createWrapper(l).css({overflow:"hidden"}),s=r[f](),a=parseFloat(r.css(p))||0,g[f]=v?s:0,m||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[p]=v?a:s+a),v&&(r.css(f,0),m||r.css(p,a+s)),r.animate(g,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),o()}})}}(jQuery),/*!
 * jQuery UI Effects Bounce 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/bounce-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.bounce=function(t,i){var n,o,r,s=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"effect"),c="hide"===l,u="show"===l,d=t.direction||"up",h=t.distance,f=t.times||5,p=2*f+(u||c?1:0),m=t.duration/p,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=s.queue(),w=b.length;for((u||c)&&a.push("opacity"),e.effects.save(s,a),s.show(),e.effects.createWrapper(s),h||(h=s["top"===v?"outerHeight":"outerWidth"]()/3),u&&(r={opacity:1},r[v]=0,s.css("opacity",0).css(v,y?2*-h:2*h).animate(r,m,g)),c&&(h/=Math.pow(2,f-1)),r={},r[v]=0,n=0;f>n;n++)o={},o[v]=(y?"-=":"+=")+h,s.animate(o,m,g).animate(r,m,g),h=c?2*h:h/2;c&&(o={opacity:0},o[v]=(y?"-=":"+=")+h,s.animate(o,m,g)),s.queue(function(){c&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,p+1))),s.dequeue()}}(jQuery),/*!
 * jQuery UI Effects Clip 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/clip-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.clip=function(t,i){var n,o,r,s=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"hide"),c="show"===l,u=t.direction||"vertical",d="vertical"===u,h=d?"height":"width",f=d?"top":"left",p={};e.effects.save(s,a),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),o="IMG"===s[0].tagName?n:s,r=o[h](),c&&(o.css(h,0),o.css(f,r/2)),p[h]=c?r:0,p[f]=c?0:r/2,o.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}})}}(jQuery),/*!
 * jQuery UI Effects Drop 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/drop-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.drop=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(o,t.mode||"hide"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};e.effects.save(o,r),o.show(),e.effects.createWrapper(o),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===u?-n:n),d[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})}}(jQuery),/*!
 * jQuery UI Effects Explode 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/explode-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.explode=function(t,i){function n(){b.push(this),b.length===d*h&&o()}function o(){f.css({visibility:"visible"}),e(b).remove(),m||f.hide(),i()}var r,s,a,l,c,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=d,f=e(this),p=e.effects.setMode(f,t.mode||"hide"),m="show"===p,g=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/h),y=Math.ceil(f.outerHeight()/d),b=[];for(r=0;d>r;r++)for(l=g.top+r*y,u=r-(d-1)/2,s=0;h>s;s++)a=g.left+s*v,c=s-(h-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*v,top:-r*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(m?c*v:0),top:l+(m?u*y:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,n)}}(jQuery),/*!
 * jQuery UI Effects Fade 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fade-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.fade=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),/*!
 * jQuery UI Effects Fold 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fold-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.fold=function(t,i){var n,o,r=e(this),s=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"hide"),l="show"===a,c="hide"===a,u=t.size||15,d=/([0-9]+)%/.exec(u),h=!!t.horizFirst,f=l!==h,p=f?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(r,s),r.show(),n=e.effects.createWrapper(r).css({overflow:"hidden"}),o=f?[n.width(),n.height()]:[n.height(),n.width()],d&&(u=parseInt(d[1],10)/100*o[c?0:1]),l&&n.css(h?{height:0,width:u}:{height:u,width:0}),g[p[0]]=l?o[0]:u,v[p[1]]=l?o[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),i()})}}(jQuery),/*!
 * jQuery UI Effects Highlight 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/highlight-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.highlight=function(t,i){var n=e(this),o=["backgroundImage","backgroundColor","opacity"],r=e.effects.setMode(n,t.mode||"show"),s={backgroundColor:n.css("backgroundColor")};"hide"===r&&(s.opacity=0),e.effects.save(n,o),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&n.hide(),e.effects.restore(n,o),i()}})}}(jQuery),/*!
 * jQuery UI Effects Pulsate 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/pulsate-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.pulsate=function(t,i){var n,o=e(this),r=e.effects.setMode(o,t.mode||"show"),s="show"===r,a="hide"===r,l=s||"hide"===r,c=2*(t.times||5)+(l?1:0),u=t.duration/c,d=0,h=o.queue(),f=h.length;for((s||!o.is(":visible"))&&(o.css("opacity",0).show(),d=1),n=1;c>n;n++)o.animate({opacity:d},u,t.easing),d=1-d;o.animate({opacity:d},u,t.easing),o.queue(function(){a&&o.hide(),i()}),f>1&&h.splice.apply(h,[1,0].concat(h.splice(f,c+1))),o.dequeue()}}(jQuery),/*!
 * jQuery UI Effects Scale 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/scale-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.puff=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"hide"),r="hide"===o,s=parseInt(t.percent,10)||150,a=s/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:o,complete:i,percent:r?s:100,from:r?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),o=e.extend(!0,{},t),r=e.effects.setMode(n,t.mode||"effect"),s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===r?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u={y:"horizontal"!==a?s/100:1,x:"vertical"!==a?s/100:1};o.effect="size",o.queue=!1,o.complete=i,"effect"!==r&&(o.origin=l||["middle","center"],o.restore=!0),o.from=t.from||("show"===r?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},o.fade&&("show"===r&&(o.from.opacity=0,o.to.opacity=1),"hide"===r&&(o.from.opacity=1,o.to.opacity=0)),n.effect(o)},e.effects.effect.size=function(t,i){var n,o,r,s=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(s,t.mode||"effect"),p=t.restore||"effect"!==f,m=t.scale||"both",g=t.origin||["middle","center"],v=s.css("position"),y=p?a:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&s.show(),n={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},"toggle"===t.mode&&"show"===f?(s.from=t.to||b,s.to=t.from||n):(s.from=t.from||("show"===f?b:n),s.to=t.to||("hide"===f?b:n)),r={from:{y:s.from.height/n.height,x:s.from.width/n.width},to:{y:s.to.height/n.height,x:s.to.width/n.width}},("box"===m||"both"===m)&&(r.from.y!==r.to.y&&(y=y.concat(d),s.from=e.effects.setTransition(s,d,r.from.y,s.from),s.to=e.effects.setTransition(s,d,r.to.y,s.to)),r.from.x!==r.to.x&&(y=y.concat(h),s.from=e.effects.setTransition(s,h,r.from.x,s.from),s.to=e.effects.setTransition(s,h,r.to.x,s.to))),("content"===m||"both"===m)&&r.from.y!==r.to.y&&(y=y.concat(u).concat(c),s.from=e.effects.setTransition(s,u,r.from.y,s.from),s.to=e.effects.setTransition(s,u,r.to.y,s.to)),e.effects.save(s,y),s.show(),e.effects.createWrapper(s),s.css("overflow","hidden").css(s.from),g&&(o=e.effects.getBaseline(g,n),s.from.top=(n.outerHeight-s.outerHeight())*o.y,s.from.left=(n.outerWidth-s.outerWidth())*o.x,s.to.top=(n.outerHeight-s.to.outerHeight)*o.y,s.to.left=(n.outerWidth-s.to.outerWidth)*o.x),s.css(s.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),h=h.concat(["marginLeft","marginRight"]),c=a.concat(d).concat(h),s.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};p&&e.effects.save(i,c),i.from={height:n.height*r.from.y,width:n.width*r.from.x,outerHeight:n.outerHeight*r.from.y,outerWidth:n.outerWidth*r.from.x},i.to={height:n.height*r.to.y,width:n.width*r.to.x,outerHeight:n.height*r.to.y,outerWidth:n.width*r.to.x},r.from.y!==r.to.y&&(i.from=e.effects.setTransition(i,d,r.from.y,i.from),i.to=e.effects.setTransition(i,d,r.to.y,i.to)),r.from.x!==r.to.x&&(i.from=e.effects.setTransition(i,h,r.from.x,i.from),i.to=e.effects.setTransition(i,h,r.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){p&&e.effects.restore(i,c)})})),s.animate(s.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===s.to.opacity&&s.css("opacity",s.from.opacity),"hide"===f&&s.hide(),e.effects.restore(s,y),p||("static"===v?s.css({position:"relative",top:s.to.top,left:s.to.left}):e.each(["top","left"],function(e,t){s.css(t,function(t,i){var n=parseInt(i,10),o=e?s.to.left:s.to.top;return"auto"===i?o+"px":n+o+"px"})})),e.effects.removeWrapper(s),i()}})}}(jQuery),/*!
 * jQuery UI Effects Shake 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/shake-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.shake=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(o,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,d=Math.round(t.duration/u),h="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,p={},m={},g={},v=o.queue(),y=v.length;for(e.effects.save(o,r),o.show(),e.effects.createWrapper(o),p[h]=(f?"-=":"+=")+l,m[h]=(f?"+=":"-=")+2*l,g[h]=(f?"-=":"+=")+2*l,o.animate(p,d,t.easing),n=1;c>n;n++)o.animate(m,d,t.easing).animate(g,d,t.easing);o.animate(m,d,t.easing).animate(p,d/2,t.easing).queue(function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),o.dequeue()}}(jQuery),/*!
 * jQuery UI Effects Slide 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.slide=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(o,t.mode||"show"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};e.effects.save(o,r),o.show(),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(n)?"-"+n:-n:n),d[c]=(a?u?"+=":"-=":u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})}}(jQuery),/*!
 * jQuery UI Effects Transfer 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/transfer-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.transfer=function(t,i){var n=e(this),o=e(t.to),r="fixed"===o.css("position"),s=e("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},d=n.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-a,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){h.remove(),i()})}}(jQuery),/*!
 * jQuery UI Progressbar 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 *
 * Depends:
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 */
function(e,t){e.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),/*!
 * jQuery UI Selectable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,o=e.data(this,"selectable-item");return o?(n=!t.metaKey&&!t.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",t,{selecting:o.element}):i._trigger("unselecting",t,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,r=this.opos[0],s=this.opos[1],a=t.pageX,l=t.pageY;return r>a&&(i=a,a=r,r=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===o.tolerance?c=!(i.left>a||i.right<r||i.top>l||i.bottom<s):"fit"===o.tolerance&&(c=i.left>r&&i.right<a&&i.top>s&&i.bottom<l),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),/*!
 * jQuery UI Slider 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),t=o.length;i>t;t++)s.push(r);this.handles=o.add(e(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,o,r,s,a,l,c,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-u.values(t));(o>i||o===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(o=i,r=e(this),s=t)}),a=this._start(t,s),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=s,r.addClass("ui-state-active").focus(),l=r.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-r.width()/2,top:t.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,o,r;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),r=this._valueMin()+n*o,this._trimAlignValue(r)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,o,r;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(o=this.values(),o[t]=i,r=this._trigger("slide",e,{handle:this.handles[t],value:i,values:o}),n=this.values(t?0:1),r!==!1&&this.values(t,i,!0))):i!==this.value()&&(r=this._trigger("slide",e,{handle:this.handles[t],value:i}),r!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,o,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,o=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var n,o=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;o>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,o,r,s=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),o=this._valueMin(),r=this._valueMax(),i=r!==o?(n-o)/(r-o)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(i){var n,o,r,s,a=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,a),n===!1))return}switch(s=this.options.step,o=r=this.options.values&&this.options.values.length?this.values(a):this.value(),i.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===this._valueMax())return;r=this._trimAlignValue(o+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===this._valueMin())return;r=this._trimAlignValue(o-s)}this._slide(i,a,r)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),/*!
 * jQuery UI Sortable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(n=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-e(document).scrollTop()<s.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed)),t.pageX-e(document).scrollLeft()<s.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],r=this._intersectsWithPointer(n),r&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||n+c>a&&l>n+c,h="y"===this.options.axis||t+u>r&&s>t+u,f=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=i&&n,r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return o?this.floating?s&&"right"===s||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:o&&("down"===o&&i||"up"===o&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,o,r,s=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(o=e(l[i]),n=o.length-1;n>=0;n--)r=e.data(o[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&a.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){s.push(this)});return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(o=e(h[i]),n=o.length-1;n>=0;n--)r=e.data(o[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(d.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(i=d.length-1;i>=0;i--)for(s=d[i][1],a=d[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,r;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(o)}):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var o,r,s,a,l,c,u,d,h,f,p=null,m=null;for(o=this.containers.length-1;o>=0;o--)if(!e.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(p&&e.contains(this.containers[o].element[0],p.element[0]))continue;p=this.containers[o],m=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",n,this._uiHash(this)),this.containers[o].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(s=1e4,a=null,f=p.floating||i(this.currentItem),l=f?"left":"top",c=f?"width":"height",u=this.positionAbs[l]+this.offset.click[l],r=this.items.length-1;r>=0;r--)e.contains(this.containers[m].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(!f||t(this.positionAbs.top+this.offset.click.top,this.items[r].top,this.items[r].height))&&(d=this.items[r].item.offset()[l],h=!1,Math.abs(d-u)>Math.abs(d+this.items[r][c]-u)&&(h=!0,d+=this.items[r][c]),Math.abs(d-u)<s&&(s=Math.abs(d-u),a=this.items[r],this.direction=h?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[m].element,!0),this._trigger("change",n,this._uiHash()),this.containers[m]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,r=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),/*!
 * jQuery UI Spinner 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 *  jquery.ui.button.js
 */
function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var o=i.attr(n);void 0!==o&&o.length&&(t[n]=o)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),/*!
 * jQuery UI Tabs 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e,t){function i(){return++o}function n(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var o=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,o){return e(o).attr("aria-controls")===n?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n===this.options.active?!1:n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>o&&(t=0),0>t&&(t=o),t}for(var o=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,o){var r,s,a,l=e(o).uniqueId().attr("id"),c=e(o).closest("li"),u=c.attr("aria-controls");n(o)?(r=o.hash,s=t.element.find(t._sanitizeSelector(r))):(a=t._tabId(c),r="#"+a,s=t.element.find(r),s.length||(s=t._createPanel(a),s.insertAfter(t.panels[i-1]||t.tablist)),s.attr("aria-live","polite")),s.length&&(t.panels=t.panels.add(s)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":r.substring(1),"aria-labelledby":l}),s.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),r=o.closest("li"),s=r[0]===n[0],a=s&&i.collapsible,l=a?e():this._getPanelForTab(r),c=n.length?this._getPanelForTab(n):e(),u={oldTab:n,oldPanel:c,newTab:a?e():r,newPanel:l};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=a?!1:this.tabs.index(r),this.active=s?e():r,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),t),this._toggle(t,u))},_toggle:function(t,i){function n(){r.running=!1,r._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&r.options.show?r._show(s,r.options.show,n):(s.show(),n())}var r=this,s=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),s.length&&a.length?i.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var o=this,r=this.tabs.eq(t),s=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),l={tab:r,panel:a};n(s[0])||(this.xhr=e.ajax(this._ajaxSettings(s,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(r.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),o._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&o.panels.stop(!1,!0),r.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===o.xhr&&delete o.xhr},1)})))},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href"),beforeSend:function(t,r){return o._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:r},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),/*!
 * jQuery UI Tooltip 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tooltip/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(i,n);-1!==o&&n.splice(o,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur");o.target=o.currentTarget=n[0],t.close(o,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,o=this,r=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&o._delay(function(){t&&(t.type=r),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,n,o){function r(e){c.of=e,s.is(":hidden")||s.position(c)}var s,a,l,c=e.extend({},this.options.position);if(o){if(s=this._find(n),s.length)return void s.find(".ui-tooltip-content").html(o);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),s=this._tooltip(n),t(n,s.attr("id")),s.find(".ui-tooltip-content").html(o),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:r}),r(i)):s.position(e.extend({of:n},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){s.is(":visible")&&(r(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:s}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(s)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(t){var n=this,o=e(t?t.currentTarget:this.element),r=this._find(o);this.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&o.attr("title",o.data("ui-tooltip-title")),i(o),r.stop(!0),this._hide(r,this.options.hide,function(){n._removeTooltip(e(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:r}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,o=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(o),o.appendTo(this.document[0].body),this.tooltips[i]=t,o},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur");o.target=o.currentTarget=n[0],t.close(o,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery);/**
 * Handsontable 0.10.0-beta3
 * Handsontable is a simple jQuery plugin for editable tables with basic copy-paste compatibility with Excel and Google Docs
 *
 * Copyright 2012, Marcin Warpechowski
 * Licensed under the MIT license.
 * http://handsontable.com/
 *
 * Date: Wed Oct 30 2013 03:16:48 GMT+0100 (Central European Standard Time)
 */
var Handsontable={extension:{},helper:{}};!function(e,t,i){"use strict";function n(){function e(){var e=this;e.registerTimeout("enableObserveChanges",function(){e.updateSettings({observeChanges:!0})},0)}function t(e){return function(t,i){return t[1]===i[1]?0:null===t[1]?1:null===i[1]?-1:t[1]<i[1]?e?-1:1:t[1]>i[1]?e?1:-1:0}}function i(e){return function(t,i){if(t[1]===i[1])return 0;if(null===t[1])return 1;if(null===i[1])return-1;var n=new Date(t[1]),o=new Date(i[1]);return o>n?e?-1:1:n>o?e?1:-1:0}}function n(e){return"undefined"!=typeof e.sortColumn}var o=this;this.init=function(t){var i,n,r=this,l=r.getSettings().columnSorting;if(r.sortingEnabled=!!l,r.sortingEnabled){r.sortIndex=[];var c=s.call(r);"undefined"!=typeof c?(i=c.sortColumn,n=c.sortOrder):(i=l.column,n=l.sortOrder),o.sortByColumn.call(r,i,n),r.sort=function(){var e=Array.prototype.slice.call(arguments);return o.sortByColumn.apply(r,e)},"undefined"==typeof r.getSettings().observeChanges&&e.call(r),"afterInit"==t&&(a.call(r),r.addHook("afterCreateRow",o.afterCreateRow),r.addHook("afterRemoveRow",o.afterRemoveRow),r.addHook("afterLoadData",o.init))}else delete r.sort,r.removeHook("afterCreateRow",o.afterCreateRow),r.removeHook("afterRemoveRow",o.afterRemoveRow),r.removeHook("afterLoadData",o.init)},this.setSortingColumn=function(e,t){var i=this;return"undefined"==typeof e?(delete i.sortColumn,void delete i.sortOrder):(i.sortOrder=i.sortColumn===e&&"undefined"==typeof t?!i.sortOrder:"undefined"!=typeof t?t:!0,void(i.sortColumn=e))},this.sortByColumn=function(e,t){var i=this;o.setSortingColumn.call(i,e,t),i.PluginHooks.run("beforeColumnSort",i.sortColumn,i.sortOrder),o.sort.call(i),i.render(),r.call(i),i.PluginHooks.run("afterColumnSort",i.sortColumn,i.sortOrder)};var r=function(){var e=this,t={};"undefined"!=typeof e.sortColumn&&(t.sortColumn=e.sortColumn),"undefined"!=typeof e.sortOrder&&(t.sortOrder=e.sortOrder),(t.hasOwnProperty("sortColumn")||t.hasOwnProperty("sortOrder"))&&e.PluginHooks.run("persistentStateSave","columnSorting",t)},s=function(){var e=this,t={};return e.PluginHooks.run("persistentStateLoad","columnSorting",t),t.value},a=function(){function e(){var e=i.view.TBODY.querySelector("tr").querySelectorAll("th");return e.length}function t(t){var n=i.view.wt.wtDom.closest(t,"TH");return i.view.wt.wtDom.index(n)-e()}var i=this;i.rootElement.on("click.handsontable",".columnSorting",function(e){if(i.view.wt.wtDom.hasClass(e.target,"columnSorting")){var n=t(e.target);o.sortByColumn.call(i,n)}})};this.sort=function(){var e=this;if("undefined"!=typeof e.sortOrder){e.sortingEnabled=!1,e.sortIndex.length=0;for(var n=this.colOffset(),o=0,r=this.countRows()-e.getSettings().minSpareRows;r>o;o++)this.sortIndex.push([o,e.getDataAtCell(o,this.sortColumn+n)]);var s,a=e.getCellMeta(0,e.sortColumn);switch(a.type){case"date":s=i;break;default:s=t}this.sortIndex.sort(s(e.sortOrder));for(var o=this.sortIndex.length;o<e.countRows();o++)this.sortIndex.push([o,e.getDataAtCell(o,this.sortColumn+n)]);e.sortingEnabled=!0}},this.translateRow=function(e){var t=this;return t.sortingEnabled&&t.sortIndex&&t.sortIndex.length&&t.sortIndex[e]?t.sortIndex[e][0]:e},this.onBeforeGetSet=function(e){var t=this;e.row=o.translateRow.call(t,e.row)},this.untranslateRow=function(e){var t=this;if(t.sortingEnabled&&t.sortIndex&&t.sortIndex.length)for(var i=0;i<t.sortIndex.length;i++)if(t.sortIndex[i][0]==e)return i},this.getColHeader=function(e,t){this.getSettings().columnSorting&&this.view.wt.wtDom.addClass(t.querySelector(".colHeader"),"columnSorting")},this.afterCreateRow=function(e,t){var i=this;if(n(i)){for(var o=0;o<i.sortIndex.length;o++)i.sortIndex[o][0]>=e&&(i.sortIndex[o][0]+=t);for(var o=0;t>o;o++)i.sortIndex.splice(e+o,0,[e+o,i.getData()[e+o][i.sortColumn+i.colOffset()]]);r.call(i)}},this.afterRemoveRow=function(e,t){var i=this;if(n(i)){var s=o.untranslateRow.call(i,e);i.sortIndex.splice(e,t);for(var a=0;a<i.sortIndex.length;a++)i.sortIndex[a][0]>s&&(i.sortIndex[a][0]-=t);r.call(i)}},this.afterChangeSort=function(e){var t=this,i=!1,n={};if(e){for(var r=0;r<e.length;r++)if(e[r][1]==t.sortColumn){i=!0,n.row=o.translateRow.call(t,e[r][0]),n.col=e[r][1];break}i&&setTimeout(function(){o.sort.call(t),t.render(),t.selectCell(o.untranslateRow.call(t,n.row),n.col)},0)}}}function o(){var t,i,n,o,r,s=document.createElement("DIV"),a=s.style;s.className="ghost",a.position="absolute",a.top="25px",a.left=0,a.width="10px",a.height="10px",a.backgroundColor="#CCC",a.opacity=.7;var l=function(){var e=this;e.PluginHooks.run("persistentStateSave","manualColumnPositions",e.manualColumnPositions)},c=function(){var e=this,t={};return e.PluginHooks.run("persistentStateLoad","manualColumnPositions",t),t.value},u=function(){var c=this;c.rootElement.on("mousemove.manualColumnMove",function(e){t&&(a.left=r+e.pageX-o+6+"px","none"===a.display&&(a.display="block"))}),c.rootElement.on("mouseup.manualColumnMove",function(){t&&(n>i&&n--,c.getSettings().rowHeaders&&(i--,n--),c.manualColumnPositions.splice(n,0,c.manualColumnPositions.splice(i,1)[0]),e(".manualColumnMover.active").removeClass("active"),t=!1,c.forceFullRender=!0,c.view.render(),a.display="none",l.call(c),c.PluginHooks.run("afterColumnMove",i,n))}),c.rootElement.on("mousedown.manualColumnMove",".manualColumnMover",function(e){var l=e.currentTarget,u=c.view.wt.wtDom.closest(l,"TH");i=c.view.wt.wtDom.index(u)+c.colOffset(),n=i,t=!0,o=e.pageX;var d=c.$table[0];d.parentNode.appendChild(s),a.width=c.view.wt.wtDom.outerWidth(u)+"px",a.height=c.view.wt.wtDom.outerHeight(d)+"px",r=parseInt(c.view.wt.wtDom.offset(u).left-c.view.wt.wtDom.offset(d).left,10),a.left=r+6+"px"}),c.rootElement.on("mouseenter.manualColumnMove","td, th",function(){if(t){var e=c.view.THEAD.querySelector(".manualColumnMover.active");e&&c.view.wt.wtDom.removeClass(e,"active"),n=c.view.wt.wtDom.index(this)+c.colOffset();var i=c.view.THEAD.querySelectorAll("th"),o=i[n].querySelector(".manualColumnMover");c.view.wt.wtDom.addClass(o,"active")}}),c.addHook("afterDestroy",d)},d=function(){var e=this;e.rootElement.off("mouseup.manualColumnMove"),e.rootElement.off("mousemove.manualColumnMove"),e.rootElement.off("mousedown.manualColumnMove"),e.rootElement.off("mouseenter.manualColumnMove")};this.beforeInit=function(){this.manualColumnPositions=[]},this.init=function(e){var t=this,i=!!this.getSettings().manualColumnMove;if(i){var n=this.getSettings().manualColumnMove,o=c.call(t);this.manualColumnPositions="undefined"!=typeof o?o:n instanceof Array?n:[],t.forceFullRender=!0,"afterInit"==e&&(u.call(this),this.manualColumnPositions.length>0&&(this.forceFullRender=!0,this.render()))}else d.call(this),this.manualColumnPositions=[]},this.modifyCol=function(e){return this.getSettings().manualColumnMove?("undefined"==typeof this.manualColumnPositions[e]&&(this.manualColumnPositions[e]=e),this.manualColumnPositions[e]):e},this.getColHeader=function(e,t){if(this.getSettings().manualColumnMove){var i=document.createElement("DIV");i.className="manualColumnMover",t.firstChild.appendChild(i)}}}function r(){function t(e){a=this,o=e;var t=this.view.wt.wtTable.getCoords(e)[1];if(t>=0){r=t;var i=this.view.wt.wtDom.offset(this.rootElement[0]).left,n=this.view.wt.wtDom.offset(e).left;d=n-i-6,h.style.left=d+parseInt(this.view.wt.wtDom.outerWidth(e),10)+"px",this.rootElement[0].appendChild(h)}}function i(){var e=this;u=parseInt(this.view.wt.wtDom.outerWidth(o),10),e.view.wt.wtDom.addClass(h,"active"),m.height=e.view.wt.wtDom.outerHeight(e.$table[0])+"px",n=e}var n,o,r,s,a,l,c,u,d,h=document.createElement("DIV"),f=document.createElement("DIV"),p=document.createElement("DIV"),m=p.style;h.className="manualColumnResizer",f.className="manualColumnResizerHandle",h.appendChild(f),p.className="manualColumnResizerLine",h.appendChild(p);var g=e(document);g.mousemove(function(e){n&&(s=u+(e.pageX-c),l=w(r,s),h.style.left=d+s+"px")}),g.mouseup(function(){n&&(a.view.wt.wtDom.removeClass(h,"active"),n=!1,l!=u&&(a.forceFullRender=!0,a.view.render(),v.call(a),a.PluginHooks.run("afterColumnResize",r,l)),t.call(a,o))});var v=function(){var e=this;e.PluginHooks.run("persistentStateSave","manualColumnWidths",e.manualColumnWidths)},y=function(){var e=this,t={};return e.PluginHooks.run("persistentStateLoad","manualColumnWidths",t),t.value},b=function(){var e=this,o=0,s=null;this.rootElement.on("mouseenter.handsontable","th",function(i){n||t.call(e,i.currentTarget)}),this.rootElement.on("mousedown.handsontable",".manualColumnResizer",function(){null==s&&(s=setTimeout(function(){o>=2&&(l=e.determineColumnWidth.call(e,r),w(r,l),e.forceFullRender=!0,e.view.render(),e.PluginHooks.run("afterColumnResize",r,l)),o=0,s=null},500)),o++}),this.rootElement.on("mousedown.handsontable",".manualColumnResizer",function(t){c=t.pageX,i.call(e),l=u})};this.beforeInit=function(){this.manualColumnWidths=[]},this.init=function(e){var t=this,i=!!this.getSettings().manualColumnResize;if(i){var n=this.getSettings().manualColumnResize,o=y.call(t);this.manualColumnWidths="undefined"!=typeof o?o:n instanceof Array?n:[],"afterInit"==e&&(b.call(this),t.forceFullRender=!0,t.render())}};var w=function(e,t){return t=Math.max(t,20),e=a.PluginHooks.execute("modifyCol",e),a.manualColumnWidths[e]=t,t};this.getColWidth=function(e,t){this.getSettings().manualColumnResize&&this.manualColumnWidths[e]&&(t.width=this.manualColumnWidths[e])}}function s(e){var i,n=function(){t.localStorage[e+"__persistentStateKeys"]=JSON.stringify(i)},o=function(){var n=t.localStorage[e+"__persistentStateKeys"],o="string"==typeof n?JSON.parse(n):void 0;i=o?o:[]},r=function(){i=[],n()};o(),this.saveValue=function(o,r){t.localStorage[e+"_"+o]=JSON.stringify(r),-1==i.indexOf(o)&&(i.push(o),n())},this.loadValue=function(i,n){i="undefined"!=typeof i?i:n;var o=t.localStorage[e+"_"+i];return"undefined"==typeof o?void 0:JSON.parse(o)},this.reset=function(i){t.localStorage.removeItem(e+"_"+i)},this.resetAll=function(){for(var n=0;n<i.length;n++)t.localStorage.removeItem(e+"_"+i[n]);r()}}function a(){this.boundaries=null,this.callback=null}function l(){var e,t,i=this;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[];var n=document.documentElement;t=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("DIV"),this.elDiv.id="CopyPasteDiv",e=this.elDiv.style,e.position="fixed",e.top=0,e.left=0,t.appendChild(this.elDiv),this.elTextarea=document.createElement("TEXTAREA"),this.elTextarea.className="copyPaste",e=this.elTextarea.style,e.width="1px",e.height="1px",this.elDiv.appendChild(this.elTextarea),"undefined"!=typeof e.opacity&&(e.opacity=0)),this._bindEvent(n,"keydown",function(e){var t=!1;if(e.metaKey?t=!0:e.ctrlKey&&-1===navigator.userAgent.indexOf("Mac")&&(t=!0),t){if(document.activeElement!==i.elTextarea&&(""!=i.getSelectionText()||-1!=["INPUT","SELECT","TEXTAREA"].indexOf(document.activeElement.nodeName)))return;i.selectNodeText(i.elTextarea),setTimeout(function(){i.selectNodeText(i.elTextarea)},0)}!t||67!==e.keyCode&&86!==e.keyCode&&88!==e.keyCode||(88===e.keyCode?setTimeout(function(){i.triggerCut(e)},0):86===e.keyCode&&setTimeout(function(){i.triggerPaste(e)},0))})}function c(t,i){var n;this.instance=t,this.settings=i,this.wtDom=this.instance.wtDom,this.main=document.createElement("div"),n=this.main.style,n.position="absolute",n.top=0,n.left=0;for(var o=0;5>o;o++){var r=document.createElement("DIV");r.className="wtBorder "+(i.className||""),n=r.style,n.backgroundColor=i.border.color,n.height=i.border.width+"px",n.width=i.border.width+"px",this.main.appendChild(r)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width="5px",this.cornerStyle.height="5px",this.cornerStyle.border="2px solid #FFF",this.disappear(),t.wtTable.bordersHolder||(t.wtTable.bordersHolder=document.createElement("div"),t.wtTable.bordersHolder.className="htBorders",t.wtTable.hider.appendChild(t.wtTable.bordersHolder)),t.wtTable.bordersHolder.appendChild(this.main);var s=!1,a=e(document.body);a.on("mousedown.walkontable."+t.guid,function(){s=!0}),a.on("mouseup.walkontable."+t.guid,function(){s=!1}),e(this.main.childNodes).on("mouseenter",function(i){if(s&&t.getSetting("hideBorderOnMouseDownOver")){i.preventDefault(),i.stopImmediatePropagation();var n=this.getBoundingClientRect(),o=e(this);o.hide();var r=function(e){return e.clientY<Math.floor(n.top)?!0:e.clientY>Math.ceil(n.top+n.height)?!0:e.clientX<Math.floor(n.left)?!0:e.clientX>Math.ceil(n.left+n.width)?!0:void 0};a.on("mousemove.border."+t.guid,function(e){r(e)&&(a.off("mousemove.border."+t.guid),o.show())})}})}function u(){this.offset=0,this.total=0,this.fixedCount=0}function d(){}function h(){this.cache=[]}function f(){this.countTH=0}function p(e,t,i){var n,o=0;for(this.containerSizeFn=e,this.cellSizesSum=0,this.cellSizes=[],this.cellStretch=[],this.cellCount=0,this.remainingSize=0,this.strategy=i;;){if(n=t(o),void 0===n)break;if(this.cellSizesSum>=this.getContainerSize(this.cellSizesSum+n))break;this.cellSizes.push(n),this.cellSizesSum+=n,this.cellCount++,o++}var r=this.getContainerSize(this.cellSizesSum);this.remainingSize=this.cellSizesSum-r}function m(e){var n=this,o=[];if(this.guid="wt_"+y(),this.wtDom=new g,e.cloneFrom?(this.cloneFrom=e.cloneFrom,this.cloneDirection=e.cloneDirection,this.wtSettings=e.cloneFrom.wtSettings,this.wtTable=new N(this,e.table),this.wtScroll=new x(this),this.wtViewport=e.cloneFrom.wtViewport):(this.wtSettings=new R(this,e),this.wtTable=new N(this,e.table),this.wtScroll=new x(this),this.wtViewport=new P(this),this.wtScrollbars=new M(this),this.wtWheel=new O(this),this.wtEvent=new v(this)),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var r=0,s=this.wtTable.THEAD.childNodes[0].childNodes.length;s>r;r++)o.push(this.wtTable.THEAD.childNodes[0].childNodes[r].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(e,t){n.wtDom.fastInnerText(t,o[e])}])}this.selections={};var a=this.getSetting("selections");if(a)for(var l in a)a.hasOwnProperty(l)&&(this.selections[l]=new D(this,a[l]));this.drawn=!1,this.drawInterrupted=!1,t.Handsontable&&i.PluginHooks.add("beforeChange",function(){n.rowHeightCache&&(n.rowHeightCache.length=0)})}function g(){}function v(t){var i=this;this.instance=t,this.wtDom=this.instance.wtDom;var n=[null,null,null,null];this.instance.dblClickTimeout=null;var o,r=function(e){var t=i.parentCell(e.target);t.TD&&"TD"===t.TD.nodeName?i.instance.hasSetting("onCellMouseDown")&&i.instance.getSetting("onCellMouseDown",e,t.coords,t.TD):i.wtDom.hasClass(e.target,"corner")&&i.instance.getSetting("onCellCornerMouseDown",e,e.target),2!==e.button&&(t.TD&&"TD"===t.TD.nodeName?(n.shift(),n.push(t.TD)):i.wtDom.hasClass(e.target,"corner")&&(n.shift(),n.push(e.target)))},s=function(e){if(i.instance.hasSetting("onCellMouseOver")){var t=i.instance.wtTable.TABLE,n=i.wtDom.closest(e.target,["TD","TH"],t);n&&n!==o&&i.wtDom.isChildOf(n,t)&&(o=n,"TD"===n.nodeName&&i.instance.getSetting("onCellMouseOver",e,i.instance.wtTable.getCoords(n),n))}},a=function(e){if(2!==e.button){var t=i.parentCell(e.target);t.TD&&"TD"===t.TD.nodeName?(n.shift(),n.push(t.TD)):(n.shift(),n.push(e.target)),null!==n[3]&&n[3]===n[2]&&(i.instance.dblClickTimeout&&n[2]===n[1]&&n[1]===n[0]?(t.TD?i.instance.getSetting("onCellDblClick",e,t.coords,t.TD):i.wtDom.hasClass(e.target,"corner")&&i.instance.getSetting("onCellCornerDblClick",e,t.coords,t.TD),clearTimeout(i.instance.dblClickTimeout),i.instance.dblClickTimeout=null):(clearTimeout(i.instance.dblClickTimeout),i.instance.dblClickTimeout=setTimeout(function(){i.instance.dblClickTimeout=null},500)))}};e(this.instance.wtTable.holder).on("mousedown",r),e(this.instance.wtTable.TABLE).on("mouseover",s),e(this.instance.wtTable.holder).on("mouseup",a)}function y(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()}function b(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;return i==n&&(n=t.clientWidth),document.body.removeChild(t),i-n}function w(){return void 0===$&&($=b()),$}function _(){}function C(e,t){this.containerSizeFn=e,this.sizeAtIndex=t,this.cellSizesSum=0,this.cellSizes=[],this.cellCount=0,this.remainingSize=-1/0}function x(e){this.instance=e}function T(){}function S(){this.lastWindowScrollPosition=0/0,this.maxOuts=10,this.lastBegin=0,this.lastEnd=0}function k(e){this.instance=e,this.init(),this.clone=this.makeClone("corner")}function A(e){this.instance=e,this.type="horizontal",this.cellSize=50,this.init(),this.clone=this.makeClone("left")}function E(e){this.instance=e,this.type="vertical",this.cellSize=23,this.init();var t=this;d.prototype.isLastIncomplete=function(){return this.remainingSize>t.sumCellSizes(t.offset,t.offset+t.curOuts+1)},this.clone=this.makeClone("top")}function M(e){e.getSetting("nativeScrollbars")?(e.update("scrollbarWidth",w()),e.update("scrollbarHeight",w()),this.vertical=new E(e),this.horizontal=new A(e),this.corner=new k(e)):(this.vertical=new G(e),this.horizontal=new K(e))}function D(e,t){this.instance=e,this.settings=t,this.selected=[],t.border&&(this.border=new c(e,t))}function R(e,t){var i=this;this.instance=e,this.defaults={table:void 0,scrollH:"auto",scrollV:"auto",nativeScrollbars:!1,stretchH:"hybrid",currentRowClassName:null,currentColumnClassName:null,data:void 0,offsetRow:0,offsetColumn:0,fixedColumnsLeft:0,fixedRowsTop:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,width:null,height:null,cellRenderer:function(e,t,n){var o=i.getSetting("data",e,t);i.instance.wtDom.fastInnerText(n,void 0===o||null===o?"":o)},columnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,scrollbarWidth:10,scrollbarHeight:10},this.settings={};for(var n in this.defaults)if(this.defaults.hasOwnProperty(n))if(void 0!==t[n])this.settings[n]=t[n];else{if(void 0===this.defaults[n])throw new Error('A required setting "'+n+'" was not provided');this.settings[n]=this.defaults[n]}}function N(e,t){this.instance=e,this.TABLE=t,this.wtDom=this.instance.wtDom,this.wtDom.removeTextNodes(this.TABLE);var i=this.TABLE.parentNode;if(!i||1!==i.nodeType||!this.wtDom.hasClass(i,"wtHolder")){var n=document.createElement("DIV");n.className="wtSpreader",i&&i.insertBefore(n,this.TABLE),n.appendChild(this.TABLE)}if(this.spreader=this.TABLE.parentNode,i=this.spreader.parentNode,!i||1!==i.nodeType||!this.wtDom.hasClass(i,"wtHolder")){var o=document.createElement("DIV");o.className="wtHider",i&&i.insertBefore(o,this.spreader),o.appendChild(this.spreader)}if(this.hider=this.spreader.parentNode,this.hiderStyle=this.hider.style,this.hiderStyle.position="relative",i=this.hider.parentNode,!i||1!==i.nodeType||!this.wtDom.hasClass(i,"wtHolder")){var r=document.createElement("DIV");r.style.position="relative",r.className="wtHolder",i&&i.insertBefore(r,this.hider),r.appendChild(this.hider)}if(this.holder=this.hider.parentNode,this.TBODY=this.TABLE.getElementsByTagName("TBODY")[0],this.TBODY||(this.TBODY=document.createElement("TBODY"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.getElementsByTagName("THEAD")[0],this.THEAD||(this.THEAD=document.createElement("THEAD"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.getElementsByTagName("COLGROUP")[0],this.COLGROUP||(this.COLGROUP=document.createElement("COLGROUP"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.instance.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length){var s=document.createElement("TR");this.THEAD.appendChild(s)}this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.oldCellCache=new h,this.currentCellCache=new h,this.rowFilter=new _,this.columnFilter=new f,this.verticalRenderReverse=!1}function P(i){if(this.instance=i,this.resetSettings(),this.instance.getSetting("nativeScrollbars")){var n=this;e(t).on("resize",function(){n.clientHeight=n.getWorkspaceHeight()})}}function O(t){t.getSetting("nativeScrollbars")||e(t.wtTable.spreader).on("mousewheel",function(e,i,n,o){n||o||!i||(o=i),(n||o)&&(o>0&&0===t.getSetting("offsetRow")||0>o&&t.wtTable.isLastRowFullyVisible()||0>n&&0===t.getSetting("offsetColumn")||n>0&&t.wtTable.isLastColumnFullyVisible()||(clearTimeout(t.wheelTimeout),t.wheelTimeout=setTimeout(function(){o?t.wtScrollbars.vertical.visible&&t.scrollVertical(-Math.ceil(o)).draw():n&&t.wtScrollbars.horizontal.visible&&t.scrollHorizontal(Math.ceil(n)).draw()},0),e.preventDefault()))})}i.activeGuid=null,i.Core=function(n,o){function r(){var e=!1;return{validatorsInQueue:0,addValidatorToQueue:function(){this.validatorsInQueue++,e=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==e&&(e=!0,this.onQueueEmpty())}}}function s(t,i,n){function o(){var o;t.length&&(o=g.PluginHooks.execute("beforeChange",t,i),"function"==typeof o?e.when(result).then(function(){n()}):o===!1&&t.splice(0,t.length)),"function"!=typeof o&&n()}var s=new r;s.onQueueEmpty=o;for(var a=t.length-1;a>=0;a--)if(null===t[a])t.splice(a,1);else{var l=d.propToCol(t[a][1]),c=g.runHooksAndReturn("modifyCol",l),u=g.getCellMeta(t[a][0],c);"number"===u.dataType&&"string"==typeof t[a][3]&&t[a][3].length>0&&/^-?[\d\s]*\.?\d*$/.test(t[a][3])&&(t[a][3]=numeral().unformat(t[a][3]||"0")),u.validator&&(s.addValidatorToQueue(),g.validateCell(t[a][3],u,function(e,i){return function(n){if("boolean"!=typeof n)throw new Error("Validation error: result is not boolean");n===!1&&i.allowInvalid===!1&&(t.splice(e,1),--e),s.removeValidatorFormQueue()}}(a,u),i))}s.checkIfQueueIsEmpty()}function a(e,t){var i=e.length-1;if(!(0>i)){for(;i>=0;i--)if(null!==e[i]){if(u.settings.minSpareRows)for(;e[i][0]>g.countRows()-1;)d.createRow();if("array"===u.dataType&&u.settings.minSpareCols)for(;d.propToCol(e[i][1])>g.countCols()-1;)d.createCol();d.set(e[i][0],e[i][1],e[i][3])}else e.splice(i,1);g.forceFullRender=!0,h.adjustRowsAndCols(),f.refreshBorders(null,!0),g.PluginHooks.run("afterChange",e,t||"edit")}}function l(t,i,n){return"object"==typeof t?t:e.isPlainObject(n)?n:[[t,i,n]]}function c(e){if(e.hasOwnProperty("type")){var t,n;if("object"==typeof e.type)t=e.type;else if("string"==typeof e.type&&(t=i.cellTypes[e.type],void 0===t))throw new Error('You declared cell type "'+e.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');for(n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}}var u,d,h,f,p,m,g=this,v=function(){};i.helper.inherit(v,H),i.helper.extend(v.prototype,i.TextCell),c(o),i.helper.extend(v.prototype,o),this.rootElement=n;var y=e(document.documentElement),b=e(document.body);this.guid="ht_"+i.helper.randomString(),this.rootElement[0].id||(this.rootElement[0].id=this.guid),u={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new v,settingsFromDOM:{},selStart:new i.SelectionPoint,selEnd:new i.SelectionPoint,isPopulated:null,scrollable:null,extensions:{},colToProp:null,propToCol:null,dataSchema:null,dataType:"array",firstRun:!0},d={recursiveDuckSchema:function(t){var i;if(e.isPlainObject(t)){i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=e.isPlainObject(t[n])?d.recursiveDuckSchema(t[n]):null)}else i=[];return i},recursiveDuckColumns:function(t,i,n){var o,r;if("undefined"==typeof i&&(i=0,n=""),e.isPlainObject(t))for(r in t)t.hasOwnProperty(r)&&(null===t[r]?(o=n+r,u.colToProp.push(o),u.propToCol[o]=i,i++):i=d.recursiveDuckColumns(t[r],i,r+"."));return i},createMap:function(){if("undefined"==typeof d.getSchema())throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");var e,t,i=d.getSchema();if(u.colToProp=[],u.propToCol={},u.settings.columns)for(e=0,t=u.settings.columns.length;t>e;e++)u.colToProp[e]=u.settings.columns[e].data,u.propToCol[u.settings.columns[e].data]=e;else d.recursiveDuckColumns(i)},colToProp:function(e){return e=i.PluginHooks.execute(g,"modifyCol",e),u.colToProp&&"undefined"!=typeof u.colToProp[e]?u.colToProp[e]:e},propToCol:function(e){var t;return t="undefined"!=typeof u.propToCol[e]?u.propToCol[e]:e,t=i.PluginHooks.execute(g,"modifyCol",t)},getSchema:function(){return u.settings.dataSchema?"function"==typeof u.settings.dataSchema?u.settings.dataSchema():u.settings.dataSchema:u.duckDataSchema},createRow:function(t,i){var n,o,r=g.countCols(),s=0;for(i||(i=1),("number"!=typeof t||t>=g.countRows())&&(t=g.countRows()),o=t;i>s&&g.countRows()<u.settings.maxRows;){if("array"===u.dataType){n=[];for(var a=0;r>a;a++)n.push(null)}else n="function"===u.dataType?u.settings.dataSchema(t):e.extend(!0,{},d.getSchema());t===g.countRows()?v.prototype.data.push(n):v.prototype.data.splice(t,0,n),s++,o++}return g.PluginHooks.run("afterCreateRow",t,s),g.forceFullRender=!0,s},createCol:function(e,t){if("object"===u.dataType||u.settings.columns)throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting");var n,o,r=g.countRows(),s=v.prototype.data,a=0;for(t||(t=1),o=e;t>a&&g.countCols()<u.settings.maxCols;){if(n=i.helper.columnFactory(v,u.columnsSettingConflicts),"number"!=typeof e||e>=g.countCols()){for(var l=0;r>l;l++)"undefined"==typeof s[l]&&(s[l]=[]),s[l].push(null);u.columnSettings.push(n)}else{for(var l=0;r>l;l++)s[l].splice(o,0,null);u.columnSettings.splice(o,0,n)}a++,o++}return g.PluginHooks.run("afterCreateCol",e,a),g.forceFullRender=!0,a},removeRow:function(e,t){t||(t=1),"number"!=typeof e&&(e=-t),e=(g.countRows()+e)%g.countRows();var i=this.physicalRowsToLogical(e,t),n=g.PluginHooks.execute("beforeRemoveRow",e,t);if(n!==!1){var o=v.prototype.data.filter(function(e,t){return-1==i.indexOf(t)});v.prototype.data.length=0,Array.prototype.push.apply(v.prototype.data,o),g.PluginHooks.run("afterRemoveRow",e,t),g.forceFullRender=!0}},removeCol:function(e,t){if("object"===u.dataType||u.settings.columns)throw new Error("cannot remove column with object data source or columns option specified");t||(t=1),"number"!=typeof e&&(e=-t),e=(g.countCols()+e)%g.countCols();var i=g.PluginHooks.execute("beforeRemoveCol",e,t);if(i!==!1){for(var n=v.prototype.data,o=0,r=g.countRows();r>o;o++)n[o].splice(e,t);u.columnSettings.splice(e,t),g.PluginHooks.run("afterRemoveCol",e,t),g.forceFullRender=!0}},spliceCol:function(e,t,n){var o=4<=arguments.length?[].slice.call(arguments,3):[],r=g.getDataAtCol(e),s=r.slice(t,t+n),a=r.slice(t+n);i.helper.extendArray(o,a);for(var l=0;n>l;)o.push(null),l++;return i.helper.to2dArray(o),g.populateFromArray(t,e,o,null,null,"spliceCol"),s},spliceRow:function(e,t,n){var o=4<=arguments.length?[].slice.call(arguments,3):[],r=g.getDataAtRow(e),s=r.slice(t,t+n),a=r.slice(t+n);i.helper.extendArray(o,a);for(var l=0;n>l;)o.push(null),l++;return g.populateFromArray(e,t,[o],null,null,"spliceRow"),s},getVars:{},get:function(e,t){if(d.getVars.row=e,d.getVars.prop=t,g.PluginHooks.run("beforeGet",d.getVars),"string"==typeof d.getVars.prop&&d.getVars.prop.indexOf(".")>-1){var i=d.getVars.prop.split("."),n=u.settings.data[d.getVars.row];if(!n)return null;for(var o=0,r=i.length;r>o;o++)if(n=n[i[o]],"undefined"==typeof n)return null;return n}return"function"==typeof d.getVars.prop?d.getVars.prop(u.settings.data.slice(d.getVars.row,d.getVars.row+1)[0]):u.settings.data[d.getVars.row]?u.settings.data[d.getVars.row][d.getVars.prop]:null},setVars:{},set:function(e,t,i,n){if(d.setVars.row=e,d.setVars.prop=t,d.setVars.value=i,g.PluginHooks.run("beforeSet",d.setVars,n||"datamapGet"),"string"==typeof d.setVars.prop&&d.setVars.prop.indexOf(".")>-1){for(var o=d.setVars.prop.split("."),r=u.settings.data[d.setVars.row],s=0,a=o.length-1;a>s;s++)r=r[o[s]];r[o[s]]=d.setVars.value}else"function"==typeof d.setVars.prop?d.setVars.prop(u.settings.data.slice(d.setVars.row,d.setVars.row+1)[0],d.setVars.value):u.settings.data[d.setVars.row][d.setVars.prop]=d.setVars.value},physicalRowsToLogical:function(e,t){for(var i=(v.prototype.data.length+e)%v.prototype.data.length,n=[],o=t;i<v.prototype.data.length&&o;)this.get(i,0),n.push(this.getVars.row),o--,i++;return n},clear:function(){for(var e=0;e<g.countRows();e++)for(var t=0;t<g.countCols();t++)d.set(e,d.colToProp(t),"")},getAll:function(){return u.settings.data},getRange:function(e,t){var i,n,o,r,s,a=[];for(n=Math.max(e.row,t.row),r=Math.max(e.col,t.col),i=Math.min(e.row,t.row);n>=i;i++){for(s=[],o=Math.min(e.col,t.col);r>=o;o++)s.push(d.get(i,d.colToProp(o)));a.push(s)}return a},getText:function(e,t){return SheetClip.stringify(d.getRange(e,t))}},h={alter:function(e,t,n,o,r){var s;switch(n=n||1,e){case"insert_row":s=d.createRow(t,n),s&&(u.selStart.exists()&&u.selStart.row()>=t?(u.selStart.row(u.selStart.row()+s),f.transformEnd(s,0)):f.refreshBorders());break;case"insert_col":if(s=d.createCol(t,n)){if(i.helper.isArray(g.getSettings().colHeaders)){var a=[t,0];a.length+=s,Array.prototype.splice.apply(g.getSettings().colHeaders,a)}u.selStart.exists()&&u.selStart.col()>=t?(u.selStart.col(u.selStart.col()+s),f.transformEnd(0,s)):f.refreshBorders()}break;case"remove_row":d.removeRow(t,n),u.cellSettings.splice(t,n),h.adjustRowsAndCols(),f.refreshBorders();break;case"remove_col":d.removeCol(t,n);for(var l=0,c=d.getAll().length;c>l;l++)l in u.cellSettings&&u.cellSettings[l].splice(t,n);i.helper.isArray(g.getSettings().colHeaders)&&("undefined"==typeof t&&(t=-1),g.getSettings().colHeaders.splice(t,n)),u.columnSettings.splice(t,n),h.adjustRowsAndCols(),f.refreshBorders();break;default:throw new Error('There is no such action "'+e+'"')}r||h.adjustRowsAndCols()},adjustRowsAndCols:function(){var e,t,i,n=g.countEmptyRows(!0);if(t=g.countRows(),t<u.settings.minRows)for(e=0;e<u.settings.minRows-t;e++)d.createRow();if(n<u.settings.minSpareRows)for(;n<u.settings.minSpareRows&&g.countRows()<u.settings.maxRows;n++)d.createRow();if(i=g.countEmptyCols(!0),!u.settings.columns&&g.countCols()<u.settings.minCols)for(;g.countCols()<u.settings.minCols;i++)d.createCol();if(!u.settings.columns&&"array"===u.dataType&&i<u.settings.minSpareCols)for(;i<u.settings.minSpareCols&&g.countCols()<u.settings.maxCols;i++)d.createCol();if(u.settings.enterBeginsEditing)for(;(u.settings.minRows||u.settings.minSpareRows)&&g.countRows()>u.settings.minRows&&u.settings.minSpareRows&&n>u.settings.minSpareRows;n--)d.removeRow();if(u.settings.enterBeginsEditing&&!u.settings.columns)for(;(u.settings.minCols||u.settings.minSpareCols)&&g.countCols()>u.settings.minCols&&u.settings.minSpareCols&&i>u.settings.minSpareCols;i--)d.removeCol();var o=g.countRows(),r=g.countCols();if((0===o||0===r)&&f.deselect(),u.selStart.exists()){var s,a=u.selStart.row(),l=u.selStart.col(),c=u.selEnd.row(),h=u.selEnd.col();a>o-1?(a=o-1,s=!0,c>a&&(c=a)):c>o-1&&(c=o-1,s=!0,a>c&&(a=c)),l>r-1?(l=r-1,s=!0,h>l&&(h=l)):h>r-1&&(h=r-1,s=!0,l>h&&(l=h)),s&&g.selectCell(a,l,c,h)}},populateFromArray:function(e,t,n,o,r){var s,a,l,c,d=[],h={};if(a=t.length,0===a)return!1;var f,p,m,v;switch(r){case"shift_down":for(f=n?n.col-e.col+1:0,p=n?n.row-e.row+1:0,t=i.helper.translateRowsToColumns(t),l=0,c=t.length,m=Math.max(c,f);m>l;l++)if(c>l){for(s=0,a=t[l].length;p-a>s;s++)t[l].push(t[l][s%a]);t[l].unshift(e.col+l,e.row,0),g.spliceCol.apply(g,t[l])}else t[l%c][0]=e.col+l,g.spliceCol.apply(g,t[l%c]);break;case"shift_right":for(f=n?n.col-e.col+1:0,p=n?n.row-e.row+1:0,s=0,a=t.length,v=Math.max(a,p);v>s;s++)if(a>s){for(l=0,c=t[s].length;f-c>l;l++)t[s].push(t[s][l%c]);t[s].unshift(e.row+s,e.col,0),g.spliceRow.apply(g,t[s])}else t[s%a][0]=e.row+s,g.spliceRow.apply(g,t[s%a]);break;case"overwrite":default:for(h.row=e.row,h.col=e.col,s=0;a>s&&!(n&&h.row>n.row||!u.settings.minSpareRows&&h.row>g.countRows()-1||h.row>=u.settings.maxRows);s++){for(h.col=e.col,c=t[s]?t[s].length:0,l=0;c>l&&!(n&&h.col>n.col||!u.settings.minSpareCols&&h.col>g.countCols()-1||h.col>=u.settings.maxCols);l++)g.getCellMeta(h.row,h.col).readOnly||d.push([h.row,h.col,t[s][l]]),h.col++,n&&l===c-1&&(l=-1);
h.row++,n&&s===a-1&&(s=-1)}g.setDataAtCell(d,null,null,o||"populateFromArray")}},getCornerCoords:function(t){function i(t,i,n){function o(e){return e[n]}return Array.prototype.map?t.apply(Math,i.map(o)):t.apply(Math,e.map(i,o))}return{TL:{row:i(Math.min,t,"row"),col:i(Math.min,t,"col")},BR:{row:i(Math.max,t,"row"),col:i(Math.max,t,"col")}}},getCellsAtCoords:function(e,t){var i,n,o=h.getCornerCoords([e,t]),r=[];for(i=o.TL.row;i<=o.BR.row;i++)for(n=o.TL.col;n<=o.BR.col;n++)r.push(g.view.getCellAtCoords({row:i,col:n}));return r}},this.selection=f={inProgress:!1,begin:function(){g.selection.inProgress=!0},finish:function(){var e=g.getSelected();g.PluginHooks.run("afterSelectionEnd",e[0],e[1],e[2],e[3]),g.PluginHooks.run("afterSelectionEndByProp",e[0],g.colToProp(e[1]),e[2],g.colToProp(e[3])),g.selection.inProgress=!1},isInProgress:function(){return g.selection.inProgress},setRangeStart:function(e){u.selStart.coords(e),f.setRangeEnd(e)},setRangeEnd:function(e,t){g.selection.begin(),u.selEnd.coords(e),u.settings.multiSelect||u.selStart.coords(e),g.view.wt.selections.current.clear(),g.view.wt.selections.current.add(u.selStart.arr()),g.view.wt.selections.area.clear(),f.isMultiple()&&(g.view.wt.selections.area.add(u.selStart.arr()),g.view.wt.selections.area.add(u.selEnd.arr())),(u.settings.currentRowClassName||u.settings.currentColClassName)&&(g.view.wt.selections.highlight.clear(),g.view.wt.selections.highlight.add(u.selStart.arr()),g.view.wt.selections.highlight.add(u.selEnd.arr())),g.PluginHooks.run("afterSelection",u.selStart.row(),u.selStart.col(),u.selEnd.row(),u.selEnd.col()),g.PluginHooks.run("afterSelectionByProp",u.selStart.row(),d.colToProp(u.selStart.col()),u.selEnd.row(),d.colToProp(u.selEnd.col())),t!==!1&&g.view.scrollViewport(e),f.refreshBorders()},refreshBorders:function(e,t){t||p.destroyEditor(e),g.view.render(),f.isSelected()&&!t&&p.prepareEditor()},isMultiple:function(){return!(u.selEnd.col()===u.selStart.col()&&u.selEnd.row()===u.selStart.row())},transformStart:function(e,t,i){u.selStart.row()+e>g.countRows()-1?i&&u.settings.minSpareRows>0?g.alter("insert_row",g.countRows()):u.settings.autoWrapCol&&(e=1-g.countRows(),t=u.selStart.col()+t==g.countCols()-1?1-g.countCols():1):u.settings.autoWrapCol&&u.selStart.row()+e<0&&u.selStart.col()+t>=0&&(e=g.countRows()-1,t=u.selStart.col()+t==0?g.countCols()-1:-1),u.selStart.col()+t>g.countCols()-1?i&&u.settings.minSpareCols>0?g.alter("insert_col",g.countCols()):u.settings.autoWrapRow&&(e=u.selStart.row()+e==g.countRows()-1?1-g.countRows():1,t=1-g.countCols()):u.settings.autoWrapRow&&u.selStart.col()+t<0&&u.selStart.row()+e>=0&&(e=u.selStart.row()+e==0?g.countRows()-1:-1,t=g.countCols()-1);var n=g.countRows(),o=g.countCols(),r={row:u.selStart.row()+e,col:u.selStart.col()+t};r.row<0?r.row=0:r.row>0&&r.row>=n&&(r.row=n-1),r.col<0?r.col=0:r.col>0&&r.col>=o&&(r.col=o-1),f.setRangeStart(r)},transformEnd:function(e,t){if(u.selEnd.exists()){var i=g.countRows(),n=g.countCols(),o={row:u.selEnd.row()+e,col:u.selEnd.col()+t};o.row<0?o.row=0:o.row>0&&o.row>=i&&(o.row=i-1),o.col<0?o.col=0:o.col>0&&o.col>=n&&(o.col=n-1),f.setRangeEnd(o)}},isSelected:function(){return u.selEnd.exists()},inInSelection:function(e){if(!f.isSelected())return!1;var t=h.getCornerCoords([u.selStart.coords(),u.selEnd.coords()]);return t.TL.row<=e.row&&t.BR.row>=e.row&&t.TL.col<=e.col&&t.BR.col>=e.col},deselect:function(){f.isSelected()&&(g.selection.inProgress=!1,u.selEnd=new i.SelectionPoint,g.view.wt.selections.current.clear(),g.view.wt.selections.area.clear(),p.destroyEditor(),f.refreshBorders(),g.PluginHooks.run("afterDeselect"))},selectAll:function(){u.settings.multiSelect&&(f.setRangeStart({row:0,col:0}),f.setRangeEnd({row:g.countRows()-1,col:g.countCols()-1},!1))},empty:function(){if(f.isSelected()){var e,t,i=h.getCornerCoords([u.selStart.coords(),u.selEnd.coords()]),n=[];for(e=i.TL.row;e<=i.BR.row;e++)for(t=i.TL.col;t<=i.BR.col;t++)g.getCellMeta(e,t).readOnly||n.push([e,t,""]);g.setDataAtCell(n)}}},this.autofill=m={handle:null,init:function(){m.handle?m.handle.disabled=!1:m.handle={}},disable:function(){m.handle.disabled=!0},selectAdjacent:function(){var e,t,i,n,o;e=f.isMultiple()?g.view.wt.selections.area.getCorners():g.view.wt.selections.current.getCorners(),t=d.getAll();e:for(i=e[2]+1;i<g.countRows();i++){for(o=e[1];o<=e[3];o++)if(t[i][o])break e;(t[i][e[1]-1]||t[i][e[3]+1])&&(n=i)}n&&(g.view.wt.selections.fill.clear(),g.view.wt.selections.fill.add([e[0],e[1]]),g.view.wt.selections.fill.add([n,e[3]]),m.apply())},apply:function(){var e,t,i,n,o;m.handle.isDragged=0,e=g.view.wt.selections.fill.getCorners(),e&&(g.view.wt.selections.fill.clear(),t=f.isMultiple()?g.view.wt.selections.area.getCorners():g.view.wt.selections.current.getCorners(),e[0]===t[0]&&e[1]<t[1]?(i={row:e[0],col:e[1]},n={row:e[2],col:t[1]-1}):e[0]===t[0]&&e[3]>t[3]?(i={row:e[0],col:t[3]+1},n={row:e[2],col:e[3]}):e[0]<t[0]&&e[1]===t[1]?(i={row:e[0],col:e[1]},n={row:t[0]-1,col:e[3]}):e[2]>t[2]&&e[1]===t[1]&&(i={row:t[2]+1,col:e[1]},n={row:e[2],col:e[3]}),i&&(o=SheetClip.parse(d.getText(u.selStart.coords(),u.selEnd.coords())),g.PluginHooks.run("beforeAutofill",i,n,o),h.populateFromArray(i,o,n,"autofill"),f.setRangeStart({row:e[0],col:e[1]}),f.setRangeEnd({row:e[2],col:e[3]})))},showBorder:function(e){e.row=e[0],e.col=e[1];var t=h.getCornerCoords([u.selStart.coords(),u.selEnd.coords()]);if("horizontal"!==u.settings.fillHandle&&(t.BR.row<e.row||t.TL.row>e.row))e=[e.row,t.BR.col];else{if("vertical"===u.settings.fillHandle)return;e=[t.BR.row,e.col]}g.view.wt.selections.fill.clear(),g.view.wt.selections.fill.add([u.selStart.coords().row,u.selStart.coords().col]),g.view.wt.selections.fill.add([u.selEnd.coords().row,u.selEnd.coords().col]),g.view.wt.selections.fill.add(e),g.view.render()}},this.init=function(){g.PluginHooks.run("beforeInit"),this.view=new i.TableView(this),p=new i.EditorManager(g,u,f,d),this.updateSettings(u.settings,!0),this.parseSettingsFromDOM(),this.forceFullRender=!0,this.view.render(),"object"==typeof u.firstRun&&(g.PluginHooks.run("afterChange",u.firstRun[0],u.firstRun[1]),u.firstRun=!1),g.PluginHooks.run("afterInit")},this.validateCell=function(e,t,i,n){var o=t.validator;"[object RegExp]"===Object.prototype.toString.call(o)&&(o=function(e){return function(t,i){i(e.test(t))}}(o)),"function"==typeof o?(e=g.PluginHooks.execute("beforeValidate",e,t.row,t.prop,n),setTimeout(function(){o.call(t,e,function(o){t.valid=o,o=g.PluginHooks.execute("afterValidate",o,e,t.row,t.prop,n),i(o)})})):(t.valid=!0,i(!0))},this.setDataAtCell=function(e,t,i,n){var o,r,c,u=l(e,t,i),h=[];for(o=0,r=u.length;r>o;o++){if("object"!=typeof u[o])throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof u[o][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");c=d.colToProp(u[o][1]),h.push([u[o][0],c,d.get(u[o][0],c),u[o][2]])}n||"object"!=typeof e||(n=t),s(h,n,function(){a(h,n)})},this.setDataAtRowProp=function(e,t,i,n){var o,r,c=l(e,t,i),u=[];for(o=0,r=c.length;r>o;o++)u.push([c[o][0],c[o][1],d.get(c[o][0],c[o][1]),c[o][2]]);n||"object"!=typeof e||(n=t),s(u,n,function(){a(u,n)})},this.listen=function(){i.activeGuid=g.guid,document.activeElement&&document.activeElement!==document.body?document.activeElement.blur():document.activeElement||document.body.focus()},this.unlisten=function(){i.activeGuid=null},this.isListening=function(){return i.activeGuid===g.guid},this.destroyEditor=function(e){f.refreshBorders(e)},this.populateFromArray=function(e,t,i,n,o,r,s){if("object"!=typeof i)throw new Error("populateFromArray parameter `input` must be an array");return h.populateFromArray({row:e,col:t},i,"number"==typeof n?{row:n,col:o}:null,r,s)},this.spliceCol=function(){return d.spliceCol.apply(null,arguments)},this.spliceRow=function(){return d.spliceRow.apply(null,arguments)},this.getCornerCoords=function(e){return h.getCornerCoords(e)},this.getSelected=function(){return f.isSelected()?[u.selStart.row(),u.selStart.col(),u.selEnd.row(),u.selEnd.col()]:void 0},this.parseSettingsFromDOM=function(){var e=this.rootElement.css("overflow");if("scroll"===e||"auto"===e?(this.rootElement[0].style.overflow="visible",u.settingsFromDOM.overflow=e):(void 0===u.settings.width||void 0===u.settings.height)&&(u.settingsFromDOM.overflow="auto"),u.settingsFromDOM.width=void 0===u.settings.width?this.rootElement.width():void 0,u.settingsFromDOM.height=void 0,void 0===u.settings.height&&("scroll"===u.settingsFromDOM.overflow||"auto"===u.settingsFromDOM.overflow)){var i=this.rootElement[0].cloneNode(!1),n=this.rootElement[0].parentNode;if(n){i.removeAttribute("id"),n.appendChild(i);var o=parseInt(t.getComputedStyle(i,null).getPropertyValue("height"),10);isNaN(o)&&i.currentStyle&&(o=parseInt(i.currentStyle.height,10)),o>0&&(u.settingsFromDOM.height=o),n.removeChild(i)}}},this.render=function(){g.view&&(g.forceFullRender=!0,g.parseSettingsFromDOM(),f.refreshBorders(null,!0))},this.loadData=function(e){if("object"==typeof e&&null!==e)e.push&&e.splice||(e=[e]);else{if(null!==e)throw new Error("loadData only accepts array of objects or array of arrays ("+typeof e+" given)");e=[];for(var t,i=0,n=u.settings.startRows;n>i;i++){t=[];for(var o=0,r=u.settings.startCols;r>o;o++)t.push(null);e.push(t)}}u.isPopulated=!1,v.prototype.data=e,u.dataType=u.settings.dataSchema instanceof Array||e[0]instanceof Array?"array":"function"==typeof u.settings.dataSchema?"function":"object",u.duckDataSchema=e[0]?d.recursiveDuckSchema(e[0]):{},d.createMap(),h.adjustRowsAndCols(),g.PluginHooks.run("afterLoadData"),u.firstRun?u.firstRun=[null,"loadData"]:(g.PluginHooks.run("afterChange",null,"loadData"),g.render()),u.isPopulated=!0},this.getData=function(e,t,i,n){return"undefined"==typeof e?d.getAll():d.getRange({row:e,col:t},{row:i,col:n})},this.updateSettings=function(e,t){var n,o,r;if("undefined"!=typeof e.rows)throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?");if("undefined"!=typeof e.cols)throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?");for(n in e)"data"!==n&&(void 0!==g.PluginHooks.hooks[n]||void 0!==g.PluginHooks.legacy[n]?g.PluginHooks.add(n,e[n]):(!t&&e.hasOwnProperty(n)&&(v.prototype[n]=e[n]),i.extension[n]&&(u.extensions[n]=new i.extension[n](g,e[n]))));if(void 0===e.data&&void 0===u.settings.data?g.loadData(null):void 0!==e.data?g.loadData(e.data):void 0!==e.columns&&d.createMap(),void 0!==e.columns)for(n=0,o=e.columns.length;o>n;n++){v.prototype.colHeaders!==!1&&(v.prototype.colHeaders=!0);break}if(r=g.countCols(),u.cellSettings.length=0,r>0){var s,a;for(n=0;r>n;n++)u.columnSettings[n]=i.helper.columnFactory(v,u.columnsSettingConflicts),s=u.columnSettings[n].prototype,v.prototype.columns&&(a=v.prototype.columns[n],c(a),i.helper.extend(s,a))}"undefined"!=typeof e.fillHandle&&(m.handle&&e.fillHandle===!1?m.disable():m.handle||e.fillHandle===!1||m.init()),"undefined"!=typeof e.className&&(v.prototype.className&&g.rootElement.removeClass(v.prototype.className),e.className&&g.rootElement.addClass(e.className)),t||g.PluginHooks.run("afterUpdateSettings"),h.adjustRowsAndCols(),g.view&&!u.firstRun&&(g.forceFullRender=!0,f.refreshBorders(null,!0))},this.getValue=function(){var e=g.getSelected();if(v.prototype.getValue){if("function"==typeof v.prototype.getValue)return v.prototype.getValue.call(g);if(e)return g.getData()[e[0]][v.prototype.getValue]}else if(e)return g.getDataAtCell(e[0],e[1])},this.getSettings=function(){return u.settings},this.getSettingsFromDOM=function(){return u.settingsFromDOM},this.clear=function(){f.selectAll(),f.empty()},this.alter=function(e,t,i,n,o){h.alter(e,t,i,n,o)},this.getCell=function(e,t){return g.view.getCellAtCoords({row:e,col:t})},this.colToProp=function(e){return d.colToProp(e)},this.propToCol=function(e){return d.propToCol(e)},this.getDataAtCell=function(e,t){return d.get(e,d.colToProp(t))},this.getDataAtRowProp=function(e,t){return d.get(e,t)},this.getDataAtCol=function(e){return[].concat.apply([],d.getRange({row:0,col:e},{row:u.settings.data.length-1,col:e}))},this.getDataAtProp=function(e){return[].concat.apply([],d.getRange({row:0,col:d.propToCol(e)},{row:u.settings.data.length-1,col:d.propToCol(e)}))},this.getDataAtRow=function(e){return u.settings.data[e]},this.getCellMeta=function(e,t){function n(e){var t={row:e};return g.PluginHooks.execute("beforeGet",t),t.row}function o(e){return i.PluginHooks.execute(g,"modifyCol",e)}var r,s=d.colToProp(t);if(e=n(e),t=o(t),"undefined"==typeof u.columnSettings[t]&&(u.columnSettings[t]=i.helper.columnFactory(v,u.columnsSettingConflicts)),u.cellSettings[e]||(u.cellSettings[e]=[]),u.cellSettings[e][t]||(u.cellSettings[e][t]=new u.columnSettings[t]),r=u.cellSettings[e][t],r.row=e,r.col=t,r.prop=s,r.instance=g,g.PluginHooks.run("beforeGetCellMeta",e,t,r),c(r),r.cells){var a=r.cells.call(r,e,t,s);a&&(c(a),i.helper.extend(r,a))}return g.PluginHooks.run("afterGetCellMeta",e,t,r),r},this.validateCells=function(e){var t=new r;t.onQueueEmpty=e;for(var i=g.countRows()-1;i>=0;){for(var n=g.countCols()-1;n>=0;)t.addValidatorToQueue(),g.validateCell(g.getDataAtCell(i,n),g.getCellMeta(i,n),function(){t.removeValidatorFormQueue()},"validateCells"),n--;i--}t.checkIfQueueIsEmpty()},this.getRowHeader=function(e){if(void 0===e){for(var t=[],i=0,n=g.countRows();n>i;i++)t.push(g.getRowHeader(i));return t}return"[object Array]"===Object.prototype.toString.call(u.settings.rowHeaders)&&void 0!==u.settings.rowHeaders[e]?u.settings.rowHeaders[e]:"function"==typeof u.settings.rowHeaders?u.settings.rowHeaders(e):u.settings.rowHeaders&&"string"!=typeof u.settings.rowHeaders&&"number"!=typeof u.settings.rowHeaders?e+1:u.settings.rowHeaders},this.getColHeader=function(e){if(void 0===e){for(var t=[],n=0,o=g.countCols();o>n;n++)t.push(g.getColHeader(n));return t}return e=i.PluginHooks.execute(g,"modifyCol",e),u.settings.columns&&u.settings.columns[e]&&u.settings.columns[e].title?u.settings.columns[e].title:"[object Array]"===Object.prototype.toString.call(u.settings.colHeaders)&&void 0!==u.settings.colHeaders[e]?u.settings.colHeaders[e]:"function"==typeof u.settings.colHeaders?u.settings.colHeaders(e):u.settings.colHeaders&&"string"!=typeof u.settings.colHeaders&&"number"!=typeof u.settings.colHeaders?i.helper.spreadsheetColumnLabel(e):u.settings.colHeaders},this._getColWidthFromSettings=function(e){var t=g.getCellMeta(0,e),i=t.width;if((void 0===i||i===u.settings.width)&&(i=t.colWidths),void 0!==i){switch(typeof i){case"object":i=i[e];break;case"function":i=i(e)}"string"==typeof i&&(i=parseInt(i,10))}return i},this.getColWidth=function(e){e=i.PluginHooks.execute(g,"modifyCol",e);var t={width:g._getColWidthFromSettings(e)};return t.width||(t.width=50),g.PluginHooks.run("afterGetColWidth",e,t),t.width},this.countRows=function(){return u.settings.data.length},this.countCols=function(){return"object"===u.dataType||"function"===u.dataType?u.settings.columns&&u.settings.columns.length?u.settings.columns.length:u.colToProp.length:"array"===u.dataType?u.settings.columns&&u.settings.columns.length?u.settings.columns.length:u.settings.data&&u.settings.data[0]&&u.settings.data[0].length?u.settings.data[0].length:0:void 0},this.rowOffset=function(){return g.view.wt.getSetting("offsetRow")},this.colOffset=function(){return g.view.wt.getSetting("offsetColumn")},this.countVisibleRows=function(){return g.view.wt.drawn?g.view.wt.wtTable.rowStrategy.countVisible():-1},this.countVisibleCols=function(){return g.view.wt.drawn?g.view.wt.wtTable.columnStrategy.countVisible():-1},this.countEmptyRows=function(e){for(var t=g.countRows()-1,i=0;t>=0;){if(d.get(t,0),g.isEmptyRow(d.getVars.row))i++;else if(e)break;t--}return i},this.countEmptyCols=function(e){if(g.countRows()<1)return 0;for(var t=g.countCols()-1,i=0;t>=0;){if(g.isEmptyCol(t))i++;else if(e)break;t--}return i},this.isEmptyRow=function(e){if(u.settings.isEmptyRow)return u.settings.isEmptyRow.call(g,e);for(var t,i=0,n=g.countCols();n>i;i++)if(t=g.getDataAtCell(e,i),""!==t&&null!==t&&"undefined"!=typeof t)return!1;return!0},this.isEmptyCol=function(e){if(u.settings.isEmptyCol)return u.settings.isEmptyCol.call(g,e);for(var t,i=0,n=g.countRows();n>i;i++)if(t=g.getDataAtCell(i,e),""!==t&&null!==t&&"undefined"!=typeof t)return!1;return!0},this.selectCell=function(e,t,i,n,o){if("number"!=typeof e||0>e||e>=g.countRows())return!1;if("number"!=typeof t||0>t||t>=g.countCols())return!1;if("undefined"!=typeof i){if("number"!=typeof i||0>i||i>=g.countRows())return!1;if("number"!=typeof n||0>n||n>=g.countCols())return!1}return u.selStart.coords({row:e,col:t}),document.activeElement&&document.activeElement!==document.documentElement&&document.activeElement!==document.body&&document.activeElement.blur(),g.listen(),"undefined"==typeof i?f.setRangeEnd({row:e,col:t},o):f.setRangeEnd({row:i,col:n},o),g.selection.finish(),!0},this.selectCellByProp=function(){return arguments[1]=d.propToCol(arguments[1]),"undefined"!=typeof arguments[3]&&(arguments[3]=d.propToCol(arguments[3])),g.selectCell.apply(g,arguments)},this.deselectCell=function(){f.deselect()},this.destroy=function(){g.clearTimeouts(),g.view&&g.view.wt.destroy(),g.rootElement.empty(),g.rootElement.removeData("handsontable"),g.rootElement.off(".handsontable"),e(t).off("."+g.guid),y.off("."+g.guid),b.off("."+g.guid),g.copyPaste.removeCallback(u.onCut),g.copyPaste.removeCallback(u.onPaste),g.PluginHooks.run("afterDestroy")},this.getActiveEditor=function(){return p.getActiveEditor()},this.getInstance=function(){return g.rootElement.data("handsontable")},function(){g.PluginHooks=new i.PluginHookClass;var e=g.PluginHooks.run,t=g.PluginHooks.execute;g.PluginHooks.run=function(t,n,o,r,s,a){e.call(this,g,t,n,o,r,s,a),i.PluginHooks.run(g,t,n,o,r,s,a)},g.PluginHooks.execute=function(e,n,o,r,s,a){var l=i.PluginHooks.execute(g,e,n,o,r,s,a),c=t.call(this,g,e,l,o,r,s,a);return"undefined"==typeof c?l:c},g.addHook=function(){g.PluginHooks.add.apply(g.PluginHooks,arguments)},g.addHookOnce=function(){g.PluginHooks.once.apply(g.PluginHooks,arguments)},g.removeHook=function(){g.PluginHooks.remove.apply(g.PluginHooks,arguments)},g.runHooks=function(){g.PluginHooks.run.apply(g.PluginHooks,arguments)},g.runHooksAndReturn=function(){return g.PluginHooks.execute.apply(g.PluginHooks,arguments)}}(),this.timeouts={},this.registerTimeout=function(e,t,i){clearTimeout(this.timeouts[e]),this.timeouts[e]=setTimeout(t,i||0)},this.clearTimeouts=function(){for(var e in this.timeouts)this.timeouts.hasOwnProperty(e)&&clearTimeout(this.timeouts[e])},this.version="0.10.0-beta3"};var H=function(){};H.prototype={data:void 0,width:void 0,height:void 0,startRows:5,startCols:5,minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,pasteMode:"overwrite",currentRowClassName:void 0,currentColClassName:void 0,stretchH:"hybrid",isEmptyRow:void 0,isEmptyCol:void 0,observeDOMVisibility:!0,allowInvalid:!0,invalidCellClassName:"htInvalid",fragmentSelection:!1,readOnly:!1,nativeScrollbars:!1},i.DefaultSettings=H,e.fn.handsontable=function(e){var t,n,o,r,s,a=this.first(),l=a.data("handsontable");if("string"!=typeof e)return s=e||{},l?l.updateSettings(s):(l=new i.Core(a,s),a.data("handsontable",l),l.init()),a;if(o=[],arguments.length>1)for(t=1,n=arguments.length;n>t;t++)o.push(arguments[t]);if(l){if("undefined"==typeof l[e])throw new Error("Handsontable do not provide action: "+e);r=l[e].apply(l,o)}return r},i.TableView=function(n){var o=this,r=e(t),s=e(document.documentElement);this.instance=n,this.settings=n.getSettings(),this.settingsFromDOM=n.getSettingsFromDOM(),n.rootElement.data("originalStyle",n.rootElement[0].getAttribute("style")),n.rootElement.addClass("handsontable");var a=document.createElement("TABLE");a.className="htCore",this.THEAD=document.createElement("THEAD"),a.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),a.appendChild(this.TBODY),n.$table=e(a),n.rootElement.prepend(n.$table),n.rootElement.on("mousedown.handsontable",function(e){o.isTextSelectionAllowed(e.target)||(c(),e.preventDefault(),t.focus())}),s.on("keyup."+n.guid,function(e){n.selection.isInProgress()&&!e.shiftKey&&n.selection.finish()});var l;s.on("mouseup."+n.guid,function(e){n.selection.isInProgress()&&1===e.which&&n.selection.finish(),l=!1,n.autofill.handle&&n.autofill.handle.isDragged&&(n.autofill.handle.isDragged>1&&n.autofill.apply(),n.autofill.handle.isDragged=0),i.helper.isOutsideInput(document.activeElement)&&n.unlisten()}),s.on("mousedown."+n.guid,function(e){var t=e.target;if(t!==o.wt.wtTable.spreader)for(;t!==document.documentElement;){if(null===t)return;if(t===n.rootElement[0]||"HANDSONTABLE-TABLE"===t.nodeName)return;t=t.parentNode}o.settings.outsideClickDeselects?n.deselectCell():n.destroyEditor()}),n.rootElement.on("mousedown.handsontable",".dragdealer",function(){n.destroyEditor()}),n.$table.on("selectstart",function(e){o.settings.fragmentSelection||e.preventDefault()});var c=function(){t.getSelection?t.getSelection().empty?t.getSelection().empty():t.getSelection().removeAllRanges&&t.getSelection().removeAllRanges():document.selection&&document.selection.empty()},u={table:a,stretchH:this.settings.stretchH,data:n.getDataAtCell,totalRows:n.countRows,totalColumns:n.countCols,nativeScrollbars:this.settings.nativeScrollbars,offsetRow:0,offsetColumn:0,width:this.getWidth(),height:this.getHeight(),fixedColumnsLeft:function(){return o.settings.fixedColumnsLeft},fixedRowsTop:function(){return o.settings.fixedRowsTop},rowHeaders:function(){return o.settings.rowHeaders?[function(e,t){o.appendRowHeader(e,t)}]:[]},columnHeaders:function(){return o.settings.colHeaders?[function(e,t){o.appendColHeader(e,t)}]:[]},columnWidth:n.getColWidth,cellRenderer:function(e,t,i){o.applyCellTypeMethod("renderer",i,e,t)},selections:{current:{className:"current",border:{width:2,color:"#5292F7",style:"solid",cornerVisible:function(){return o.settings.fillHandle&&!o.isCellEdited()&&!n.selection.isMultiple()}}},area:{className:"area",border:{width:1,color:"#89AFF9",style:"solid",cornerVisible:function(){return o.settings.fillHandle&&!o.isCellEdited()&&n.selection.isMultiple()}}},highlight:{highlightRowClassName:o.settings.currentRowClassName,highlightColumnClassName:o.settings.currentColClassName},fill:{className:"fill",border:{width:1,color:"red",style:"solid"}}},hideBorderOnMouseDownOver:function(){return o.settings.fragmentSelection},onCellMouseDown:function(e,t,i){n.listen(),l=!0;var o={row:t[0],col:t[1]};2===e.button&&n.selection.inInSelection(o)||(e.shiftKey?n.selection.setRangeEnd(o):n.selection.setRangeStart(o)),n.PluginHooks.run("afterOnCellMouseDown",e,t,i)},onCellMouseOver:function(e,t){var i={row:t[0],col:t[1]};l?n.selection.setRangeEnd(i):n.autofill.handle&&n.autofill.handle.isDragged&&(n.autofill.handle.isDragged++,n.autofill.showBorder(t))},onCellCornerMouseDown:function(e){n.autofill.handle.isDragged=1,e.preventDefault(),n.PluginHooks.run("afterOnCellCornerMouseDown",e)},onCellCornerDblClick:function(){n.autofill.selectAdjacent()},beforeDraw:function(e){o.beforeRender(e)},onDraw:function(e){o.onDraw(e)}};n.PluginHooks.run("beforeInitWalkontable",u),this.wt=new m(u),r.on("resize."+n.guid,function(){n.registerTimeout("resizeTimeout",function(){n.parseSettingsFromDOM();var e=o.getWidth(),t=o.getHeight();(u.width!==e||u.height!==t)&&(n.forceFullRender=!0,o.render(),u.width=e,u.height=t)},60)}),e(o.wt.wtTable.spreader).on("mousedown.handsontable, contextmenu.handsontable",function(e){e.target===o.wt.wtTable.spreader&&3===e.which&&e.stopPropagation()}),s.on("click."+n.guid,function(){o.settings.observeDOMVisibility&&o.wt.drawInterrupted&&(o.instance.forceFullRender=!0,o.render())})},i.TableView.prototype.isTextSelectionAllowed=function(e){return"TEXTAREA"===e.nodeName?!0:this.settings.fragmentSelection&&this.wt.wtDom.isChildOf(e,this.TBODY)?!0:!1},i.TableView.prototype.isCellEdited=function(){return document.activeElement!==document.body},i.TableView.prototype.getWidth=function(){var e=void 0!==this.settings.width?this.settings.width:this.settingsFromDOM.width;return"function"==typeof e?e():e},i.TableView.prototype.getHeight=function(){var e=void 0!==this.settings.height?this.settings.height:this.settingsFromDOM.height;return"function"==typeof e?e():e},i.TableView.prototype.beforeRender=function(e){e&&(this.instance.PluginHooks.run("beforeRender",this.instance.forceFullRender),this.wt.update("width",this.getWidth()),this.wt.update("height",this.getHeight()))},i.TableView.prototype.onDraw=function(e){e&&this.instance.PluginHooks.run("afterRender",this.instance.forceFullRender)},i.TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.rootElement.triggerHandler("render.handsontable")},i.TableView.prototype.applyCellTypeMethod=function(e,t,n,o){var r=this.instance.colToProp(o),s=this.instance.getCellMeta(n,o),a=i.helper.getCellMethod(e,s[e]),l=this.instance.getDataAtRowProp(n,r),c=a(this.instance,t,n,o,r,l,s);return"renderer"===e&&this.instance.PluginHooks.run("afterRenderer",t,n,o,r,l,s),c},i.TableView.prototype.getCellAtCoords=function(e){var t=this.wt.wtTable.getCell([e.row,e.col]);return 0>t?null:t},i.TableView.prototype.scrollViewport=function(e){this.wt.scrollViewport([e.row,e.col])},i.TableView.prototype.appendRowHeader=function(e,t){if(e>-1)this.wt.wtDom.fastInnerHTML(t,this.instance.getRowHeader(e));else{var i=document.createElement("DIV");i.className="relative",this.wt.wtDom.fastInnerText(i,"\xa0"),this.wt.wtDom.empty(t),t.appendChild(i)}},i.TableView.prototype.appendColHeader=function(e,t){var i=document.createElement("DIV"),n=document.createElement("SPAN");i.className="relative",n.className="colHeader",this.wt.wtDom.fastInnerHTML(n,this.instance.getColHeader(e)),i.appendChild(n),this.wt.wtDom.empty(t),t.appendChild(i),this.instance.PluginHooks.run("afterGetColHeader",e,t)},i.TableView.prototype.maximumVisibleElementWidth=function(e){var t=this.wt.wtViewport.getWorkspaceWidth();return this.settings.nativeScrollbars?t:t-e},i.TableView.prototype.maximumVisibleElementHeight=function(e){var t=this.wt.wtViewport.getWorkspaceHeight();return this.settings.nativeScrollbars?t:t-e},function(e){function t(e){var t,i;i={},t=e,this.getInstance=function(e){return e.guid in i||(i[e.guid]=new t(e)),i[e.guid]}}var i={};e.editors={registerEditor:function(e,n){i[e]=new t(n)},getEditor:function(e,t){if("function"==typeof e){var n=e;e=n.toString(),this.registerEditor(e,n)}if("string"!=typeof e)throw Error('Only strings and functions can be passed as "editor" parameter ');if(!(e in i))throw Error('No editor registered under name "'+e+'"');return i[e].getInstance(t)}}}(i),function(t){t.EditorManager=function(i,n,o,r){var s,a=this,l=e(document),c=t.helper.keyCode,u=function(){function e(e){if(i.isListening()){if(n.settings.beforeOnKeyDown&&n.settings.beforeOnKeyDown.call(i,e),t.helper.isCtrlKey(e.keyCode))return void a.setCopyableText();if(i.PluginHooks.run("beforeKeyDown",e),!e.isImmediatePropagationStopped()&&(n.lastKeyCode=e.keyCode,o.isSelected())){var r=(e.ctrlKey||e.metaKey)&&!e.altKey;if(t.helper.isPrintableChar(e.keyCode)&&r&&65===e.keyCode&&(o.selectAll(),a.setCopyableText(),e.preventDefault(),e.stopImmediatePropagation()),!s.isWaiting()&&!t.helper.isMetaKey(e.keyCode)&&!r)return a.openEditor(""),void e.stopPropagation();var l=e.shiftKey?o.setRangeEnd:o.setRangeStart;switch(e.keyCode){case c.ARROW_UP:a.isEditorOpened()&&!s.isWaiting()&&a.closeEditorAndSaveChanges(r),d(e.shiftKey),e.preventDefault(),e.stopPropagation();break;case c.ARROW_DOWN:a.isEditorOpened()&&!s.isWaiting()&&a.closeEditorAndSaveChanges(r),h(e.shiftKey),e.preventDefault(),e.stopPropagation();break;case c.ARROW_RIGHT:a.isEditorOpened()&&!s.isWaiting()&&a.closeEditorAndSaveChanges(r),f(e.shiftKey),e.preventDefault(),e.stopPropagation();break;case c.ARROW_LEFT:a.isEditorOpened()&&!s.isWaiting()&&a.closeEditorAndSaveChanges(r),p(e.shiftKey),e.preventDefault(),e.stopPropagation();break;case c.TAB:var m="function"==typeof n.settings.tabMoves?n.settings.tabMoves(e):n.settings.tabMoves;e.shiftKey?o.transformStart(-m.row,-m.col):o.transformStart(m.row,m.col,!0),e.preventDefault(),e.stopPropagation();break;case c.BACKSPACE:case c.DELETE:o.empty(e),a.prepareEditor(),e.preventDefault();break;case c.F2:a.openEditor(),e.preventDefault();break;case c.ENTER:a.isEditorOpened()?(s.state!==t.EditorState.WAITING&&a.closeEditorAndSaveChanges(r),u(e.shiftKey)):i.getSettings().enterBeginsEditing?a.openEditor():u(e.shiftKey),e.preventDefault(),e.stopImmediatePropagation();break;case c.ESCAPE:a.isEditorOpened()&&a.closeEditorAndRestoreOriginalValue(r),e.preventDefault();break;case c.HOME:l(e.ctrlKey||e.metaKey?{row:0,col:n.selStart.col()}:{row:n.selStart.row(),col:0}),e.preventDefault(),e.stopPropagation();break;case c.END:l(e.ctrlKey||e.metaKey?{row:i.countRows()-1,col:n.selStart.col()}:{row:n.selStart.row(),col:i.countCols()-1}),e.preventDefault(),e.stopPropagation();break;case c.PAGE_UP:o.transformStart(-i.countVisibleRows(),0),i.view.wt.scrollVertical(-i.countVisibleRows()),i.view.render(),e.preventDefault(),e.stopPropagation();break;case c.PAGE_DOWN:o.transformStart(i.countVisibleRows(),0),i.view.wt.scrollVertical(i.countVisibleRows()),i.view.render(),e.preventDefault(),e.stopPropagation()}}}}function r(){a.openEditor()}function u(e){var t="function"==typeof n.settings.enterMoves?n.settings.enterMoves(event):n.settings.enterMoves;e?o.transformStart(-t.row,-t.col):o.transformStart(t.row,t.col,!0)}function d(e){e?o.transformEnd(-1,0):o.transformStart(-1,0)}function h(e){e?o.transformEnd(1,0):o.transformStart(1,0)}function f(e){e?o.transformEnd(0,1):o.transformStart(0,1)}function p(e){e?o.transformEnd(0,-1):o.transformStart(0,-1)}n.onCut=function(){i.isListening()&&o.empty()},n.onPaste=function(e){if(i.isListening()&&o.isSelected()){var t=e.replace(/^[\r\n]*/g,"").replace(/[\r\n]*$/g,""),r=SheetClip.parse(t),s=i.getCornerCoords([n.selStart.coords(),n.selEnd.coords()]),a=s.TL,l={row:Math.max(s.BR.row,r.length-1+s.TL.row),col:Math.max(s.BR.col,r[0].length-1+s.TL.col)};i.PluginHooks.once("afterChange",function(e){e&&e.length&&i.selectCell(a.row,a.col,l.row,l.col)}),i.populateFromArray(a.row,a.col,r,l.row,l.col,"paste",n.settings.pasteMode)}},l.on("keydown.handsontable."+i.guid,e),i.view.wt.update("onCellDblClick",r),i.copyPaste=q.getInstance(),i.copyPaste.onCut(n.onCut),i.copyPaste.onPaste(n.onPaste),i.addHook("afterDestroy",function(){l.off("keydown.handsontable."+i.guid)})};this.destroyEditor=function(e){this.closeEditor(e)},this.getActiveEditor=function(){return s},this.setCopyableText=function(){var e=i.getSelected(),t=i.getSettings(),n=t.copyRowsLimit,o=t.copyColsLimit,s=Math.min(e[0],e[2]),a=Math.min(e[1],e[3]),l=Math.max(e[0],e[2]),c=Math.max(e[1],e[3]),u=Math.min(l,s+n-1),d=Math.min(c,a+o-1);i.copyPaste.copyable(r.getText({row:s,col:a},{row:u,col:d})),(l!==u||c!==d)&&i.PluginHooks.run("afterCopyLimit",l-s+1,c-a+1,n,o)};var d=!1;this.prepareEditor=function(){if(s&&s.state===t.EditorState.WAITING)return void(d||(d=!0,this.closeEditor(!1,!1,function(){d=!1,a.prepareEditor()})));var e=n.selStart.row(),o=n.selStart.col(),r=i.colToProp(o),l=i.getCell(e,o),c=i.getDataAtCell(e,o),u=i.getCellMeta(e,o),h=u.editor;s=t.editors.getEditor(h,i),s.prepare(e,o,r,l,c,u)},this.isEditorOpened=function(){return s.isOpened()},this.openEditor=function(e){s.beginEditing(e)},this.closeEditor=function(e,t,i){s?s.finishEditing(e,t,i):i&&i(!1)},this.closeEditorAndSaveChanges=function(e){return this.closeEditor(!1,e)},this.closeEditorAndRestoreOriginalValue=function(e){return this.closeEditor(!0,e)},u()}}(i),i.Dom=new g,i.helper.isPrintableChar=function(e){return 32==e||e>=48&&57>=e||e>=96&&111>=e||e>=186&&192>=e||e>=219&&222>=e||e>=226||e>=65&&90>=e},i.helper.isMetaKey=function(e){var t=i.helper.keyCode,n=[t.ARROW_DOWN,t.ARROW_UP,t.ARROW_LEFT,t.ARROW_RIGHT,t.HOME,t.END,t.DELETE,t.BACKSPACE,t.F1,t.F2,t.F3,t.F4,t.F5,t.F6,t.F7,t.F8,t.F9,t.F10,t.F11,t.F12,t.TAB,t.PAGE_DOWN,t.PAGE_UP,t.ENTER,t.ESCAPE,t.SHIFT];return-1!=n.indexOf(e)},i.helper.isCtrlKey=function(e){return-1!=[17,224,91,93].indexOf(e)},i.helper.stringify=function(e){switch(typeof e){case"string":case"number":return e+"";case"object":return null===e?"":e.toString();case"undefined":return"";default:return e.toString()}},i.helper.spreadsheetColumnLabel=function(e){for(var t,i=e+1,n="";i>0;)t=(i-1)%26,n=String.fromCharCode(65+t)+n,i=parseInt((i-t)/26,10);
return n},i.helper.isNumeric=function(e){var t=typeof e;return"number"==t?!isNaN(e)&&isFinite(e):"string"==t?e.length?1==e.length?/\d/.test(e):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(e):!1:"object"==t?!(!e||"number"!=typeof e.valueOf()||e instanceof Date):!1},i.helper.isArray=function(e){return null!==Object.prototype.toString.call(e).match(/array/i)},i.helper.isDescendant=function(e,t){for(var i=t.parentNode;null!=i;){if(i==e)return!0;i=i.parentNode}return!1},i.helper.randomString=function(){return y()},i.helper.inherit=function(e,t){function i(){}return i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e},i.helper.extend=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},i.helper.columnFactory=function(e,t){var i=0,n=t.length,o=function(){};for(o.prototype=new e;n>i;i++)o.prototype[t[i]]=void 0;return o},i.helper.translateRowsToColumns=function(e){var t,i,n,o,r=[],s=0;for(t=0,i=e.length;i>t;t++)for(n=0,o=e[t].length;o>n;n++)n==s&&(r.push([]),s++),r[n].push(e[t][n]);return r},i.helper.to2dArray=function(e){for(var t=0,i=e.length;i>t;)e[t]=[e[t]],t++},i.helper.extendArray=function(e,t){for(var i=0,n=t.length;n>i;)e.push(t[i]),i++},i.helper.getCellMethod=function(e,t){if("string"==typeof t){var n=i.cellLookup[e][t];return void 0===n&&"renderer"===e?function(e,n,o,r,s,a,l){l.rendererTemplate=t;var c=l.editor;return c===i.HandsontableEditor||c===i.DateEditor||c===i.AutocompleteEditor?i.AutocompleteRenderer.apply(e,arguments):i.TextRenderer.apply(e,arguments)}:n}return t},i.helper.isOutsideInput=function(e){var t=["INPUT","SELECT","TEXTAREA"];return t.indexOf(e.nodeName)>-1&&-1==e.className.indexOf("handsontableInput")},i.helper.keyCode={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,DELETE:46,END:35,ENTER:13,ESCAPE:27,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86},i.helper.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},i.helper.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"==Object.prototype.toString.call(e)},i.helper.pivot=function(e){var t=[];if(!e||0==e.length||!e[0]||0==e[0].length)return t;for(var i=e.length,n=e[0].length,o=0;i>o;o++)for(var r=0;n>r;r++)t[r]||(t[r]=[]),t[r][o]=e[o][r];return t},i.helper.proxy=function(e,t){return function(){return e.apply(t,arguments)}},i.SelectionPoint=function(){this._row=null,this._col=null},i.SelectionPoint.prototype.exists=function(){return null!==this._row},i.SelectionPoint.prototype.row=function(e){return void 0!==e&&(this._row=e),this._row},i.SelectionPoint.prototype.col=function(e){return void 0!==e&&(this._col=e),this._col},i.SelectionPoint.prototype.coords=function(e){return void 0!==e&&(this._row=e.row,this._col=e.col),{row:this._row,col:this._col}},i.SelectionPoint.prototype.arr=function(e){return void 0!==e&&(this._row=e[0],this._col=e[1]),[this._row,this._col]},i.TextRenderer=function(e,t,n,o,r,s,a){!s&&a.placeholder&&(s=a.placeholder,e.view.wt.wtDom.addClass(t,"htPlaceholder"));var l=i.helper.stringify(s);if(a.rendererTemplate){e.view.wt.wtDom.empty(t);var c=document.createElement("TEMPLATE");c.setAttribute("bind","{{}}"),c.innerHTML=a.rendererTemplate,HTMLTemplateElement.decorate(c),c.model=e.getDataAtRow(n),t.appendChild(c)}else e.view.wt.wtDom.fastInnerText(t,l);a.readOnly&&e.view.wt.wtDom.addClass(t,"htDimmed"),a.valid===!1&&a.invalidCellClassName&&e.view.wt.wtDom.addClass(t,a.invalidCellClassName)},function(e){var t=document.createElement("DIV");t.className="htAutocompleteWrapper";var i=document.createElement("DIV");i.className="htAutocompleteArrow",i.appendChild(document.createTextNode("\u25bc"));e.AutocompleteRenderer=function(n,o,r,s,a,l,c){var u=(t.cloneNode(!0),i.cloneNode(!0));e.TextRenderer(n,o,r,s,a,l,c),o.appendChild(u),e.Dom.addClass(o,"htAutocomplete"),o.firstChild||o.appendChild(document.createTextNode("\xa0")),n.acArrowListener||(n.acArrowListener=function(){n.view.wt.getSetting("onCellDblClick")},n.rootElement.on("mousedown",".htAutocompleteArrow",n.acArrowListener))}}(i);var F=document.createElement("INPUT");F.className="htCheckboxRendererInput",F.type="checkbox",F.setAttribute("autocomplete","off"),i.CheckboxRenderer=function(t,n,o,r,s,a,l){"undefined"==typeof l.checkedTemplate&&(l.checkedTemplate=!0),"undefined"==typeof l.uncheckedTemplate&&(l.uncheckedTemplate=!1),t.view.wt.wtDom.empty(n);var c=F.cloneNode(!1);a===l.checkedTemplate||a===i.helper.stringify(l.checkedTemplate)?(c.checked=!0,n.appendChild(c)):a===l.uncheckedTemplate||a===i.helper.stringify(l.uncheckedTemplate)?n.appendChild(c):null===a?(c.className+=" noValue",n.appendChild(c)):t.view.wt.wtDom.fastInnerText(n,"#bad value#");var u=e(c);return l.readOnly?u.on("click",function(e){e.preventDefault()}):(u.on("mousedown",function(e){e.stopPropagation()}),u.on("mouseup",function(e){e.stopPropagation()}),u.on("change",function(){this.checked?t.setDataAtRowProp(o,s,l.checkedTemplate):t.setDataAtRowProp(o,s,l.uncheckedTemplate)})),t.CheckboxRenderer&&t.CheckboxRenderer.beforeKeyDownHookBound||(t.CheckboxRenderer={beforeKeyDownHookBound:!0},t.addHook("beforeKeyDown",function(i){if(32==i.keyCode){i.stopImmediatePropagation(),i.preventDefault();for(var n,o,r,s=t.getSelected(),a={row:Math.min(s[0],s[2]),col:Math.min(s[1],s[3])},l={row:Math.max(s[0],s[2]),col:Math.max(s[1],s[3])},c=a.row;c<=l.row;c++)for(var u=l.col;u<=l.col;u++)if(n=t.getCell(c,u),r=t.getCellMeta(c,u),o=n.querySelectorAll("input[type=checkbox]"),o.length>0&&!r.readOnly)for(var d=0,h=o.length;h>d;d++)o[d].checked=!o[d].checked,e(o[d]).trigger("change")}})),n},i.NumericRenderer=function(e,t,n,o,r,s,a){i.helper.isNumeric(s)&&("undefined"!=typeof a.language&&numeral.language(a.language),s=numeral(s).format(a.format||"0"),e.view.wt.wtDom.addClass(t,"htNumeric")),i.TextRenderer(e,t,n,o,r,s,a)},function(){i.PasswordRenderer=function(e,t,n,o,r,s,a){i.TextRenderer.apply(this,arguments),s=t.innerHTML;var l,c=a.hashLength||s.length,u=a.hashSymbol||"*";for(l="";l.split(u).length-1<c;l+=u);e.view.wt.wtDom.fastInnerHTML(t,l)}}(i),function(e){function t(t){this.instance=t,this.state=e.EditorState.VIRGIN,this._opened=!1,this._closeCallback=function(){},this.init()}e.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"},t.prototype._fireCallbacks=function(e){this._closeCallback(e)},t.prototype.init=function(){throw Error("Editor init() method unimplemented")},t.prototype.val=function(){throw Error("Editor val() method unimplemented")},t.prototype.open=function(){throw Error("Editor open() method unimplemented")},t.prototype.close=function(){throw Error("Editor close() method unimplemented")},t.prototype.prepare=function(t,i,n,o,r,s){this.TD=o,this.row=t,this.col=i,this.prop=n,this.originalValue=r,this.cellProperties=s,this.state=e.EditorState.VIRGIN},t.prototype.extend=function(){function t(){i.apply(this,arguments)}var i=this.constructor;return e.helper.inherit(t,i)},t.prototype.saveValue=function(e,t){if(t){var i=this.instance.getSelected();this.instance.populateFromArray(i[0],i[1],e,i[2],i[3],"edit")}else this.instance.populateFromArray(this.row,this.col,e,null,null,"edit")},t.prototype.beginEditing=function(t){this.state==e.EditorState.VIRGIN&&(this.cellProperties.readOnly||(this.instance.view.scrollViewport({row:this.row,col:this.col}),this.instance.view.render(),this.state=e.EditorState.EDITING,t="string"==typeof t?t:this.originalValue,this.val(e.helper.stringify(t)),this.open(),this._opened=!0,this.instance.view.render()))},t.prototype.finishEditing=function(t,i,n){if(n){var o=this._closeCallback;this._closeCallback=function(e){o(e),n(e)}}if(!this.isWaiting()){if(this._closeCallback=function(){},this.state==e.EditorState.VIRGIN){var r=this;return void setTimeout(function(){r._fireCallbacks(!0)})}if(this.state==e.EditorState.EDITING){var s;if(s=t?[[this.originalValue]]:[[this.val().trim()]],this.state=e.EditorState.WAITING,this.saveValue(s,i),this.cellProperties.validator){var r=this;this.instance.addHookOnce("afterValidate",function(t){r.state=e.EditorState.FINISHED,r.discardEditor(t)})}else this.state=e.EditorState.FINISHED,this.discardEditor(!0)}}},t.prototype.discardEditor=function(t){this.state===e.EditorState.FINISHED&&(t===!1&&this.cellProperties.allowInvalid!==!0?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=e.EditorState.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this.state=e.EditorState.VIRGIN,this._fireCallbacks(!0)))},t.prototype.isOpened=function(){return this._opened},t.prototype.isWaiting=function(){return this.state===e.EditorState.WAITING},e.editors.BaseEditor=t}(i),function(t){var i=t.editors.BaseEditor.prototype.extend();i.prototype.init=function(){this.createElements(),this.bindEvents()},i.prototype.val=function(e){return"undefined"==typeof e?this.TEXTAREA.value:void(this.TEXTAREA.value=e)};var n=function(e){var i=this,n=i.getActiveEditor(),o=t.helper.keyCode,r=(e.ctrlKey||e.metaKey)&&!e.altKey;if(e.target===n.TEXTAREA&&!e.isImmediatePropagationStopped()){if(17===e.keyCode||224===e.keyCode||91===e.keyCode||93===e.keyCode)return void e.stopImmediatePropagation();switch(e.keyCode){case o.ARROW_RIGHT:n.wtDom.getCaretPosition(n.TEXTAREA)!==n.TEXTAREA.value.length&&e.stopImmediatePropagation();break;case o.ARROW_LEFT:0!==n.wtDom.getCaretPosition(n.TEXTAREA)&&e.stopImmediatePropagation();break;case o.ENTER:var s=n.instance.getSelected(),a=!(s[0]===s[2]&&s[1]===s[3]);(r&&!a||e.altKey)&&(n.isOpened()?(n.val(n.val()+"\n"),n.focus()):n.beginEditing(n.originalValue+"\n"),e.stopImmediatePropagation()),e.preventDefault();break;case o.A:case o.X:case o.C:case o.V:if(r){e.stopImmediatePropagation();break}case o.BACKSPACE:case o.DELETE:case o.HOME:case o.END:e.stopImmediatePropagation()}}};i.prototype.open=function(){this.refreshDimensions(),this.TEXTAREA.focus(),this.wtDom.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length),this.instance.addHook("beforeKeyDown",n)},i.prototype.close=function(){this.textareaParentStyle.display="none",document.activeElement===this.TEXTAREA&&this.instance.listen(),this.instance.removeHook("beforeKeyDown",n)},i.prototype.focus=function(){this.TEXTAREA.focus()},i.prototype.createElements=function(){this.$body=e(document.body),this.wtDom=new g,this.TEXTAREA=document.createElement("TEXTAREA"),this.$textarea=e(this.TEXTAREA),this.wtDom.addClass(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),this.wtDom.addClass(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement[0].appendChild(this.TEXTAREA_PARENT);var i=this;t.PluginHooks.add("afterRender",function(){i.instance.registerTimeout("refresh_editor_dimensions",function(){i.refreshDimensions()},0)})},i.prototype.refreshDimensions=function(){if(this.state===t.EditorState.EDITING&&(this.TD=this.instance.getCell(this.row,this.col),this.TD)){var i=e(this.TD),n=this.wtDom.offset(this.TD),o=this.wtDom.offset(this.instance.rootElement[0]),r=this.instance.rootElement.scrollTop(),s=this.instance.rootElement.scrollLeft(),a=n.top-o.top+r-1,l=n.left-o.left+s-1,c=this.instance.getSettings(),u=c.rowHeaders===!1?0:1,d=c.colHeaders===!1?0:1;0>a&&(a=0),0>l&&(l=0),u>0&&parseInt(i.css("border-top-width"),10)>0&&(a+=1),d>0&&parseInt(i.css("border-left-width"),10)>0&&(l+=1),this.textareaParentStyle.top=a+"px",this.textareaParentStyle.left=l+"px";var h=i.width(),f=this.instance.view.maximumVisibleElementWidth(l)-10,p=i.outerHeight()-4,m=this.instance.view.maximumVisibleElementHeight(a)-5;parseInt(i.css("border-top-width"),10)>0&&(p-=1),parseInt(i.css("border-left-width"),10)>0&&u>0&&(h-=1),this.$textarea.autoResize({minHeight:Math.min(p,m),maxHeight:m,minWidth:Math.min(h,f),maxWidth:f,animate:!1,extraSpace:0}),this.textareaParentStyle.display="block"}},i.prototype.bindEvents=function(){this.$textarea.on("cut.editor",function(e){e.stopPropagation()}),this.$textarea.on("paste.editor",function(e){e.stopPropagation()})},t.editors.TextEditor=i,t.editors.registerEditor("text",t.editors.TextEditor)}(i),function(e){var t=e.editors.BaseEditor.prototype.extend();t.prototype.init=function(){},t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.val=function(){},t.prototype.focus=function(){},e.editors.CheckboxEditor=t,e.editors.registerEditor("checkbox",t)}(i),function(t){var i=t.editors.TextEditor.prototype.extend();i.prototype.init=function(){if(!e.datepicker)throw new Error("jQuery UI Datepicker dependency not found. Did you forget to include jquery-ui.custom.js or its substitute?");t.editors.TextEditor.prototype.init.apply(this,arguments),this.isCellEdited=!1;var i=this;this.instance.addHook("afterDestroy",function(){i.destroyElements()})},i.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments),this.datePicker=document.createElement("DIV"),this.instance.view.wt.wtDom.addClass(this.datePicker,"htDatepickerHolder"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=99,document.body.appendChild(this.datePicker),this.$datePicker=e(this.datePicker);var i=this,n={dateFormat:"yy-mm-dd",showButtonPanel:!0,changeMonth:!0,changeYear:!0,altField:this.$textarea,onSelect:function(){i.finishEditing(!1)}};this.$datePicker.datepicker(n),this.$datePicker.on("mousedown",function(e){e.stopPropagation()}),this.hideDatepicker()},i.prototype.destroyElements=function(){this.$datePicker.datepicker("destroy"),this.$datePicker.remove()},i.prototype.beginEditing=function(){t.editors.TextEditor.prototype.beginEditing.apply(this,arguments),this.showDatepicker()},i.prototype.finishEditing=function(){this.hideDatepicker(),t.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},i.prototype.showDatepicker=function(){var t=e(this.TD),i=t.offset();this.datePickerStyle.top=i.top+t.height()+"px",this.datePickerStyle.left=i.left+"px";var n={defaultDate:this.originalValue||void 0};e.extend(n,this.cellProperties),this.$datePicker.datepicker("option",n),this.originalValue&&this.$datePicker.datepicker("setDate",this.originalValue),this.datePickerStyle.display="block"},i.prototype.hideDatepicker=function(){this.datePickerStyle.display="none"},t.editors.DateEditor=i,t.editors.registerEditor("date",i)}(i),function(t){var i=t.editors.TextEditor.prototype.extend();i.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments);var i=document.createElement("DIV");i.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(i),this.$htContainer=e(i),this.$htContainer.handsontable()},i.prototype.prepare=function(i,n,o,r,s,a){t.editors.TextEditor.prototype.prepare.apply(this,arguments);var l=this,c={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",cells:function(){return{readOnly:!0}},fillHandle:!1,afterOnCellMouseDown:function(){l.val(this.getValue()),l.instance.destroyEditor()},beforeOnKeyDown:function(e){var i=this;switch(e.keyCode){case t.helper.keyCode.ESCAPE:l.instance.destroyEditor(!0),e.stopImmediatePropagation(),e.preventDefault();break;case t.helper.keyCode.ENTER:var n=i.getSelected();l.val(this.getDataAtCell(n[0],n[1])),l.instance.destroyEditor();break;case t.helper.keyCode.ARROW_UP:i.getSelected()&&0==i.getSelected()[0]&&!l.cellProperties.strict&&(i.deselectCell(),l.instance.listen(),l.focus(),e.preventDefault(),e.stopImmediatePropagation())}}};this.cellProperties.handsontable&&(c=e.extend(c,a.handsontable)),this.$htContainer.handsontable("destroy"),this.$htContainer.handsontable(c)};var n=function(e){if(!e.isImmediatePropagationStopped()){var i=this.getActiveEditor(),n=i.$htContainer.handsontable("getInstance");e.keyCode==t.helper.keyCode.ARROW_DOWN&&(n.getSelected()||n.selectCell(0,0),e.preventDefault(),e.stopImmediatePropagation())}};i.prototype.open=function(){this.instance.addHook("beforeKeyDown",n),t.editors.TextEditor.prototype.open.apply(this,arguments),this.$htContainer.handsontable("render"),this.cellProperties.strict?(this.$htContainer.handsontable("selectCell",0,0),this.$textarea[0].style.visibility="hidden"):(this.$htContainer.handsontable("deselectCell"),this.$textarea[0].style.visibility="visible"),this.wtDom.setCaretPosition(this.$textarea[0],0,this.$textarea[0].value.length)},i.prototype.close=function(){this.instance.removeHook("beforeKeyDown",n),this.instance.listen(),t.editors.TextEditor.prototype.close.apply(this,arguments)},i.prototype.focus=function(){this.instance.listen(),t.editors.TextEditor.prototype.focus.apply(this,arguments)},i.prototype.beginEditing=function(){var e=this.instance.getSettings().onBeginEditing;e&&e()===!1||t.editors.TextEditor.prototype.beginEditing.apply(this,arguments)},i.prototype.finishEditing=function(){return this.$htContainer.handsontable("isListening")&&this.instance.listen(),this.$htContainer.handsontable("getSelected")&&this.val(this.$htContainer.handsontable("getInstance").getValue()),t.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},t.editors.HandsontableEditor=i,t.editors.registerEditor("handsontable",i)}(i),function(e){var t=e.editors.HandsontableEditor.prototype.extend();t.prototype.createElements=function(){e.editors.HandsontableEditor.prototype.createElements.apply(this,arguments),this.$htContainer.addClass("autocompleteEditor")},t.prototype.bindEvents=function(){var t=this;this.$textarea.on("keydown.autocompleteEditor",function(i){e.helper.isMetaKey(i.keyCode)&&-1==[e.helper.keyCode.BACKSPACE,e.helper.keyCode.DELETE].indexOf(i.keyCode)||setTimeout(function(){t.queryChoices(t.$textarea.val())})}),e.editors.HandsontableEditor.prototype.bindEvents.apply(this,arguments)},t.prototype.beginEditing=function(){e.editors.HandsontableEditor.prototype.beginEditing.apply(this,arguments);var t=this;setTimeout(function(){t.queryChoices(t.TEXTAREA.value)}),this.$htContainer.handsontable("updateSettings",{colWidths:[this.wtDom.outerWidth(this.TEXTAREA)-2]})};var i;t.prototype.open=function(){var t=this;i=function(i){var n=this;i.keyCode==e.helper.keyCode.ARROW_UP&&n.getSelected()&&0==n.getSelected()[0]&&(n.deselectCell(),t.instance.listen(),t.focus(),i.preventDefault(),i.stopImmediatePropagation())},this.$htContainer.handsontable("getInstance").addHook("beforeKeyDown",i),e.editors.HandsontableEditor.prototype.open.apply(this,arguments),this.$textarea[0].style.visibility="visible",t.focus()},t.prototype.close=function(){this.$htContainer.handsontable("getInstance").removeHook("beforeKeyDown",i),e.editors.HandsontableEditor.prototype.close.apply(this,arguments)},t.prototype.queryChoices=function(t){if("function"==typeof this.cellProperties.source){var i=this;this.cellProperties.source(t,function(e){i.updateChoicesList(e)})}else if(e.helper.isArray(this.cellProperties.source)){var n;n=t?this.cellProperties.source.filter(function(e){return-1!=e.indexOf(t)}):this.cellProperties.source,this.updateChoicesList(n)}else this.updateChoicesList([])},t.prototype.updateChoicesList=function(t){this.$htContainer.handsontable("loadData",e.helper.pivot([t]));var i,n=this.val();if(n.length>0)for(var o=0,r=t.length;r>o;o++)if(t[o]==n){i=o;break}"undefined"==typeof i?this.$htContainer.handsontable("deselectCell"):this.$htContainer.handsontable("selectCell",i,0),this.focus()},e.editors.AutocompleteEditor=t,e.editors.registerEditor("autocomplete",t)}(i),function(t){var i=t.editors.TextEditor.prototype.extend(),n=new g;i.prototype.createElements=function(){t.editors.TextEditor.prototype.createElements.apply(this,arguments),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.$textarea=e(this.TEXTAREA),n.empty(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)},t.editors.PasswordEditor=i,t.editors.registerEditor("password",i)}(i),function(t){var i=t.editors.BaseEditor.prototype.extend();i.prototype.init=function(){this.select=e("<select />").addClass("htSelectEditor").hide(),this.instance.rootElement.append(this.select)},i.prototype.prepare=function(){t.editors.BaseEditor.prototype.prepare.apply(this,arguments);var i,n=this.cellProperties.selectOptions;i=this.prepareOptions("function"==typeof n?n(this.row,this.col,this.prop):n);var o=[];for(var r in i)if(i.hasOwnProperty(r)){var s=e("<option />");s.val(r),s.html(i[r]),o.push(s)}this.select.empty(),this.select.append(o)},i.prototype.prepareOptions=function(e){var i={};if(t.helper.isArray(e))for(var n=0,o=e.length;o>n;n++)i[e[n]]=e[n];else"object"==typeof e&&(i=e);return i},i.prototype.val=function(e){return"undefined"==typeof e?this.select.val():void this.select.val(e)};var n=function(e){var i=this,n=i.getActiveEditor();switch(e.keyCode){case t.helper.keyCode.ARROW_UP:var o=n.select.find("option:selected").prev();1==o.length&&o.prop("selected",!0),e.stopImmediatePropagation(),e.preventDefault();break;case t.helper.keyCode.ARROW_DOWN:var r=n.select.find("option:selected").next();1==r.length&&r.prop("selected",!0),e.stopImmediatePropagation(),e.preventDefault()}};i.prototype.open=function(){this.select.css({height:e(this.TD).height(),"min-width":e(this.TD).outerWidth()}),this.select.show(),this.select.offset(e(this.TD).offset()),this.instance.addHook("beforeKeyDown",n)},i.prototype.close=function(){this.select.hide(),this.instance.removeHook("beforeKeyDown",n)},t.editors.SelectEditor=i,t.editors.registerEditor("select",i)}(i),i.NumericValidator=function(e,t){t(/^-?\d*\.?\d*$/.test(e))};var I=function(e,t){var i=e,n="string"==typeof i?i.toLowerCase():null;return function(e){for(var o=!1,r=0,s=e.length;s>r;r++){if(i===e[r]){o=!0;break}if(n===e[r].toLowerCase()){o=!0;break}}t(o)}};i.AutocompleteValidator=function(e,t){this.strict&&this.source?"function"==typeof this.source?this.source(e,I(e,t)):I(e,t)(this.source):t(!0)},i.AutocompleteCell={editor:"autocomplete",renderer:i.AutocompleteRenderer,validator:i.AutocompleteValidator},i.CheckboxCell={editor:"checkbox",renderer:i.CheckboxRenderer},i.TextCell={editor:"text",renderer:i.TextRenderer},i.NumericCell={editor:"text",renderer:i.NumericRenderer,validator:i.NumericValidator,dataType:"number"},i.DateCell={editor:"date",renderer:i.AutocompleteRenderer},i.HandsontableCell={editor:"handsontable",renderer:i.AutocompleteRenderer},i.PasswordCell={editor:"password",renderer:i.PasswordRenderer},i.cellTypes={text:i.TextCell,date:i.DateCell,numeric:i.NumericCell,checkbox:i.CheckboxCell,autocomplete:i.AutocompleteCell,handsontable:i.HandsontableCell,password:i.PasswordCell},i.cellLookup={renderer:{text:i.TextRenderer,numeric:i.NumericRenderer,checkbox:i.CheckboxRenderer,autocomplete:i.AutocompleteRenderer,password:i.PasswordRenderer},validator:{numeric:i.NumericValidator,autocomplete:i.AutocompleteValidator}},i.PluginHookClass=function(){function e(){this.hooks=t(),this.legacy=n}var t=function(){return{beforeInitWalkontable:[],beforeInit:[],beforeRender:[],beforeChange:[],beforeRemoveCol:[],beforeRemoveRow:[],beforeValidate:[],beforeGet:[],beforeSet:[],beforeGetCellMeta:[],beforeAutofill:[],beforeKeyDown:[],afterInit:[],afterLoadData:[],afterUpdateSettings:[],afterRender:[],afterRenderer:[],afterChange:[],afterValidate:[],afterGetCellMeta:[],afterGetColHeader:[],afterGetColWidth:[],afterDestroy:[],afterRemoveRow:[],afterCreateRow:[],afterRemoveCol:[],afterCreateCol:[],afterColumnResize:[],afterColumnMove:[],afterDeselect:[],afterSelection:[],afterSelectionByProp:[],afterSelectionEnd:[],afterSelectionEndByProp:[],afterCopyLimit:[],afterOnCellMouseDown:[],afterOnCellCornerMouseDown:[],modifyCol:[]}},n={onBeforeChange:"beforeChange",onChange:"afterChange",onCreateRow:"afterCreateRow",onCreateCol:"afterCreateCol",onSelection:"afterSelection",onCopyLimit:"afterCopyLimit",onSelectionEnd:"afterSelectionEnd",onSelectionByProp:"afterSelectionByProp",onSelectionEndByProp:"afterSelectionEndByProp"};return e.prototype.add=function(e,t){if(e in n&&(e=n[e]),"undefined"==typeof this.hooks[e]&&(this.hooks[e]=[]),i.helper.isArray(t))for(var o=0,r=t.length;r>o;o++)this.hooks[e].push(t[o]);else this.hooks[e].push(t);return this},e.prototype.once=function(e,t){if(i.helper.isArray(t))for(var n=0,o=t.length;o>n;n++)t[n].runOnce=!0,this.add(e,t[n]);else t.runOnce=!0,this.add(e,t)},e.prototype.remove=function(e,t){var i=!1;if(e in n&&(e=n[e]),"undefined"!=typeof this.hooks[e])for(var o=0,r=this.hooks[e].length;r>o;o++)if(this.hooks[e][o]==t){delete this.hooks[e][o].runOnce,this.hooks[e].splice(o,1),i=!0;break}return i},e.prototype.run=function(e,t,i,o,r,s,a){if(t in n&&(t=n[t]),"undefined"!=typeof this.hooks[t])for(var l=Array.prototype.slice.call(this.hooks[t]),c=0,u=l.length;u>c;c++)l[c].call(e,i,o,r,s,a),l[c].runOnce&&this.remove(t,l[c])},e.prototype.execute=function(e,t,i,o,r,s,a){var l,c;if(t in n&&(t=n[t]),"undefined"!=typeof this.hooks[t]){c=Array.prototype.slice.call(this.hooks[t]);for(var u=0,d=c.length;d>u;u++)if(l=c[u].call(e,i,o,r,s,a),void 0!==l&&(i=l),c[u].runOnce&&this.remove(t,c[u]),l===!1)return!1}return i},e}(),i.PluginHooks=new i.PluginHookClass,function(e){function t(){function t(e){var t=document,i=this;i.table=t.createElement("table"),i.theadTh=t.createElement("th"),i.table.appendChild(t.createElement("thead")).appendChild(t.createElement("tr")).appendChild(i.theadTh),i.tableStyle=i.table.style,i.tableStyle.tableLayout="auto",i.tableStyle.width="auto",i.tbody=t.createElement("tbody"),i.table.appendChild(i.tbody),i.container=t.createElement("div"),i.container.className=e.rootElement[0].className+" hidden",i.containerStyle=i.container.style,i.container.appendChild(i.table)}var n=this,o=5;this.beforeInit=function(){var e=this;e.autoColumnWidths=[],e.getSettings().autoColumnSize!==!1?(e.autoColumnSizeTmp||(e.autoColumnSizeTmp={table:null,tableStyle:null,theadTh:null,tbody:null,container:null,containerStyle:null,determineBeforeNextRender:!0}),e.addHook("beforeRender",i.determineIfChanged),e.addHook("afterGetColWidth",i.getColWidth),e.addHook("afterDestroy",i.afterDestroy),e.determineColumnWidth=n.determineColumnWidth):(e.removeHook("beforeRender",i.determineIfChanged),e.removeHook("afterGetColWidth",i.getColWidth),e.removeHook("afterDestroy",i.afterDestroy),delete e.determineColumnWidth,n.afterDestroy.call(e))},this.determineIfChanged=function(e){e&&i.determineColumnsWidth.apply(this,arguments)},this.determineColumnWidth=function(i){var n=this,r=n.autoColumnSizeTmp;r.container||t.call(r,n),r.container.className=n.rootElement[0].className+" htAutoColumnSize",r.table.className=n.$table[0].className;for(var s=n.countRows(),a={},l=0,c=0;s>c;c++){var u=e.helper.stringify(n.getDataAtCell(c,i)),d=u.length;d>l&&(l=d),a[d]||(a[d]={needed:o,strings:[]}),a[d].needed&&(a[d].strings.push({value:u,row:c}),a[d].needed--)}var h=n.getSettings();h.colHeaders&&n.view.appendColHeader(i,r.theadTh),n.view.wt.wtDom.empty(r.tbody);var f=n.getCellMeta(0,i),p=e.helper.getCellMethod("renderer",f.renderer);for(var m in a)if(a.hasOwnProperty(m))for(var g=0,v=a[m].strings.length;v>g;g++){var y=document.createElement("tr"),b=document.createElement("td");p(n,b,a[m].strings[g].row,i,n.colToProp(i),a[m].strings[g].value,f),c++,y.appendChild(b),r.tbody.appendChild(y)}var w=n.rootElement[0].parentNode;w.appendChild(r.container);var _=n.view.wt.wtDom.outerWidth(r.table);w.removeChild(r.container);var C=n.view.wt.wtViewport.getViewportWidth()-2;return _>C&&(_=C),_},this.determineColumnsWidth=function(){var e=this,t=this.getSettings();if(t.autoColumnSize||!t.colWidths)for(var i=this.countCols(),o=0;i>o;o++)e._getColWidthFromSettings(o)||(this.autoColumnWidths[o]=n.determineColumnWidth.call(e,o))},this.getColWidth=function(e,t){this.autoColumnWidths[e]&&this.autoColumnWidths[e]>t.width&&(t.width=this.autoColumnWidths[e])},this.afterDestroy=function(){var e=this;e.autoColumnSizeTmp&&e.autoColumnSizeTmp.container&&e.autoColumnSizeTmp.container.parentNode&&e.autoColumnSizeTmp.container.parentNode.removeChild(e.autoColumnSizeTmp.container)}}var i=new t;e.PluginHooks.add("beforeInit",i.beforeInit),e.PluginHooks.add("afterUpdateSettings",i.beforeInit)}(i);var B=new n;i.PluginHooks.add("afterInit",function(){B.init.call(this,"afterInit")}),i.PluginHooks.add("afterUpdateSettings",function(){B.init.call(this,"afterUpdateSettings")}),i.PluginHooks.add("beforeGet",B.onBeforeGetSet),i.PluginHooks.add("beforeSet",B.onBeforeGetSet),i.PluginHooks.add("afterGetColHeader",B.getColHeader),function(t){function i(e,n){function o(){var i=document.createElement("DIV");return t.Dom.addClass(i,"htContextMenu"),e.rootElement[0].appendChild(i),i}this.instance=e;var r=this;this.menu=o(),this.enabled=!0,this.bindMouseEvents(),this.instance.addHook("afterDestroy",function(){r.destroy()}),this.defaultOptions={items:{row_above:{name:"Insert row above",callback:function(e,t){this.alter("insert_row",t.start.row())},disabled:function(){return this.countRows()>=this.getSettings().maxRows}},row_below:{name:"Insert row below",callback:function(e,t){this.alter("insert_row",t.end.row()+1)},disabled:function(){return this.countRows()>=this.getSettings().maxRows}},hsep1:i.SEPARATOR,col_left:{name:"Insert column on the left",callback:function(e,t){this.alter("insert_col",t.start.col())},disabled:function(){return this.countCols()>=this.getSettings().maxCols}},col_right:{name:"Insert column on the right",callback:function(e,t){this.alter("insert_col",t.end.col()+1)},disabled:function(){return this.countCols()>=this.getSettings().maxCols}},hsep2:i.SEPARATOR,remove_row:{name:"Remove row",callback:function(e,t){var i=t.end.row()-t.start.row()+1;this.alter("remove_row",t.start.row(),i)}},remove_col:{name:"Remove column",callback:function(e,t){var i=t.end.col()-t.start.col()+1;this.alter("remove_col",t.start.col(),i)}},hsep3:i.SEPARATOR,undo:{name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}},redo:{name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}}}},this.options={},t.helper.extend(this.options,this.defaultOptions),this.updateOptions(n)}function n(){var e=this,n=e.getSettings().contextMenu,o=t.helper.isObject(n)?n:{};n?(e.contextMenu||(e.contextMenu=new i(e,o)),e.contextMenu.enable(),t.helper.isArray(n)&&e.contextMenu.filterItems(n)):e.contextMenu&&(e.contextMenu.destroy(),delete e.contextMenu)}i.prototype.bindMouseEvents=function(){function n(i){i.preventDefault(),("TD"==i.target.nodeName||t.Dom.hasClass(i.target,"current")&&t.Dom.hasClass(i.target,"wtBorder"))&&(this.show(i.pageY,i.pageX),e(document).on("mousedown.htContextMenu",t.helper.proxy(o,this)))}function o(){this.hide(),e(document).off("mousedown.htContextMenu")}function r(){var t=e(this.menu).handsontable("getInstance"),n=t.getSelected()[0],o=t.getData()[n];if(o.disabled!==!0&&("function"!=typeof o.disabled||o.disabled.call(this.instance)!==!0)&&"function"==typeof o.callback){var r=this.instance.getSelected(),s=i.utils.normalizeSelection(r);o.callback.call(this.instance,o.key,s)}}this.instance.rootElement.on("contextmenu.htContextMenu",t.helper.proxy(n,this)),e(this.menu).on("mousedown",t.helper.proxy(r,this))},i.prototype.unbindMouseEvents=function(){this.instance.rootElement.off("contextmenu.htContextMenu"),e(document).off("mousedown.htContextMenu")},i.prototype.show=function(n,o){this.menu.style.display="block";var r=this.instance;e(this.menu).handsontable({data:i.utils.convertItemsToArray(this.getItems()),colHeaders:!1,colWidths:[160],readOnly:!0,columns:[{data:"name",renderer:function(e,i,n,o,s,a){var l=e.getData()[n];/^-+$/i.test(a)?t.Dom.addClass(i,"htSeparator"):t.TextRenderer.apply(this,arguments),l.disabled===!0||"function"==typeof l.disabled&&l.disabled.call(r)===!0?t.Dom.addClass(i,"htDisabled"):t.Dom.removeClass(i,"htDisabled")}}]}),this.setMenuPosition(n,o)},i.prototype.getItems=function(){function e(e){"string"==typeof e?this.name=e:t.helper.extend(this,e)}var i={};e.prototype=this.options;for(var n in this.options.items)!this.options.items.hasOwnProperty(n)||this.itemsFilter&&-1==this.itemsFilter.indexOf(n)||(i[n]=new e(this.options.items[n]));return i},i.prototype.updateOptions=function(e){if(e=e||{},e.items)for(var i in e.items){var n={};
e.items.hasOwnProperty(i)&&this.defaultOptions.items.hasOwnProperty(i)&&t.helper.isObject(e.items[i])&&(t.helper.extend(n,this.defaultOptions.items[i]),t.helper.extend(n,e.items[i]),e.items[i]=n)}t.helper.extend(this.options,e)},i.prototype.setMenuPosition=function(e,t){var i={top:e,left:t};this.menuFitsBelowCursor(i)?this.positionMenuBelowCursor(i):this.positionMenuAboveCursor(i),this.menuFitsOnRightOfCursor(i)?this.positionMenuOnRightOfCursor(i):this.positionMenuOnLeftOfCursor(i)},i.prototype.menuFitsBelowCursor=function(e){return e.top+this.menu.offsetHeight<=document.documentElement.scrollTop+document.documentElement.clientHeight},i.prototype.menuFitsOnRightOfCursor=function(e){return e.left+this.menu.offsetWidth<=document.documentElement.scrollLeft+document.documentElement.clientWidth},i.prototype.positionMenuBelowCursor=function(e){this.menu.style.top=this.getCursorRelativeToContainer(e).top+"px"},i.prototype.positionMenuAboveCursor=function(e){this.menu.style.top=this.getCursorRelativeToContainer(e).top-this.menu.offsetHeight+"px"},i.prototype.positionMenuOnRightOfCursor=function(e){this.menu.style.left=this.getCursorRelativeToContainer(e).left+"px"},i.prototype.positionMenuOnLeftOfCursor=function(e){this.menu.style.left=this.getCursorRelativeToContainer(e).left-this.menu.offsetWidth+"px"},i.prototype.getCursorRelativeToContainer=function(e){var i=t.Dom.offset(this.instance.rootElement[0]);return{left:e.left-i.left,top:e.top-i.top}},i.utils={},i.utils.convertItemsToArray=function(e){var t,i=[];for(var n in e)if(e.hasOwnProperty(n)){if("string"==typeof e[n])t={name:e[t]};else{if(e[n].visible===!1)continue;t=e[n]}t.key=n,i.push(t)}return i},i.utils.normalizeSelection=function(e){var i={start:new t.SelectionPoint,end:new t.SelectionPoint};return i.start.row(Math.min(e[0],e[2])),i.start.col(Math.min(e[1],e[3])),i.end.row(Math.max(e[0],e[2])),i.end.col(Math.max(e[1],e[3])),i},i.prototype.hide=function(){this.menu.style.display="none",e(this.menu).handsontable("destroy")},i.prototype.enable=function(){this.enabled||(this.enabled=!0,this.bindMouseEvents())},i.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.hide(),this.unbindMouseEvents())},i.prototype.destroy=function(){this.hide(),this.unbindMouseEvents(),this.menu.parentNode&&this.menu.parentNode.removeChild(this.menu)},i.prototype.filterItems=function(e){this.itemsFilter=e},i.SEPARATOR="---------",t.PluginHooks.add("afterInit",n),t.PluginHooks.add("afterUpdateSettings",n),t.ContextMenu=i}(i),i.PluginHooks.add("beforeGetCellMeta",function(e,t,n){var o,r,s,a=this.getSettings(),l=this.getData();if(n.isWritable=!n.readOnly,a.autoComplete)for(o=0,r=a.autoComplete.length;r>o;o++)if(a.autoComplete[o].match(e,t,l)){"undefined"==typeof n.type?n.type=i.AutocompleteCell:("undefined"==typeof n.type.renderer&&(n.type.renderer=i.AutocompleteCell.renderer),"undefined"==typeof n.type.editor&&(n.type.editor=i.AutocompleteCell.editor));for(s in a.autoComplete[o])a.autoComplete[o].hasOwnProperty(s)&&"match"!==s&&"undefined"==typeof n[o]&&(n[s]="source"===s?a.autoComplete[o][s](e,t):a.autoComplete[o][s]);break}});var z=new o;i.PluginHooks.add("beforeInit",z.beforeInit),i.PluginHooks.add("afterInit",function(){z.init.call(this,"afterInit")}),i.PluginHooks.add("afterUpdateSettings",function(){z.init.call(this,"afterUpdateSettings")}),i.PluginHooks.add("afterGetColHeader",z.getColHeader),i.PluginHooks.add("modifyCol",z.modifyCol);var L=new r;i.PluginHooks.add("beforeInit",L.beforeInit),i.PluginHooks.add("afterInit",function(){L.init.call(this,"afterInit")}),i.PluginHooks.add("afterUpdateSettings",function(){L.init.call(this,"afterUpdateSettings")}),i.PluginHooks.add("afterGetColWidth",L.getColWidth),function(){function e(){var e=this,i=e.getSettings().observeChanges;!e.observer&&i?(t.call(e),s.call(e)):i||o.call(e)}function t(){var e=this;e.observeChangesActive=!0,e.pauseObservingChanges=function(){e.observeChangesActive=!1},e.resumeObservingChanges=function(){e.observeChangesActive=!0},e.observer=U.observe(e.getData(),function(t){e.observeChangesActive&&(n.call(e,t),e.render()),e.runHooks("afterChangesObserved")})}function n(e){function t(e){var t;return t=n(e),t=i(t)}function i(e){var t=[];return e.filter(function(e){var i=o(e.path);if(-1!=["add","remove"].indexOf(e.op)&&!isNaN(i.col)){if(-1!=t.indexOf(i.col))return!1;t.push(i.col)}return!0})}function n(e){return e.filter(function(e){return!/[/]length/gi.test(e.path)})}function o(e){var t=e.match(/^\/(\d+)\/?(.*)?$/);return{row:parseInt(t[1],10),col:/^\d*$/.test(t[2])?parseInt(t[2],10):t[2]}}for(var r=this,s=t(e),a=0,l=s.length;l>a;a++){var c=s[a],u=o(c.path);switch(c.op){case"add":isNaN(u.col)?r.runHooks("afterCreateRow",u.row):r.runHooks("afterCreateCol",u.col);break;case"remove":isNaN(u.col)?r.runHooks("afterRemoveRow",u.row,1):r.runHooks("afterRemoveCol",u.col,1);break;case"replace":r.runHooks("afterChange",[u.row,u.col,null,c.value],"external")}}}function o(){var e=this;e.observer&&(r.call(e),a.call(e))}function r(){var e=this;U.unobserve(e.getData(),e.observer),delete e.observeChangesActive,delete e.pauseObservingChanges,delete e.resumeObservingChanges}function s(){var e=this;e.addHook("afterDestroy",o),e.addHook("afterCreateRow",l),e.addHook("afterRemoveRow",l),e.addHook("afterCreateCol",l),e.addHook("afterRemoveCol",l),e.addHook("afterChange",function(e,t){"loadData"!=t&&l.call(this)})}function a(){var e=this;e.removeHook("afterDestroy",o),e.removeHook("afterCreateRow",l),e.removeHook("afterRemoveRow",l),e.removeHook("afterCreateCol",l),e.removeHook("afterRemoveCol",l),e.removeHook("afterChange",l)}function l(){var e=this;e.pauseObservingChanges(),e.addHookOnce("afterChangesObserved",function(){e.resumeObservingChanges()})}i.PluginHooks.add("afterLoadData",e),i.PluginHooks.add("afterUpdateSettings",e)}(),function(e){function t(){function t(){var e=this;for(var t in r)r.hasOwnProperty(t)&&!n.call(e,t)&&e.PluginHooks.add(t,r[t])}function i(){var e=this;for(var t in r)r.hasOwnProperty(t)&&n.call(e,t)&&e.PluginHooks.remove(t,r[t])}function n(e){var t=this;return t.PluginHooks.hooks.hasOwnProperty(e)}var o=this;this.init=function(){var n=this,r=n.getSettings().persistentState;return o.enabled=!!r,o.enabled?(n.storage||(n.storage=new e(n.rootElement[0].id)),n.resetState=o.resetValue,void t.call(n)):void i.call(n)},this.saveValue=function(e,t){var i=this;i.storage.saveValue(e,t)},this.loadValue=function(e,t){var i=this;t.value=i.storage.loadValue(e)},this.resetValue=function(e){var t=this;"undefined"!=typeof e?t.storage.reset(e):t.storage.resetAll()};var r={persistentStateSave:o.saveValue,persistentStateLoad:o.loadValue,persistentStateReset:o.resetValue}}var n=new t;i.PluginHooks.add("beforeInit",n.init),i.PluginHooks.add("afterUpdateSettings",n.init)}(s),function(t){t.UndoRedo=function(e){var i=this;this.instance=e,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,e.addHook("afterChange",function(e){if(e){var n=new t.UndoRedo.ChangeAction(e);i.done(n)}}),e.addHook("afterCreateRow",function(e,n){var o=new t.UndoRedo.CreateRowAction(e,n);i.done(o)}),e.addHook("beforeRemoveRow",function(e,n){var o=i.instance.getData();e=(o.length+e)%o.length;var r=o.slice(e,e+n),s=new t.UndoRedo.RemoveRowAction(e,r);i.done(s)}),e.addHook("afterCreateCol",function(e,n){var o=new t.UndoRedo.CreateColumnAction(e,n);i.done(o)}),e.addHook("beforeRemoveCol",function(n,o){var r=i.instance.getData();n=(i.instance.countCols()+n)%i.instance.countCols();for(var s=[],a=0,l=r.length;l>a;a++)s[a]=r[a].slice(n,n+o);var c;t.helper.isArray(e.getSettings().colHeaders)&&(c=e.getSettings().colHeaders.slice(n,n+s.length));var u=new t.UndoRedo.RemoveColumnAction(n,s,c);i.done(u)})},t.UndoRedo.prototype.done=function(e){this.ignoreNewActions||(this.doneActions.push(e),this.undoneActions.length=0)},t.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var e=this.doneActions.pop();this.ignoreNewActions=!0,e.undo(this.instance),this.ignoreNewActions=!1,this.undoneActions.push(e)}},t.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var e=this.undoneActions.pop();this.ignoreNewActions=!0,e.redo(this.instance),this.ignoreNewActions=!0,this.doneActions.push(e)}},t.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length>0},t.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},t.UndoRedo.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},t.UndoRedo.Action=function(){},t.UndoRedo.Action.prototype.undo=function(){},t.UndoRedo.Action.prototype.redo=function(){},t.UndoRedo.ChangeAction=function(e){this.changes=e},t.helper.inherit(t.UndoRedo.ChangeAction,t.UndoRedo.Action),t.UndoRedo.ChangeAction.prototype.undo=function(t){for(var i=e.extend(!0,[],this.changes),n=0,o=i.length;o>n;n++)i[n].splice(3,1);t.setDataAtRowProp(i,null,null,"undo")},t.UndoRedo.ChangeAction.prototype.redo=function(t){for(var i=e.extend(!0,[],this.changes),n=0,o=i.length;o>n;n++)i[n].splice(2,1);t.setDataAtRowProp(i,null,null,"redo")},t.UndoRedo.CreateRowAction=function(e,t){this.index=e,this.amount=t},t.helper.inherit(t.UndoRedo.CreateRowAction,t.UndoRedo.Action),t.UndoRedo.CreateRowAction.prototype.undo=function(e){e.alter("remove_row",this.index,this.amount)},t.UndoRedo.CreateRowAction.prototype.redo=function(e){e.alter("insert_row",this.index+1,this.amount)},t.UndoRedo.RemoveRowAction=function(e,t){this.index=e,this.data=t},t.helper.inherit(t.UndoRedo.RemoveRowAction,t.UndoRedo.Action),t.UndoRedo.RemoveRowAction.prototype.undo=function(e){var t=[this.index,0];Array.prototype.push.apply(t,this.data),Array.prototype.splice.apply(e.getData(),t),e.render()},t.UndoRedo.RemoveRowAction.prototype.redo=function(e){e.alter("remove_row",this.index,this.data.length)},t.UndoRedo.CreateColumnAction=function(e,t){this.index=e,this.amount=t},t.helper.inherit(t.UndoRedo.CreateColumnAction,t.UndoRedo.Action),t.UndoRedo.CreateColumnAction.prototype.undo=function(e){e.alter("remove_col",this.index,this.amount)},t.UndoRedo.CreateColumnAction.prototype.redo=function(e){e.alter("insert_col",this.index+1,this.amount)},t.UndoRedo.RemoveColumnAction=function(e,t,i){this.index=e,this.data=t,this.amount=this.data[0].length,this.headers=i},t.helper.inherit(t.UndoRedo.RemoveColumnAction,t.UndoRedo.Action),t.UndoRedo.RemoveColumnAction.prototype.undo=function(e){for(var t,i,n=0,o=e.getData().length;o>n;n++)t=e.getDataAtRow(n),i=[this.index,0],Array.prototype.push.apply(i,this.data[n]),Array.prototype.splice.apply(t,i);"undefined"!=typeof this.headers&&(i=[this.index,0],Array.prototype.push.apply(i,this.headers),Array.prototype.splice.apply(e.getSettings().colHeaders,i)),e.render()},t.UndoRedo.RemoveColumnAction.prototype.redo=function(e){e.alter("remove_col",this.index,this.amount)}}(i),function(e){function t(){var t=this,s="undefined"==typeof t.getSettings().undo||t.getSettings().undo;s?t.undoRedo||(t.undoRedo=new e.UndoRedo(t),o(t),t.addHook("beforeKeyDown",i),t.addHook("afterChange",n)):t.undoRedo&&(delete t.undoRedo,r(t),t.removeHook("beforeKeyDown",i),t.removeHook("afterChange",n))}function i(e){var t=this,i=(e.ctrlKey||e.metaKey)&&!e.altKey;i&&(89===e.keyCode||e.shiftKey&&90===e.keyCode?(t.undoRedo.redo(),e.stopImmediatePropagation()):90===e.keyCode&&(t.undoRedo.undo(),e.stopImmediatePropagation()))}function n(e,t){var i=this;return"loadData"==t?i.undoRedo.clear():void 0}function o(e){e.undo=function(){return e.undoRedo.undo()},e.redo=function(){return e.undoRedo.redo()},e.isUndoAvailable=function(){return e.undoRedo.isUndoAvailable()},e.isRedoAvailable=function(){return e.undoRedo.isRedoAvailable()},e.clearUndo=function(){return e.undoRedo.clear()}}function r(e){delete e.undo,delete e.redo,delete e.isUndoAvailable,delete e.isRedoAvailable,delete e.clearUndo}e.PluginHooks.add("afterInit",t),e.PluginHooks.add("afterUpdateSettings",t)}(i),a.prototype.setBoundaries=function(e){this.boundaries=e},a.prototype.setCallback=function(e){this.callback=e},a.prototype.check=function(e,t){var i=0,n=0;t<this.boundaries.top?n=t-this.boundaries.top:t>this.boundaries.bottom&&(n=t-this.boundaries.bottom),e<this.boundaries.left?i=e-this.boundaries.left:e>this.boundaries.right&&(i=e-this.boundaries.right),this.callback(i,n)};var W,V=!1;if("undefined"!=typeof i){var j=function(e){var i=e.view.wt.wtScrollbars.vertical.scrollHandler;W=new a,i!==t&&(W.setBoundaries(i?i.getBoundingClientRect():e.$table[0].getBoundingClientRect()),W.setCallback(function(t,n){0>t?i?i.scrollLeft-=50:e.view.wt.scrollHorizontal(-1).draw():t>0&&(i?i.scrollLeft+=50:e.view.wt.scrollHorizontal(1).draw()),0>n?i?i.scrollTop-=20:e.view.wt.scrollVertical(-1).draw():n>0&&(i?i.scrollTop+=20:e.view.wt.scrollVertical(1).draw())}))};i.PluginHooks.add("afterInit",function(){e(document).on("mouseup."+this.guid,function(){V=!1}),e(document).on("mousemove."+this.guid,function(e){V&&W.check(e.clientX,e.clientY)})}),i.PluginHooks.add("destroy",function(){e(document).off("."+this.guid)}),i.PluginHooks.add("afterOnCellMouseDown",function(){V=!0,j(this)}),i.PluginHooks.add("afterOnCellCornerMouseDown",function(){V=!0,j(this)})}!function(e){function t(n){return this.filter(t.resizableFilterSelector).each(function(){new i(e(this),n)}),this}function i(i,n){this.clones||(this.config=e.extend({},t.defaults,n),this.el=i,this.nodeName=i[0].nodeName.toLowerCase(),this.previousScrollTop=null,"original"===n.maxWidth&&(n.maxWidth=i.width()),"original"===n.minWidth&&(n.minWidth=i.width()),"original"===n.maxHeight&&(n.maxHeight=i.height()),"original"===n.minHeight&&(n.minHeight=i.height()),"textarea"===this.nodeName&&i.css({resize:"none",overflowY:"none"}),i.data("AutoResizer",this),this.createClone(),this.injectClone(),this.bind())}t.defaults={onResize:function(){},animate:{duration:200,complete:function(){}},extraSpace:50,minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:500},t.cloneCSSProperties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","padding"],t.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden",border:"1px solid black",padding:"0.49em"},t.resizableFilterSelector="textarea,input:not(input[type]),input[type=text],input[type=password]",t.AutoResizer=i,e.fn.autoResize=t,i.prototype={bind:function(){var t=e.proxy(function(){return this.check(),!0},this);this.unbind(),this.el.bind("keyup.autoResize",t).bind("change.autoResize",t),this.check(null,!0)},unbind:function(){this.el.unbind(".autoResize")},createClone:function(){var i=this.el,n=this,o=this.config;this.clones=e(),("original"!==o.minHeight||"original"!==o.maxHeight)&&(this.hClone=i.clone().height("auto"),this.clones=this.clones.add(this.hClone)),("original"!==o.minWidth||"original"!==o.maxWidth)&&(this.wClone=e("<div/>").width("auto").css({whiteSpace:"nowrap","float":"left"}),this.clones=this.clones.add(this.wClone)),e.each(t.cloneCSSProperties,function(e,t){n.clones.css(t,i.css(t))}),this.clones.removeAttr("name").removeAttr("id").attr("tabIndex",-1).css(t.cloneCSSValues).css("overflowY","scroll")},check:function(e,t){var i=this.config,n=this.wClone,o=this.hClone,r=this.el,s=r.val();if(n){n.text(s);var a=n.outerWidth(),l=a+i.extraSpace>=i.minWidth?a+i.extraSpace:i.minWidth,c=r.width();l=Math.min(l,i.maxWidth),(c>l&&l>=i.minWidth||l>=i.minWidth&&l<=i.maxWidth)&&(i.onResize.call(r),r.scrollLeft(0),i.animate&&!t?r.stop(1,1).animate({width:l},i.animate):r.width(l))}if(o){l&&o.width(l),o.height(0).val(s).scrollTop(1e4);var u=o[0].scrollTop+i.extraSpace;if(this.previousScrollTop===u)return;this.previousScrollTop=u,u>=i.maxHeight&&(u=i.maxHeight),u<i.minHeight&&(u=i.minHeight),u==i.maxHeight&&l==i.maxWidth?r.css("overflowY","scroll"):r.css("overflowY","hidden"),i.onResize.call(r),i.animate&&!t?r.stop(1,1).animate({height:u},i.animate):r.height(u)}},destroy:function(){this.unbind(),this.el.removeData("AutoResizer"),this.clones.remove(),delete this.el,delete this.hClone,delete this.wClone,delete this.clones},injectClone:function(){(t.cloneContainer||(t.cloneContainer=e("<arclones/>").appendTo("body"))).empty().append(this.clones)}}}(jQuery),/**
 * SheetClip - Spreadsheet Clipboard Parser
 * version 0.2
 *
 * This tiny library transforms JavaScript arrays to strings that are pasteable by LibreOffice, OpenOffice,
 * Google Docs and Microsoft Excel.
 *
 * Copyright 2012, Marcin Warpechowski
 * Licensed under the MIT license.
 * http://github.com/warpech/sheetclip/
 */
function(e){function t(e){return e.split('"').length-1}e.SheetClip={parse:function(e){var i,n,o,r,s,a,l,c=[],u=0;for(o=e.split("\n"),o.length>1&&""===o[o.length-1]&&o.pop(),i=0,n=o.length;n>i;i+=1){for(o[i]=o[i].split("	"),r=0,s=o[i].length;s>r;r+=1)c[u]||(c[u]=[]),a&&0===r?(l=c[u].length-1,c[u][l]=c[u][l]+"\n"+o[i][0],a&&1&t(o[i][0])&&(a=!1,c[u][l]=c[u][l].substring(0,c[u][l].length-1).replace(/""/g,'"'))):r===s-1&&0===o[i][r].indexOf('"')?(c[u].push(o[i][r].substring(1).replace(/""/g,'"')),a=!0):(c[u].push(o[i][r].replace(/""/g,'"')),a=!1);a||(u+=1)}return c},stringify:function(e){var t,i,n,o,r,s="";for(t=0,i=e.length;i>t;t+=1){for(n=0,o=e[t].length;o>n;n+=1)n>0&&(s+="	"),r=e[t][n],s+="string"==typeof r?r.indexOf("\n")>-1?'"'+r.replace(/"/g,'""')+'"':r:null===r||void 0===r?"":r;s+="\n"}return s}}}(t);var q=function(){var e;return{getInstance:function(){return e||(e=new l),e}}}();l.prototype.selectNodeText=function(e){e.select()},l.prototype.getSelectionText=function(){var e="";return t.getSelection?e=t.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},l.prototype.copyable=function(e){if("string"!=typeof e&&void 0===e.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=e},l.prototype.onCut=function(e){this.cutCallbacks.push(e)},l.prototype.onPaste=function(e){this.pasteCallbacks.push(e)},l.prototype.removeCallback=function(e){var t,i;for(t=0,i=this.copyCallbacks.length;i>t;t++)if(this.copyCallbacks[t]===e)return this.copyCallbacks.splice(t,1),!0;for(t=0,i=this.cutCallbacks.length;i>t;t++)if(this.cutCallbacks[t]===e)return this.cutCallbacks.splice(t,1),!0;for(t=0,i=this.pasteCallbacks.length;i>t;t++)if(this.pasteCallbacks[t]===e)return this.pasteCallbacks.splice(t,1),!0;return!1},l.prototype.triggerCut=function(e){var t=this;t.cutCallbacks&&setTimeout(function(){for(var i=0,n=t.cutCallbacks.length;n>i;i++)t.cutCallbacks[i](e)},50)},l.prototype.triggerPaste=function(e,t){var i=this;i.pasteCallbacks&&setTimeout(function(){for(var n=(t||i.elTextarea.value).replace(/\n$/,""),o=0,r=i.pasteCallbacks.length;r>o;o++)i.pasteCallbacks[o](n,e)},50)},l.prototype._bindEvent=function(){return t.jQuery?function(t,i,n){e(t).on(i+".copypaste",n)}:function(e,t,i){e.addEventListener(t,i,!1)}}();var U;!function(e){function i(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function n(e,t){var o;for(var r in e)if(e.hasOwnProperty(r)){if(e[r]===t)return i(r)+"/";if("object"==typeof e[r]&&(o=n(e[r],t),""!=o))return i(r)+"/"+o}return""}function o(e,t){if(e===t)return"/";var i=n(e,t);if(""===i)throw new Error("Object not found in root");return"/"+i}function r(e){for(var t=0,i=y.length;i>t;t++)if(y[t].obj===e)return y[t]}function s(e,t){for(var i=0,n=e.observers.length;n>i;i++)if(e.observers[i].callback===t)return e.observers[i].observer}function a(e,t){for(var i=0,n=e.observers.length;n>i;i++)if(e.observers[i].observer===t)return void e.observers.splice(i,1)}function l(e,t){h(t),Object.observe?d(t,e):clearTimeout(t.next);var i=r(e);a(i,t)}function c(e,i){var n,a=[],l=e,c=r(e);if(c?n=s(c,i):(c=new b(e),y.push(c)),n)return n;if(Object.observe)n=function(t){d(n,e),u(n,e);for(var r=0,s=t.length;s>r;)"length"===t[r].name&&C(t[r].object)||"__Jasmine_been_here_before__"===t[r].name||v[t[r].type].call(t[r],a,o(l,t[r].object)),r++;a&&i&&i(a),n.patches=a,a=[]};else if(n={},c.value=JSON.parse(JSON.stringify(e)),i){n.callback=i,n.next=null;var f=this.intervals||[100,1e3,1e4,6e4],p=0,m=function(){h(n)},g=function(){clearTimeout(n.next),n.next=setTimeout(function(){m(),p=0,n.next=setTimeout(_,f[p++])},0)},_=function(){m(),p==f.length&&(p=f.length-1),n.next=setTimeout(_,f[p++])};"undefined"!=typeof t&&(t.addEventListener?(t.addEventListener("mousedown",g),t.addEventListener("mouseup",g),t.addEventListener("keydown",g)):(t.attachEvent("onmousedown",g),t.attachEvent("onmouseup",g),t.attachEvent("onkeydown",g))),n.next=setTimeout(_,f[p++])}return n.patches=a,n.object=e,c.observers.push(new w(i,n)),u(n,e)}function u(e,t){if(Object.observe){Object.observe(t,e);for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n&&"object"==typeof n&&u(e,n)}}return e}function d(e,t){if(Object.observe){Object.unobserve(t,e);for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n&&"object"==typeof n&&d(e,n)}}return e}function h(e){if(Object.observe)Object.deliverChangeRecords(e);else{for(var t,i=0,n=y.length;n>i;i++)if(y[i].obj===e.object){t=y[i];break}f(t.value,e.object,e.patches,"")}var o=e.patches;return o.length>0&&(e.patches=[],e.callback&&e.callback(o)),o}function f(e,t,n,o){for(var r=_(t),s=_(e),a=!1,l=!1,c=s.length-1;c>=0;c--){var u=s[c],d=e[u];if(t.hasOwnProperty(u)){var h=t[u];d instanceof Object?f(d,h,n,o+"/"+i(u)):d!=h&&(a=!0,n.push({op:"replace",path:o+"/"+i(u),value:h}),e[u]=h)}else n.push({op:"remove",path:o+"/"+i(u)}),delete e[u],l=!0}if(l||r.length!=s.length)for(var c=0;c<r.length;c++){var u=r[c];e.hasOwnProperty(u)||(n.push({op:"add",path:o+"/"+i(u),value:t[u]}),e[u]=JSON.parse(JSON.stringify(t[u])))}}function p(e,t){for(var i,n=!1,o=0,r=t.length;r>o;){i=t[o];for(var s=i.path.split("/"),a=e,l=1,c=s.length;;)if(C(a)){var u=parseInt(s[l],10);if(l++,l>=c){n=g[i.op].call(i,a,u,e);break}a=a[u]}else{var d=s[l];if(-1!=d.indexOf("~")&&(d=d.replace(/~1/g,"/").replace(/~0/g,"~")),l++,l>=c){n=m[i.op].call(i,a,d,e);break}a=a[d]}o++}return n}var m={add:function(e,t){return e[t]=this.value,!0},remove:function(e,t){return delete e[t],!0},replace:function(e,t){return e[t]=this.value,!0},move:function(e,t,i){var n={op:"_get",path:this.from};return p(i,[n]),p(i,[{op:"remove",path:this.from}]),p(i,[{op:"add",path:this.path,value:n.value}]),!0},copy:function(e,t,i){var n={op:"_get",path:this.from};return p(i,[n]),p(i,[{op:"add",path:this.path,value:n.value}]),!0},test:function(e,t){return JSON.stringify(e[t])===JSON.stringify(this.value)},_get:function(e,t){this.value=e[t]}},g={add:function(e,t){return e.splice(t,0,this.value),!0},remove:function(e,t){return e.splice(t,1),!0},replace:function(e,t){return e[t]=this.value,!0},move:m.move,copy:m.copy,test:m.test,_get:m._get},v={"new":function(e,t){var n={op:"add",path:t+i(this.name),value:this.object[this.name]};e.push(n)},deleted:function(e,t){var n={op:"remove",path:t+i(this.name)};e.push(n)},updated:function(e,t){var n={op:"replace",path:t+i(this.name),value:this.object[this.name]};e.push(n)}},y=[];e.intervals;var b=function(){function e(e){this.observers=[],this.obj=e}return e}(),w=function(){function e(e,t){this.callback=e,this.observer=t}return e}();e.unobserve=l,e.observe=c,e.generate=h;var _;_=Object.keys?Object.keys:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t};var C;C=Array.isArray?Array.isArray:function(e){return e.push&&"number"==typeof e.length},e.apply=p}(U||(U={})),"undefined"!=typeof exports&&(exports.apply=U.apply,exports.observe=U.observe,exports.unobserve=U.unobserve,exports.generate=U.generate),c.prototype.appear=function(e){var t,i,n,o,r,s,a,l,c,u,d,h;if(!this.disabled){var f,p,m,g,v,y,b,w=this.instance,_=!1,C=!1,x=!1,T=!1;for(w.wtTable.isRowInViewport(e[0])||(_=!0),w.wtTable.isRowInViewport(e[2])||(x=!0),y=w.wtTable.rowStrategy.countVisible(),v=0;y>v;v++)if(b=w.wtTable.rowFilter.visibleToSource(v),b>=e[0]&&b<=e[2]){f=b;break}for(v=y-1;v>=0;v--)if(b=w.wtTable.rowFilter.visibleToSource(v),b>=e[0]&&b<=e[2]){m=b;break}if(_&&x)C=!0,T=!0;else{for(w.wtTable.isColumnInViewport(e[1])||(C=!0),w.wtTable.isColumnInViewport(e[3])||(T=!0),y=w.wtTable.columnStrategy.countVisible(),v=0;y>v;v++)if(b=w.wtTable.columnFilter.visibleToSource(v),b>=e[1]&&b<=e[3]){p=b;break}for(v=y-1;v>=0;v--)if(b=w.wtTable.columnFilter.visibleToSource(v),b>=e[1]&&b<=e[3]){g=b;break}}if(void 0===f||void 0===p)return void this.disappear();t=f!==m||p!==g,i=w.wtTable.getCell([f,p]),n=t?w.wtTable.getCell([m,g]):i,o=this.wtDom.offset(i),r=t?this.wtDom.offset(n):o,s=this.wtDom.offset(w.wtTable.TABLE),l=o.top,d=r.top+this.wtDom.outerHeight(n)-l,u=o.left,h=r.left+this.wtDom.outerWidth(n)-u,a=l-s.top-1,c=u-s.left-1;var S=this.wtDom.getComputedStyle(i);parseInt(S.borderTopWidth,10)>0&&(a+=1,d-=1),parseInt(S.borderLeftWidth,10)>0&&(c+=1,h-=1),_?this.topStyle.display="none":(this.topStyle.top=a+"px",this.topStyle.left=c+"px",this.topStyle.width=h+"px",this.topStyle.display="block"),C?this.leftStyle.display="none":(this.leftStyle.top=a+"px",this.leftStyle.left=c+"px",this.leftStyle.height=d+"px",this.leftStyle.display="block");var k=Math.floor(this.settings.border.width/2);x?this.bottomStyle.display="none":(this.bottomStyle.top=a+d-k+"px",this.bottomStyle.left=c+"px",this.bottomStyle.width=h+"px",this.bottomStyle.display="block"),T?this.rightStyle.display="none":(this.rightStyle.top=a+"px",this.rightStyle.left=c+h-k+"px",this.rightStyle.height=d+1+"px",this.rightStyle.display="block"),x||T||!this.hasSetting(this.settings.border.cornerVisible)?this.cornerStyle.display="none":(this.cornerStyle.top=a+d-4+"px",this.cornerStyle.left=c+h-4+"px",this.cornerStyle.display="block")}},c.prototype.disappear=function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none"},c.prototype.hasSetting=function(e){return"function"==typeof e?e():!!e},u.prototype.source=function(e){return e},u.prototype.offsetted=function(e){return e+this.offset},u.prototype.unOffsetted=function(e){return e-this.offset},u.prototype.fixed=function(e){return e<this.fixedCount?e-this.offset:e},u.prototype.unFixed=function(e){return e<this.fixedCount?e+this.offset:e},u.prototype.visibleToSource=function(e){return this.source(this.offsetted(this.fixed(e)))},u.prototype.sourceToVisible=function(e){return this.source(this.unOffsetted(this.unFixed(e)))},d.prototype.getSize=function(e){return this.cellSizes[e]},d.prototype.getContainerSize=function(e){return"function"==typeof this.containerSizeFn?this.containerSizeFn(e):this.containerSizeFn},d.prototype.countVisible=function(){return this.cellCount},d.prototype.isLastIncomplete=function(){return this.remainingSize>=0},h.prototype.add=function(e,t,i){this.cache[e]||(this.cache[e]=[]),this.cache[e][t]||(this.cache[e][t]=[]),this.cache[e][t][i]=!0},h.prototype.test=function(e,t,i){return this.cache[e]&&this.cache[e][t]&&this.cache[e][t][i]},f.prototype=new u,f.prototype.readSettings=function(e){this.offset=e.wtSettings.settings.offsetColumn,this.total=e.getSetting("totalColumns"),this.fixedCount=e.getSetting("fixedColumnsLeft"),this.countTH=e.getSetting("rowHeaders").length},f.prototype.offsettedTH=function(e){return e-this.countTH},f.prototype.unOffsettedTH=function(e){return e+this.countTH},f.prototype.visibleRowHeadedColumnToSourceColumn=function(e){return this.visibleToSource(this.offsettedTH(e))},f.prototype.sourceColumnToVisibleRowHeadedColumn=function(e){return this.unOffsettedTH(this.sourceToVisible(e))},p.prototype=new d,p.prototype.getSize=function(e){return this.cellSizes[e]+(this.cellStretch[e]||0)},p.prototype.stretch=function(){var e=this.getContainerSize(this.cellSizesSum),t=0;if(this.remainingSize=this.cellSizesSum-e,this.cellStretch.length=0,"all"===this.strategy){if(this.remainingSize<0){for(var i,n=e/this.cellSizesSum;t<this.cellCount-1;)i=Math.floor(n*this.cellSizes[t]),this.remainingSize+=i-this.cellSizes[t],this.cellStretch[t]=i-this.cellSizes[t],t++;this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0}}else"last"===this.strategy&&this.remainingSize<0&&(this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0)},m.prototype.draw=function(e){return this.drawInterrupted=!1,e||this.wtDom.isVisible(this.wtTable.TABLE)?(this.getSetting("beforeDraw",!e),e=e&&this.getSetting("offsetRow")===this.lastOffsetRow&&this.getSetting("offsetColumn")===this.lastOffsetColumn,this.drawn&&(this.scrollVertical(0),this.scrollHorizontal(0)),this.lastOffsetRow=this.getSetting("offsetRow"),this.lastOffsetColumn=this.getSetting("offsetColumn"),this.wtTable.draw(e),this.getSetting("onDraw",!e),this):void(this.drawInterrupted=!0)},m.prototype.update=function(e,t){return this.wtSettings.update(e,t)},m.prototype.scrollVertical=function(e){return this.wtScroll.scrollVertical(e)},m.prototype.scrollHorizontal=function(e){return this.wtScroll.scrollHorizontal(e)},m.prototype.scrollViewport=function(e){return this.wtScroll.scrollViewport(e),this},m.prototype.getViewport=function(){return[this.wtTable.rowFilter.visibleToSource(0),this.wtTable.columnFilter.visibleToSource(0),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]},m.prototype.getSetting=function(e,t,i,n){return this.wtSettings.getSetting(e,t,i,n)},m.prototype.hasSetting=function(e){return this.wtSettings.has(e)},m.prototype.destroy=function(){e(document.body).off("."+this.guid),this.wtScrollbars.destroy(),clearTimeout(this.wheelTimeout),clearTimeout(this.dblClickTimeout)},g.prototype.closest=function(e,t,i){for(;null!=e&&e!==i;){if(1===e.nodeType&&t.indexOf(e.nodeName)>-1)return e;e=e.parentNode}return null},g.prototype.isChildOf=function(e,t){for(var i=e.parentNode;null!=i;){if(i==t)return!0;i=i.parentNode}return!1},g.prototype.index=function(e){for(var t=0;e=e.previousSibling;)++t;return t},document.documentElement.classList?(g.prototype.hasClass=function(e,t){return e.classList.contains(t)},g.prototype.addClass=function(e,t){e.classList.add(t)},g.prototype.removeClass=function(e,t){e.classList.remove(t)}):(g.prototype.hasClass=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},g.prototype.addClass=function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},g.prototype.removeClass=function(e,t){if(this.hasClass(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ").trim()}}),g.prototype.removeTextNodes=function(e,t){if(3===e.nodeType)t.removeChild(e);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(e.nodeName)>-1)for(var i=e.childNodes,n=i.length-1;n>=0;n--)this.removeTextNodes(i[n],e)},g.prototype.empty=function(e){for(var t;t=e.lastChild;)e.removeChild(t)},g.prototype.HTML_CHARACTERS=/(<(.*)>|&(.*);)/,g.prototype.fastInnerHTML=function(e,t){this.HTML_CHARACTERS.test(t)?e.innerHTML=t:this.fastInnerText(e,t)},g.prototype.fastInnerText=document.createTextNode("test").textContent?function(e,t){var i=e.firstChild;i&&3===i.nodeType&&null===i.nextSibling?i.textContent=t:(this.empty(e),e.appendChild(document.createTextNode(t)))}:function(e,t){var i=e.firstChild;i&&3===i.nodeType&&null===i.nextSibling?i.data=t:(this.empty(e),e.appendChild(document.createTextNode(t)))},g.prototype.isVisible=function(e){for(var t=e;t!==document.documentElement;){if(null===t)return!1;if(11===t.nodeType)return!0;if("none"===t.style.display)return!1;t=t.parentNode}return!0},g.prototype.offset=function(e){if(this.hasCaptionProblem()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName){var i=e.getBoundingClientRect();return{top:i.top+(t.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),left:i.left+(t.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)}}for(var n=e.offsetLeft,o=e.offsetTop,r=e;(e=e.offsetParent)&&e!==document.body;)n+=e.offsetLeft,o+=e.offsetTop,r=e;return r&&"fixed"===r.style.position&&(n+=t.pageXOffset||document.documentElement.scrollLeft,o+=t.pageYOffset||document.documentElement.scrollTop),{left:n,top:o}},g.prototype.getComputedStyle=function(e){return e.currentStyle||document.defaultView.getComputedStyle(e)},g.prototype.outerWidth=function(e){return e.offsetWidth},g.prototype.outerHeight=function(e){return this.hasCaptionProblem()&&e.firstChild&&"CAPTION"===e.firstChild.nodeName?e.offsetHeight+e.firstChild.offsetHeight:e.offsetHeight},function(){function e(){var e=document.createElement("TABLE");e.style.borderSpacing=0,e.style.borderWidth=0,e.style.padding=0;var i=document.createElement("TBODY");e.appendChild(i),i.appendChild(document.createElement("TR")),i.firstChild.appendChild(document.createElement("TD")),i.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var n=document.createElement("CAPTION");n.innerHTML="c<br>c<br>c<br>c",n.style.padding=0,n.style.margin=0,e.insertBefore(n,i),document.body.appendChild(e),t=e.offsetHeight<2*e.lastChild.offsetHeight,document.body.removeChild(e)}var t;g.prototype.hasCaptionProblem=function(){return void 0===t&&e(),t},g.prototype.getCaretPosition=function(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var i=e.createTextRange(),n=i.duplicate();return i.moveToBookmark(t.getBookmark()),n.setEndPoint("EndToStart",i),n.text.length}return 0},g.prototype.setCaretPosition=function(e,t,i){if(void 0===i&&(i=t),e.setSelectionRange)e.focus(),e.setSelectionRange(t,i);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n.select()}}}(),v.prototype.parentCell=function(e){var t={},i=this.instance.wtTable.TABLE,n=this.wtDom.closest(e,["TD","TH"],i);return n&&this.wtDom.isChildOf(n,i)?(t.coords=this.instance.wtTable.getCoords(n),t.TD=n):this.wtDom.hasClass(e,"wtBorder")&&this.wtDom.hasClass(e,"current")&&!this.wtDom.hasClass(e,"corner")&&(t.coords=this.instance.selections.current.selected[0],t.TD=this.instance.wtTable.getCell(t.coords)),t};var $;if(Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=t);t>i;i++)if(i in this&&this[i]===e)return i;return-1}),t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),t.cancelRequestAnimFrame=function(){return t.cancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),t.getComputedStyle||!function(){var e,i={getPropertyValue:function(t){return"float"==t&&(t="styleFloat"),e.currentStyle[t.toUpperCase()]||null}};t.getComputedStyle=function(t){return e=t,i}}(),!String.prototype.trim){var Y=/^\s+|\s+$/g;String.prototype.trim=function(){return this.replace(Y,"")}}_.prototype=new u,_.prototype.readSettings=function(e){this.offset=e.wtSettings.settings.offsetRow,this.total=e.getSetting("totalRows"),this.fixedCount=e.getSetting("fixedRowsTop")},C.prototype=new d,C.prototype.add=function(e,t,i){if(!this.isLastIncomplete()){var n=this.sizeAtIndex(e,t);if(void 0===n)return!1;var o=this.getContainerSize(this.cellSizesSum+n);return i?this.cellSizes.unshift(n):this.cellSizes.push(n),this.cellSizesSum+=n,this.cellCount++,this.remainingSize=this.cellSizesSum-o,i&&this.isLastIncomplete()?!1:!0}return!1},C.prototype.remove=function(){var e=this.cellSizes.pop();this.cellSizesSum-=e,this.cellCount--,this.remainingSize-=e},C.prototype.removeOutstanding=function(){for(;this.cellCount>0&&this.cellSizes[this.cellCount-1]<this.remainingSize;)this.remove()},x.prototype.scrollVertical=function(e){if(!this.instance.drawn)throw new Error("scrollVertical can only be called after table was drawn to DOM");var t,i=this.instance,n=i.getSetting("offsetRow"),o=i.getSetting("fixedRowsTop"),r=i.getSetting("totalRows"),s=i.wtViewport.getViewportHeight();return t=r>0?this.scrollLogicVertical(e,n,r,o,s,function(e){return o>e-n&&e-n>=0?i.getSetting("rowHeight",e-n):i.getSetting("rowHeight",e)},function(e){i.wtTable.verticalRenderReverse=e}):0,t!==n&&this.instance.wtScrollbars.vertical.scrollTo(t),i},x.prototype.scrollHorizontal=function(e){if(!this.instance.drawn)throw new Error("scrollHorizontal can only be called after table was drawn to DOM");var t,i=this.instance,n=i.getSetting("offsetColumn"),o=i.getSetting("fixedColumnsLeft"),r=i.getSetting("totalColumns"),s=i.wtViewport.getViewportWidth();return t=r>0?this.scrollLogicHorizontal(e,n,r,o,s,function(e){return o>e-n&&e-n>=0?i.getSetting("columnWidth",e-n):i.getSetting("columnWidth",e)}):0,t!==n&&this.instance.wtScrollbars.horizontal.scrollTo(t),i},x.prototype.scrollLogicVertical=function(e,t,i,n,o,r,s){var a=t+e;return a>=i-n&&(a=i-n-1,s(!0)),0>a&&(a=0),a},x.prototype.scrollLogicHorizontal=function(e,t,i,n,o,r){var s,a=t+e,l=0;if(a>n){for(a>=i-n&&(a=i-n-1),s=a;o>l&&i>s;)l+=r(s),s++;if(o>l)for(;a>0&&(l+=r(a-1),o>l);)a--}else 0>a&&(a=0);return a},x.prototype.scrollViewport=function(e){if(this.instance.drawn){var i=this.instance.getSetting("offsetRow"),n=(this.instance.getSetting("offsetColumn"),this.instance.wtTable.getLastVisibleRow()),o=this.instance.getSetting("totalRows"),r=this.instance.getSetting("totalColumns"),s=this.instance.getSetting("fixedRowsTop"),a=this.instance.getSetting("fixedColumnsLeft");if(this.instance.getSetting("nativeScrollbars")){var l=this.instance.wtTable.getCell(e);if("object"==typeof l){var c=g.prototype.offset(l),u=g.prototype.outerHeight(l),d=this.instance.wtScrollbars.vertical.getScrollPosition(),h=g.prototype.outerHeight(this.instance.wtScrollbars.vertical.scrollHandler);return this.instance.wtScrollbars.vertical.scrollHandler!==t&&(c.top=c.top-g.prototype.offset(this.instance.wtScrollbars.vertical.scrollHandler).top),h-=20,void(h>u&&(c.top<d?this.instance.wtScrollbars.vertical.setScrollPosition(c.top):c.top+u>d+h&&this.instance.wtScrollbars.vertical.setScrollPosition(c.top-h+u)))}}if(e[0]<0||e[0]>o-1)throw new Error("row "+e[0]+" does not exist");if(e[1]<0||e[1]>r-1)throw new Error("column "+e[1]+" does not exist");if(e[0]>n?(this.scrollVertical(e[0]-s-i),this.instance.wtTable.verticalRenderReverse=!0):e[0]===n&&this.instance.wtTable.rowStrategy.isLastIncomplete()?(this.scrollVertical(e[0]-s-i),this.instance.wtTable.verticalRenderReverse=!0):this.scrollVertical(e[0]-s<i?e[0]-s-i:0),this.instance.wtTable.isColumnBeforeViewport(e[1]))this.instance.wtScrollbars.horizontal.scrollTo(e[1]-a);else if(this.instance.wtTable.isColumnAfterViewport(e[1])||this.instance.wtTable.getLastVisibleColumn()===e[1]&&!this.instance.wtTable.isLastColumnFullyVisible()){for(var f=0,p=0;a>p;p++)f+=this.instance.getSetting("columnWidth",p);var m=e[1];f+=this.instance.getSetting("columnWidth",m);var v=this.instance.wtViewport.getViewportWidth();if(v>f)for(var y=this.instance.getSetting("columnWidth",m-1);v>f+y&&m>=a;)m--,f+=y;this.instance.wtScrollbars.horizontal.scrollTo(m-a)}return this.instance}},T.prototype.init=function(){var t=this;this.$table=e(this.instance.wtTable.TABLE),this.slider=document.createElement("DIV"),this.sliderStyle=this.slider.style,this.sliderStyle.position="absolute",this.sliderStyle.top="0",this.sliderStyle.left="0",this.sliderStyle.display="none",this.slider.className="dragdealer "+this.type,this.handle=document.createElement("DIV"),this.handleStyle=this.handle.style,this.handle.className="handle",this.slider.appendChild(this.handle),this.container=this.instance.wtTable.holder,this.container.appendChild(this.slider);var i=!0;this.dragTimeout=null;var n,o=function(){t.onScroll(n)};this.dragdealer=new Z(this.slider,{vertical:"vertical"===this.type,horizontal:"horizontal"===this.type,slide:!1,speed:100,animationCallback:function(e,r){return i?void(i=!1):(t.skipRefresh=!0,n="vertical"===t.type?r:e,void(null===t.dragTimeout&&(t.dragTimeout=setInterval(o,100),o())))},callback:function(e,i){t.skipRefresh=!1,clearInterval(t.dragTimeout),t.dragTimeout=null,n="vertical"===t.type?i:e,t.onScroll(n)}}),this.skipRefresh=!1},T.prototype.onScroll=function(e){if(this.instance.drawn&&(this.readSettings(),this.total>this.visibleCount)){var t=Math.round(this.handlePosition*this.total/this.sliderSize);1===e?"vertical"===this.type?this.instance.scrollVertical(1/0).draw():this.instance.scrollHorizontal(1/0).draw():t!==this.offset?"vertical"===this.type?this.instance.scrollVertical(t-this.offset).draw():this.instance.scrollHorizontal(t-this.offset).draw():this.refresh()}},T.prototype.getHandleSizeRatio=function(e,t){return!t||e>t||e==t?1:1/t},T.prototype.prepare=function(){if(!this.skipRefresh){var e=this.getHandleSizeRatio(this.visibleCount,this.total);this.visible=(1===e||isNaN(e))&&"auto"===this.scrollMode||"none"===this.scrollMode?!1:!0}},T.prototype.refresh=function(){if(!this.skipRefresh){if(!this.visible)return void(this.sliderStyle.display="none");var e,t,i,n,o=this.visibleCount,r=this.instance.wtViewport.getWorkspaceWidth(),s=this.instance.wtViewport.getWorkspaceHeight();1/0===r&&(r=this.instance.wtViewport.getWorkspaceActualWidth()),1/0===s&&(s=this.instance.wtViewport.getWorkspaceActualHeight()),"vertical"===this.type?(this.instance.wtTable.rowStrategy.isLastIncomplete()&&o--,t=s-2,this.sliderStyle.top=this.instance.wtDom.offset(this.$table[0]).top-this.instance.wtDom.offset(this.container).top+"px",this.sliderStyle.left=r-1+"px",this.sliderStyle.height=Math.max(t,0)+"px"):(t=r-2,this.sliderStyle.left=this.instance.wtDom.offset(this.$table[0]).left-this.instance.wtDom.offset(this.container).left+"px",this.sliderStyle.top=s-1+"px",this.sliderStyle.width=Math.max(t,0)+"px"),e=this.getHandleSizeRatio(o,this.total),i=Math.round(t*e),10>i&&(i=15),n=Math.floor(t*(this.offset/this.total)),i+n>t&&(n=t-i),"vertical"===this.type?(this.handleStyle.height=i+"px",this.handleStyle.top=n+"px"):(this.handleStyle.width=i+"px",this.handleStyle.left=n+"px"),this.sliderStyle.display="block"}},T.prototype.destroy=function(){clearInterval(this.dragdealer.interval)};var G=function(e){this.instance=e,this.type="vertical",this.init()};G.prototype=new T,G.prototype.scrollTo=function(e){this.instance.update("offsetRow",e)},G.prototype.readSettings=function(){this.scrollMode=this.instance.getSetting("scrollV"),this.offset=this.instance.getSetting("offsetRow"),this.total=this.instance.getSetting("totalRows"),this.visibleCount=this.instance.wtTable.rowStrategy.countVisible(),this.visibleCount>1&&this.instance.wtTable.rowStrategy.isLastIncomplete()&&this.visibleCount--,this.handlePosition=parseInt(this.handleStyle.top,10),this.sliderSize=parseInt(this.sliderStyle.height,10),this.fixedCount=this.instance.getSetting("fixedRowsTop")};var K=function(e){this.instance=e,this.type="horizontal",this.init()};K.prototype=new T,K.prototype.scrollTo=function(e){this.instance.update("offsetColumn",e)},K.prototype.readSettings=function(){this.scrollMode=this.instance.getSetting("scrollH"),this.offset=this.instance.getSetting("offsetColumn"),this.total=this.instance.getSetting("totalColumns"),this.visibleCount=this.instance.wtTable.columnStrategy.countVisible(),this.visibleCount>1&&this.instance.wtTable.columnStrategy.isLastIncomplete()&&this.visibleCount--,this.handlePosition=parseInt(this.handleStyle.left,10),this.sliderSize=parseInt(this.sliderStyle.width,10),this.fixedCount=this.instance.getSetting("fixedColumnsLeft")},K.prototype.getHandleSizeRatio=function(e,t){return!t||e>t||e==t?1:e/t},S.prototype.init=function(){this.TABLE=this.instance.wtTable.TABLE,this.fixed=this.instance.wtTable.hider,this.fixedContainer=this.instance.wtTable.holder,this.fixed.style.position="absolute",this.fixed.style.left="0",this.scrollHandler=this.getScrollableElement(this.TABLE),this.$scrollHandler=e(this.scrollHandler)},S.prototype.getScrollableElement=function(e){for(var i=e.parentNode;i&&i.style;){if("scroll"===i.style.overflow)return i;i=i.parentNode}return t},S.prototype.prepare=function(){},S.prototype.availableSize=function(){var e;return e=this.windowScrollPosition>this.tableParentOffset?this.instance.wtTable.getLastVisibleRow()===this.total-1?this.instance.wtDom.outerHeight(this.TABLE):this.windowSize:this.windowSize-this.tableParentOffset},S.prototype.refresh=function(e){var t=this.getLastCell();this.measureBefore=this.sumCellSizes(0,this.offset),this.measureAfter=-1===t?0:this.sumCellSizes(t,this.total-t),this.applyToDOM(),this.clone&&this.clone.draw(e)},S.prototype.destroy=function(){this.$scrollHandler.off("."+this.instance.guid),e(t).off("."+this.instance.guid),e(document).off("."+this.instance.guid)},k.prototype=new S,k.prototype.makeClone=function(t){if(!this.instance.cloneFrom){var i=e('<div id="cln_'+t+'" class="handsontable"></div>');this.instance.wtTable.holder.parentNode.appendChild(i[0]),i.css({position:"fixed",overflow:"hidden"});var n=e('<table class="htCore"></table>');n.className=this.instance.wtTable.TABLE.className,i.append(n);var o={};o.cloneFrom=this.instance,o.cloneDirection=t,o.table=n[0];var r=new m(o);return r}},k.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e,i=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===t){e=this.instance.wtTable.holder.getBoundingClientRect();var n=Math.ceil(e.top,10),o=Math.ceil(e.bottom,10);i.style.top=0>n&&o>0?"0":n+"px";var r=Math.ceil(e.left,10),s=Math.ceil(e.right,10);i.style.left=0>r&&s>0?"0":r+"px"}else e=this.scrollHandler.getBoundingClientRect(),i.style.top=Math.ceil(e.top,10)+"px",i.style.left=Math.ceil(e.left,10)+"px";i.style.width=g.prototype.outerWidth(this.clone.wtTable.TABLE)+4+"px",i.style.height=g.prototype.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},k.prototype.prepare=function(){},k.prototype.refresh=function(e){this.measureBefore=0,this.measureAfter=0,this.clone&&this.clone.draw(e)},k.prototype.getScrollPosition=function(){},k.prototype.getLastCell=function(){},k.prototype.getTableSize=function(){},k.prototype.applyToDOM=function(){},k.prototype.scrollTo=function(){},k.prototype.readWindowSize=function(){},k.prototype.readSettings=function(){},A.prototype=new S,A.prototype.makeClone=function(t){if(!this.instance.cloneFrom){var i=e('<div id="cln_'+t+'" class="handsontable"></div>');this.instance.wtTable.holder.parentNode.appendChild(i[0]),i.css({position:"fixed",overflow:"hidden"});var n=e('<table class="htCore"></table>');n.className=this.instance.wtTable.TABLE.className,i.append(n);var o={};o.cloneFrom=this.instance,o.cloneDirection=t,o.table=n[0];var r=new m(o);return r}},A.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e,i=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===t){e=this.instance.wtTable.holder.getBoundingClientRect();var n=Math.ceil(e.left,10),o=Math.ceil(e.right,10);i.style.left=0>n&&o>0?"0":n+"px"}else e=this.scrollHandler.getBoundingClientRect(),i.style.top=Math.ceil(e.top,10)+"px",i.style.left=Math.ceil(e.left,10)+"px";i.style.width=g.prototype.outerWidth(this.clone.wtTable.TABLE)+4+"px",i.style.height=this.instance.wtViewport.getWorkspaceHeight()-this.instance.getSetting("scrollbarHeight")+"px"}},A.prototype.prepare=function(){},A.prototype.refresh=function(e){this.measureBefore=0,this.measureAfter=0,this.clone&&this.clone.draw(e)},A.prototype.getScrollPosition=function(){return this.scrollHandler===t?this.scrollHandler.scrollX:this.scrollHandler.scrollLeft},A.prototype.onScroll=function(){this.instance.cloneFrom||(this.windowScrollPosition=this.getScrollPosition())},A.prototype.getLastCell=function(){return this.instance.wtTable.getLastVisibleColumn()},A.prototype.getTableSize=function(){return this.instance.wtDom.outerWidth(this.TABLE)},A.prototype.applyToDOM=function(){this.fixedContainer.style.paddingLeft=this.measureBefore+"px",this.fixedContainer.style.paddingRight=this.measureAfter+"px"},A.prototype.scrollTo=function(e){this.$scrollHandler.scrollLeft(this.tableParentOffset+e*this.cellSize)},A.prototype.readWindowSize=function(){this.scrollHandler===t?(this.windowSize=document.documentElement.clientWidth,this.tableParentOffset=this.instance.wtTable.holderOffset.left):(this.windowSize=g.prototype.outerWidth(this.scrollHandler),this.tableParentOffset=0),this.windowScrollPosition=this.getScrollPosition()},A.prototype.readSettings=function(){this.offset=this.instance.getSetting("offsetColumn"),this.total=this.instance.getSetting("totalColumns")},E.prototype=new S,E.prototype.makeClone=function(i){if(!this.instance.cloneFrom){var n=this,o=e('<div id="cln_'+i+'" class="handsontable"></div>');this.instance.wtTable.holder.parentNode.appendChild(o[0]),o.css({position:"fixed",overflow:"hidden"});var r=e('<table class="htCore"></table>');r.className=this.instance.wtTable.TABLE.className,o.append(r);var s={};s.cloneFrom=this.instance,s.cloneDirection=i,s.table=r[0];var a=new m(s),l=o.find("table")[0];return this.$scrollHandler.on("scroll."+this.instance.guid,function(){return n.instance.wtTable.holder.parentNode?(n.onScroll(),n.instance.wtScrollbars.horizontal.onScroll(),l.style.left=n.instance.wtScrollbars.horizontal.measureBefore-n.instance.wtScrollbars.horizontal.windowScrollPosition+"px",void(n.instance.wtScrollbars.horizontal.clone.wtTable.TABLE.style.top=n.instance.wtScrollbars.vertical.measureBefore-n.instance.wtScrollbars.vertical.windowScrollPosition+"px")):void n.destroy()
}),e(t).on("load."+this.instance.guid,function(){n.resetFixedPosition(),n.instance.wtScrollbars.horizontal.resetFixedPosition(),n.instance.wtScrollbars.corner.resetFixedPosition()}),e(t).on("scroll."+this.instance.guid,function(){n.resetFixedPosition(),n.instance.wtScrollbars.horizontal.resetFixedPosition(),n.instance.wtScrollbars.corner.resetFixedPosition()}),e(t).on("resize."+this.instance.guid,function(){n.resetFixedPosition(),n.instance.wtScrollbars.horizontal.resetFixedPosition(),n.instance.wtScrollbars.corner.resetFixedPosition()}),e(document).on("ready."+this.instance.guid,function(){n.resetFixedPosition(),n.instance.wtScrollbars.horizontal.resetFixedPosition(),n.instance.wtScrollbars.corner.resetFixedPosition()}),a}},E.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var e,i=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===t){e=this.instance.wtTable.holder.getBoundingClientRect();var n=Math.ceil(e.top,10),o=Math.ceil(e.bottom,10);i.style.top=0>n&&o>0?"0":n+"px"}else e=this.scrollHandler.getBoundingClientRect(),i.style.top=Math.ceil(e.top,10)+"px",i.style.left=Math.ceil(e.left,10)+"px";i.style.width=g.prototype.outerWidth(this.instance.wtTable.holder.parentNode)+"px",i.style.height=g.prototype.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},E.prototype.getScrollPosition=function(){return this.scrollHandler===t?this.scrollHandler.scrollY:this.scrollHandler.scrollTop},E.prototype.setScrollPosition=function(e){this.scrollHandler.scrollTop=e},E.prototype.onScroll=function(e){if(!(this.instance.cloneFrom||(this.windowScrollPosition=this.getScrollPosition(),this.readSettings(),e&&(this.windowScrollPosition=e),this.windowScrollPosition===this.lastWindowScrollPosition||this.windowScrollPosition>this.lastBegin&&this.windowScrollPosition+this.windowSize<this.lastEnd))){this.lastWindowScrollPosition=this.windowScrollPosition;var t,i=0;if(t=this.windowScrollPosition-this.tableParentOffset,X=0,t>0){for(var n,o=0,r=0;r<this.total&&(n=this.instance.getSetting("rowHeight",r),o+=n,!(o>t));r++);this.offset>0&&(X=o-t),i=r,i=Math.min(i,this.total)}this.curOuts=i>this.maxOuts?this.maxOuts:i,i-=this.curOuts,this.instance.update("offsetRow",i),this.readSettings(),this.instance.draw()}},E.prototype.getLastCell=function(){return this.instance.getSetting("offsetRow")+this.instance.wtTable.tbodyChildrenLength-1},E.prototype.getTableSize=function(){return this.instance.wtDom.outerHeight(this.TABLE)};var X=0;E.prototype.sumCellSizes=function(e,t){for(var i=0;t>e;)i+=this.instance.getSetting("rowHeight",e),e++;return i},E.prototype.applyToDOM=function(){if("top"!==this.instance.cloneDirection){var e=this.instance.wtViewport.getColumnHeaderHeight();this.fixedContainer.style.height=e+this.sumCellSizes(0,this.total)+"px",this.fixed.style.top=this.measureBefore+"px",this.fixed.style.bottom="",this.lastBegin=this.tableParentOffset+this.measureBefore,this.lastEnd=this.lastBegin+e+this.instance.wtTable.rowStrategy.cellSizesSum}},E.prototype.scrollTo=function(e){var t=this.tableParentOffset+e*this.cellSize;this.$scrollHandler.scrollTop(t),this.onScroll(t)},E.prototype.readWindowSize=function(){this.scrollHandler===t?(this.windowSize=document.documentElement.clientHeight,this.tableParentOffset=this.instance.wtTable.holderOffset.left):(this.windowSize=g.prototype.outerHeight(this.scrollHandler),this.tableParentOffset=0),this.windowScrollPosition=this.getScrollPosition()},E.prototype.readSettings=function(){this.offset=this.instance.getSetting("offsetRow"),this.total=this.instance.getSetting("totalRows")},M.prototype.destroy=function(){this.vertical&&this.vertical.destroy(),this.horizontal&&this.horizontal.destroy()},M.prototype.refresh=function(e){this.horizontal&&this.horizontal.readSettings(),this.vertical&&this.vertical.readSettings(),this.horizontal&&this.horizontal.prepare(),this.vertical&&this.vertical.prepare(),this.horizontal&&this.horizontal.refresh(e),this.vertical&&this.vertical.refresh(e),this.corner&&this.corner.refresh(e)},D.prototype.add=function(e){this.selected.push(e)},D.prototype.clear=function(){this.selected.length=0},D.prototype.getCorners=function(){var e,t,i,n,o,r=this.selected.length;if(r>0&&(e=i=this.selected[0][0],t=n=this.selected[0][1],r>1))for(o=1;r>o;o++)this.selected[o][0]<e?e=this.selected[o][0]:this.selected[o][0]>i&&(i=this.selected[o][0]),this.selected[o][1]<t?t=this.selected[o][1]:this.selected[o][1]>n&&(n=this.selected[o][1]);return[e,t,i,n]},D.prototype.draw=function(){var e,t,i,n,o,r=this.instance.wtTable.rowStrategy.countVisible(),s=this.instance.wtTable.columnStrategy.countVisible();if(this.selected.length){for(e=this.getCorners(),t=0;r>t;t++)for(i=0;s>i;i++)n=this.instance.wtTable.rowFilter.visibleToSource(t),o=this.instance.wtTable.columnFilter.visibleToSource(i),n>=e[0]&&n<=e[2]&&o>=e[1]&&o<=e[3]?this.instance.wtTable.currentCellCache.add(t,i,this.settings.className):n>=e[0]&&n<=e[2]?this.instance.wtTable.currentCellCache.add(t,i,this.settings.highlightRowClassName):o>=e[1]&&o<=e[3]&&this.instance.wtTable.currentCellCache.add(t,i,this.settings.highlightColumnClassName);this.border&&this.border.appear(e)}else this.border&&this.border.disappear()},R.prototype.update=function(e,t){if(void 0===t)for(var i in e)e.hasOwnProperty(i)&&(this.settings[i]=e[i]);else this.settings[e]=t;return this.instance},R.prototype.getSetting=function(e,t,i,n){return this[e]?this[e](t,i,n):this._getSetting(e,t,i,n)},R.prototype._getSetting=function(e,t,i,n){return"function"==typeof this.settings[e]?this.settings[e](t,i,n):void 0!==t&&"[object Array]"===Object.prototype.toString.call(this.settings[e])?this.settings[e][t]:this.settings[e]},R.prototype.has=function(e){return!!this.settings[e]},R.prototype.rowHeight=function(e,t){if(this.instance.rowHeightCache||(this.instance.rowHeightCache=[]),void 0===this.instance.rowHeightCache[e]){var i=23;return t&&(i=this.instance.wtDom.outerHeight(t),this.instance.rowHeightCache[e]=i),i}return this.instance.rowHeightCache[e]},N.prototype.refreshHiderDimensions=function(){var e=this.instance.wtViewport.getWorkspaceHeight(),t=this.instance.wtViewport.getWorkspaceWidth(),i=this.spreader.style;1/0===e&&1/0===t||this.instance.getSetting("nativeScrollbars")?(i.position="relative",i.width="auto",i.height="auto"):(1/0===e&&(e=this.instance.wtViewport.getWorkspaceActualHeight()),1/0===t&&(t=this.instance.wtViewport.getWorkspaceActualWidth()),this.hiderStyle.overflow="hidden",i.position="absolute",i.top="0",i.left="0",this.instance.getSetting("nativeScrollbars")||(i.height="4000px",i.width="4000px"),0>e&&(e=0),this.hiderStyle.height=e+"px",this.hiderStyle.width=t+"px")},N.prototype.refreshStretching=function(){var e=this.instance,t=e.getSetting("stretchH"),i=e.getSetting("totalRows"),n=e.getSetting("totalColumns"),o=e.getSetting("offsetColumn"),r=function(e){var t=s.instance.wtViewport.getViewportWidth(e);return e>t&&s.instance.getSetting("nativeScrollbars")?1/0:t},s=this,a=function(t){var i=s.columnFilter.visibleToSource(t);return n>i?e.getSetting("columnWidth",i):void 0};"hybrid"===t&&(t=o>0?"last":"none");var l=function(e){return s.instance.getSetting("nativeScrollbars")?2*s.instance.wtViewport.getViewportHeight(e):s.instance.wtViewport.getViewportHeight(e)},c=function(e,t){if(s.instance.getSetting("nativeScrollbars"))return 20;var n=s.rowFilter.visibleToSource(e);return i>n?s.verticalRenderReverse&&0===e?s.instance.getSetting("rowHeight",n,t)-1:s.instance.getSetting("rowHeight",n,t):void 0};this.columnStrategy=new p(r,a,t),this.rowStrategy=new C(l,c)},N.prototype.adjustAvailableNodes=function(){for(var e,t,i,n,o=this.instance.getSetting("rowHeaders"),r=o.length,s=this.instance.getSetting("columnHeaders");this.colgroupChildrenLength<r;)this.COLGROUP.appendChild(document.createElement("COL")),this.colgroupChildrenLength++;for(this.refreshStretching(),!this.instance.cloneFrom||"left"!==this.instance.cloneDirection&&"corner"!==this.instance.cloneDirection||(this.columnStrategy.cellCount=0),e=this.columnStrategy.cellCount;this.colgroupChildrenLength<e+r;)this.COLGROUP.appendChild(document.createElement("COL")),this.colgroupChildrenLength++;for(;this.colgroupChildrenLength>e+r;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.colgroupChildrenLength--;if(t=this.THEAD.firstChild,s.length){for(t||(t=document.createElement("TR"),this.THEAD.appendChild(t)),this.theadChildrenLength=t.childNodes.length;this.theadChildrenLength<e+r;)t.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>e+r;)t.removeChild(t.lastChild),this.theadChildrenLength--}else t&&this.wtDom.empty(t);for(n=0;n<this.colgroupChildrenLength;n++)r>n?this.wtDom.addClass(this.COLGROUP.childNodes[n],"rowHeader"):this.wtDom.removeClass(this.COLGROUP.childNodes[n],"rowHeader");if(s.length&&(t=this.THEAD.firstChild,r))for(i=t.firstChild,n=0;r>n;n++)o[n](-r+n,i),i=i.nextSibling;for(n=0;e>n;n++)s.length&&s[0](this.columnFilter.visibleToSource(n),t.childNodes[r+n])},N.prototype.adjustColumns=function(e,t){for(var i=e.childNodes.length;t>i;){var n=document.createElement("TD");e.appendChild(n),i++}for(;i>t;)e.removeChild(e.lastChild),i--},N.prototype.draw=function(e){return this.instance.getSetting("nativeScrollbars")&&(this.verticalRenderReverse=!1),this.rowFilter.readSettings(this.instance),this.columnFilter.readSettings(this.instance),e?this.instance.wtScrollbars&&this.instance.wtScrollbars.refresh(!0):(this.instance.getSetting("nativeScrollbars")?this.instance.cloneFrom?this.tableOffset=this.instance.cloneFrom.wtTable.tableOffset:(this.holderOffset=this.wtDom.offset(this.holder),this.tableOffset=this.wtDom.offset(this.TABLE),this.instance.wtScrollbars.vertical.readWindowSize(),this.instance.wtScrollbars.horizontal.readWindowSize(),this.instance.wtViewport.resetSettings()):(this.tableOffset=this.wtDom.offset(this.TABLE),this.instance.wtViewport.resetSettings()),this._doDraw()),this.refreshPositions(e),this.instance.drawn=!0,this},N.prototype._doDraw=function(){var e,t,i,n,o,r,s,a,l,c,u=0,d=this.instance.getSetting("offsetRow"),h=this.instance.getSetting("totalRows"),f=this.instance.getSetting("totalColumns"),p=this.instance.getSetting("rowHeaders"),m=p.length,g=!1;this.verticalRenderReverse&&(l=d);var v=!1;if(this.verticalRenderReverse&&(d===h-this.rowFilter.fixedCount-1?v=!0:(this.instance.update("offsetRow",d+1),this.rowFilter.readSettings(this.instance))),f>0){e=this.rowFilter.visibleToSource(u);for(var y=!0,b=this.instance.getSetting("fixedRowsTop");h>e&&e>=0;){if(u>1e3)throw new Error("Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.");if(this.instance.cloneFrom&&("top"===this.instance.cloneDirection||"corner"===this.instance.cloneDirection)&&u===b)break;if(u>=this.tbodyChildrenLength||this.verticalRenderReverse&&u>=this.rowFilter.fixedCount){for(o=document.createElement("TR"),t=0;m>t;t++)o.appendChild(document.createElement("TH"));this.verticalRenderReverse&&u>=this.rowFilter.fixedCount?this.TBODY.insertBefore(o,this.TBODY.childNodes[this.rowFilter.fixedCount]||this.TBODY.firstChild):this.TBODY.appendChild(o),this.tbodyChildrenLength++}else o=0===u?this.TBODY.firstChild:o.nextSibling;for(s=o.firstChild,t=0;m>t;t++)"TD"==s.nodeName&&(r=s,s=document.createElement("TH"),o.insertBefore(s,r),o.removeChild(r)),p[t](e,s),s=s.nextSibling;if(y)for(y=!1,this.adjustAvailableNodes(),g=!0,n=this.columnStrategy.cellCount,this.adjustColumns(o,n+m),a=this.instance.wtViewport.getWorkspaceWidth(),this.columnStrategy.stretch(),t=0;n>t;t++)this.COLGROUP.childNodes[t+m].style.width=this.columnStrategy.getSize(t)+"px";else this.adjustColumns(o,n+m);for(t=0;n>t;t++)i=this.columnFilter.visibleToSource(t),r=0===t?o.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)]:r.nextSibling,"TH"==r.nodeName&&(s=r,r=document.createElement("TD"),o.insertBefore(r,s),o.removeChild(s)),r.className="",r.removeAttribute("style"),this.instance.getSetting("cellRenderer",e,i,r);if(d=this.instance.getSetting("offsetRow"),this.verticalRenderReverse&&v){if(-this.wtDom.outerHeight(o.firstChild)<this.rowStrategy.remainingSize){this.TBODY.removeChild(o),this.instance.update("offsetRow",d+1),this.tbodyChildrenLength--,this.rowFilter.readSettings(this.instance);break}c=this.rowStrategy.add(u,r,this.verticalRenderReverse),c===!1&&this.rowStrategy.removeOutstanding()}else if(c=this.rowStrategy.add(u,r,this.verticalRenderReverse),c===!1&&(this.instance.getSetting("nativeScrollbars")||this.rowStrategy.removeOutstanding()),this.rowStrategy.isLastIncomplete()){if(this.verticalRenderReverse&&!this.isRowInViewport(l))return this.verticalRenderReverse=!1,this.instance.update("offsetRow",l),void this.draw();break}if(this.verticalRenderReverse&&u>=this.rowFilter.fixedCount){if(0===d)break;this.instance.update("offsetRow",d-1),this.rowFilter.readSettings(this.instance)}else u++;e=this.rowFilter.visibleToSource(u)}}for(g||this.adjustAvailableNodes(),u=this.rowStrategy.countVisible();this.tbodyChildrenLength>u;)this.TBODY.removeChild(this.TBODY.lastChild),this.tbodyChildrenLength--;if(this.instance.wtScrollbars&&this.instance.wtScrollbars.refresh(!1),a!==this.instance.wtViewport.getWorkspaceWidth())for(this.columnStrategy.stretch(),t=0;t<this.columnStrategy.cellCount;t++)this.COLGROUP.childNodes[t+m].style.width=this.columnStrategy.getSize(t)+"px";this.verticalRenderReverse=!1},N.prototype.refreshPositions=function(e){this.refreshHiderDimensions(),this.refreshSelections(e)},N.prototype.refreshSelections=function(e){var t,i,n,o,r,s,a=[],l=this.rowStrategy.countVisible(),c=this.columnStrategy.countVisible();if(this.oldCellCache=this.currentCellCache,this.currentCellCache=new h,this.instance.selections)for(i in this.instance.selections)this.instance.selections.hasOwnProperty(i)&&(this.instance.selections[i].draw(),this.instance.selections[i].settings.className&&a.push(this.instance.selections[i].settings.className),this.instance.selections[i].settings.highlightRowClassName&&a.push(this.instance.selections[i].settings.highlightRowClassName),this.instance.selections[i].settings.highlightColumnClassName&&a.push(this.instance.selections[i].settings.highlightColumnClassName));for(s=a.length,t=0;l>t;t++)for(n=0;c>n;n++)for(i=this.rowFilter.visibleToSource(t),o=this.columnFilter.visibleToSource(n),r=0;s>r;r++)this.currentCellCache.test(t,n,a[r])?this.wtDom.addClass(this.getCell([i,o]),a[r]):e&&this.oldCellCache.test(t,n,a[r])&&this.wtDom.removeClass(this.getCell([i,o]),a[r])},N.prototype.getCell=function(e){return this.isRowBeforeViewport(e[0])?-1:this.isRowAfterViewport(e[0])?-2:this.isColumnBeforeViewport(e[1])?-3:this.isColumnAfterViewport(e[1])?-4:this.TBODY.childNodes[this.rowFilter.sourceToVisible(e[0])].childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e[1])]},N.prototype.getCoords=function(e){return[this.rowFilter.visibleToSource(this.wtDom.index(e.parentNode)),this.columnFilter.visibleRowHeadedColumnToSourceColumn(e.cellIndex)]},N.prototype.getLastVisibleRow=function(){return this.rowFilter.visibleToSource(this.rowStrategy.cellCount-1)},N.prototype.getLastVisibleColumn=function(){return this.columnFilter.visibleToSource(this.columnStrategy.cellCount-1)},N.prototype.isRowBeforeViewport=function(e){return this.rowFilter.sourceToVisible(e)<this.rowFilter.fixedCount&&e>=this.rowFilter.fixedCount},N.prototype.isRowAfterViewport=function(e){return e>this.getLastVisibleRow()},N.prototype.isColumnBeforeViewport=function(e){return this.columnFilter.sourceToVisible(e)<this.columnFilter.fixedCount&&e>=this.columnFilter.fixedCount},N.prototype.isColumnAfterViewport=function(e){return e>this.getLastVisibleColumn()},N.prototype.isRowInViewport=function(e){return!this.isRowBeforeViewport(e)&&!this.isRowAfterViewport(e)},N.prototype.isColumnInViewport=function(e){return!this.isColumnBeforeViewport(e)&&!this.isColumnAfterViewport(e)},N.prototype.isLastRowFullyVisible=function(){return this.getLastVisibleRow()===this.instance.getSetting("totalRows")-1&&!this.rowStrategy.isLastIncomplete()},N.prototype.isLastColumnFullyVisible=function(){return this.getLastVisibleColumn()===this.instance.getSetting("totalColumns")-1&&!this.columnStrategy.isLastIncomplete()},P.prototype.getWorkspaceHeight=function(e){if(this.instance.getSetting("nativeScrollbars"))return this.instance.wtScrollbars.vertical.windowSize;var t=this.instance.getSetting("height");return(1/0===t||void 0===t||null===t||1>t)&&(t=this.instance.wtScrollbars.vertical instanceof S?this.instance.wtScrollbars.vertical.availableSize():1/0),1/0!==t&&(e>=t?t-=this.instance.getSetting("scrollbarHeight"):this.instance.wtScrollbars.horizontal.visible&&(t-=this.instance.getSetting("scrollbarHeight"))),t},P.prototype.getWorkspaceWidth=function(e){var t=this.instance.getSetting("width");return(1/0===t||void 0===t||null===t||1>t)&&(t=this.instance.wtScrollbars.horizontal instanceof S?this.instance.wtScrollbars.horizontal.availableSize():1/0),1/0!==t&&(e>=t?t-=this.instance.getSetting("scrollbarWidth"):this.instance.wtScrollbars.vertical.visible&&(t-=this.instance.getSetting("scrollbarWidth"))),t},P.prototype.getWorkspaceActualHeight=function(){return this.instance.wtDom.outerHeight(this.instance.wtTable.TABLE)},P.prototype.getWorkspaceActualWidth=function(){return this.instance.wtDom.outerWidth(this.instance.wtTable.TABLE)||this.instance.wtDom.outerWidth(this.instance.wtTable.TBODY)||this.instance.wtDom.outerWidth(this.instance.wtTable.THEAD)},P.prototype.getColumnHeaderHeight=function(){if(isNaN(this.columnHeaderHeight)){var e=this.instance.wtDom.offset(this.instance.wtTable.TBODY),t=this.instance.wtTable.tableOffset;this.columnHeaderHeight=e.top-t.top}return this.columnHeaderHeight},P.prototype.getViewportHeight=function(e){var t=this.getWorkspaceHeight(e);if(1/0===t)return t;var i=this.getColumnHeaderHeight();return i>0?t-i:t},P.prototype.getRowHeaderHeight=function(){if(this.instance.cloneFrom)return this.instance.cloneFrom.wtViewport.getRowHeaderHeight();if(isNaN(this.rowHeaderWidth)){var e=this.instance.wtTable.TBODY?this.instance.wtTable.TBODY.firstChild:null;if(e){var t=e.firstChild;for(this.rowHeaderWidth=0;t&&"TH"===t.nodeName;)this.rowHeaderWidth+=this.instance.wtDom.outerWidth(t),t=t.nextSibling}}return this.rowHeaderWidth},P.prototype.getViewportWidth=function(e){var t=this.getWorkspaceWidth(e);if(1/0===t)return t;var i=this.getRowHeaderHeight();return i>0?t-i:t},P.prototype.resetSettings=function(){this.rowHeaderWidth=0/0,this.columnHeaderHeight=0/0};/**
 * Dragdealer JS v0.9.5 - patched by Walkontable at lines 66, 309-310, 339-340
 * http://code.ovidiu.ch/dragdealer-js
 *
 * Copyright (c) 2010, Ovidiu Chereches
 * MIT License
 * http://legal.ovidiu.ch/licenses/MIT
 */
var J={x:0,y:0,init:function(){this.setEvent("mouse"),this.setEvent("touch")},setEvent:function(e){var t=document["on"+e+"move"]||function(){};document["on"+e+"move"]=function(e){t(e),J.refresh(e)}},refresh:function(e){e||(e=t.event),"mousemove"==e.type?this.set(e):e.touches&&this.set(e.touches[0])},set:function(e){e.pageX||e.pageY?(this.x=e.pageX,this.y=e.pageY):(e.clientX||e.clientY)&&(this.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop)}};J.init();var Q={get:function(e){var t=0,i=0;if(e.offsetParent)do i+=e.offsetLeft,t+=e.offsetTop;while(e=e.offsetParent);return[i,t]}},Z=function(e,t){if("string"==typeof e&&(e=document.getElementById(e)),e){var i=e.getElementsByTagName("div")[0];i&&-1!=i.className.search(/(^|\s)handle(\s|$)/)&&(this.init(e,i,t||{}),this.setup())}};Z.prototype={init:function(e,t,i){this.wrapper=e,this.handle=t,this.options=i,this.disabled=this.getOption("disabled",!1),this.horizontal=this.getOption("horizontal",!0),this.vertical=this.getOption("vertical",!1),this.slide=this.getOption("slide",!0),this.steps=this.getOption("steps",0),this.snap=this.getOption("snap",!1),this.loose=this.getOption("loose",!1),this.speed=this.getOption("speed",10)/100,this.xPrecision=this.getOption("xPrecision",0),this.yPrecision=this.getOption("yPrecision",0),this.callback=i.callback||null,this.animationCallback=i.animationCallback||null,this.bounds={left:i.left||0,right:-(i.right||0),top:i.top||0,bottom:-(i.bottom||0),x0:0,x1:0,xRange:0,y0:0,y1:0,yRange:0},this.value={prev:[-1,-1],current:[i.x||0,i.y||0],target:[i.x||0,i.y||0]},this.offset={wrapper:[0,0],mouse:[0,0],prev:[-999999,-999999],current:[0,0],target:[0,0]},this.change=[0,0],this.activity=!1,this.dragging=!1,this.tapping=!1},getOption:function(e,t){return void 0!==this.options[e]?this.options[e]:t},setup:function(){this.setWrapperOffset(),this.setBoundsPadding(),this.setBounds(),this.setSteps(),this.addListeners()},setWrapperOffset:function(){this.offset.wrapper=Q.get(this.wrapper)},setBoundsPadding:function(){this.bounds.left||this.bounds.right||(this.bounds.left=Q.get(this.handle)[0]-this.offset.wrapper[0],this.bounds.right=-this.bounds.left),this.bounds.top||this.bounds.bottom||(this.bounds.top=Q.get(this.handle)[1]-this.offset.wrapper[1],this.bounds.bottom=-this.bounds.top)},setBounds:function(){this.bounds.x0=this.bounds.left,this.bounds.x1=this.wrapper.offsetWidth+this.bounds.right,this.bounds.xRange=this.bounds.x1-this.bounds.x0-this.handle.offsetWidth,this.bounds.y0=this.bounds.top,this.bounds.y1=this.wrapper.offsetHeight+this.bounds.bottom,this.bounds.yRange=this.bounds.y1-this.bounds.y0-this.handle.offsetHeight,this.bounds.xStep=1/(this.xPrecision||Math.max(this.wrapper.offsetWidth,this.handle.offsetWidth)),this.bounds.yStep=1/(this.yPrecision||Math.max(this.wrapper.offsetHeight,this.handle.offsetHeight))},setSteps:function(){if(this.steps>1){this.stepRatios=[];for(var e=0;e<=this.steps-1;e++)this.stepRatios[e]=e/(this.steps-1)}},addListeners:function(){var e=this;this.wrapper.onselectstart=function(){return!1},this.handle.onmousedown=this.handle.ontouchstart=function(t){e.handleDownHandler(t)},this.wrapper.onmousedown=this.wrapper.ontouchstart=function(t){e.wrapperDownHandler(t)};var i=document.onmouseup||function(){};document.onmouseup=function(t){i(t),e.documentUpHandler(t)};var n=document.ontouchend||function(){};document.ontouchend=function(t){n(t),e.documentUpHandler(t)};var o=t.onresize||function(){};t.onresize=function(t){o(t),e.documentResizeHandler(t)},this.wrapper.onmousemove=function(){e.activity=!0},this.wrapper.onclick=function(){return!e.activity},this.interval=setInterval(function(){e.animate()},25),e.animate(!1,!0)},handleDownHandler:function(e){this.activity=!1,J.refresh(e),this.preventDefaults(e,!0),this.startDrag()},wrapperDownHandler:function(e){J.refresh(e),this.preventDefaults(e,!0),this.startTap()},documentUpHandler:function(){this.stopDrag(),this.stopTap()},documentResizeHandler:function(){this.setWrapperOffset(),this.setBounds(),this.update()},enable:function(){this.disabled=!1,this.handle.className=this.handle.className.replace(/\s?disabled/g,"")},disable:function(){this.disabled=!0,this.handle.className+=" disabled"},setStep:function(e,t,i){this.setValue(this.steps&&e>1?(e-1)/(this.steps-1):0,this.steps&&t>1?(t-1)/(this.steps-1):0,i)},setValue:function(e,t,i){this.setTargetValue([e,t||0]),i&&this.groupCopy(this.value.current,this.value.target)},startTap:function(e){this.disabled||(this.tapping=!0,this.setWrapperOffset(),this.setBounds(),void 0===e&&(e=[J.x-this.offset.wrapper[0]-this.handle.offsetWidth/2,J.y-this.offset.wrapper[1]-this.handle.offsetHeight/2]),this.setTargetOffset(e))},stopTap:function(){!this.disabled&&this.tapping&&(this.tapping=!1,this.setTargetValue(this.value.current),this.result())},startDrag:function(){this.disabled||(this.setWrapperOffset(),this.setBounds(),this.offset.mouse=[J.x-Q.get(this.handle)[0],J.y-Q.get(this.handle)[1]],this.dragging=!0)},stopDrag:function(){if(!this.disabled&&this.dragging){this.dragging=!1;var e=this.groupClone(this.value.current);if(this.slide){var t=this.change;e[0]+=4*t[0],e[1]+=4*t[1]}this.setTargetValue(e),this.result()}},feedback:function(){var e=this.value.current;this.snap&&this.steps>1&&(e=this.getClosestSteps(e)),this.groupCompare(e,this.value.prev)||("function"==typeof this.animationCallback&&this.animationCallback(e[0],e[1]),this.groupCopy(this.value.prev,e))},result:function(){"function"==typeof this.callback&&this.callback(this.value.target[0],this.value.target[1])},animate:function(e,t){if(!e||this.dragging){if(this.dragging){var i=this.groupClone(this.value.target),n=[J.x-this.offset.wrapper[0]-this.offset.mouse[0],J.y-this.offset.wrapper[1]-this.offset.mouse[1]];this.setTargetOffset(n,this.loose),this.change=[this.value.target[0]-i[0],this.value.target[1]-i[1]]}(this.dragging||t)&&this.groupCopy(this.value.current,this.value.target),(this.dragging||this.glide()||t)&&(this.update(),this.feedback())}},glide:function(){var e=[this.value.target[0]-this.value.current[0],this.value.target[1]-this.value.current[1]];return e[0]||e[1]?(Math.abs(e[0])>this.bounds.xStep||Math.abs(e[1])>this.bounds.yStep?(this.value.current[0]+=e[0]*this.speed,this.value.current[1]+=e[1]*this.speed):this.groupCopy(this.value.current,this.value.target),!0):!1},update:function(){this.offset.current=this.getOffsetsByRatios(this.snap?this.getClosestSteps(this.value.current):this.value.current),this.show()},show:function(){this.groupCompare(this.offset.current,this.offset.prev)||(this.horizontal&&(this.handle.style.left=String(this.offset.current[0])+"px"),this.vertical&&(this.handle.style.top=String(this.offset.current[1])+"px"),this.groupCopy(this.offset.prev,this.offset.current))},setTargetValue:function(e,t){var i=t?this.getLooseValue(e):this.getProperValue(e);this.groupCopy(this.value.target,i),this.offset.target=this.getOffsetsByRatios(i)},setTargetOffset:function(e,t){var i=this.getRatiosByOffsets(e),n=t?this.getLooseValue(i):this.getProperValue(i);this.groupCopy(this.value.target,n),this.offset.target=this.getOffsetsByRatios(n)},getLooseValue:function(e){var t=this.getProperValue(e);return[t[0]+(e[0]-t[0])/4,t[1]+(e[1]-t[1])/4]},getProperValue:function(e){var t=this.groupClone(e);return t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0),t[0]=Math.min(t[0],1),t[1]=Math.min(t[1],1),(!this.dragging&&!this.tapping||this.snap)&&this.steps>1&&(t=this.getClosestSteps(t)),t},getRatiosByOffsets:function(e){return[this.getRatioByOffset(e[0],this.bounds.xRange,this.bounds.x0),this.getRatioByOffset(e[1],this.bounds.yRange,this.bounds.y0)]},getRatioByOffset:function(e,t,i){return t?(e-i)/t:0},getOffsetsByRatios:function(e){return[this.getOffsetByRatio(e[0],this.bounds.xRange,this.bounds.x0),this.getOffsetByRatio(e[1],this.bounds.yRange,this.bounds.y0)]},getOffsetByRatio:function(e,t,i){return Math.round(e*t)+i},getClosestSteps:function(e){return[this.getClosestStep(e[0]),this.getClosestStep(e[1])]},getClosestStep:function(e){for(var t=0,i=1,n=0;n<=this.steps-1;n++)Math.abs(this.stepRatios[n]-e)<i&&(i=Math.abs(this.stepRatios[n]-e),t=n);return this.stepRatios[t]},groupCompare:function(e,t){return e[0]==t[0]&&e[1]==t[1]},groupCopy:function(e,t){e[0]=t[0],e[1]=t[1]},groupClone:function(e){return[e[0],e[1]]},preventDefaults:function(e,i){e||(e=t.event),e.preventDefault&&e.preventDefault(),e.returnValue=!1,i&&document.selection&&document.selection.empty()},cancelEvent:function(e){e||(e=t.event),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}},/*! Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.1.3
 *
 * Requires: 1.2.2+
 */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function i(i){var r,s=i||t.event,a=[].slice.call(arguments,1),l=0,c=0,u=0,d=0,h=0;return i=e.event.fix(s),i.type="mousewheel",s.wheelDelta&&(l=s.wheelDelta),s.detail&&(l=-1*s.detail),s.deltaY&&(u=-1*s.deltaY,l=u),s.deltaX&&(c=s.deltaX,l=-1*c),void 0!==s.wheelDeltaY&&(u=s.wheelDeltaY),void 0!==s.wheelDeltaX&&(c=-1*s.wheelDeltaX),d=Math.abs(l),(!n||n>d)&&(n=d),h=Math.max(Math.abs(u),Math.abs(c)),(!o||o>h)&&(o=h),r=l>0?"floor":"ceil",l=Math[r](l/n),c=Math[r](c/o),u=Math[r](u/o),a.unshift(i,l,c,u),(e.event.dispatch||e.event.handle).apply(this,a)}var n,o,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var a=r.length;a;)e.event.fixHooks[r[--a]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=s.length;e;)this.addEventListener(s[--e],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var e=s.length;e;)this.removeEventListener(s[--e],i,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),Array.prototype.filter||(Array.prototype.filter=function(e,t){function i(e){return/NodeList/i.test(e.item)}function n(e){for(var t=[],i=0,n=e.length;n>i;i++)t[i]=e[i];return t}if("undefined"==typeof this||null===this)throw new TypeError;if("function"!=typeof e)throw new TypeError;t=t||this,i(t)&&(t=n(t));var o,r,s=t.length,a=[];for(o=0;s>o;o+=1)t.hasOwnProperty(o)&&(r=t[o],e.call(t,r,o,t)&&a.push(r));return a})}(jQuery,window,Handsontable),function(){function e(e){this._n=e}function t(e,t,i){var n,o=Math.pow(10,t);if(n=(Math.round(e*o)/o).toFixed(t),i){var r=new RegExp("0{1,"+i+"}$");n=n.replace(r,"")}return n}function i(e,t){var i;return i=t.indexOf("$")>-1?o(e,t):t.indexOf("%")>-1?r(e,t):t.indexOf(":")>-1?s(e,t):l(e,t)}function n(e,t){if(t.indexOf(":")>-1)e._n=a(t);else if(t===p)e._n=0;else{var i=t;"."!==h[f].delimiters.decimal&&(t=t.replace(/\./g,"").replace(h[f].delimiters.decimal,"."));for(var n=new RegExp(h[f].abbreviations.thousand+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$"),o=new RegExp(h[f].abbreviations.million+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$"),r=new RegExp(h[f].abbreviations.billion+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$"),s=new RegExp(h[f].abbreviations.trillion+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$"),l=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1,u=0;u<=l.length&&!(c=t.indexOf(l[u])>-1?Math.pow(1024,u+1):!1);u++);e._n=(c?c:1)*(i.match(n)?Math.pow(10,3):1)*(i.match(o)?Math.pow(10,6):1)*(i.match(r)?Math.pow(10,9):1)*(i.match(s)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*Number((t.indexOf("(")>-1?"-":"")+t.replace(/[^0-9\.-]+/g,"")),e._n=c?Math.ceil(e._n):e._n}return e._n}function o(e,t){var n=t.indexOf("$")<=1?!0:!1,o="";t.indexOf(" $")>-1?(o=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(o=" ",t=t.replace("$ ","")):t=t.replace("$","");var r=i(e,t);return n?r.indexOf("(")>-1||r.indexOf("-")>-1?(r=r.split(""),r.splice(1,0,h[f].currency.symbol+o),r=r.join("")):r=h[f].currency.symbol+o+r:r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,o+h[f].currency.symbol),r=r.join("")):r=r+o+h[f].currency.symbol,r}function r(e,t){var n="";t.indexOf(" %")>-1?(n=" ",t=t.replace(" %","")):t=t.replace("%",""),e._n=100*e._n;var o=i(e,t);return o.indexOf(")")>-1?(o=o.split(""),o.splice(-1,0,n+"%"),o=o.join("")):o=o+n+"%",o}function s(e){var t=Math.floor(e._n/60/60),i=Math.floor((e._n-60*t*60)/60),n=Math.round(e._n-60*t*60-60*i);return t+":"+(10>i?"0"+i:i)+":"+(10>n?"0"+n:n)}function a(e){var t=e.split(":"),i=0;return 3===t.length?(i+=60*Number(t[0])*60,i+=60*Number(t[1]),i+=Number(t[2])):2===t.lenght&&(i+=60*Number(t[0]),i+=Number(t[1])),Number(i)}function l(e,i){var n=!1,o=!1,r="",s="",a="",l=Math.abs(e._n);if(0===e._n&&null!==p)return p;if(i.indexOf("(")>-1&&(n=!0,i=i.slice(1,-1)),i.indexOf("a")>-1&&(i.indexOf(" a")>-1?(r=" ",i=i.replace(" a","")):i=i.replace("a",""),l>=Math.pow(10,12)?(r+=h[f].abbreviations.trillion,e._n=e._n/Math.pow(10,12)):l<Math.pow(10,12)&&l>=Math.pow(10,9)?(r+=h[f].abbreviations.billion,e._n=e._n/Math.pow(10,9)):l<Math.pow(10,9)&&l>=Math.pow(10,6)?(r+=h[f].abbreviations.million,e._n=e._n/Math.pow(10,6)):l<Math.pow(10,6)&&l>=Math.pow(10,3)&&(r+=h[f].abbreviations.thousand,e._n=e._n/Math.pow(10,3))),i.indexOf("b")>-1){i.indexOf(" b")>-1?(s=" ",i=i.replace(" b","")):i=i.replace("b","");for(var c,u,d=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],m=0;m<=d.length;m++)if(c=Math.pow(1024,m),u=Math.pow(1024,m+1),e._n>=c&&e._n<u){s+=d[m],c>0&&(e._n=e._n/c);break}}i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(a=" ",i=i.replace(" o","")):i=i.replace("o",""),a+=h[f].ordinal(e._n)),i.indexOf("[.]")>-1&&(o=!0,i=i.replace("[.]","."));var g=e._n.toString().split(".")[0],v=i.split(".")[1],y=i.indexOf(","),b="",w=!1;return v?(v.indexOf("[")>-1?(v=v.replace("]",""),v=v.split("["),b=t(e._n,v[0].length+v[1].length,v[1].length)):b=t(e._n,v.length),g=b.split(".")[0],b=b.split(".")[1].length?h[f].delimiters.decimal+b.split(".")[1]:"",o&&0===Number(b)&&(b="")):g=t(e._n,null),g.indexOf("-")>-1&&(g=g.slice(1),w=!0),y>-1&&(g=g.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h[f].delimiters.thousands)),0===i.indexOf(".")&&(g=""),(n&&w?"(":"")+(!n&&w?"-":"")+g+b+(a?a:"")+(r?r:"")+(s?s:"")+(n&&w?")":"")}function c(e,t){h[e]=t}var u,d="1.4.7",h={},f="en",p=null,m="undefined"!=typeof module&&module.exports;u=function(t){return u.isNumeral(t)?t=t.value():Number(t)||(t=0),new e(Number(t))},u.version=d,u.isNumeral=function(t){return t instanceof e},u.language=function(e,t){return e?(e&&!t&&(f=e),(t||!h[e])&&c(e,t),u):f},u.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),u.zeroFormat=function(e){p="string"==typeof e?e:null},u.fn=e.prototype={clone:function(){return u(this)},format:function(e){return i(this,e?e:u.defaultFormat)},unformat:function(e){return n(this,e?e:u.defaultFormat)},value:function(){return this._n},valueOf:function(){return this._n},set:function(e){return this._n=Number(e),this},add:function(e){return this._n=this._n+Number(e),this},subtract:function(e){return this._n=this._n-Number(e),this},multiply:function(e){return this._n=this._n*Number(e),this},divide:function(e){return this._n=this._n/Number(e),this},difference:function(e){var t=this._n-Number(e);return 0>t&&(t=-t),t}},m&&(module.exports=u),"undefined"==typeof ender&&(this.numeral=u),"function"==typeof define&&define.amd&&define([],function(){return u})}.call(this),/*! jQuery UI - v1.11.1 - 2014-09-17
* http://jqueryui.com
* Includes: widget.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){/*!
 * jQuery UI Widget 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var t=0,i=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{n=e._data(o,"events"),n&&n.remove&&e(o).triggerHandler("remove")}catch(s){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var o,r,s,a,l={},c=t.split(".")[0];return t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}()):void(l[t]=n)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||t:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var n,o,r=i.call(arguments,1),s=0,a=r.length;a>s;s++)for(n in r[s])o=r[s][n],r[s].hasOwnProperty(n)&&void 0!==o&&(t[n]=e.isPlainObject(o)?e.isPlainObject(t[n])?e.widget.extend({},t[n],o):e.widget.extend({},o):o);return t},e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=i.call(arguments,1),l=this;return r=!s&&a.length?e.widget.extend.apply(null,[r].concat(a)):r,this.each(s?function(){var i,n=e.data(this,o);return"instance"===r?(l=n,!1):n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(i=n[r].apply(n,a),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}:function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}});e.widget}),/*
 * jQuery Iframe Transport Plugin 1.8.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,o,r,s=i.initialIframeSrc||"javascript:false;";return{send:function(a,l){n=e('<form style="display:none;"></form>'),n.attr("accept-charset",i.formAcceptCharset),r=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+r+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+r+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+r+"_method=PATCH",i.type="POST"),t+=1,o=e('<iframe src="'+s+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,r=e.isArray(i.paramName)?i.paramName:[i.paramName];o.unbind("load").bind("load",function(){var t;try{if(t=o.contents(),!t.length||!t[0].firstChild)throw new Error}catch(i){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+s+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",o.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",r[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var o=e(t[i]);e(n).prop("name",o.prop("name")).attr("form",o.attr("form")),o.replaceWith(n)})}),n.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src",s),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),/*
 * jQuery File Upload Plugin 5.42.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";function t(t){var i="dragover"===t;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var o=n.dataTransfer;o&&-1!==e.inArray("Files",o.types)&&this._trigger(t,e.Event(t,{delegatedEvent:n}))!==!1&&(n.preventDefault(),i&&(o.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return t.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,o=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&o-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=o,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(o,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,o=t.files[0],r=t.multipart||!e.support.xhrFileUpload,s="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r&&!t.blob&&this._isInstanceOf("File",o)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"'),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:s,value:t.blob}):e.each(t.files,function(n,o){i.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||s,value:o})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(s,t.blob,o.name):e.each(t.files,function(o,r){(n._isInstanceOf("File",r)||n._isInstanceOf("Blob",r))&&i.append("array"===e.type(t.paramName)&&t.paramName[o]||s,r,r.uploadName||r.name)})),t.data=i):(t.contentType=o.type||"application/octet-stream",t.data=t.blob||o),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)n.push(i),o-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var o=e.Deferred(),r=o.promise();return i=i||this.options.context||r,t===!0?o.resolveWith(i,n):t===!1&&o.rejectWith(i,n),r.abort=o.promise,this._enhancePromise(r)},_addConvenienceMethods:function(t,i){var n=this,o=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,r){return(t||r)&&(i._processQueue=this._processQueue=(this._processQueue||o([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():o(arguments)}).pipe(t,r)),this._processQueue||o([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var n,o,r=this,s=t.files[0],a=s.size,l=t.uploadedBytes,c=t.maxChunkSize||a,u=this._blobSlice,d=e.Deferred(),h=d.promise();return this._isXHRUpload(t)&&u&&(l||a>c)&&!t.data?i?!0:l>=a?(s.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",s.error])):(o=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=u.call(s,l,l+c,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,r._initXHRData(i),r._initProgressListener(i),n=(r._trigger("chunksend",null,i)!==!1&&e.ajax(i)||r._getXHRPromise(!1,i.context)).done(function(n,s,c){l=r._getUploadedBytes(c)||l+i.chunkSize,h+i.chunkSize-i._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=s,i.jqXHR=c,r._trigger("chunkdone",null,i),r._trigger("chunkalways",null,i),a>l?o():d.resolveWith(i.context,[n,s,c])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,r._trigger("chunkfail",null,i),r._trigger("chunkalways",null,i),d.rejectWith(i.context,[e,t,n])})},this._enhancePromise(h),h.abort=function(){return n.abort()},o(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,o){var r=o._progress.total,s=o._response;o._progress.loaded<r&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o),s.result=o.result=t,s.textStatus=o.textStatus=i,s.jqXHR=o.jqXHR=n,this._trigger("done",null,o)},_onFail:function(e,t,i,n){var o=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),o.jqXHR=n.jqXHR=e,o.textStatus=n.textStatus=t,o.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,o,r,s,a=this,l=a._getAJAXSettings(i),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((o||a._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),s=r.pipe(c)):(this._sequence=this._sequence.pipe(c,c),s=this._sequence),s.abort=function(){return o=[void 0,"abort","abort"],n?n.abort():(r&&r.rejectWith(l.context,o),c())},this._enhancePromise(s)):c()},_onAdd:function(t,i){var n,o,r,s,a=this,l=!0,c=e.extend({},this.options,i),u=i.files,d=u.length,h=c.limitMultiFileUploads,f=c.limitMultiFileUploadSize,p=c.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(c),v=0;if(!f||d&&void 0!==u[0].size||(f=void 0),(c.singleFileUploads||h||f)&&this._isXHRUpload(c))if(c.singleFileUploads||f||!h)if(!c.singleFileUploads&&f)for(r=[],n=[],s=0;d>s;s+=1)m+=u[s].size+p,(s+1===d||m+u[s+1].size+p>f||h&&s+1-v>=h)&&(r.push(u.slice(v,s+1)),o=g.slice(v,s+1),o.length||(o=g),n.push(o),v=s+1,m=0);else n=g;else for(r=[],n=[],s=0;d>s;s+=h)r.push(u.slice(s,s+h)),o=g.slice(s,s+h),o.length||(o=g),n.push(o);else r=[u],n=[g];return i.originalFiles=u,e.each(r||u,function(o,s){var c=e.extend({},i);return c.files=r?s:[s],c.paramName=n[o],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(t,c),l=a._trigger("add",e.Event("add",{delegatedEvent:t}),c)}),l},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0);t.fileInputClone=n,e("<form></form>").append(n)[0].reset(),i.after(n).detach(),e.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?n[0]:t}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,i){var n,o=this,r=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),r.resolve([e])},a=function(e){o._handleFileTreeEntries(e,i+t.name+"/").done(function(e){r.resolve(e)}).fail(s)},l=function(){n.readEntries(function(e){e.length?(c=c.concat(e),l()):a(c)},s)},c=[];return i=i||"",t.isFile?t._file?(t._file.relativePath=i,r.resolve(t._file)):t.file(function(e){e.relativePath=i,r.resolve(e)},s):t.isDirectory?(n=t.createReader(),l()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,n,o=t.prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(n=t.prop("value"),!n)return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(o){n.files=o,i.options.replaceFileInput&&i._replaceFileInput(n),i._trigger("change",e.Event("change",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)!==!1&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,n=t.dataTransfer,o={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){o.files=n,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),o)!==!1&&i._onAdd(t,o)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,n=e(this.element[0].cloneNode(!1));e.each(n.data(),function(e,o){var r="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n.attr(r)&&(t._isRegExpOption(e,o)&&(o=t._getRegExp(o)),i[e]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,o=this,r=e.Deferred(),s=r.promise();return s.abort=function(){return n=!0,i?i.abort():(r.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){if(!n){if(!e.length)return void r.reject();t.files=e,i=o._onSend(null,t),i.then(function(e,t,i){r.resolve(e,t,i)},function(e,t,i){r.reject(e,t,i)})}}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),window.tinymce=window.tinymce||{base:"/assets/tinymce",suffix:""},function(e,t){"use strict";function i(e,t){for(var i,n=[],r=0;r<e.length;++r){if(i=s[e[r]]||o(e[r]),!i)throw"module definition dependecy not found: "+e[r];n.push(i)}t.apply(null,n)}function n(e,n,o){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(n===t)throw"invalid module definition, dependencies must be specified";if(o===t)throw"invalid module definition, definition function must be specified";i(n,function(){s[e]=o.apply(null,arguments)})}function o(t){for(var i=e,n=t.split(/[.\/]/),o=0;o<n.length;++o){if(!i[n[o]])return;i=i[n[o]]}return i}function r(i){for(var n=0;n<i.length;n++){for(var o=e,r=i[n],a=r.split(/[.\/]/),l=0;l<a.length-1;++l)o[a[l]]===t&&(o[a[l]]={}),o=o[a[l]];o[a[a.length-1]]=s[r]}}var s={};/**
 * EventUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/EventUtils",[],function(){function e(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n||!1):e.attachEvent&&e.attachEvent("on"+t,i)}function t(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n||!1):e.detachEvent&&e.detachEvent("on"+t,i)}function i(e,t){function i(){return!1}function n(){return!0}var o,r,l=t||{};for(o in e)a[o]||(l[o]=e[o]);if(l.target||(l.target=l.srcElement||document),e&&s.test(e.type)&&e.pageX===r&&e.clientX!==r){var c=l.target.ownerDocument||document,u=c.documentElement,d=c.body;l.pageX=e.clientX+(u&&u.scrollLeft||d&&d.scrollLeft||0)-(u&&u.clientLeft||d&&d.clientLeft||0),l.pageY=e.clientY+(u&&u.scrollTop||d&&d.scrollTop||0)-(u&&u.clientTop||d&&d.clientTop||0)}return l.preventDefault=function(){l.isDefaultPrevented=n,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},l.stopPropagation=function(){l.isPropagationStopped=n,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=n,l.stopPropagation()},l.isDefaultPrevented||(l.isDefaultPrevented=i,l.isPropagationStopped=i,l.isImmediatePropagationStopped=i),l}function n(i,n,o){function r(){o.domLoaded||(o.domLoaded=!0,n(c))}function s(){("complete"===l.readyState||"interactive"===l.readyState&&l.body)&&(t(l,"readystatechange",s),r())}function a(){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(a,0)}r()}var l=i.document,c={type:"ready"};return o.domLoaded?void n(c):(l.addEventListener?"complete"===l.readyState?r():e(i,"DOMContentLoaded",r):(e(l,"readystatechange",s),l.documentElement.doScroll&&i.self===i.top&&a()),void e(i,"load",r))}function o(){function o(e,t){var i,n,o,r,s=h[t];if(i=s&&s[e.type])for(n=0,o=i.length;o>n;n++)if(r=i[n],r&&r.func.call(r.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var s,a,l,c,u,d=this,h={};a=r+(+new Date).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,u={mouseenter:"mouseover",mouseleave:"mouseout"},s=1,d.domLoaded=!1,d.events=h,d.bind=function(t,r,f,p){function m(e){o(i(e||x.event),g)}var g,v,y,b,w,_,C,x=window;if(t&&3!==t.nodeType&&8!==t.nodeType){for(t[a]?g=t[a]:(g=s++,t[a]=g,h[g]={}),p=p||t,r=r.split(" "),y=r.length;y--;)b=r[y],_=m,w=C=!1,"DOMContentLoaded"===b&&(b="ready"),d.domLoaded&&"ready"===b&&"complete"==t.readyState?f.call(p,i({type:b})):(c||(w=u[b],w&&(_=function(e){var t,n;if(t=e.currentTarget,n=e.relatedTarget,n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||(e=i(e||x.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,o(e,g))})),l||"focusin"!==b&&"focusout"!==b||(C=!0,w="focusin"===b?"focus":"blur",_=function(e){e=i(e||x.event),e.type="focus"===e.type?"focusin":"focusout",o(e,g)}),v=h[g][b],v?"ready"===b&&d.domLoaded?f({type:b}):v.push({func:f,scope:p}):(h[g][b]=v=[{func:f,scope:p}],v.fakeName=w,v.capture=C,v.nativeHandler=_,"ready"===b?n(t,_,d):e(t,w||b,_,C)));return t=v=0,f}},d.unbind=function(e,i,n){var o,r,s,l,c,u;if(!e||3===e.nodeType||8===e.nodeType)return d;if(o=e[a]){if(u=h[o],i){for(i=i.split(" "),s=i.length;s--;)if(c=i[s],r=u[c]){if(n)for(l=r.length;l--;)if(r[l].func===n){var f=r.nativeHandler,p=r.fakeName,m=r.capture;r=r.slice(0,l).concat(r.slice(l+1)),r.nativeHandler=f,r.fakeName=p,r.capture=m,u[c]=r}n&&0!==r.length||(delete u[c],t(e,r.fakeName||c,r.nativeHandler,r.capture))}}else{for(c in u)r=u[c],t(e,r.fakeName||c,r.nativeHandler,r.capture);u={}}for(c in u)return d;delete h[o];try{delete e[a]}catch(g){e[a]=null}}return d},d.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return d;n=i(null,n),n.type=t,n.target=e;do r=e[a],r&&o(n,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!n.isPropagationStopped());return d},d.clean=function(e){var t,i,n=d.unbind;if(!e||3===e.nodeType||8===e.nodeType)return d;if(e[a]&&n(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(n(e),i=e.getElementsByTagName("*"),t=i.length;t--;)e=i[t],e[a]&&n(e);return d},d.destroy=function(){h={}},d.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var r="mce-data-",s=/^(?:mouse|contextmenu)|click/,a={keyLocation:1,layerX:1,layerY:1,returnValue:1};return o.Event=new o,o.Event.bind(window,"ready",function(){}),o}),/**
 * Sizzle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */
/**
 * Sizzle CSS Selector Engine v@VERSION
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: @DATE
 */
n("tinymce/dom/Sizzle",[],function(){function e(e,t,i,n){var o,r,s,a,l,c,d,f,p,m;if((t?t.ownerDocument||t:L)!==N&&R(t),t=t||N,i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=t.nodeType)&&9!==a)return[];if(O&&!n){if(o=vt.exec(e))if(s=o[1]){if(9===a){if(r=t.getElementById(s),!r||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&B(t,r)&&r.id===s)return i.push(r),i}else{if(o[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((s=o[3])&&_.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(s)),i}if(_.qsa&&(!H||!H.test(e))){if(f=d=z,p=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=S(e),(d=t.getAttribute("id"))?f=d.replace(bt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=c.length;l--;)c[l]=f+h(c[l]);p=yt.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(i,p.querySelectorAll(m)),i}catch(g){}finally{d||t.removeAttribute("id")}}}return A(e.replace(at,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>C.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[z]=!0,e}function o(e){var t=N.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var i=e.split("|"),n=e.length;n--;)C.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var o,r=e([],i.length,t),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function u(e){return e&&typeof e.getElementsByTagName!==Y&&e}function d(){}function h(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function f(e,t,i){var n=t.dir,o=i&&"parentNode"===n,r=V++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,r)}:function(t,i,s){var a,l,c=[W,r];if(s){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||o){if(l=t[z]||(t[z]={}),(a=l[n])&&a[0]===W&&a[1]===r)return c[2]=a[2];if(l[n]=c,c[2]=e(t,i,s))return!0}}}function p(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function m(t,i,n){for(var o=0,r=i.length;r>o;o++)e(t,i[o],n);return n}function g(e,t,i,n,o){for(var r,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(!i||i(r,n,o))&&(s.push(r),c&&t.push(a));return s}function v(e,t,i,o,r,s){return o&&!o[z]&&(o=v(o)),r&&!r[z]&&(r=v(r,s)),n(function(n,s,a,l){var c,u,d,h=[],f=[],p=s.length,v=n||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!n&&t?v:g(v,h,e,a,l),b=i?r||(n?e:p||o)?[]:s:y;if(i&&i(y,b,a,l),o)for(c=g(b,f),o(c,[],a,l),u=c.length;u--;)(d=c[u])&&(b[f[u]]=!(y[f[u]]=d));if(n){if(r||e){if(r){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(y[u]=d);r(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=r?tt.call(n,d):h[u])>-1&&(n[c]=!(s[c]=d))}}else b=g(b===s?b.splice(p,b.length):b),r?r(null,s,b,l):Z.apply(s,b)})}function y(e){for(var t,i,n,o=e.length,r=C.relative[e[0].type],s=r||C.relative[" "],a=r?1:0,l=f(function(e){return e===t},s,!0),c=f(function(e){return tt.call(t,e)>-1},s,!0),u=[function(e,i,n){return!r&&(n||i!==E)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];o>a;a++)if(i=C.relative[e[a].type])u=[f(p(u),i)];else{if(i=C.filter[e[a].type].apply(null,e[a].matches),i[z]){for(n=++a;o>n&&!C.relative[e[n].type];n++);return v(a>1&&p(u),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(at,"$1"),i,n>a&&y(e.slice(a,n)),o>n&&y(e=e.slice(n)),o>n&&h(e))}u.push(i)}return p(u)}function b(t,i){var o=i.length>0,r=t.length>0,s=function(n,s,a,l,c){var u,d,h,f=0,p="0",m=n&&[],v=[],y=E,b=n||r&&C.find.TAG("*",c),w=W+=null==y?1:Math.random()||.1,_=b.length;for(c&&(E=s!==N&&s);p!==_&&null!=(u=b[p]);p++){if(r&&u){for(d=0;h=t[d++];)if(h(u,s,a)){l.push(u);break}c&&(W=w)}o&&((u=!h&&u)&&f--,n&&m.push(u))}if(f+=p,o&&p!==f){for(d=0;h=i[d++];)h(m,v,s,a);if(n){if(f>0)for(;p--;)m[p]||v[p]||(v[p]=J.call(l));v=g(v)}Z.apply(l,v),c&&!n&&v.length>0&&f+i.length>1&&e.uniqueSort(l)}return c&&(W=w,E=y),m};return o?n(s):s}var w,_,C,x,T,S,k,A,E,M,D,R,N,P,O,H,F,I,B,z="sizzle"+-new Date,L=window.document,W=0,V=0,j=i(),q=i(),U=i(),$=function(e,t){return e===t&&(D=!0),0},Y=typeof t,G=1<<31,K={}.hasOwnProperty,X=[],J=X.pop,Q=X.push,Z=X.push,et=X.slice,tt=X.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt="\\["+nt+"*("+ot+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+nt+"*\\]",st=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ut=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(st),ht=new RegExp("^"+ot+"$"),ft={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),_t=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(X=et.call(L.childNodes),L.childNodes),X[L.childNodes.length].nodeType}catch(Ct){Z={apply:X.length?function(e,t){Q.apply(e,et.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}_=e.support={},T=e.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},R=e.setDocument=function(e){var t,i=e?e.ownerDocument||e:L,n=i.defaultView;return i!==N&&9===i.nodeType&&i.documentElement?(N=i,P=i.documentElement,O=!T(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){R()},!1):n.attachEvent&&n.attachEvent("onunload",function(){R()})),_.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=o(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=gt.test(i.getElementsByClassName),_.getById=o(function(e){return P.appendChild(e).id=z,!i.getElementsByName||!i.getElementsByName(z).length}),_.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==Y&&O){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},C.filter.ID=function(e){var t=e.replace(wt,_t);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(wt,_t);return function(e){var i=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return i&&i.value===t}}),C.find.TAG=_.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},C.find.CLASS=_.getElementsByClassName&&function(e,t){return O?t.getElementsByClassName(e):void 0},F=[],H=[],(_.qsa=gt.test(i.querySelectorAll))&&(o(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&H.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||H.push("\\["+nt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||H.push(":checked")}),o(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&H.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),H.push(",.*:")})),(_.matchesSelector=gt.test(I=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(e){_.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),F.push("!=",st)}),H=H.length&&new RegExp(H.join("|")),F=F.length&&new RegExp(F.join("|")),t=gt.test(P.compareDocumentPosition),B=t||gt.test(P.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=t?function(e,t){if(e===t)return D=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!_.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===L&&B(L,e)?-1:t===i||t.ownerDocument===L&&B(L,t)?1:M?tt.call(M,e)-tt.call(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return D=!0,0;var n,o=0,r=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!r||!a)return e===i?-1:t===i?1:r?-1:a?1:M?tt.call(M,e)-tt.call(M,t):0;if(r===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?s(l[o],c[o]):l[o]===L?-1:c[o]===L?1:0},i):N},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==N&&R(t),i=i.replace(ut,"='$1']"),!(!_.matchesSelector||!O||F&&F.test(i)||H&&H.test(i)))try{var n=I.call(t,i);if(n||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(o){}return e(i,N,null,[t]).length>0},e.contains=function(e,t){return(e.ownerDocument||e)!==N&&R(e),B(e,t)},e.attr=function(e,i){(e.ownerDocument||e)!==N&&R(e);var n=C.attrHandle[i.toLowerCase()],o=n&&K.call(C.attrHandle,i.toLowerCase())?n(e,i,!O):t;return o!==t?o:_.attributes||!O?e.getAttribute(i):(o=e.getAttributeNode(i))&&o.specified?o.value:null},e.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},e.uniqueSort=function(e){var t,i=[],n=0,o=0;if(D=!_.detectDuplicates,M=!_.sortStable&&e.slice(0),e.sort($),D){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return M=null,e},x=e.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=x(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=x(t);return i},C=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,_t),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,_t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&dt.test(i)&&(t=S(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,_t).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(o){var r=e.attr(o,t);return null==r?"!="===i:i?(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r+" ").indexOf(n)>-1:"|="===i?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var c,u,d,h,f,p,m=r!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(u=g[z]||(g[z]={}),c=u[e]||[],f=c[0]===W&&c[1],h=c[0]===W&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[W,f,h];break}}else if(y&&(c=(t[z]||(t[z]={}))[e])&&c[0]===W)h=c[1];else for(;(d=++f&&d&&d[m]||(h=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[z]||(d[z]={}))[e]=[W,h]),d!==t)););return h-=o,h===n||h%n===0&&h/n>=0}}},PSEUDO:function(t,i){var o,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[z]?r(i):r.length>1?(o=[t,t,"",i],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(e,t){for(var n,o=r(e,i),s=o.length;s--;)n=tt.call(e,o[s]),e[n]=!(t[n]=o[s])}):function(e){return r(e,0,o)}):r}},pseudos:{not:n(function(e){var t=[],i=[],o=k(e.replace(at,"$1"));return o[z]?n(function(e,t,i,n){for(var r,s=o(e,null,n,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,n,r){return t[0]=e,o(t,null,r,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(e){return e=e.replace(wt,_t),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:n(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(wt,_t).toLowerCase(),function(e){var i;do if(i=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===P},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return mt.test(e.nodeName)},input:function(e){return pt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[0>i?i+t:i]}),even:c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,S=e.tokenize=function(t,i){var n,o,r,s,a,l,c,u=q[t+" "];if(u)return i?0:u.slice(0);for(a=t,l=[],c=C.preFilter;a;){(!n||(o=lt.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=ct.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(at," ")}),a=a.slice(n.length));for(s in C.filter)!(o=ft[s].exec(a))||c[s]&&!(o=c[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):q(t,l).slice(0)},k=e.compile=function(e,t){var i,n=[],o=[],r=U[e+" "];if(!r){for(t||(t=S(e)),i=t.length;i--;)r=y(t[i]),r[z]?n.push(r):o.push(r);r=U(e,b(o,n)),r.selector=e}return r},A=e.select=function(e,t,i,n){var o,r,s,a,l,c="function"==typeof e&&e,d=!n&&S(e=c.selector||e);if(i=i||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&_.getById&&9===t.nodeType&&O&&C.relative[r[1].type]){if(t=(C.find.ID(s.matches[0].replace(wt,_t),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=ft.needsContext.test(e)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((l=C.find[a])&&(n=l(s.matches[0].replace(wt,_t),yt.test(r[0].type)&&u(t.parentNode)||t))){if(r.splice(o,1),e=n.length&&h(r),!e)return Z.apply(i,n),i;break}}return(c||k(e,d))(n,t,!O,i,yt.test(e)&&u(t.parentNode)||t),i},_.sortStable=z.split("").sort($).join("")===z,_.detectDuplicates=!!D,R(),_.sortDetached=o(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(it,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),e}),/**
 * Tools.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/Tools",[],function(){function e(e){return null===e||e===t?"":(""+e).replace(m,"")}function i(e,i){return i?"array"==i&&g(e)?!0:typeof e==i:e!==t}function n(e){var t,i,n=e;if(!g(e))for(n=[],t=0,i=e.length;i>t;t++)n[t]=e[t];return n}function o(e,t,i){var n;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),i=i||{},n=e.length;n--;)i[e[n]]={};return i}function r(e,i,n){var o,r;if(!e)return 0;if(n=n||e,e.length!==t){for(o=0,r=e.length;r>o;o++)if(i.call(n,e[o],o,e)===!1)return 0}else for(o in e)if(e.hasOwnProperty(o)&&i.call(n,e[o],o,e)===!1)return 0;return 1}function s(e,t){var i=[];return r(e,function(e){i.push(t(e))}),i}function a(e,t){var i=[];return r(e,function(e){(!t||t(e))&&i.push(e)}),i}function l(e,t,i){var n,o,r,s,a,l=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],o=l.createNS(e[3].replace(/\.\w+$/,""),i),!o[r]){if("static"==e[2])return o[r]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[r]));t[r]||(t[r]=function(){},c=1),o[r]=t[r],l.extend(o[r].prototype,t),e[5]&&(n=l.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],a=o[r],o[r]=c?function(){return n[s].apply(this,arguments)}:function(){return this.parent=n[s],a.apply(this,arguments)},o[r].prototype[r]=o[r],l.each(n,function(e,t){o[r].prototype[t]=n[t]}),l.each(t,function(e,t){n[t]?o[r].prototype[t]=function(){return this.parent=n[t],e.apply(this,arguments)}:t!=r&&(o[r].prototype[t]=e)})),l.each(t["static"],function(e,t){o[r][t]=e})}}function c(e,t){var i,n;if(e)for(i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1}function u(e,i){var n,o,r,s,a=arguments;for(n=1,o=a.length;o>n;n++){i=a[n];for(r in i)i.hasOwnProperty(r)&&(s=i[r],s!==t&&(e[r]=s))}return e}function d(e,t,i,n){n=n||this,e&&(i&&(e=e[i]),r(e,function(e,o){return t.call(n,e,o,i)===!1?!1:void d(e,t,i,n)}))}function h(e,t){var i,n;for(t=t||window,e=e.split("."),i=0;i<e.length;i++)n=e[i],t[n]||(t[n]={}),t=t[n];return t}function f(e,t){var i,n;for(t=t||window,e=e.split("."),i=0,n=e.length;n>i&&(t=t[e[i]],t);i++);return t}function p(t,n){return!t||i(t,"array")?t:s(t.split(n||","),e)}var m=/^\s*|\s*$/g,g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:e,isArray:g,is:i,toArray:n,makeMap:o,each:r,map:s,grep:a,inArray:c,extend:u,create:l,walk:d,createNS:h,resolve:f,explode:p}}),/**
 * Env.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/Env",[],function(){var e,t,i,n,o,r,s,a=navigator,l=a.userAgent;e=window.opera&&window.opera.buildNumber,t=/WebKit/.test(l),i=!t&&!e&&/MSIE/gi.test(l)&&/Explorer/gi.test(a.appName),i=i&&/MSIE (\w+)\./.exec(l)[1],n=-1==l.indexOf("Trident/")||-1==l.indexOf("rv:")&&-1==a.appName.indexOf("Netscape")?!1:11,i=i||n,o=!t&&!n&&/Gecko/.test(l),r=-1!=l.indexOf("Mac"),s=/(iPad|iPhone)/.test(l);var c=!s||l.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:e,webkit:t,ie:i,gecko:o,mac:r,iOS:s,contentEditable:c,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=i,range:window.getSelection&&"Range"in window,documentMode:i?document.documentMode||7:10}}),/**
 * DomQuery.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/DomQuery",["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env"],function(e,i,n,o){function r(e){return"undefined"!=typeof e}function s(e){return"string"==typeof e}function a(e,t){var i,n,o;for(t=t||C,o=t.createElement("div"),i=t.createDocumentFragment(),o.innerHTML=e;n=o.firstChild;)i.appendChild(n);return i}function l(e,t,i,n){var o;if(s(t))t=a(t,g(e[0]));else if(t.length&&!t.nodeType){if(t=d.makeArray(t),n)for(o=t.length-1;o>=0;o--)l(e,t[o],i,n);else for(o=0;o<t.length;o++)l(e,t[o],i,n);return e}if(t.nodeType)for(o=e.length;o--;)i.call(e[o],t);return e}function c(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function u(e,t,i){var n,o;return t=d(t)[0],e.each(function(){var e=this;i&&n==e.parentNode?o.appendChild(e):(n=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e),o.appendChild(e))}),e}function d(e,t){return new d.fn.init(e,t)}function h(e,t){var i;if(t.indexOf)return t.indexOf(e);for(i=t.length;i--;)if(t[i]===e)return i;return-1}function f(e){return null===e||e===_?"":(""+e).replace(P,"")}function p(e,t){var i,n,o,r,s;if(e)if(i=e.length,i===r){for(n in e)if(e.hasOwnProperty(n)&&(s=e[n],t.call(s,n,s)===!1))break}else for(o=0;i>o&&(s=e[o],t.call(s,o,s)!==!1);o++);return e}function m(e,t){var i=[];return p(e,function(e,n){t(n,e)&&i.push(n)}),i}function g(e){return e?9==e.nodeType?e:e.ownerDocument:C}function v(e,i,n){var o=[],r=e[i];for("string"!=typeof n&&n instanceof d&&(n=n[0]);r&&9!==r.nodeType;){if(n!==t){if(r===n)break;if("string"==typeof n&&d(r).is(n))break}1===r.nodeType&&o.push(r),r=r[i]}return o}function y(e,i,n,o){var r=[];for(o instanceof d&&(o=o[0]);e;e=e[i])if(!n||e.nodeType===n){if(o!==t){if(e===o)break;if("string"==typeof o&&d(e).is(o))break}r.push(e)}return r}function b(e,t,i){for(e=e[t];e;e=e[t])if(e.nodeType==i)return e;return null}function w(e,t,i){p(i,function(i,n){e[i]=e[i]||{},e[i][t]=n})}var _,C=document,x=Array.prototype.push,T=Array.prototype.slice,S=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=e.Event,A=n.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),E=n.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),M={"for":"htmlFor","class":"className",readonly:"readOnly"},D={"float":"cssFloat"},R={},N={},P=/^\s*|\s*$/g;return d.fn=d.prototype={constructor:d,selector:"",context:null,length:0,init:function(e,t){var i,n,o=this;if(!e)return o;if(e.nodeType)return o.context=o[0]=e,o.length=1,o;if(t&&t.nodeType)o.context=t;else{if(t)return d(e).attr(t);o.context=t=document}if(s(e)){if(o.selector=e,i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:S.exec(e),!i)return d(t).find(e);if(i[1])for(n=a(e,g(t)).firstChild;n;)x.call(o,n),n=n.nextSibling;else{if(n=g(t).getElementById(i[2]),!n)return o;if(n.id!==i[2])return o.find(e);o.length=1,o[0]=n}}else this.add(e,!1);return o},toArray:function(){return n.toArray(this)},add:function(e,t){var i,n,o=this;if(s(e))return o.add(d(e));if(e.nodeType)return o.add([e]);if(t!==!1)for(i=d.unique(o.toArray().concat(d.makeArray(e))),o.length=i.length,n=0;n<i.length;n++)o[n]=i[n];else x.apply(o,d.makeArray(e));return o},attr:function(e,t){var i,n=this;if("object"==typeof e)p(e,function(e,t){n.attr(e,t)});else{if(!r(t)){if(n[0]&&1===n[0].nodeType){if(i=R[e],i&&i.get)return i.get(n[0],e);if(E[e])return n.prop(e)?e:_;t=n[0].getAttribute(e,2),null===t&&(t=_)}return t}this.each(function(){var i;if(1===this.nodeType){if(i=R[e],i&&i.set)return void i.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var i=this;if(e=M[e]||e,"object"==typeof e)p(e,function(e,t){i.prop(e,t)});else{if(!r(t))return i[0]&&i[0].nodeType&&e in i[0]?i[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return i},css:function(e,t){function i(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function n(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var o,s,a=this;if("object"==typeof e)p(e,function(e,t){a.css(e,t)});else if(r(t))e=i(e),"number"!=typeof t||A[e]||(t+="px"),a.each(function(){var i=this.style;if(s=N[e],s&&s.set)return void s.set(this,t);try{this.style[D[e]||e]=t}catch(o){}(null===t||""===t)&&(i.removeProperty?i.removeProperty(n(e)):i.removeAttribute(e))});else{if(o=a[0],s=N[e],s&&s.get)return s.get(o);if(o.ownerDocument.defaultView)try{return o.ownerDocument.defaultView.getComputedStyle(o,null).getPropertyValue(n(e))}catch(l){return _}else if(o.currentStyle)return o.currentStyle[i(e)]}return a},remove:function(){for(var e,t=this,i=this.length;i--;)e=t[i],k.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,i=this.length;i--;)for(e=t[i];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,i=this;if(r(e)){t=i.length;try{for(;t--;)i[t].innerHTML=e}catch(n){d(i[t]).empty().append(e)}return i}return i[0]?i[0].innerHTML:""},text:function(e){var t,i=this;if(r(e)){for(t=i.length;t--;)"innerText"in i[t]?i[t].innerText=e:i[0].textContent=e;return i}return i[0]?i[0].innerText||i[0].textContent:""},append:function(){return l(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return l(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return d(e).append(this),this},prependTo:function(e){return d(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return u(this,e)},wrapAll:function(e){return u(this,e,!0)},wrapInner:function(e){return this.each(function(){d(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),d(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var i=this;return"string"!=typeof e?i:(-1!==e.indexOf(" ")?p(e.split(" "),function(){i.toggleClass(this,t)}):i.each(function(i,n){var o,r;r=c(n,e),r!==t&&(o=n.className,r?n.className=f((" "+o+" ").replace(" "+e+" "," ")):n.className+=o?" "+e:e)}),i)},hasClass:function(e){return c(this[0],e)},each:function(e){return p(this,e)},on:function(e,t){return this.each(function(){k.bind(this,e,t)})},off:function(e,t){return this.each(function(){k.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?k.fire(this,e.type,e):k.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new d(T.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,i,n=[];for(t=0,i=this.length;i>t;t++)d.find(e,this[t],n);return d(n)},filter:function(e){return d("function"==typeof e?m(this.toArray(),function(t,i){return e(i,t)}):d.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof d&&(e=e[0]),this.each(function(i,n){for(;n;){if("string"==typeof e&&d(n).is(e)){t.push(n);break}if(n==e){t.push(n);break}n=n.parentNode}}),d(t)},offset:function(e){var t,i,n,o,r=0,s=0;return e?this.css(e):(t=this[0],t&&(i=t.ownerDocument,n=i.documentElement,t.getBoundingClientRect&&(o=t.getBoundingClientRect(),r=o.left+(n.scrollLeft||i.body.scrollLeft)-n.clientLeft,s=o.top+(n.scrollTop||i.body.scrollTop)-n.clientTop)),{left:r,top:s})},push:x,sort:[].sort,splice:[].splice},n.extend(d,{extend:n.extend,makeArray:n.toArray,inArray:h,isArray:n.isArray,each:p,trim:f,grep:m,find:i,expr:i.selectors,unique:i.uniqueSort,text:i.getText,contains:i.contains,filter:function(e,t,i){var n=t.length;for(i&&(e=":not("+e+")");n--;)1!=t[n].nodeType&&t.splice(n,1);return t=1===t.length?d.find.matchesSelector(t[0],e)?[t[0]]:[]:d.find.matches(e,t)}}),p({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return v(e,"parentNode")},next:function(e){return b(e,"nextSibling",1)},prev:function(e){return b(e,"previousSibling",1)},children:function(e){return y(e.firstChild,"nextSibling",1)},contents:function(e){return n.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){d.fn[e]=function(i){var n=this,o=[];return n.each(function(){var e=t.call(o,this,i,o);e&&(d.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=d.unique(o),0===e.indexOf("parents")&&(o=o.reverse())),o=d(o),i?o.filter(i):o}}),p({parentsUntil:function(e,t){return v(e,"parentNode",t)},nextUntil:function(e,t){return y(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return y(e,"previousSibling",1,t).slice(1)}},function(e,t){d.fn[e]=function(i,n){var o=this,r=[];return o.each(function(){var e=t.call(r,this,i,r);e&&(d.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(r=d.unique(r),(0===e.indexOf("parents")||"prevUntil"===e)&&(r=r.reverse())),r=d(r),n?r.filter(n):r}}),d.fn.is=function(e){return!!e&&this.filter(e).length>0},d.fn.init.prototype=d.fn,d.overrideDefaults=function(e){function t(n,o){return i=i||e(),0===arguments.length&&(n=i.element),o||(o=i.context),new t.fn.init(n,o)}var i;return d.extend(t,this),t},o.ie&&o.ie<8&&(w(R,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?_:t},size:function(e){var t=e.size;return 20===t?_:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?_:t}}),w(R,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),o.ie&&o.ie<9&&(D["float"]="styleFloat",w(N,"set",{opacity:function(e,t){var i=e.style;null===t||""===t?i.removeAttribute("filter"):(i.zoom=1,i.filter="alpha(opacity="+100*t+")")}})),d.attrHooks=R,d.cssHooks=N,d}),/**
 * Styles.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/html/Styles",[],function(){return function(e,t){function i(e,t,i,n){function o(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+o(t)+o(i)+o(n)}var n,o,r,s,a,l=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,c=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,u=/\s*([^:]+):\s*([^;]+);?/g,d=/\s+$/,h={},f="\ufeff";for(e=e||{},t&&(s=t.getValidStyles(),a=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+f).split(" "),o=0;o<r.length;o++)h[r[o]]=f+o,h[f+o]=r[o];return{toHex:function(e){return e.replace(l,i)},parse:function(t){function n(e,t,i){var n,r,s,a;if(n=b[e+"-top"+t],n&&(r=b[e+"-right"+t],r&&(s=b[e+"-bottom"+t],s&&(a=b[e+"-left"+t])))){var l=[n,r,s,a];for(o=l.length-1;o--&&l[o]===l[o+1];);o>-1&&i||(b[e+t]=-1==o?l[0]:l.join(" "),delete b[e+"-top"+t],delete b[e+"-right"+t],delete b[e+"-bottom"+t],delete b[e+"-left"+t])}}function r(e){var t,i=b[e];if(i){for(i=i.split(" "),t=i.length;t--;)if(i[t]!==i[0])return!1;return b[e]=i[0],!0}}function s(e,t,i,n){r(t)&&r(i)&&r(n)&&(b[e]=b[t]+" "+b[i]+" "+b[n],delete b[t],delete b[i],delete b[n])}function a(e){return y=!0,h[e]}function f(e,t){return y&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return h[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(t,i,n,o,r,s){if(r=r||s)return r=f(r),"'"+r.replace(/\'/g,"\\'")+"'";if(i=f(i||n||o),!e.allow_script_urls){var a=i.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(a))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(a))return""}return w&&(i=w.call(_,i,"style")),"url('"+i.replace(/\'/g,"\\'")+"')"}var m,g,v,y,b={},w=e.url_converter,_=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,a).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,a)});m=u.exec(t);){if(g=m[1].replace(d,"").toLowerCase(),v=m[2].replace(d,""),v=v.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))}),g&&v.length>0){if(!e.allow_script_urls&&("behavior"==g||/expression\s*\(|\/\*|\*\//.test(v)))continue;"font-weight"===g&&"700"===v?v="bold":("color"===g||"background-color"===g)&&(v=v.toLowerCase()),v=v.replace(l,i),v=v.replace(c,p),b[g]=y?f(v,!0):v}u.lastIndex=m.index+m[0].length}n("border","",!0),n("border","-width"),n("border","-color"),n("border","-style"),n("padding",""),n("margin",""),s("border","border-width","border-style","border-color"),"medium none"===b.border&&delete b.border,"none"===b["border-image"]&&delete b["border-image"]}return b},serialize:function(e,t){function i(t){var i,o,r,a;if(i=s[t])for(o=0,r=i.length;r>o;o++)t=i[o],a=e[t],a!==n&&a.length>0&&(c+=(c.length>0?" ":"")+t+": "+a+";")}function o(e,t){var i;return i=a["*"],i&&i[e]?!1:(i=a[t],i&&i[e]?!1:!0)}var r,l,c="";if(t&&s)i("*"),i(t);else for(r in e)l=e[r],l!==n&&l.length>0&&(!a||o(r,t))&&(c+=(c.length>0?" ":"")+r+": "+l+";");return c}}}}),/**
 * TreeWalker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/TreeWalker",[],function(){return function(e,t){function i(e,i,n,o){var r,s;if(e){if(!o&&e[i])return e[i];if(e!=t){if(r=e[n])return r;for(s=e.parentNode;s&&s!=t;s=s.parentNode)if(r=s[n])return r}}}var n=e;this.current=function(){return n},this.next=function(e){return n=i(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=i(n,"lastChild","previousSibling",e)}}}),/**
 * Range.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/Range",["tinymce/util/Tools"],function(e){function t(i){function n(){return H.createDocumentFragment()}function o(e,t){x(z,e,t)}function r(e,t){x(L,e,t)}function s(e){o(e.parentNode,$(e))}function a(e){o(e.parentNode,$(e)+1)}function l(e){r(e.parentNode,$(e))}function c(e){r(e.parentNode,$(e)+1)}function u(e){e?(O[j]=O[V],O[q]=O[W]):(O[V]=O[j],O[W]=O[q]),O.collapsed=z}function d(e){s(e),c(e)}function h(e){o(e,0),r(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function f(e,t){var i=O[V],n=O[W],o=O[j],r=O[q],s=t.startContainer,a=t.startOffset,l=t.endContainer,c=t.endOffset;return 0===e?C(i,n,s,a):1===e?C(o,r,s,a):2===e?C(o,r,l,c):3===e?C(i,n,l,c):void 0}function p(){T(B)}function m(){return T(F)}function g(){return T(I)}function v(e){var t,n,o=this[V],r=this[W];3!==o.nodeType&&4!==o.nodeType||!o.nodeValue?(o.childNodes.length>0&&(n=o.childNodes[r]),n?o.insertBefore(e,n):3==o.nodeType?i.insertAfter(e,o):o.appendChild(e)):r?r>=o.nodeValue.length?i.insertAfter(e,o):(t=o.splitText(r),o.parentNode.insertBefore(e,t)):o.parentNode.insertBefore(e,o)}function y(e){var t=O.extractContents();O.insertNode(e),e.appendChild(t),O.selectNode(e)}function b(){return U(new t(i),{startContainer:O[V],startOffset:O[W],endContainer:O[j],endOffset:O[q],collapsed:O.collapsed,commonAncestorContainer:O.commonAncestorContainer})}function w(e,t){var i;if(3==e.nodeType)return e;if(0>t)return e;for(i=e.firstChild;i&&t>0;)--t,i=i.nextSibling;return i?i:e}function _(){return O[V]==O[j]&&O[W]==O[q]}function C(e,t,n,o){var r,s,a,l,c,u;if(e==n)return t==o?0:o>t?-1:1;for(r=n;r&&r.parentNode!=e;)r=r.parentNode;if(r){for(s=0,a=e.firstChild;a!=r&&t>s;)s++,a=a.nextSibling;return s>=t?-1:1}for(r=e;r&&r.parentNode!=n;)r=r.parentNode;if(r){for(s=0,a=n.firstChild;a!=r&&o>s;)s++,a=a.nextSibling;return o>s?-1:1}for(l=i.findCommonAncestor(e,n),c=e;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),u=n;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),c==u)return 0;for(a=l.firstChild;a;){if(a==c)return-1;if(a==u)return 1;a=a.nextSibling}}function x(e,t,n){var o,r;for(e?(O[V]=t,O[W]=n):(O[j]=t,O[q]=n),o=O[j];o.parentNode;)o=o.parentNode;for(r=O[V];r.parentNode;)r=r.parentNode;r==o?C(O[V],O[W],O[j],O[q])>0&&O.collapse(e):O.collapse(e),O.collapsed=_(),O.commonAncestorContainer=i.findCommonAncestor(O[V],O[j])}function T(e){var t,i,n,o,r,s,a,l=0,c=0;if(O[V]==O[j])return S(e);for(t=O[j],i=t.parentNode;i;t=i,i=i.parentNode){if(i==O[V])return k(t,e);++l}for(t=O[V],i=t.parentNode;i;t=i,i=i.parentNode){if(i==O[j])return A(t,e);++c}for(n=c-l,o=O[V];n>0;)o=o.parentNode,n--;for(r=O[j];0>n;)r=r.parentNode,n++;for(s=o.parentNode,a=r.parentNode;s!=a;s=s.parentNode,a=a.parentNode)o=s,r=a;return E(o,r,e)}function S(e){var t,i,o,r,s,a,l,c,u;if(e!=B&&(t=n()),O[W]==O[q])return t;if(3==O[V].nodeType){if(i=O[V].nodeValue,o=i.substring(O[W],O[q]),e!=I&&(r=O[V],c=O[W],u=O[q]-O[W],0===c&&u>=r.nodeValue.length-1?r.parentNode.removeChild(r):r.deleteData(c,u),O.collapse(z)),e==B)return;return o.length>0&&t.appendChild(H.createTextNode(o)),t}for(r=w(O[V],O[W]),s=O[q]-O[W];r&&s>0;)a=r.nextSibling,l=N(r,e),t&&t.appendChild(l),--s,r=a;return e!=I&&O.collapse(z),t}function k(e,t){var i,o,r,s,a,l;if(t!=B&&(i=n()),o=M(e,t),i&&i.appendChild(o),r=$(e),s=r-O[W],0>=s)return t!=I&&(O.setEndBefore(e),O.collapse(L)),i;for(o=e.previousSibling;s>0;)a=o.previousSibling,l=N(o,t),i&&i.insertBefore(l,i.firstChild),--s,o=a;return t!=I&&(O.setEndBefore(e),O.collapse(L)),i}function A(e,t){var i,o,r,s,a,l;for(t!=B&&(i=n()),r=D(e,t),i&&i.appendChild(r),o=$(e),++o,s=O[q]-o,r=e.nextSibling;r&&s>0;)a=r.nextSibling,l=N(r,t),i&&i.appendChild(l),--s,r=a;return t!=I&&(O.setStartAfter(e),O.collapse(z)),i}function E(e,t,i){var o,r,s,a,l,c,u;for(i!=B&&(r=n()),o=D(e,i),r&&r.appendChild(o),s=$(e),a=$(t),++s,l=a-s,c=e.nextSibling;l>0;)u=c.nextSibling,o=N(c,i),r&&r.appendChild(o),c=u,--l;return o=M(t,i),r&&r.appendChild(o),i!=I&&(O.setStartAfter(e),O.collapse(z)),r}function M(e,t){var i,n,o,r,s,a=w(O[j],O[q]-1),l=a!=O[j];if(a==e)return R(a,l,L,t);for(i=a.parentNode,n=R(i,L,L,t);i;){for(;a;)o=a.previousSibling,r=R(a,l,L,t),t!=B&&n.insertBefore(r,n.firstChild),l=z,a=o;if(i==e)return n;a=i.previousSibling,i=i.parentNode,s=R(i,L,L,t),t!=B&&s.appendChild(n),n=s}}function D(e,t){var i,n,o,r,s,a=w(O[V],O[W]),l=a!=O[V];if(a==e)return R(a,l,z,t);for(i=a.parentNode,n=R(i,L,z,t);i;){for(;a;)o=a.nextSibling,r=R(a,l,z,t),t!=B&&n.appendChild(r),l=z,a=o;if(i==e)return n;a=i.nextSibling,i=i.parentNode,s=R(i,L,z,t),t!=B&&s.appendChild(n),n=s}}function R(e,t,n,o){var r,s,a,l,c;if(t)return N(e,o);if(3==e.nodeType){if(r=e.nodeValue,n?(l=O[W],s=r.substring(l),a=r.substring(0,l)):(l=O[q],s=r.substring(0,l),a=r.substring(l)),o!=I&&(e.nodeValue=a),o==B)return;return c=i.clone(e,L),c.nodeValue=s,c}if(o!=B)return i.clone(e,L)}function N(e,t){return t!=B?t==I?i.clone(e,z):e:void e.parentNode.removeChild(e)}function P(){return i.create("body",null,g()).outerText}var O=this,H=i.doc,F=0,I=1,B=2,z=!0,L=!1,W="startOffset",V="startContainer",j="endContainer",q="endOffset",U=e.extend,$=i.nodeIndex;return U(O,{startContainer:H,startOffset:0,endContainer:H,endOffset:0,collapsed:z,commonAncestorContainer:H,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:r,setStartBefore:s,setStartAfter:a,setEndBefore:l,setEndAfter:c,collapse:u,selectNode:d,selectNodeContents:h,compareBoundaryPoints:f,deleteContents:p,extractContents:m,cloneContents:g,insertNode:v,surroundContents:y,cloneRange:b,toStringIE:P}),O}return t.prototype.toString=function(){return this.toStringIE()},t}),/**
 * Entities.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/html/Entities",["tinymce/util/Tools"],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function i(e,t){var i,n,r,s={};if(e){for(e=e.split(","),t=t||10,i=0;i<e.length;i+=2)n=String.fromCharCode(parseInt(e[i],t)),o[n]||(r="&"+e[i+1]+";",s[n]=r,s[r]=n);return s}}var n,o,r,s=e.makeMap,a=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,u=/&(#x|#)?([\w]+);/g,d={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};o={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},n=i("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var h={encodeRaw:function(e,t){return e.replace(t?a:l,function(e){return o[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return o[e]||e})},encodeNumeric:function(e,t){return e.replace(t?a:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":o[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,i){return i=i||n,e.replace(t?a:l,function(e){return o[e]||i[e]||e})},getEncodeFunc:function(e,t){function r(e,i){return e.replace(i?a:l,function(e){return o[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,i){return h.encodeNamed(e,i,t)}return t=i(t)||n,e=s(e.replace(/\+/g,",")),e.named&&e.numeric?r:e.named?t?c:h.encodeNamed:e.numeric?h.encodeNumeric:h.encodeRaw},decode:function(e){return e.replace(u,function(e,i,o){return i?(o=parseInt(o,2===i.length?16:10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(1023&o))):d[o]||String.fromCharCode(o)):r[e]||n[e]||t(e)})}};return h}),/**
 * StyleSheetLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/StyleSheetLoader",[],function(){return function(e,t){function i(t){e.getElementsByTagName("head")[0].appendChild(t)}function n(t,n,a){function l(){for(var e=v.passed,t=e.length;t--;)e[t]();v.status=2,v.passed=[],v.failed=[]}function c(){for(var e=v.failed,t=e.length;t--;)e[t]();v.status=3,v.passed=[],v.failed=[]}function u(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function d(e,t){e()||((new Date).getTime()-g<o?window.setTimeout(t,0):c())}function h(){d(function(){for(var t,i,n=e.styleSheets,o=n.length;o--;)if(t=n[o],i=t.ownerNode?t.ownerNode:t.owningElement,i&&i.id===p.id)return l(),!0},h)}function f(){d(function(){try{var e=m.sheet.cssRules;return l(),!!e}catch(t){}},f)}var p,m,g,v;if(s[t]?v=s[t]:(v={passed:[],failed:[]},s[t]=v),n&&v.passed.push(n),a&&v.failed.push(a),1!=v.status){if(2==v.status)return void l();if(3==v.status)return void c();if(v.status=1,p=e.createElement("link"),p.rel="stylesheet",p.type="text/css",p.id="u"+r++,p.async=!1,p.defer=!1,g=(new Date).getTime(),"onload"in p&&!u())p.onload=h,p.onerror=c;else{if(navigator.userAgent.indexOf("Firefox")>0)return m=e.createElement("style"),m.textContent='@import "'+t+'"',f(),void i(m);h()}i(p),p.href=t}}var o,r=0,s={};t=t||{},o=t.maxLoadTime||5e3,this.load=n}}),/**
 * DOMUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],function(e,i,n,o,r,s,a,l,c,u){function d(e,t){var i,n={},o=t.keep_values;return i={set:function(i,n,o){t.url_converter&&(n=t.url_converter.call(t.url_converter_scope||e,n,o,i[0])),i.attr("data-mce-"+o,n).attr(o,n)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},n={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(o&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var i=t.attr("data-mce-style")||t.attr("style");return i=e.serializeStyle(e.parseStyle(i),t[0].nodeName)}}},o&&(n.href=n.src=i),n}function h(e,t){var r,s=this;s.doc=e,s.win=window,s.files={},s.counter=0,s.stdMode=!v||e.documentMode>=8,s.boxModel=!v||"CSS1Compat"==e.compatMode||s.stdMode,s.styleSheetLoader=new u(e),s.boundEvents=[],s.settings=t=t||{},s.schema=t.schema,s.styles=new n({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),s.fixDoc(e),s.events=t.ownEvents?new o(t.proxy):o.Event,s.attrHooks=d(s,t),r=t.schema?t.schema.getBlockElements():{},s.$=i.overrideDefaults(function(){return{context:e,element:s.getRoot()}}),s.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!r[e.nodeName]):!!r[e]}}var f=c.each,p=c.is,m=c.grep,g=c.trim,v=l.ie,y=/^([a-z0-9],?)+$/i,b=/^[ \t\r\n]*$/;return h.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t,i=this.settings;if(v&&i.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in i.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var i,n,o=this;return!v||1!==e.nodeType||t?e.cloneNode(t):(n=o.doc,t?i.firstChild:(i=n.createElement(e.nodeName),f(o.getAttribs(e),function(t){o.setAttrib(i,t.nodeName,o.getAttrib(e,t.nodeName))}),i))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,i;return e=e?e:this.win,t=e.document,i=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||i.scrollLeft,y:e.pageYOffset||i.scrollTop,w:e.innerWidth||i.clientWidth,h:e.innerHeight||i.clientHeight}},getRect:function(e){var t,i,n=this;return e=n.get(e),t=n.getPos(e),i=n.getSize(e),{x:t.x,y:t.y,w:i.w,h:i.h}},getSize:function(e){var t,i,n=this;return e=n.get(e),t=n.getStyle(e,"width"),i=n.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===i.indexOf("px")&&(i=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(i,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,i){return this.getParents(e,t,i,!1)},getParents:function(e,i,n,o){var r,s=this,a=[];for(e=s.get(e),o=o===t,n=n||("BODY"!=s.getRoot().nodeName?s.getRoot().parentNode:null),p(i,"string")&&(r=i,i="*"===i?function(e){return 1==e.nodeType}:function(e){return s.is(e,r)});e&&e!=n&&e.nodeType&&9!==e.nodeType;){if(!i||i(e)){if(!o)return e;a.push(e)}e=e.parentNode}return o?a:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,i){var n=this;return e(t,n.get(i)||n.settings.root_element||n.doc,[])},is:function(i,n){var o;if(i.length===t){if("*"===n)return 1==i.nodeType;if(y.test(n)){for(n=n.toLowerCase().split(/,/),i=i.nodeName.toLowerCase(),o=n.length-1;o>=0;o--)if(n[o]==i)return!0;return!1}}if(i.nodeType&&1!=i.nodeType)return!1;var r=i.nodeType?[i]:i;return e(n,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,i,n,o){var r=this;return this.run(e,function(e){var s;return s=p(t,"string")?r.doc.createElement(t):t,r.setAttribs(s,i),n&&(n.nodeType?s.appendChild(n):r.setHTML(s,n)),o?s:e.appendChild(s)})},create:function(e,t,i){return this.add(this.doc.createElement(e),e,t,i,1)},createHTML:function(e,t,i){var n,o="";o+="<"+e;for(n in t)t.hasOwnProperty(n)&&null!==t[n]&&"undefined"!=typeof t[n]&&(o+=" "+n+'="'+this.encode(t[n])+'"');return"undefined"!=typeof i?o+">"+i+"</"+e+">":o+" />"},createFragment:function(e){var t,i,n,o=this.doc;for(n=o.createElement("div"),t=o.createDocumentFragment(),e&&(n.innerHTML=e);i=n.firstChild;)t.appendChild(i);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,i){e=this.$$(e).css(t,i),this.settings.update_styles&&e.attr("data-mce-style",null)},getStyle:function(e,i,n){return e=this.$$(e),n?e.css(i):(i=i.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==i&&(i=v?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[i]:t)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&e.attr("data-mce-style",null)},removeAllAttribs:function(e){return this.run(e,function(e){var t,i=e.attributes;for(t=i.length-1;t>=0;t--)e.removeAttributeNode(i.item(t))})},setAttrib:function(e,t,i){var n,o,r=this,s=r.settings;""===i&&(i=null),e=r.$$(e),n=e.attr(t),e.length&&(o=r.attrHooks[t],o&&o.set?o.set(e,i,t):e.attr(t,i),n!=i&&s.onSetAttrib&&s.onSetAttrib({attrElm:e,attrName:t,attrValue:i}))},setAttribs:function(e,t){var i=this;i.$$(e).each(function(e,n){f(t,function(e,t){i.setAttrib(n,t,e)})})},getAttrib:function(e,t,i){var n,o,r=this;return e=r.$$(e),e.length&&(n=r.attrHooks[t],o=n&&n.get?n.get(e,t):e.attr(t)),"undefined"==typeof o&&(o=i||""),o},getPos:function(e,t){var n,o,r=this,s=0,a=0,l=r.doc,c=l.body;if(e=r.get(e),t=t||c,e){if(t===c&&e.getBoundingClientRect&&"static"===i(c).css("position"))return o=e.getBoundingClientRect(),t=r.boxModel?l.documentElement:c,s=o.left+(l.documentElement.scrollLeft||c.scrollLeft)-t.clientLeft,a=o.top+(l.documentElement.scrollTop||c.scrollTop)-t.clientTop,{x:s,y:a};for(n=e;n&&n!=t&&n.nodeType;)s+=n.offsetLeft||0,a+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!=t&&n.nodeType;)s-=n.scrollLeft||0,a-=n.scrollTop||0,n=n.parentNode}return{x:s,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,i,n=this,o=n.doc;if(n!==h.DOM&&o===document){var r=h.DOM.addedStyles;if(r=r||[],r[e])return;r[e]=!0,h.DOM.addedStyles=r}i=o.getElementById("mceDefaultStyles"),i||(i=o.createElement("style"),i.id="mceDefaultStyles",i.type="text/css",t=o.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(o.createTextNode(e))},loadCSS:function(e){var t,i=this,n=i.doc;return i!==h.DOM&&n===document?void h.DOM.loadCSS(e):(e||(e=""),t=n.getElementsByTagName("head")[0],void f(e.split(","),function(e){var o;i.files[e]||(i.files[e]=!0,o=i.create("link",{rel:"stylesheet",href:e}),v&&n.documentMode&&n.recalc&&(o.onload=function(){n.recalc&&n.recalc(),o.onload=null}),t.appendChild(o))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,n){this.$$(e).toggleClass(t,n).each(function(){""===this.className&&i(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),v?e.each(function(e,n){if(n.canHaveHTML!==!1){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(o){i("<div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):e.html(t)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType?e.outerHTML:i("<div>").append(i(e).clone()).html()},setOuterHTML:function(e,t){var n=this;n.$$(e).each(function(){try{this.outerHTML=t}catch(e){n.remove(i(this).html(t),!0)}})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var i,n;return i=t.parentNode,n=t.nextSibling,n?i.insertBefore(e,n):i.appendChild(e),e})},replace:function(e,t,i){var n=this;return n.run(t,function(t){return p(t,"array")&&(e=e.cloneNode(!0)),i&&f(m(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var i,n=this;return e.nodeName!=t.toUpperCase()&&(i=n.create(t),f(n.getAttribs(e),function(t){n.setAttrib(i,t.nodeName,n.getAttrib(e,t.nodeName))}),n.replace(i,e,1)),i||e},findCommonAncestor:function(e,t){for(var i,n=e;n;){for(i=t;i&&n!=i;)i=i.parentNode;if(n==i)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){return this.styles.toHex(c.trim(e))},run:function(e,t,i){var n,o=this;return"string"==typeof e&&(e=o.get(e)),e?(i=i||this,e.nodeType||!e.length&&0!==e.length?t.call(i,e):(n=[],f(e,function(e,r){e&&("string"==typeof e&&(e=o.get(e)),n.push(t.call(i,e,r)))}),n)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(v){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var i=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(i,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var i,n,o,s,a,l=this,c=0;if(e=e.firstChild){s=new r(e,e.parentNode),t=t||(l.schema?l.schema.getNonEmptyElements():null);do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(a=e.nodeName.toLowerCase(),t&&t[a]){if("br"===a){c++;continue}return!1}for(n=l.getAttribs(e),i=n.length;i--;)if(a=n[i].nodeName,"name"===a||"data-mce-bookmark"===a)return!1}if(8==o)return!1;if(3===o&&!b.test(e.nodeValue))return!1}while(e=s.next())}return 1>=c},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new s(this)},nodeIndex:function(e,t){var i,n,o=0;if(e)for(i=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)n=e.nodeType,(!t||3!=n||n!=i&&e.nodeValue.length)&&(o++,i=n);return o},split:function(e,t,i){function n(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,i=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&i}var i,o=e.childNodes,r=e.nodeType;if(1!=r||"bookmark"!=e.getAttribute("data-mce-type")){for(i=o.length-1;i>=0;i--)n(o[i]);if(9!=r){if(3==r&&e.nodeValue.length>0){var s=g(e.nodeValue).length;if(!a.isBlock(e.parentNode)||s>0||0===s&&t(e))return}else if(1==r&&(o=e.childNodes,1==o.length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(o[0],e),o.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;a.remove(e)}return e}}var o,r,s,a=this,l=a.createRng();return e&&t?(l.setStart(e.parentNode,a.nodeIndex(e)),l.setEnd(t.parentNode,a.nodeIndex(t)),o=l.extractContents(),l=a.createRng(),l.setStart(t.parentNode,a.nodeIndex(t)+1),l.setEnd(e.parentNode,a.nodeIndex(e)+1),r=l.extractContents(),s=e.parentNode,s.insertBefore(n(o),e),i?s.replaceChild(i,t):s.insertBefore(t,e),s.insertBefore(n(r),e),a.remove(e),i||t):void 0},bind:function(e,t,i,n){var o=this;if(c.isArray(e)){for(var r=e.length;r--;)e[r]=o.bind(e[r],t,i,n);return e}return!o.settings.collect||e!==o.doc&&e!==o.win||o.boundEvents.push([e,t,i,n]),o.events.bind(e,t,i,n||o)},unbind:function(e,t,i){var n,o=this;if(c.isArray(e)){for(n=e.length;n--;)e[n]=o.unbind(e[n],t,i);return e}if(o.boundEvents&&(e===o.doc||e===o.win))for(n=o.boundEvents.length;n--;){var r=o.boundEvents[n];e!=r[0]||t&&t!=r[1]||i&&i!=r[2]||this.events.unbind(r[0],r[1],r[2])}return this.events.unbind(e,t,i)},fire:function(e,t,i){return this.events.fire(e,t,i)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),i=null;e&&e!==t&&(i=this.getContentEditable(e),null===i);e=e.parentNode);return i},destroy:function(){var t=this;if(t.boundEvents){for(var i=t.boundEvents.length;i--;){var n=t.boundEvents[i];this.events.unbind(n[0],n[1],n[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,i){var n=this,o=t;if(e)for("string"==typeof o&&(o=function(e){return n.is(e,t)}),e=e[i];e;e=e[i])if(o(e))return e;return null}},h.DOM=new h(document),h}),/**
 * ScriptLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/ScriptLoader",["tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t){function i(){function e(e,t){function i(){a.remove(s),r&&(r.onreadystatechange=r.onload=r=null),t()}function o(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var r,s,a=n;s=a.uniqueId(),r=document.createElement("script"),r.id=s,r.type="text/javascript",r.src=e,"onreadystatechange"in r?r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&i()}:r.onload=i,r.onerror=o,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}var t,i=0,s=1,a=2,l={},c=[],u={},d=[],h=0;this.isDone=function(e){return l[e]==a},this.markDone=function(e){l[e]=a},this.add=this.load=function(e,n,o){var r=l[e];r==t&&(c.push(e),l[e]=i),n&&(u[e]||(u[e]=[]),u[e].push({func:n,scope:o||this}))},this.loadQueue=function(e,t){this.loadScripts(c,e,t)},this.loadScripts=function(i,n,c){function f(e){o(u[e],function(e){e.func.call(e.scope)}),u[e]=t}var p;d.push({func:n,scope:c||this}),(p=function(){var t=r(i);i.length=0,o(t,function(t){return l[t]==a?void f(t):void(l[t]!=s&&(l[t]=s,h++,e(t,function(){l[t]=a,h--,f(t),p()})))}),h||(o(d,function(e){e.func.call(e.scope)}),d.length=0)})()}}var n=e.DOM,o=t.each,r=t.grep;return i.ScriptLoader=new i,i}),/**
 * AddOnManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/AddOnManager",["tinymce/dom/ScriptLoader","tinymce/util/Tools"],function(e,i){function n(){var e=this;e.items=[],e.urls={},e.lookup={}}var o=i.each;return n.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,i){var o=n.language;if(o&&n.languageLoad!==!1){if(i)if(i=","+i+",",-1!=i.indexOf(","+o.substr(0,2)+","))o=o.substr(0,2);else if(-1==i.indexOf(","+o+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+o+".js")}},add:function(e,t,i){return this.items.push(t),this.lookup[e]={instance:t,dependencies:i},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,i){var n=this.urls[t];o(i,function(t){e.ScriptLoader.add(n+"/"+t)})},load:function(i,r,s,a){function l(){var n=c.dependencies(i);o(n,function(e){var i=c.createUrl(r,e);c.load(i.resource,i,t,t)}),s&&s.call(a?a:e)}var c=this,u=r;c.urls[i]||("object"==typeof r&&(u=r.prefix+r.resource+r.suffix),0!==u.indexOf("/")&&-1==u.indexOf("://")&&(u=n.baseURL+"/"+u),c.urls[i]=u.substring(0,u.lastIndexOf("/")),c.lookup[i]?l():e.ScriptLoader.add(u,l,a))}},n.PluginManager=new n,n.ThemeManager=new n,n}),/**
 * RangeUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/RangeUtils",["tinymce/util/Tools","tinymce/dom/TreeWalker"],function(e,t){function i(e,t){var i=e.childNodes;return t--,t>i.length-1?t=i.length-1:0>t&&(t=0),i[t]||e}function n(e){this.walk=function(t,n){function r(e){var t;return t=e[0],3===t.nodeType&&t===g&&v>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===b&&e.length>0&&t===y&&3===t.nodeType&&e.splice(e.length-1,1),e}function s(e,t,i){for(var n=[];e&&e!=i;e=e[t])n.push(e);return n}function a(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function l(e,t,i){var o=i?"nextSibling":"previousSibling";for(h=e,f=h.parentNode;h&&h!=t;h=f)f=h.parentNode,p=s(h==e?h:h[o],o),p.length&&(i||p.reverse(),n(r(p)))}var c,u,d,h,f,p,m,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(m=e.select("td.mce-item-selected,th.mce-item-selected"),m.length>0)return void o(m,function(e){n([e])});if(1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[v]),1==y.nodeType&&y.hasChildNodes()&&(y=i(y,b)),g==y)return n(r([g]));for(c=e.findCommonAncestor(g,y),h=g;h;h=h.parentNode){if(h===y)return l(g,c,!0);if(h===c)break}for(h=y;h;h=h.parentNode){if(h===g)return l(y,c);if(h===c)break}u=a(g,c)||g,d=a(y,c)||y,l(g,u,!0),p=s(u==g?u:u.nextSibling,"nextSibling",d==y?d.nextSibling:d),p.length&&n(r(p)),l(y,d)},this.split=function(e){function t(e,t){return e.splitText(t)}var i=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;return i==o&&3==i.nodeType?n>0&&n<i.nodeValue.length&&(o=t(i,n),i=o.previousSibling,r>n?(r-=n,i=o=t(o,r).previousSibling,r=o.nodeValue.length,n=0):r=0):(3==i.nodeType&&n>0&&n<i.nodeValue.length&&(i=t(i,n),n=0),3==o.nodeType&&r>0&&r<o.nodeValue.length&&(o=t(o,r).previousSibling,r=o.nodeValue.length)),{startContainer:i,startOffset:n,endContainer:o,endOffset:r}},this.normalize=function(i){function n(n){function s(i,n){for(var o=new t(i,e.getParent(i.parentNode,e.isBlock)||g);i=o[n?"prev":"next"]();)if("BR"===i.nodeName)return!0}function a(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function l(i,n){var s,a,l;if(n=n||c,l=e.getParent(n.parentNode,e.isBlock)||g,i&&"BR"==n.nodeName&&m&&e.isEmpty(l))return c=n.parentNode,u=e.nodeIndex(n),void(o=!0);for(s=new t(n,l);h=s[i?"prev":"next"]();){if("false"===e.getContentEditableParent(h))return;if(3===h.nodeType&&h.nodeValue.length>0)return c=h,u=i?h.nodeValue.length:0,void(o=!0);if(e.isBlock(h)||f[h.nodeName.toLowerCase()])return;a=h}r&&a&&(c=a,o=!0,u=0)}var c,u,d,h,f,p,m,g=e.getRoot();if(c=i[(n?"start":"end")+"Container"],u=i[(n?"start":"end")+"Offset"],m=1==c.nodeType&&u===c.childNodes.length,f=e.schema.getNonEmptyElements(),p=n,1==c.nodeType&&u>c.childNodes.length-1&&(p=!1),9===c.nodeType&&(c=e.getRoot(),u=0),c===g){if(p&&(h=c.childNodes[u>0?u-1:0],h&&(f[h.nodeName]||"TABLE"==h.nodeName)))return;if(c.hasChildNodes()&&(u=Math.min(!p&&u>0?u-1:u,c.childNodes.length-1),c=c.childNodes[u],u=0,c.hasChildNodes()&&!/TABLE/.test(c.nodeName))){h=c,d=new t(c,g);do{if(3===h.nodeType&&h.nodeValue.length>0){u=p?0:h.nodeValue.length,c=h,o=!0;break}if(f[h.nodeName.toLowerCase()]){u=e.nodeIndex(h),c=h.parentNode,"IMG"!=h.nodeName||p||u++,o=!0;break}}while(h=p?d.next():d.prev())}}r&&(3===c.nodeType&&0===u&&l(!0),1===c.nodeType&&(h=c.childNodes[u],h||(h=c.childNodes[u-1]),!h||"BR"!==h.nodeName||a(h,"A")||s(h)||s(h,!0)||l(!0,h))),p&&!r&&3===c.nodeType&&u===c.nodeValue.length&&l(!1),o&&i["set"+(n?"Start":"End")](c,u)}var o,r;return r=i.collapsed,n(!0),r||n(),o&&r&&i.collapse(!0),o}}var o=e.each;return n.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},n}),/**
 * NodeChange.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/NodeChange",["tinymce/dom/RangeUtils"],function(e){return function(t){function i(e){var i,n;if(n=t.$(e).parentsUntil(t.getBody()).add(e),n.length===o.length){for(i=n.length;i>=0&&n[i]===o[i];i--);if(-1===i)return o=n,!0}return o=n,!1}var n,o=[];"onselectionchange"in t.getDoc()||t.on("NodeChange Click MouseUp KeyUp Focus",function(i){var o,r;o=t.selection.getRng(),r={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset},"nodechange"!=i.type&&e.compareRanges(r,n)||t.fire("SelectionChange"),n=r}),t.on("contextmenu",function(){t.fire("SelectionChange")}),t.on("SelectionChange",function(){var e=t.selection.getStart(!0);t.selection.isCollapsed()||i(e)||!t.dom.isChildOf(e,t.getBody())||t.nodeChanged({selectionChange:!0})}),t.on("MouseUp",function(e){e.isDefaultPrevented()||setTimeout(function(){t.nodeChanged()},0)}),this.nodeChanged=function(e){var i,n,o,r=t.selection;t.initialized&&r&&!t.settings.disable_nodechange&&!t.settings.readonly&&(o=t.getBody(),i=r.getStart()||o,i=i.ownerDocument!=t.getDoc()?t.getBody():i,"IMG"==i.nodeName&&r.isCollapsed()&&(i=i.parentNode),n=[],t.dom.getParent(i,function(e){return e===o?!0:void n.push(e)}),e=e||{},e.element=i,e.parents=n,t.fire("NodeChange",e))}}}),/**
 * Node.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/html/Node",[],function(){function e(e,t,i){var n,o,r=i?"lastChild":"firstChild",s=i?"prev":"next";if(e[r])return e[r];if(e!==t){if(n=e[s])return n;for(o=e.parent;o&&o!==t;o=o.parent)if(n=o[s])return n}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var i=/^[ \t\r\n]*$/,n={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var i,n,o,r=this;if("string"!=typeof e){for(n in e)r.attr(n,e[n]);return r}if(i=r.attributes){if(t!==o){if(null===t){if(e in i.map)for(delete i.map[e],n=i.length;n--;)if(i[n].name===e)return i=i.splice(n,1),r;return r}if(e in i.map){for(n=i.length;n--;)if(i[n].name===e){i[n].value=t;break}}else i.push({name:e,value:t});return i.map[e]=t,r}return i.map[e]}},clone:function(){var e,i,n,o,r,s=this,a=new t(s.name,s.type);if(n=s.attributes){for(r=[],r.map={},e=0,i=n.length;i>e;e++)o=n[e],"id"!==o.name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);a.attributes=r}return a.value=s.value,a.shortEnded=s.shortEnded,a},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,i=this;for(e=i.firstChild;e;)t=e.next,i.insert(e,i,!0),e=t;i.remove()},remove:function(){var e=this,t=e.parent,i=e.next,n=e.prev;return t&&(t.firstChild===e?(t.firstChild=i,i&&(i.prev=null)):n.next=i,t.lastChild===e?(t.lastChild=n,n&&(n.next=null)):i.prev=n,e.parent=e.next=e.prev=null),e},append:function(e){var t,i=this;return e.parent&&e.remove(),t=i.lastChild,t?(t.next=e,e.prev=t,i.lastChild=e):i.lastChild=i.firstChild=e,e.parent=i,e},insert:function(e,t,i){var n;return e.parent&&e.remove(),n=t.parent||this,i?(t===n.firstChild?n.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===n.lastChild?n.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=n,e},getAll:function(t){var i,n=this,o=[];for(i=n.firstChild;i;i=e(i,n))i.name===t&&o.push(i);return o},empty:function(){var t,i,n,o=this;if(o.firstChild){for(t=[],n=o.firstChild;n;n=e(n,o))t.push(n);for(i=t.length;i--;)n=t[i],n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}return o.firstChild=o.lastChild=null,o},isEmpty:function(t){var n,o,r=this,s=r.firstChild;if(s)do{if(1===s.type){if(s.attributes.map["data-mce-bogus"])continue;if(t[s.name])return!1;for(n=s.attributes.length;n--;)if(o=s.attributes[n].name,"name"===o||0===o.indexOf("data-mce-bookmark"))return!1}if(8===s.type)return!1;if(3===s.type&&!i.test(s.value))return!1}while(s=e(s,r));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,i){var o,r;if(o=new t(e,n[e]||1),i)for(r in i)o.attr(r,i[r]);return o},t}),/**
 * Schema.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/html/Schema",["tinymce/util/Tools"],function(e){function t(e,t){return e?e.split(t||" "):[]}function i(e){function i(e,i,n){function o(e,t){var i,n,o={};for(i=0,n=e.length;n>i;i++)o[e[i]]=t||{};return o}var a,l,c,u=arguments;for(n=n||[],i=i||"","string"==typeof n&&(n=t(n)),l=3;l<u.length;l++)"string"==typeof u[l]&&(u[l]=t(u[l])),n.push.apply(n,u[l]);for(e=t(e),a=e.length;a--;)c=[].concat(s,t(i)),f[e[a]]={attributes:o(c),attributesOrder:c,children:o(n,r)}}function n(e,i){var n,o,r,s;for(e=t(e),n=e.length,i=t(i);n--;)for(o=f[e[n]],r=0,s=i.length;s>r;r++)o.attributes[i[r]]={},o.attributesOrder.push(i[r])}var s,l,c,u,d,h,f={};return o[e]?o[e]:(s=t("id accesskey class dir lang style tabindex title"),l=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),c=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(s.push.apply(s,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),l.push.apply(l,t("article aside details dialog figure header footer hgroup section nav")),c.push.apply(c,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(s.push("xml:lang"),h=t("acronym applet basefont big font strike tt"),c.push.apply(c,h),a(h,function(e){i(e,"",c)}),d=t("center dir isindex noframes"),l.push.apply(l,d),u=[].concat(l,c),a(d,function(e){i(e,"",u)})),u=u||[].concat(l,c),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),i("address dt dd div caption","",u),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),i("blockquote","cite",u),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",u),i("dl","","dt dd"),i("a","href target rel media hreflang type",c),i("q","cite",c),i("ins del","cite datetime",u),i("img","src alt usemap ismap width height"),i("iframe","src name width height",u),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",u,"param"),i("param","name value"),i("map","name",u,"area"),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",u),i("th","colspan rowspan headers scope abbr",u),i("form","accept-charset action autocomplete enctype method name novalidate target",u),i("fieldset","disabled form name",u,"legend"),i("label","form for",c),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?u:c),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",u,"li"),i("noscript","",u),"html4"!=e&&(i("wbr"),i("ruby","",c,"rt rp"),i("figcaption","",u),i("mark rt rp summary bdi","",c),i("canvas","width height",u),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",u,"track source"),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",u,"track source"),i("source","src type media"),i("track","kind src srclang label default"),i("datalist","",c,"option"),i("article section nav aside header footer","",u),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",u,"figcaption"),i("time","datetime",c),i("dialog","open",u),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",c),i("progress","value max",c),i("meter","value min max low high optimum",c),i("details","open",u,"summary"),i("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(n("script","language xml:space"),n("style","xml:space"),n("object","declare classid code codebase codetype archive standby align border hspace vspace"),n("embed","align name hspace vspace"),n("param","valuetype type"),n("a","charset name rev shape coords"),n("br","clear"),n("applet","codebase archive code object alt name width height align hspace vspace"),n("img","name longdesc align border hspace vspace"),n("iframe","longdesc frameborder marginwidth marginheight scrolling align"),n("font basefont","size color face"),n("input","usemap align"),n("select","onchange"),n("textarea"),n("h1 h2 h3 h4 h5 h6 div p legend caption","align"),n("ul","type compact"),n("li","type"),n("ol dl menu dir","compact"),n("pre","width xml:space"),n("hr","align noshade size width"),n("isindex","prompt"),n("table","summary width frame rules cellspacing cellpadding align bgcolor"),n("col","width align char charoff valign"),n("colgroup","width align char charoff valign"),n("thead","align char charoff valign"),n("tr","align char charoff valign bgcolor"),n("th","axis align char charoff valign nowrap bgcolor width height"),n("form","accept"),n("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),n("tfoot","align char charoff valign"),n("tbody","align char charoff valign"),n("area","nohref"),n("body","background bgcolor text link vlink alink")),"html4"!=e&&(n("input button select textarea","autofocus"),n("input textarea","placeholder"),n("a","download"),n("link script img","crossorigin"),n("iframe","sandbox seamless allowfullscreen")),a(t("a form meter progress dfn"),function(e){f[e]&&delete f[e].children[e]}),delete f.caption.children.table,o[e]=f,f)}function n(e,t){var i;return e&&(i={},"string"==typeof e&&(e={"*":e}),a(e,function(e,n){i[n]="map"==t?s(e,/[, ]/):c(e,/[, ]/)})),i}var o={},r={},s=e.makeMap,a=e.each,l=e.extend,c=e.explode,u=e.inArray;return function(e){function r(t,i,n){var r=e[t];return r?r=s(r,/[, ]/,s(r.toUpperCase(),/[, ]/)):(r=o[t],r||(r=s(i," ",s(i.toUpperCase()," ")),r=l(r,n),o[t]=r)),r}function d(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function h(e){var i,n,o,r,a,l,c,h,f,p,m,g,v,y,b,w,_,C,x,T=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,k=/[*?+]/;if(e)for(e=t(e,","),D["@"]&&(w=D["@"].attributes,_=D["@"].attributesOrder),i=0,n=e.length;n>i;i++)if(a=T.exec(e[i])){if(y=a[1],f=a[2],b=a[3],h=a[5],g={},v=[],l={attributes:g,attributesOrder:v},"#"===y&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),"!"===a[4]&&(l.removeEmptyAttrs=!0),w){for(C in w)g[C]=w[C];v.push.apply(v,_)}if(h)for(h=t(h,"|"),o=0,r=h.length;r>o;o++)if(a=S.exec(h[o])){if(c={},m=a[1],p=a[2].replace(/::/g,":"),y=a[3],x=a[4],"!"===m&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(p),c.required=!0),"-"===m){delete g[p],v.splice(u(v,p),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:p,value:x}),c.defaultValue=x),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:p,value:x}),c.forcedValue=x),"<"===y&&(c.validValues=s(x,"?"))),k.test(p)?(l.attributePatterns=l.attributePatterns||[],c.pattern=d(p),l.attributePatterns.push(c)):(g[p]||v.push(p),g[p]=c)}w||"@"!=f||(w=g,_=v),b&&(l.outputName=f,D[b]=l),k.test(f)?(l.pattern=d(f),N.push(l)):D[f]=l}}function f(e){D={},N=[],h(e),a(b,function(e,t){R[t]=e.children})}function p(e){var i=/^(~)?(.+)$/;e&&(o.text_block_elements=o.block_elements=null,a(t(e,","),function(e){var t=i.exec(e),n="~"===t[1],o=n?"span":"div",r=t[2];if(R[r]=R[o],P[r]=o,n||(S[r.toUpperCase()]={},S[r]={}),!D[r]){var s=D[o];s=l({},s),delete s.removeEmptyAttrs,delete s.removeEmpty,D[r]=s}a(R,function(e,t){e[o]&&(R[t]=e=l({},R[t]),e[r]=e[o])})}))}function m(e){var i=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&a(t(e,","),function(e){var n,o,r=i.exec(e);r&&(o=r[1],n=o?R[r[2]]:R[r[2]]={"#comment":{}},n=R[r[2]],a(t(r[3],"|"),function(e){"-"===o?(R[r[2]]=n=l({},R[r[2]]),delete n[e]):n[e]={}}))})}function g(e){var t,i=D[e];if(i)return i;for(t=N.length;t--;)if(i=N[t],i.pattern.test(e))return i}var v,y,b,w,_,C,x,T,S,k,A,E,M=this,D={},R={},N=[],P={},O={};e=e||{},b=i(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),v=n(e.valid_styles),y=n(e.invalid_styles,"map"),T=n(e.valid_classes,"map"),w=r("whitespace_elements","pre script noscript style textarea video audio iframe object"),_=r("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=r("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),x=r("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),k=r("non_empty_elements","td th iframe video audio object script",C),A=r("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),S=r("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",A),E=r("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),a((e.special||"script noscript style textarea").split(" "),function(e){O[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?f(e.valid_elements):(a(b,function(e,t){D[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},R[t]=e.children}),"html5"!=e.schema&&a(t("strong/b em/i"),function(e){e=t(e,"/"),D[e[1]].outputName=e[0]}),D.img.attributesDefault=[{name:"alt",value:""}],a(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){D[e]&&(D[e].removeEmpty=!0)}),a(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){D[e].paddEmpty=!0}),a(t("span"),function(e){D[e].removeEmptyAttrs=!0})),p(e.custom_elements),m(e.valid_children),h(e.extended_valid_elements),m("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&a(c(e.invalid_elements),function(e){D[e]&&delete D[e]}),g("span")||h("span[!data-mce-type|*]"),M.children=R,M.getValidStyles=function(){return v},M.getInvalidStyles=function(){return y},M.getValidClasses=function(){return T},M.getBoolAttrs=function(){return x},M.getBlockElements=function(){return S},M.getTextBlockElements=function(){return A},M.getTextInlineElements=function(){return E},M.getShortEndedElements=function(){return C},M.getSelfClosingElements=function(){return _},M.getNonEmptyElements=function(){return k},M.getWhiteSpaceElements=function(){return w},M.getSpecialElements=function(){return O},M.isValidChild=function(e,t){var i=R[e];return!(!i||!i[t])},M.isValid=function(e,t){var i,n,o=g(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(i=o.attributePatterns)for(n=i.length;n--;)if(i[n].pattern.test(e))return!0}return!1},M.getElementRule=g,M.getCustomElements=function(){return P},M.addValidElements=h,M.setValidElements=f,M.addCustomElements=p,M.addValidChildren=m,M.elements=D}}),/**
 * SaxParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],function(e,t,i){function n(e,t,i){var n,o,r,s,a=1;for(s=e.getShortEndedElements(),r=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,r.lastIndex=n=i;o=r.exec(t);){if(n=r.lastIndex,"/"===o[1])a--;else if(!o[1]){if(o[2]in s)continue;a++}if(0===a)break}return n}function o(o,s){function a(){}var l=this;o=o||{},l.schema=s=s||new e,o.fix_self_closing!==!1&&(o.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(l[e]=o[e]||a)}),l.parse=function(e){function r(e){var t,i;for(t=z.length;t--&&z[t].name!==e;);if(t>=0){for(i=z.length-1;i>=t;i--)e=z[i],e.valid&&I.end(e.name);z.length=t}}function a(e,t,i,n,r){var s,a,l=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),i=t in y?t:W(i||n||r||""),w&&!m&&0!==t.indexOf("data-")){if(s=S[t],!s&&k){for(a=k.length;a--&&(s=k[a],!s.pattern.test(t)););-1===a&&(s=null)}if(!s)return;if(s.validValues&&!(i in s.validValues))return}if(V[t]&&!o.allow_script_urls){var c=i.replace(l,"");try{c=decodeURIComponent(c)}catch(u){c=unescape(c)}if(j.test(c))return;if(!o.allow_html_data_urls&&q.test(c)&&!/^data:image\//i.test(c))return}d.map[t]=i,d.push({name:t,value:i})}var l,c,u,d,h,f,p,m,g,v,y,b,w,_,C,x,T,S,k,A,E,M,D,R,N,P,O,H,F,I=this,B=0,z=[],L=0,W=t.decode,V=i.makeMap("src,href,data,background,formaction,poster"),j=/((java|vb)script|mhtml):/i,q=/^data:/i;for(N=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,v=s.getShortEndedElements(),R=o.self_closing_elements||s.getSelfClosingElements(),y=s.getBoolAttrs(),w=o.validate,g=o.remove_internals,F=o.fix_self_closing,O=s.getSpecialElements();l=N.exec(e);){if(B<l.index&&I.text(W(e.substr(B,l.index-B))),c=l[6])c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),r(c);else if(c=l[7]){if(c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),b=c in v,F&&R[c]&&z.length>0&&z[z.length-1].name===c&&r(c),!w||(_=s.getElementRule(c))){if(C=!0,w&&(S=_.attributes,k=_.attributePatterns),(T=l[8])?(m=-1!==T.indexOf("data-mce-type"),m&&g&&(C=!1),d=[],d.map={},T.replace(P,a)):(d=[],d.map={}),w&&!m){if(A=_.attributesRequired,E=_.attributesDefault,M=_.attributesForced,D=_.removeEmptyAttrs,D&&!d.length&&(C=!1),M)for(h=M.length;h--;)x=M[h],p=x.name,H=x.value,"{$uid}"===H&&(H="mce_"+L++),d.map[p]=H,d.push({name:p,value:H});if(E)for(h=E.length;h--;)x=E[h],p=x.name,p in d.map||(H=x.value,"{$uid}"===H&&(H="mce_"+L++),d.map[p]=H,d.push({name:p,value:H}));if(A){for(h=A.length;h--&&!(A[h]in d.map););-1===h&&(C=!1)}if(x=d.map["data-mce-bogus"]){if("all"===x){B=n(s,e,N.lastIndex),N.lastIndex=B;continue}C=!1}}C&&I.start(c,d,b)}else C=!1;if(u=O[c]){u.lastIndex=B=l.index+l[0].length,(l=u.exec(e))?(C&&(f=e.substr(B,l.index-B)),B=l.index+l[0].length):(f=e.substr(B),B=e.length),C&&(f.length>0&&I.text(f,!0),I.end(c)),N.lastIndex=B;continue}b||(T&&T.indexOf("/")==T.length-1?C&&I.end(c):z.push({name:c,valid:C}))}else(c=l[1])?(">"===c.charAt(0)&&(c=" "+c),o.allow_conditional_comments||"[if"!==c.substr(0,3)||(c=" "+c),I.comment(c)):(c=l[2])?I.cdata(c):(c=l[3])?I.doctype(c):(c=l[4])&&I.pi(c,l[5]);B=l.index+l[0].length}for(B<e.length&&I.text(W(e.substr(B))),h=z.length-1;h>=0;h--)c=z[h],c.valid&&I.end(c.name)}}var r=i.each;return o.findEndTag=n,o}),/**
 * DomParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/html/DomParser",["tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/util/Tools"],function(e,t,i,n){var o=n.makeMap,r=n.each,s=n.explode,a=n.extend;return function(n,l){function c(t){var i,n,r,s,a,c,d,h,f,p,m,g,v,y;for(m=o("tr,td,th,tbody,thead,tfoot,table"),p=l.getNonEmptyElements(),g=l.getTextBlockElements(),i=0;i<t.length;i++)if(n=t[i],n.parent&&!n.fixed)if(g[n.name]&&"li"==n.parent.name){for(v=n.next;v&&g[v.name];)v.name="li",v.fixed=!0,n.parent.insert(v,n.parent),v=v.next;n.unwrap(n)}else{for(s=[n],r=n.parent;r&&!l.isValidChild(r.name,n.name)&&!m[r.name];r=r.parent)s.push(r);if(r&&s.length>1){for(s.reverse(),a=c=u.filterNode(s[0].clone()),f=0;f<s.length-1;f++){for(l.isValidChild(c.name,s[f].name)?(d=u.filterNode(s[f].clone()),c.append(d)):d=c,h=s[f].firstChild;h&&h!=s[f+1];)y=h.next,d.append(h),h=y;c=d}a.isEmpty(p)?r.insert(n,s[0],!0):(r.insert(a,s[0],!0),r.insert(n,a)),r=s[0],(r.isEmpty(p)||r.firstChild===r.lastChild&&"br"===r.firstChild.name)&&r.empty().remove()}else if(n.parent){if("li"===n.name){if(v=n.prev,v&&("ul"===v.name||"ul"===v.name)){v.append(n);continue}if(v=n.next,v&&("ul"===v.name||"ul"===v.name)){v.insert(n,v.firstChild,!0);continue}n.wrap(u.filterNode(new e("ul",1)));continue}l.isValidChild(n.parent.name,"div")&&l.isValidChild("div",n.name)?n.wrap(u.filterNode(new e("div",1))):"style"===n.name||"script"===n.name?n.empty().remove():n.unwrap()}}}var u=this,d={},h=[],f={},p={};n=n||{},n.validate="validate"in n?n.validate:!0,n.root_name=n.root_name||"body",u.schema=l=l||new t,u.filterNode=function(e){var t,i,n;i in d&&(n=f[i],n?n.push(e):f[i]=[e]),t=h.length;for(;t--;)i=h[t].name,i in e.attributes.map&&(n=p[i],n?n.push(e):p[i]=[e]);return e},u.addNodeFilter=function(e,t){r(s(e),function(e){var i=d[e];i||(d[e]=i=[]),i.push(t)})},u.addAttributeFilter=function(e,t){r(s(e),function(e){var i;for(i=0;i<h.length;i++)if(h[i].name===e)return void h[i].callbacks.push(t);h.push({name:e,callbacks:[t]})})},u.parse=function(t,r){function s(){function e(e){e&&(o=e.firstChild,o&&3==o.type&&(o.value=o.value.replace(M,"")),o=e.lastChild,o&&3==o.type&&(o.value=o.value.replace(R,"")))}var t,i,o=y.firstChild;if(l.isValidChild(y.name,I.toLowerCase())){for(;o;)t=o.next,3==o.type||1==o.type&&"p"!==o.name&&!E[o.name]&&!o.attr("data-mce-type")?i?i.append(o):(i=u(I,1),i.attr(n.forced_root_block_attrs),y.insert(i,o),i.append(o)):(e(i),i=null),o=t;e(i)}}function u(t,i){var n,o=new e(t,i);return t in d&&(n=f[t],n?n.push(o):f[t]=[o]),o}function m(e){var t,i,n;for(t=e.prev;t&&3===t.type;)i=t.value.replace(R,""),i.length>0?(t.value=i,t=t.prev):(n=t.prev,t.remove(),t=n)}function g(e){var t,i={};for(t in e)"li"!==t&&"p"!=t&&(i[t]=e[t]);return i}var v,y,b,w,_,C,x,T,S,k,A,E,M,D,R,N,P,O,H,F,I,B=[];if(r=r||{},f={},p={},E=a(o("script,style,head,html,body,title,meta,param"),l.getBlockElements()),F=l.getNonEmptyElements(),H=l.children,A=n.validate,I="forced_root_block"in r?r.forced_root_block:n.forced_root_block,O=l.getWhiteSpaceElements(),M=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,N=/[ \t\r\n]+/g,P=/^[ \t\r\n]+$/,v=new i({validate:A,allow_script_urls:n.allow_script_urls,allow_conditional_comments:n.allow_conditional_comments,self_closing_elements:g(l.getSelfClosingElements()),cdata:function(e){b.append(u("#cdata",4)).value=e},text:function(e,t){var i;D||(e=e.replace(N," "),b.lastChild&&E[b.lastChild.name]&&(e=e.replace(M,""))),0!==e.length&&(i=u("#text",3),i.raw=!!t,b.append(i).value=e)},comment:function(e){b.append(u("#comment",8)).value=e},pi:function(e,t){b.append(u(e,7)).value=t,m(b)},doctype:function(e){var t;t=b.append(u("#doctype",10)),t.value=e,m(b)},start:function(e,t,i){var n,o,r,s,a;if(r=A?l.getElementRule(e):{}){for(n=u(r.outputName||e,1),n.attributes=t,n.shortEnded=i,b.append(n),a=H[b.name],a&&H[n.name]&&!a[n.name]&&B.push(n),o=h.length;o--;)s=h[o].name,s in t.map&&(S=p[s],S?S.push(n):p[s]=[n]);E[e]&&m(n),i||(b=n),!D&&O[e]&&(D=!0)}},end:function(t){var i,n,o,r,s;if(n=A?l.getElementRule(t):{}){if(E[t]&&!D){if(i=b.firstChild,i&&3===i.type)if(o=i.value.replace(M,""),o.length>0)i.value=o,i=i.next;else for(r=i.next,i.remove(),i=r;i&&3===i.type;)o=i.value,r=i.next,(0===o.length||P.test(o))&&(i.remove(),i=r),i=r;if(i=b.lastChild,i&&3===i.type)if(o=i.value.replace(R,""),o.length>0)i.value=o,i=i.prev;else for(r=i.prev,i.remove(),i=r;i&&3===i.type;)o=i.value,r=i.prev,(0===o.length||P.test(o))&&(i.remove(),i=r),i=r}if(D&&O[t]&&(D=!1),(n.removeEmpty||n.paddEmpty)&&b.isEmpty(F))if(n.paddEmpty)b.empty().append(new e("#text","3")).value="\xa0";else if(!b.attributes.map.name&&!b.attributes.map.id)return s=b.parent,E[b.name]?b.empty().remove():b.unwrap(),void(b=s);b=b.parent}}},l),y=b=new e(r.context||n.root_name,11),v.parse(t),A&&B.length&&(r.context?r.invalid=!0:c(B)),I&&("body"==y.name||r.isRootContent)&&s(),!r.invalid){for(k in f){for(S=d[k],w=f[k],x=w.length;x--;)w[x].parent||w.splice(x,1);for(_=0,C=S.length;C>_;_++)S[_](w,k,r)}for(_=0,C=h.length;C>_;_++)if(S=h[_],S.name in p){for(w=p[S.name],x=w.length;x--;)w[x].parent||w.splice(x,1);for(x=0,T=S.callbacks.length;T>x;x++)S.callbacks[x](w,S.name,r)}}return y},n.remove_trailing_brs&&u.addNodeFilter("br",function(t){var i,n,o,r,s,c,u,d,h=t.length,f=a({},l.getBlockElements()),p=l.getNonEmptyElements();for(f.body=1,i=0;h>i;i++)if(n=t[i],o=n.parent,f[n.parent.name]&&n===o.lastChild){for(s=n.prev;s;){if(c=s.name,"span"!==c||"bookmark"!==s.attr("data-mce-type")){if("br"!==c)break;if("br"===c){n=null;break}}s=s.prev}n&&(n.remove(),o.isEmpty(p)&&(u=l.getElementRule(o.name),u&&(u.removeEmpty?o.remove():u.paddEmpty&&(o.empty().append(new e("#text",3)).value="\xa0"))))}else{for(r=n;o&&o.firstChild===r&&o.lastChild===r&&(r=o,!f[o.name]);)o=o.parent;r===o&&(d=new e("#text",3),d.value="\xa0",n.replace(d))}}),n.allow_html_in_named_anchor||u.addAttributeFilter("id,name",function(e){for(var t,i,n,o,r=e.length;r--;)if(o=e[r],"a"===o.name&&o.firstChild&&!o.attr("href")){n=o.parent,t=o.lastChild;do i=t.prev,n.insert(t,o),t=i;while(t)}}),n.validate&&l.getValidClasses()&&u.addAttributeFilter("class",function(e){for(var t,i,n,o,r,s,a,c=e.length,u=l.getValidClasses();c--;){for(t=e[c],i=t.attr("class").split(" "),r="",n=0;n<i.length;n++)o=i[n],a=!1,s=u["*"],s&&s[o]&&(a=!0),s=u[t.name],a||!s||s[o]||(a=!0),a&&(r&&(r+=" "),r+=o);r.length||(r=null),t.attr("class",r)}})}}),/**
 * Writer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],function(e,t){var i=t.makeMap;return function(t){var n,o,r,s,a,l=[];return t=t||{},n=t.indent,o=i(t.indent_before||""),r=i(t.indent_after||""),s=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"==t.element_format,{start:function(e,t,i){var c,u,d,h;if(n&&o[e]&&l.length>0&&(h=l[l.length-1],h.length>0&&"\n"!==h&&l.push("\n")),l.push("<",e),t)for(c=0,u=t.length;u>c;c++)d=t[c],l.push(" ",d.name,'="',s(d.value,!0),'"');l[l.length]=!i||a?">":" />",i&&n&&r[e]&&l.length>0&&(h=l[l.length-1],h.length>0&&"\n"!==h&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),n&&r[e]&&l.length>0&&(t=l[l.length-1],t.length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:s(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",t,"?>"):l.push("<?",e,"?>"),n&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),/**
 * Serializer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],function(e,t){return function(i,n){var o=this,r=new e(i);i=i||{},i.validate="validate"in i?i.validate:!0,o.schema=n=n||new t,o.writer=r,o.serialize=function(e){function t(e){var i,a,l,c,u,d,h,f,p,m=o[e.type];if(m)m(e);else{if(i=e.name,a=e.shortEnded,l=e.attributes,s&&l&&l.length>1){for(d=[],d.map={},p=n.getElementRule(e.name),h=0,f=p.attributesOrder.length;f>h;h++)c=p.attributesOrder[h],c in l.map&&(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));for(h=0,f=l.length;f>h;h++)c=l[h].name,c in d.map||(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));l=d}if(r.start(e.name,l,a),!a){if(e=e.firstChild)do t(e);while(e=e.next);r.end(i)}}}var o,s;return s=i.validate,o={3:function(e){r.text(e.value,e.raw)},8:function(e){r.comment(e.value)},7:function(e){r.pi(e.name,e.value)},10:function(e){r.doctype(e.value)},4:function(e){r.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},r.reset(),1!=e.type||i.inner?o[11](e):t(e),r.getContent()}}}),/**
 * Serializer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/Serializer",["tinymce/dom/DOMUtils","tinymce/html/DomParser","tinymce/html/Entities","tinymce/html/Serializer","tinymce/html/Node","tinymce/html/Schema","tinymce/Env","tinymce/util/Tools"],function(e,t,i,n,o,r,s,a){var l=a.each,c=a.trim,u=e.DOM;return function(e,o){var a,d,h;return o&&(a=o.dom,d=o.schema),a=a||u,d=d||new r(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,h=new t(e,d),h.addAttributeFilter("data-mce-tabindex",function(e,t){for(var i,n=e.length;n--;)i=e[n],i.attr("tabindex",i.attributes.map["data-mce-tabindex"]),i.attr(t,null)}),h.addAttributeFilter("src,href,style",function(t,i){for(var n,o,r,s=t.length,l="data-mce-"+i,c=e.url_converter,u=e.url_converter_scope;s--;)n=t[s],o=n.attributes.map[l],o!==r?(n.attr(i,o.length>0?o:null),n.attr(l,null)):(o=n.attributes.map[i],"style"===i?o=a.serializeStyle(a.parseStyle(o),n.name):c&&(o=c.call(u,o,i,n.name)),n.attr(i,o.length>0?o:null))}),h.addAttributeFilter("class",function(e){for(var t,i,n=e.length;n--;)t=e[n],i=t.attr("class"),i&&(i=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",i.length>0?i:null))}),h.addAttributeFilter("data-mce-type",function(e,t,i){for(var n,o=e.length;o--;)n=e[o],"bookmark"!==n.attributes.map["data-mce-type"]||i.cleanup||n.remove()}),h.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)t=e[n].firstChild,t&&(t.value=i.decode(t.value))}),h.addNodeFilter("script,style",function(e,t){function i(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var n,o,r,s=e.length;s--;)n=e[s],o=n.firstChild?n.firstChild.value:"","script"===t?(r=n.attr("type"),r&&n.attr("type","mce-no/type"==r?null:r.replace(/^mce\-/,"")),o.length>0&&(n.firstChild.value="// <![CDATA[\n"+i(o)+"\n// ]]>")):o.length>0&&(n.firstChild.value="<!--\n"+i(o)+"\n-->")}),h.addNodeFilter("#comment",function(e){for(var t,i=e.length;i--;)t=e[i],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),h.addNodeFilter("xml:namespace,input",function(e,t){for(var i,n=e.length;n--;)i=e[n],7===i.type?i.remove():1===i.type&&("input"!==t||"type"in i.attributes.map||i.attr("type","text"))}),e.fix_list_elements&&h.addNodeFilter("ul,ol",function(e){for(var t,i,n=e.length;n--;)t=e[n],i=t.parent,("ul"===i.name||"ol"===i.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var i=e.length;i--;)e[i].attr(t,null)}),{schema:d,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:function(t,i){var o,r,u,f,p,m=this;return s.ie&&a.select("script,style,select,map").length>0?(p=t.innerHTML,t=t.cloneNode(!1),a.setHTML(t,p)):t=t.cloneNode(!0),o=t.ownerDocument.implementation,o.createHTMLDocument&&(r=o.createHTMLDocument(""),l("BODY"==t.nodeName?t.childNodes:[t],function(e){r.body.appendChild(r.importNode(e,!0))}),t="BODY"!=t.nodeName?r.body.firstChild:r.body,u=a.doc,a.doc=r),i=i||{},i.format=i.format||"html",i.selection&&(i.forced_root_block=""),i.no_events||(i.node=t,m.onPreProcess(i)),f=new n(e,d),i.content=f.serialize(h.parse(c(i.getInner?t.innerHTML:a.getOuterHTML(t)),i)),i.cleanup||(i.content=i.content.replace(/\uFEFF/g,"")),i.no_events||m.onPostProcess(i),u&&(a.doc=u),i.node=null,i.content},addRules:function(e){d.addValidElements(e)},setRules:function(e){d.setValidElements(e)},onPreProcess:function(e){o&&o.fire("PreProcess",e)},onPostProcess:function(e){o&&o.fire("PostProcess",e)}}}}),/**
 * TridentSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/TridentSelection",[],function(){function e(e){function t(t,i){var n,o,r,s,a,l,c,u,d=0,h=-1;if(n=t.duplicate(),n.collapse(i),u=n.parentElement(),u.ownerDocument===e.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(s=u.children,o=s.length-1;o>=d;)if(c=Math.floor((d+o)/2),a=s[c],n.moveToElementText(a),h=n.compareEndPoints(i?"StartToStart":"EndToEnd",t),h>0)o=c-1;else{if(!(0>h))return{node:a};d=c+1}if(0>h)for(a?n.collapse(!1):(n.moveToElementText(u),n.collapse(!0),a=u,r=!0),l=0;0!==n.compareEndPoints(i?"StartToStart":"StartToEnd",t)&&0!==n.move("character",1)&&u==n.parentElement();)l++;else for(n.collapse(!0),l=0;0!==n.compareEndPoints(i?"StartToStart":"StartToEnd",t)&&0!==n.move("character",-1)&&u==n.parentElement();)l++;return{node:a,position:h,offset:l,inside:r}}}function i(){function i(e){var i,n,o,r,s,a=t(u,e),l=0;if(i=a.node,n=a.offset,a.inside&&!i.hasChildNodes())return void d[e?"setStart":"setEnd"](i,0);if(n===r)return void d[e?"setStartBefore":"setEndAfter"](i);if(a.position<0){if(o=a.inside?i.firstChild:i.nextSibling,!o)return void d[e?"setStartAfter":"setEndAfter"](i);if(!n)return void(3==o.nodeType?d[e?"setStart":"setEnd"](o,0):d[e?"setStartBefore":"setEndBefore"](o));for(;o;){if(3==o.nodeType&&(s=o.nodeValue,l+=s.length,l>=n)){i=o,l-=n,l=s.length-l;break}o=o.nextSibling}}else{if(o=i.previousSibling,!o)return d[e?"setStartBefore":"setEndBefore"](i);if(!n)return void(3==i.nodeType?d[e?"setStart":"setEnd"](o,i.nodeValue.length):d[e?"setStartAfter":"setEndAfter"](o));for(;o;){if(3==o.nodeType&&(l+=o.nodeValue.length,l>=n)){i=o,l-=n;break}o=o.previousSibling}}d[e?"setStart":"setEnd"](i,l)}var r,s,a,l,c,u=e.getRng(),d=o.createRng();if(r=u.item?u.item(0):u.parentElement(),r.ownerDocument!=o.doc)return d;if(s=e.isCollapsed(),u.item)return d.setStart(r.parentNode,o.nodeIndex(r)),d.setEnd(d.startContainer,d.startOffset+1),d;try{i(!0),s||i()}catch(h){if(-2147024809!=h.number)throw h;c=n.getBookmark(2),a=u.duplicate(),a.collapse(!0),r=a.parentElement(),s||(a=u.duplicate(),a.collapse(!1),l=a.parentElement(),l.innerHTML=l.innerHTML),r.innerHTML=r.innerHTML,n.moveToBookmark(c),u=e.getRng(),i(!0),s||i()}return d}var n=this,o=e.dom,r=!1;this.getBookmark=function(i){function n(e){var t,i,n,r,s=[];for(t=e.parentNode,i=o.getRoot().parentNode;t!=i&&9!==t.nodeType;){for(n=t.children,r=n.length;r--;)if(e===n[r]){s.push(r);break}e=t,t=t.parentNode}return s}function r(e){var i;return i=t(s,e),i?{position:i.position,offset:i.offset,indexes:n(i.node),inside:i.inside}:void 0}var s=e.getRng(),a={};return 2===i&&(s.item?a.start={ctrl:!0,indexes:n(s.item(0))}:(a.start=r(!0),e.isCollapsed()||(a.end=r()))),a},this.moveToBookmark=function(e){function t(e){var t,i,n,r;for(t=o.getRoot(),i=e.length-1;i>=0;i--)r=t.children,n=e[i],n<=r.length-1&&(t=r[n]);return t}function i(i){var o,s,a,l,c=e[i?"start":"end"];c&&(o=c.position>0,s=r.createTextRange(),s.moveToElementText(t(c.indexes)),l=c.offset,l!==a?(s.collapse(c.inside||o),s.moveStart("character",o?-l:l)):s.collapse(i),n.setEndPoint(i?"StartToStart":"EndToStart",s),i&&n.collapse(!0))}var n,r=o.doc.body;e.start&&(e.start.ctrl?(n=r.createControlRange(),n.addElement(t(e.start.indexes)),n.select()):(n=r.createTextRange(),i(!0),i(),n.select()))},this.addRange=function(t){function i(e){var t,i,s,d,h;s=o.create("a"),t=e?a:c,i=e?l:u,d=n.duplicate(),(t==p||t==p.documentElement)&&(t=m,i=0),3==t.nodeType?(t.parentNode.insertBefore(s,t),d.moveToElementText(s),d.moveStart("character",i),o.remove(s),n.setEndPoint(e?"StartToStart":"EndToEnd",d)):(h=t.childNodes,h.length?(i>=h.length?o.insertAfter(s,h[h.length-1]):t.insertBefore(s,h[i]),d.moveToElementText(s)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",s=t.firstChild,d.moveToElementText(s),d.collapse(r)),n.setEndPoint(e?"StartToStart":"EndToEnd",d),o.remove(s))}var n,s,a,l,c,u,d,h,f,p=e.dom.doc,m=p.body;if(a=t.startContainer,l=t.startOffset,c=t.endContainer,u=t.endOffset,n=m.createTextRange(),a==c&&1==a.nodeType){if(l==u&&!a.hasChildNodes()){if(a.canHaveHTML)return d=a.previousSibling,d&&!d.hasChildNodes()&&o.isBlock(d)?d.innerHTML="&#xFEFF;":d=null,a.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",n.moveToElementText(a.lastChild),n.select(),o.doc.selection.clear(),a.innerHTML="",void(d&&(d.innerHTML=""));l=o.nodeIndex(a),a=a.parentNode}if(l==u-1)try{if(f=a.childNodes[l],s=m.createControlRange(),s.addElement(f),s.select(),h=e.getRng(),h.item&&f===h.item(0))return}catch(g){}}i(!0),i(),n.select()},this.getRangeAt=i}return e}),/**
 * VK.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/VK",["tinymce/Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),/**
 * ControlSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/ControlSelection",["tinymce/util/VK","tinymce/util/Tools","tinymce/Env"],function(e,t,i){return function(n,o){function r(e){var t=o.settings.object_resizing;return t===!1||i.iOS?!1:("string"!=typeof t&&(t="table,img,div"),"false"===e.getAttribute("data-mce-resize")?!1:o.dom.is(e,t))}function s(t){var i,n,r,s,a;i=t.screenX-k,n=t.screenY-A,O=i*T[2]+D,H=n*T[3]+R,O=5>O?5:O,H=5>H?5:H,r="IMG"==w.nodeName&&o.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==w.nodeName&&T[2]*T[3]!==0,r&&(j(i)>j(n)?(H=q(O*N),O=q(H/N)):(O=q(H/N),H=q(O*N))),B.setStyles(_,{width:O,height:H}),s=T.startPos.x+i,a=T.startPos.y+n,s=s>0?s:0,a=a>0?a:0,B.setStyles(C,{left:s,top:a,display:"block"}),C.innerHTML=O+" &times; "+H,T[2]<0&&_.clientWidth<=O&&B.setStyle(_,"left",E+(D-O)),T[3]<0&&_.clientHeight<=H&&B.setStyle(_,"top",M+(R-H)),i=U.scrollWidth-F,n=U.scrollHeight-I,i+n!==0&&B.setStyles(C,{left:s-i,top:a-n}),P||(o.fire("ObjectResizeStart",{target:w,width:D,height:R}),P=!0)}function a(){function e(e,t){t&&(w.style[e]||!o.schema.isValid(w.nodeName.toLowerCase(),e)?B.setStyle(w,e,t):B.setAttrib(w,e,t))}P=!1,e("width",O),e("height",H),B.unbind(L,"mousemove",s),B.unbind(L,"mouseup",a),W!=L&&(B.unbind(W,"mousemove",s),B.unbind(W,"mouseup",a)),B.remove(_),B.remove(C),V&&"TABLE"!=w.nodeName||l(w),o.fire("ObjectResized",{target:w,width:O,height:H}),B.setAttrib(w,"style",B.getAttrib(w,"style")),o.nodeChanged()}function l(e,t,n){var l,u,d,h,f;g(),l=B.getPos(e,U),E=l.x,M=l.y,f=e.getBoundingClientRect(),u=f.width||f.right-f.left,d=f.height||f.bottom-f.top,w!=e&&(m(),w=e,O=H=0),h=o.fire("ObjectSelected",{target:e}),r(e)&&!h.isDefaultPrevented()?z(x,function(e,o){function r(t){k=t.screenX,A=t.screenY,D=w.clientWidth,R=w.clientHeight,N=R/D,T=e,e.startPos={x:u*e[0]+E,y:d*e[1]+M},F=U.scrollWidth,I=U.scrollHeight,_=w.cloneNode(!0),B.addClass(_,"mce-clonedresizable"),B.setAttrib(_,"data-mce-bogus","all"),_.contentEditable=!1,_.unSelectabe=!0,B.setStyles(_,{left:E,top:M,margin:0}),_.removeAttribute("data-mce-selected"),U.appendChild(_),B.bind(L,"mousemove",s),B.bind(L,"mouseup",a),W!=L&&(B.bind(W,"mousemove",s),B.bind(W,"mouseup",a)),C=B.add(U,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},D+" &times; "+R)}var l,c;return t?void(o==t&&r(n)):(l=B.get("mceResizeHandle"+o),l?B.show(l):(c=U,l=B.add(c,"div",{id:"mceResizeHandle"+o,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+o+"-resize; margin:0; padding:0"}),i.ie&&(l.contentEditable=!1)),e.elm||(B.bind(l,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),r(e)}),e.elm=l),void B.setStyles(l,{left:u*e[0]+E-l.offsetWidth/2,top:d*e[1]+M-l.offsetHeight/2}))}):c(),w.setAttribute("data-mce-selected","1")}function c(){var e,t;g(),w&&w.removeAttribute("data-mce-selected");for(e in x)t=B.get("mceResizeHandle"+e),t&&(B.unbind(t),B.remove(t))}function u(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var i,o;if(!P)return z(B.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),o="mousedown"==e.type?e.target:n.getNode(),o=B.$(o).closest(V?"table":"table,img,hr")[0],t(o,U)&&(v(),i=n.getStart(!0),t(i,o)&&t(n.getEnd(!0),o)&&(!V||o!=i&&"IMG"!==i.nodeName))?void l(o):void c()}function d(e,t,i){e&&e.attachEvent&&e.attachEvent("on"+t,i)}function h(e,t,i){e&&e.detachEvent&&e.detachEvent("on"+t,i)}function f(e){var t,i,n,r,s,a,c,u=e.srcElement;t=u.getBoundingClientRect(),a=S.clientX-t.left,c=S.clientY-t.top;for(i in x)if(n=x[i],r=u.offsetWidth*n[0],s=u.offsetHeight*n[1],j(r-a)<8&&j(s-c)<8){T=n;break}P=!0,o.fire("ObjectResizeStart",{target:w,width:w.clientWidth,height:w.clientHeight}),o.getDoc().selection.empty(),l(u,i,S)}function p(e){var t=e.srcElement;if(t!=w){if(o.fire("ObjectSelected",{target:t}),m(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(c(),w=t,d(t,"resizestart",f))}}function m(){h(w,"resizestart",f)}function g(){for(var e in x){var t=x[e];t.elm&&(B.unbind(t.elm),delete t.elm)}}function v(){try{o.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function y(e){var t;if(V){t=L.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(i){}}}function b(){w=_=null,V&&(m(),h(U,"controlselect",p))}var w,_,C,x,T,S,k,A,E,M,D,R,N,P,O,H,F,I,B=o.dom,z=t.each,L=o.getDoc(),W=document,V=i.ie&&i.ie<11,j=Math.abs,q=Math.round,U=o.getBody();x={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var $=".mce-content-body";return o.contentStyles.push($+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+$+" .mce-resizehandle:hover {background: #000}"+$+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+$+" .mce-clonedresizable {position: absolute;"+(i.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+$+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),o.on("init",function(){V?(o.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(c(),y(e.target))}),d(U,"controlselect",p),o.on("mousedown",function(e){S=e})):(v(),i.ie>=11&&(o.on("mouseup",function(e){var t=e.target.nodeName;!P&&/^(TABLE|IMG|HR)$/.test(t)&&(o.selection.select(e.target,"TABLE"==t),o.nodeChanged())}),o.dom.bind(U,"mscontrolselect",function(e){/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&window.setTimeout(function(){o.selection.select(e.target)},0))}))),o.on("nodechange ResizeEditor",u),o.on("keydown keyup",function(e){w&&"TABLE"==w.nodeName&&u(e)}),o.on("hide",c)}),o.on("remove",g),{isResizable:r,showResizeRect:l,hideResizeRect:c,updateResizeRect:u,controlSelect:y,destroy:b}}}),/**
 * BookmarkManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/BookmarkManager",["tinymce/Env","tinymce/util/Tools"],function(e,t){function i(i){var n=i.dom;this.getBookmark=function(e,o){function r(e,i){var o=0;return t.each(n.select(e),function(e,t){e==i&&(o=t)}),o}function s(e){function t(t){var i,n,o,r=t?"start":"end";i=e[r+"Container"],n=e[r+"Offset"],1==i.nodeType&&"TR"==i.nodeName&&(o=i.childNodes,i=o[Math.min(t?n:n-1,o.length-1)],i&&(n=t?0:i.childNodes.length,e["set"+(t?"Start":"End")](i,n)))}return t(!0),t(),e}function a(){function e(e,t){var i,s,a=e[t?"startContainer":"endContainer"],l=e[t?"startOffset":"endOffset"],c=[],u=0;if(3==a.nodeType){if(o)for(i=a.previousSibling;i&&3==i.nodeType;i=i.previousSibling)l+=i.nodeValue.length;c.push(l)}else s=a.childNodes,l>=s.length&&s.length&&(u=1,l=Math.max(0,s.length-1)),c.push(n.nodeIndex(s[l],o)+u);for(;a&&a!=r;a=a.parentNode)c.push(n.nodeIndex(a,o));return c}var t=i.getRng(!0),r=n.getRoot(),s={};return s.start=e(t,!0),i.isCollapsed()||(s.end=e(t)),s}var l,c,u,d,h,f,p,m="&#xFEFF;";if(2==e)return f=i.getNode(),h=f?f.nodeName:null,"IMG"==h?{name:h,index:r(h,f)}:i.tridentSel?i.tridentSel.getBookmark(e):a();if(e)return{rng:i.getRng()};if(l=i.getRng(),u=n.uniqueId(),d=i.isCollapsed(),p="overflow:hidden;line-height:0px",l.duplicate||l.item){if(l.item)return f=l.item(0),h=f.nodeName,{name:h,index:r(h,f)};c=l.duplicate();try{l.collapse(),l.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_start" style="'+p+'">'+m+"</span>"),d||(c.collapse(!1),l.moveToElementText(c.parentElement()),0===l.compareEndPoints("StartToEnd",c)&&c.move("character",-1),c.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_end" style="'+p+'">'+m+"</span>"))}catch(g){return null}}else{if(f=i.getNode(),h=f.nodeName,"IMG"==h)return{name:h,index:r(h,f)};c=s(l.cloneRange()),d||(c.collapse(!1),c.insertNode(n.create("span",{"data-mce-type":"bookmark",id:u+"_end",style:p},m))),l=s(l),l.collapse(!0),l.insertNode(n.create("span",{"data-mce-type":"bookmark",id:u+"_start",style:p},m))}return i.moveToBookmark({id:u,keep:1}),{id:u}},this.moveToBookmark=function(o){function r(e){var t,i,n,r,s=o[e?"start":"end"];if(s){for(n=s[0],i=c,t=s.length-1;t>=1;t--){if(r=i.childNodes,s[t]>r.length-1)return;i=r[s[t]]}3===i.nodeType&&(n=Math.min(s[0],i.nodeValue.length)),1===i.nodeType&&(n=Math.min(s[0],i.childNodes.length)),e?l.setStart(i,n):l.setEnd(i,n)}return!0}function s(i){var r,s,a,l,c=n.get(o.id+"_"+i),p=o.keep;if(c&&(r=c.parentNode,"start"==i?(p?(r=c.firstChild,s=1):s=n.nodeIndex(c),u=d=r,h=f=s):(p?(r=c.firstChild,s=1):s=n.nodeIndex(c),d=r,f=s),!p)){for(l=c.previousSibling,a=c.nextSibling,t.each(t.grep(c.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});c=n.get(o.id+"_"+i);)n.remove(c,1);l&&a&&l.nodeType==a.nodeType&&3==l.nodeType&&!e.opera&&(s=l.nodeValue.length,l.appendData(a.nodeValue),n.remove(a),"start"==i?(u=d=l,h=f=s):(d=l,f=s))}}function a(t){return!n.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}var l,c,u,d,h,f;if(o)if(o.start){if(l=n.createRng(),c=n.getRoot(),i.tridentSel)return i.tridentSel.moveToBookmark(o);r(!0)&&r()&&i.setRng(l)}else o.id?(s("start"),s("end"),u&&(l=n.createRng(),l.setStart(a(u),h),l.setEnd(a(d),f),i.setRng(l))):o.name?i.select(n.select(o.name)[o.index]):o.rng&&i.setRng(o.rng)}}return i.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},i}),/**
 * Selection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/Selection",["tinymce/dom/TreeWalker","tinymce/dom/TridentSelection","tinymce/dom/ControlSelection","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/Env","tinymce/util/Tools"],function(e,i,n,o,r,s,a){function l(e,t,o,s){var a=this;a.dom=e,a.win=t,a.serializer=o,a.editor=s,a.bookmarkManager=new r(a),a.controlSelection=new n(a,s),a.win.getSelection||(a.tridentSel=new i(a))}var c=a.each,u=a.trim,d=s.ie;return l.prototype={setCursorLocation:function(e,t){var i=this,n=i.dom.createRng();e?(n.setStart(e,t),n.setEnd(e,t),i.setRng(n),i.collapse(!1)):(i._moveEndPoint(n,i.editor.getBody(),!0),i.setRng(n))},getContent:function(e){var i,n,o,r=this,s=r.getRng(),a=r.dom.create("body"),l=r.getSel();return e=e||{},i=n="",e.get=!0,e.format=e.format||"html",e.selection=!0,r.editor.fire("BeforeGetContent",e),"text"==e.format?r.isCollapsed()?"":s.text||(l.toString?l.toString():""):(s.cloneContents?(o=s.cloneContents(),o&&a.appendChild(o)):s.item!==t||s.htmlText!==t?(a.innerHTML="<br>"+(s.item?s.item(0).outerHTML:s.htmlText),a.removeChild(a.firstChild)):a.innerHTML=s.toString(),/^\s/.test(a.innerHTML)&&(i=" "),/\s+$/.test(a.innerHTML)&&(n=" "),e.getInner=!0,e.content=r.isCollapsed()?"":i+r.serializer.serialize(a,e)+n,r.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var i,n,o,r=this,s=r.getRng(),a=r.win.document;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||r.editor.fire("BeforeSetContent",t),e=t.content,s.insertNode){e+='<span id="__caret">_</span>',s.startContainer==a&&s.endContainer==a?a.body.innerHTML=e:(s.deleteContents(),0===a.body.childNodes.length?a.body.innerHTML=e:s.createContextualFragment?s.insertNode(s.createContextualFragment(e)):(n=a.createDocumentFragment(),o=a.createElement("div"),n.appendChild(o),o.outerHTML=e,s.insertNode(n))),i=r.dom.get("__caret"),s=a.createRange(),s.setStartBefore(i),s.setEndBefore(i),r.setRng(s),r.dom.remove("__caret");try{r.setRng(s)}catch(l){}}else s.item&&(a.execCommand("Delete",!1,null),s=r.getRng()),/^\s+/.test(e)?(s.pasteHTML('<span id="__mce_tmp">_</span>'+e),r.dom.remove("__mce_tmp")):s.pasteHTML(e);t.no_events||r.editor.fire("SetContent",t)},getStart:function(e){var t,i,n,o,r=this,s=r.getRng();if(s.duplicate||s.item){if(s.item)return s.item(0);for(n=s.duplicate(),n.collapse(1),t=n.parentElement(),t.ownerDocument!==r.dom.doc&&(t=r.dom.getRoot()),i=o=s.parentElement();o=o.parentNode;)if(o==t){t=i;break}return t}return t=s.startContainer,1==t.nodeType&&t.hasChildNodes()&&(e&&s.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,s.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(e){var t,i,n=this,o=n.getRng();return o.duplicate||o.item?o.item?o.item(0):(o=o.duplicate(),o.collapse(0),t=o.parentElement(),t.ownerDocument!==n.dom.doc&&(t=n.dom.getRoot()),t&&"BODY"==t.nodeName?t.lastChild||t:t):(t=o.endContainer,i=o.endOffset,1==t.nodeType&&t.hasChildNodes()&&(e&&o.collapsed||(t=t.childNodes[i>0?i-1:i])),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var i,n=this,o=n.dom,r=o.createRng();if(n.lastFocusBookmark=null,e){if(!t&&n.controlSelection.controlSelect(e))return;i=o.nodeIndex(e),r.setStart(e.parentNode,i),r.setEnd(e.parentNode,i+1),t&&(n._moveEndPoint(r,e,!0),n._moveEndPoint(r,e)),n.setRng(r)}return e},isCollapsed:function(){var e=this,t=e.getRng(),i=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!i||t.collapsed},collapse:function(e){var t,i=this,n=i.getRng();n.item&&(t=n.item(0),n=i.win.document.body.createTextRange(),n.moveToElementText(t)),n.collapse(!!e),i.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,i){try{return t.compareBoundaryPoints(e,i)}catch(n){return-1}}var i,n,o,r,s=this,a=s.win.document;if(!e&&s.lastFocusBookmark){var l=s.lastFocusBookmark;return l.startContainer?(n=a.createRange(),n.setStart(l.startContainer,l.startOffset),n.setEnd(l.endContainer,l.endOffset)):n=l,n}if(e&&s.tridentSel)return s.tridentSel.getRangeAt(0);try{(i=s.getSel())&&(n=i.rangeCount>0?i.getRangeAt(0):i.createRange?i.createRange():a.createRange())}catch(c){}if(d&&n&&n.setStart&&a.selection){try{r=a.selection.createRange()}catch(c){}r&&r.item&&(o=r.item(0),n=a.createRange(),n.setStartBefore(o),n.setEndAfter(o))}return n||(n=a.createRange?a.createRange():a.body.createTextRange()),n.setStart&&9===n.startContainer.nodeType&&n.collapsed&&(o=s.dom.getRoot(),n.setStart(o,0),n.setEnd(o,0)),s.selectedRange&&s.explicitRange&&(0===t(n.START_TO_START,n,s.selectedRange)&&0===t(n.END_TO_END,n,s.selectedRange)?n=s.explicitRange:(s.selectedRange=null,s.explicitRange=null)),n},setRng:function(e,t){var i,n=this;if(e)if(e.select)try{e.select()}catch(o){}else if(n.tridentSel){if(e.cloneRange)try{return void n.tridentSel.addRange(e)}catch(o){}}else if(i=n.getSel()){n.explicitRange=e;try{i.removeAllRanges(),i.addRange(e)}catch(o){}t===!1&&i.extend&&(i.collapse(e.endContainer,e.endOffset),i.extend(e.startContainer,e.startOffset)),n.selectedRange=i.rangeCount>0?i.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var i=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||i}var t,i=this,n=i.getRng(),o=n.startContainer,r=n.endContainer,s=n.startOffset,a=n.endOffset,l=i.dom.getRoot();return n?n.setStart?(t=n.commonAncestorContainer,!n.collapsed&&(o==r&&2>a-s&&o.hasChildNodes()&&(t=o.childNodes[s]),3===o.nodeType&&3===r.nodeType&&(o=o.length===s?e(o.nextSibling,!0):o.parentNode,r=0===a?e(r.previousSibling,!1):r.parentNode,o&&o===r))?o:t&&3==t.nodeType?t.parentNode:t):(t=n.item?n.item(0):n.parentElement(),t.ownerDocument!==i.win.document&&(t=l),t):l},getSelectedBlocks:function(t,i){var n,o,r=this,s=r.dom,a=[];if(o=s.getRoot(),t=s.getParent(t||r.getStart(),s.isBlock),i=s.getParent(i||r.getEnd(),s.isBlock),t&&t!=o&&a.push(t),t&&i&&t!=i){n=t;for(var l=new e(t,o);(n=l.next())&&n!=i;)s.isBlock(n)&&a.push(n)}return i&&t!=i&&i!=o&&a.push(i),a},isForward:function(){var e,t,i=this.dom,n=this.getSel();return n&&n.anchorNode&&n.focusNode?(e=i.createRng(),e.setStart(n.anchorNode,n.anchorOffset),e.collapse(!0),t=i.createRng(),t.setStart(n.focusNode,n.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0):!0},normalize:function(){var e=this,t=e.getRng();return!d&&new o(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var i,n=this;return n.selectorChangedData||(n.selectorChangedData={},i={},n.editor.on("NodeChange",function(e){var t=e.element,o=n.dom,r=o.getParents(t,null,o.getRoot()),s={};c(n.selectorChangedData,function(e,t){c(r,function(n){return o.is(n,t)?(i[t]||(c(e,function(e){e(!0,{node:n,selector:t,parents:r})}),i[t]=e),s[t]=e,!1):void 0})}),c(i,function(e,n){s[n]||(delete i[n],c(e,function(e){e(!1,{node:t,selector:n,parents:r})}))})})),n.selectorChangedData[e]||(n.selectorChangedData[e]=[]),n.selectorChangedData[e].push(t),n},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e){function t(e){for(var t=0,i=0,n=e;n&&n.nodeType;)t+=n.offsetLeft||0,i+=n.offsetTop||0,n=n.offsetParent;return{x:t,y:i}}var i,n,o,r,s=this,a=s.dom,l=a.getRoot();if("BODY"!=l.nodeName){var c=s.getScrollContainer();if(c)return i=t(e).y-t(c).y,r=c.clientHeight,o=c.scrollTop,void((o>i||i+25>o+r)&&(c.scrollTop=o>i?i:i-r+25))}n=a.getViewPort(s.editor.getWin()),i=a.getPos(e).y,o=n.y,r=n.h,(i<n.y||i+25>o+r)&&s.editor.getWin().scrollTo(0,o>i?i:i-r+25)},placeCaretAt:function(e,t){var i,n,o=this.editor.getDoc();if(o.caretPositionFromPoint)n=o.caretPositionFromPoint(e,t),i=o.createRange(),i.setStart(n.offsetNode,n.offset),i.collapse(!0);else if(o.caretRangeFromPoint)i=o.caretRangeFromPoint(e,t);else if(o.body.createTextRange){i=o.body.createTextRange();try{i.moveToPoint(e,t),i.collapse(!0)}catch(r){i.collapse(t<o.body.clientHeight)}}this.setRng(i)},_moveEndPoint:function(t,i,n){var o=i,r=new e(i,o),a=this.dom.schema.getNonEmptyElements();do{if(3==i.nodeType&&0!==u(i.nodeValue).length)return void(n?t.setStart(i,0):t.setEnd(i,i.nodeValue.length));if(a[i.nodeName]&&!/^(TD|TH)$/.test(i.nodeName))return void(n?t.setStartBefore(i):"BR"==i.nodeName?t.setEndBefore(i):t.setEndAfter(i));if(s.ie&&s.ie<11&&this.dom.isBlock(i)&&this.dom.isEmpty(i))return void(n?t.setStart(i,0):t.setEnd(i,0))}while(i=n?r.next():r.prev());"BODY"==o.nodeName&&(n?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},l}),/**
 * ElementUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/dom/ElementUtils",["tinymce/dom/BookmarkManager","tinymce/util/Tools"],function(e,t){function i(t){this.compare=function(i,o){function r(e){var i={};return n(t.getAttribs(e),function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&"data-mce-style"!==o&&(i[o]=t.getAttrib(e,o))}),i}function s(e,t){var i,n;for(n in e)if(e.hasOwnProperty(n)){if(i=t[n],"undefined"==typeof i)return!1;if(e[n]!=i)return!1;delete t[n]}for(n in t)if(t.hasOwnProperty(n))return!1;return!0}return i.nodeName!=o.nodeName?!1:s(r(i),r(o))&&s(t.parseStyle(t.getAttrib(i,"style")),t.parseStyle(t.getAttrib(o,"style")))?!e.isBookmarkNode(i)&&!e.isBookmarkNode(o):!1}}var n=t.each;return i}),/**
 * Preview.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/fmt/Preview",["tinymce/util/Tools"],function(e){function t(e,t){function n(e){return e.replace(/%(\w+)/g,"")}var o,r,s,a,l=e.dom,c="";if(a=e.settings.preview_styles,a===!1)return"";if(a||(a="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return o=t.block||t.inline||"span",r=l.create(o),i(t.styles,function(e,t){e=n(e),e&&l.setStyle(r,t,e)}),i(t.attributes,function(e,t){e=n(e),e&&l.setAttrib(r,t,e)}),i(t.classes,function(e){e=n(e),l.hasClass(r,e)||l.addClass(r,e)}),e.fire("PreviewFormats"),l.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),s=l.getStyle(e.getBody(),"fontSize",!0),s=/px$/.test(s)?parseInt(s,10):0,i(a.split(" "),function(t){var i=l.getStyle(r,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(i)&&(i=l.getStyle(e.getBody(),t,!0),"#ffffff"==l.toHex(i).toLowerCase())||"color"==t&&"#000000"==l.toHex(i).toLowerCase())){if("font-size"==t&&/em|%$/.test(i)){if(0===s)return;i=parseFloat(i,10)/(/%$/.test(i)?100:1),i=i*s+"px"}"border"==t&&i&&(c+="padding:0 2px;"),c+=t+":"+i+";"}}),e.fire("AfterPreviewFormats"),l.remove(r),c}var i=e.each;return{getCssText:t}}),/**
 * Formatter.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/Formatter",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/ElementUtils","tinymce/util/Tools","tinymce/fmt/Preview"],function(e,t,i,n,o,r){return function(s){function a(e){return e.nodeType&&(e=e.nodeName),!!s.schema.getTextBlockElements()[e.toLowerCase()]}function l(e,t){return Y.getParents(e,t,Y.getRoot())}function c(e){return 1===e.nodeType&&"_mce_caret"===e.id}function u(){f({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,i){st(i,function(t,i){Y.setAttrib(e,i,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),st("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){f(e,{block:e,remove:"all"})}),f(s.settings.formats)}function d(){s.addShortcut("ctrl+b","bold_desc","Bold"),s.addShortcut("ctrl+i","italic_desc","Italic"),s.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)s.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);s.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),s.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),s.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function h(e){return e?$[e]:$}function f(e,t){e&&("string"!=typeof e?st(e,function(e,t){f(t,e)}):(t=t.length?t:[t],st(t,function(e){e.deep===j&&(e.deep=!e.selector),e.split===j&&(e.split=!e.selector||e.inline),e.remove===j&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),$[e]=t))}function p(e){return e&&$[e]&&delete $[e],$}function m(e){var t;return s.dom.getParent(e,function(e){return t=s.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function g(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=m(e.parentNode),s.dom.getStyle(e,"color")&&t?s.dom.setStyle(e,"text-decoration",t):s.dom.getStyle(e,"textdecoration")===t&&s.dom.setStyle(e,"text-decoration",null))}function v(t,i,n){function o(e,t){if(t=t||p,e){if(t.onformat&&t.onformat(e,t,i,n),st(t.styles,function(t,n){Y.setStyle(e,n,D(t,i))}),t.styles){var o=Y.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}st(t.attributes,function(t,n){Y.setAttrib(e,n,D(t,i))}),st(t.classes,function(t){t=D(t,i),Y.hasClass(e,t)||Y.addClass(e,t)})}}function r(){function t(t,i){var o=new e(i);for(n=o.current();n;n=o.prev())if(n.childNodes.length>1||n==t||"BR"==n.tagName)return n}var i=s.selection.getRng(),o=i.startContainer,r=i.endContainer;if(o!=r&&0===i.endOffset){var a=t(o,r),l=3==a.nodeType?a.length:a.childNodes.length;i.setEnd(a,l)}return i}function l(e,n,r){var s,l,u=[],d=!0;s=p.inline||p.block,l=Y.create(s),o(l),K.walk(e,function(e){function n(e){var g,v,y,b,_;return _=d,g=e.nodeName.toLowerCase(),v=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&ot(e)&&(_=d,d="true"===ot(e),b=!0),A(g,"br")?(h=0,void(p.block&&Y.remove(e))):p.wrapper&&w(e,t,i)?void(h=0):d&&!b&&p.block&&!p.wrapper&&a(g)&&X(v,s)?(e=Y.rename(e,s),o(e),u.push(e),void(h=0)):p.selector&&(st(f,function(t){"collapsed"in t&&t.collapsed!==m||Y.is(e,t.selector)&&!c(e)&&(o(e,t),y=!0)}),!p.inline||y)?void(h=0):void(!d||b||!X(s,g)||!X(v,s)||!r&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||c(e)||p.inline&&J(e)?(h=0,st(at(e.childNodes),n),b&&(d=_),h=0):(h||(h=Y.clone(l,it),e.parentNode.insertBefore(h,e),u.push(h)),h.appendChild(e)))}var h;st(e,n)}),p.links===!0&&st(u,function(e){function t(e){"A"===e.nodeName&&o(e,p),st(at(e.childNodes),t)}t(e)}),st(u,function(e){function n(e){var t=0;return st(e.childNodes,function(e){R(e)||rt(e)||t++}),t}function r(e){var t,i;return st(e.childNodes,function(e){return 1!=e.nodeType||rt(e)||c(e)?void 0:(t=e,it)}),t&&!rt(t)&&k(t,p)&&(i=Y.clone(t,it),o(i),Y.replace(i,e,nt),Y.remove(t,1)),i||e}var s;if(s=n(e),(u.length>1||!J(e))&&0===s)return void Y.remove(e,1);if(p.inline||p.wrapper){if(p.exact||1!==s||(e=r(e)),st(f,function(t){st(Y.select(t.inline,e),function(e){rt(e)||H(t,i,e,t.exact?e:null)})}),w(e.parentNode,t,i))return Y.remove(e,1),e=0,nt;p.merge_with_parents&&Y.getParent(e.parentNode,function(n){return w(n,t,i)?(Y.remove(e,1),e=0,nt):void 0}),e&&p.merge_siblings!==!1&&(e=B(I(e),e),e=B(e,I(e,nt)))}})}var u,d,f=h(t),p=f[0],m=!n&&G.isCollapsed();if(p)if(n)n.nodeType?(d=Y.createRng(),d.setStartBefore(n),d.setEndAfter(n),l(P(d,f),null,!0)):l(n,null,!0);else if(m&&p.inline&&!Y.select("td.mce-item-selected,th.mce-item-selected").length)L("apply",t,i);else{var y=s.selection.getNode();Q||!f[0].defaultBlock||Y.getParent(y,Y.isBlock)||v(f[0].defaultBlock),s.selection.setRng(r()),u=G.getBookmark(),l(P(G.getRng(nt),f),u),p.styles&&(p.styles.color||p.styles.textDecoration)&&(lt(y,g,"childNodes"),g(y)),G.moveToBookmark(u),W(G.getRng(nt)),s.nodeChanged()}}function y(e,t,i,n){function o(e){var i,n,r,s,a;if(1===e.nodeType&&ot(e)&&(s=y,y="true"===ot(e),a=!0),i=at(e.childNodes),y&&!a)for(n=0,r=g.length;r>n&&!H(g[n],t,e,e);n++);if(v.deep&&i.length){for(n=0,r=i.length;r>n;n++)o(i[n]);a&&(y=s)}}function r(i){var o;return st(l(i.parentNode).reverse(),function(i){var r;o||"_start"==i.id||"_end"==i.id||(r=w(i,e,t,n),r&&r.split!==!1&&(o=i))}),o}function a(e,i,n,o){var r,s,a,l,c,u;if(e){for(u=e.parentNode,r=i.parentNode;r&&r!=u;r=r.parentNode){for(s=Y.clone(r,it),c=0;c<g.length;c++)if(H(g[c],t,s,s)){s=0;break}s&&(a&&s.appendChild(a),l||(l=s),a=s)}!o||v.mixed&&J(e)||(i=Y.split(e,i)),a&&(n.parentNode.insertBefore(a,n),l.appendChild(n))}return i}function c(e){return a(r(e),e,e,!0)}function u(e){var t=Y.get(e?"_start":"_end"),i=t[e?"firstChild":"lastChild"];return rt(i)&&(i=i[e?"firstChild":"lastChild"]),Y.remove(t,!0),i}function d(e){var t,i,n=e.commonAncestorContainer;e=P(e,g,nt),v.split&&(t=z(e,nt),i=z(e),t!=i?(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),n&&/^T(HEAD|BODY|FOOT|R)$/.test(n.nodeName)&&/^(TH|TD)$/.test(i.nodeName)&&i.firstChild&&(i=i.firstChild||i),t=N(t,"span",{id:"_start","data-mce-type":"bookmark"}),i=N(i,"span",{id:"_end","data-mce-type":"bookmark"}),c(t),c(i),t=u(nt),i=u()):t=i=c(t),e.startContainer=t.parentNode,e.startOffset=Z(t),e.endContainer=i.parentNode,e.endOffset=Z(i)+1),K.walk(e,function(e){st(e,function(e){o(e),1===e.nodeType&&"underline"===s.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===m(e.parentNode)&&H({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var f,p,g=h(e),v=g[0],y=!0;return i?void(i.nodeType?(p=Y.createRng(),p.setStartBefore(i),p.setEndAfter(i),d(p)):d(i)):void(G.isCollapsed()&&v.inline&&!Y.select("td.mce-item-selected,th.mce-item-selected").length?L("remove",e,t,n):(f=G.getBookmark(),d(G.getRng(nt)),G.moveToBookmark(f),v.inline&&_(e,t,G.getStart())&&W(G.getRng(!0)),s.nodeChanged()))}function b(e,t,i){var n=h(e);!_(e,t,i)||"toggle"in n[0]&&!n[0].toggle?v(e,t,i):y(e,t,i)}function w(e,t,i,n){function o(e,t,o){var r,s,a,l=t[o];if(t.onmatch)return t.onmatch(e,t,o);if(l)if(l.length===j){for(r in l)if(l.hasOwnProperty(r)){if(s="attributes"===o?Y.getAttrib(e,r):E(e,r),n&&!s&&!t.exact)return;if((!n||t.exact)&&!A(s,M(D(l[r],i),r)))return}}else for(a=0;a<l.length;a++)if("attributes"===o?Y.getAttrib(e,l[a]):E(e,l[a]))return t;return t}var r,s,a,l=h(t);if(l&&e)for(s=0;s<l.length;s++)if(r=l[s],k(e,r)&&o(e,r,"attributes")&&o(e,r,"styles")){if(a=r.classes)for(s=0;s<a.length;s++)if(!Y.hasClass(e,a[s]))return;return r}}function _(e,t,i){function n(i){var n=Y.getRoot();return i===n?!1:(i=Y.getParent(i,function(i){return i.parentNode===n||!!w(i,e,t,!0)}),w(i,e,t))}var o;return i?n(i):(i=G.getNode(),n(i)?nt:(o=G.getStart(),o!=i&&n(o)?nt:it))}function C(e,t){var i,n=[],o={};return i=G.getStart(),Y.getParent(i,function(i){var r,s;for(r=0;r<e.length;r++)s=e[r],!o[s]&&w(i,s,t)&&(o[s]=!0,n.push(s))},Y.getRoot()),n}function x(e){var t,i,n,o,r,s=h(e);if(s)for(t=G.getStart(),i=l(t),o=s.length-1;o>=0;o--){if(r=s[o].selector,!r||s[o].defaultBlock)return nt;for(n=i.length-1;n>=0;n--)if(Y.is(i[n],r))return nt}return it}function T(e,t,i){var n;return V||(V={},n={},s.on("NodeChange",function(e){var t=l(e.element),i={};t=o.grep(t,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),st(V,function(e,o){st(t,function(r){return w(r,o,{},e.similar)?(n[o]||(st(e,function(e){e(!0,{node:r,format:o,parents:t})}),n[o]=e),i[o]=e,!1):void 0})}),st(n,function(o,r){i[r]||(delete n[r],st(o,function(i){i(!1,{node:e.element,format:r,parents:t})}))})})),st(e.split(","),function(e){V[e]||(V[e]=[],V[e].similar=i),V[e].push(t)}),this}function S(e){return r.getCssText(s,e)}function k(e,t){return A(e,t.inline)?nt:A(e,t.block)?nt:t.selector?1==e.nodeType&&Y.is(e,t.selector):void 0}function A(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function E(e,t){return M(Y.getStyle(e,t),t)}function M(e,t){return("color"==t||"backgroundColor"==t)&&(e=Y.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function D(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,i){return t[i]||e})),e}function R(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function N(e,t,i){var n=Y.create(t,i);return e.parentNode.insertBefore(n,e),n.appendChild(e),n}function P(t,i,n){function o(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var n,o,r,s,a;if(n=o=e?g:y,s=e?"previousSibling":"nextSibling",a=Y.getRoot(),3==n.nodeType&&!R(n)&&(e?v>0:b<n.nodeValue.length))return n;for(;;){if(!i[0].block_expand&&J(o))return o;for(r=o[s];r;r=r[s])if(!rt(r)&&!R(r)&&!t(r))return o;if(o.parentNode==a){n=o;break}o=o.parentNode}return n}function r(e,t){for(t===j&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function c(e){for(var t=e;t;){if(1===t.nodeType&&ot(t))return"false"===ot(t)?t:e;t=t.parentNode}return e}function u(t,i,o){function r(e,t){var i,r,s=e.nodeValue;return"undefined"==typeof t&&(t=o?s.length:0),o?(i=s.lastIndexOf(" ",t),r=s.lastIndexOf("\xa0",t),i=i>r?i:r,-1===i||n||i++):(i=s.indexOf(" ",t),r=s.indexOf("\xa0",t),i=-1!==i&&(-1===r||r>i)?i:r),i}var a,l,c,u;if(3===t.nodeType){if(c=r(t,i),-1!==c)return{container:t,offset:c};u=t}for(a=new e(t,Y.getParent(t,J)||s.getBody());l=a[o?"prev":"next"]();)if(3===l.nodeType){if(u=l,c=r(l),-1!==c)return{container:l,offset:c}}else if(J(l))break;return u?(i=o?0:u.length,{container:u,offset:i}):void 0}function d(e,n){var o,r,s,a;for(3==e.nodeType&&0===e.nodeValue.length&&e[n]&&(e=e[n]),o=l(e),r=0;r<o.length;r++)for(s=0;s<i.length;s++)if(a=i[s],!("collapsed"in a&&a.collapsed!==t.collapsed)&&Y.is(o[r],a.selector))return o[r];return e}function h(e,t){var n,o=Y.getRoot();if(i[0].wrapper||(n=Y.getParent(e,i[0].block,o)),n||(n=Y.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=o&&a(e)})),n&&i[0].wrapper&&(n=l(n,"ul,ol").reverse()[0]||n),!n)for(n=e;n[t]&&!J(n[t])&&(n=n[t],!A(n,"br")););return n||e}var f,p,m,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==g.nodeType&&g.hasChildNodes()&&(f=g.childNodes.length-1,g=g.childNodes[v>f?f:v],3==g.nodeType&&(v=0)),1==y.nodeType&&y.hasChildNodes()&&(f=y.childNodes.length-1,y=y.childNodes[b>f?f:b-1],3==y.nodeType&&(b=y.nodeValue.length)),g=c(g),y=c(y),(rt(g.parentNode)||rt(g))&&(g=rt(g)?g:g.parentNode,g=g.nextSibling||g,3==g.nodeType&&(v=0)),(rt(y.parentNode)||rt(y))&&(y=rt(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),i[0].inline&&(t.collapsed&&(m=u(g,v,!0),m&&(g=m.container,v=m.offset),m=u(y,b),m&&(y=m.container,b=m.offset)),p=r(y,b),p.node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=r(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(y=p.node,y.splitText(p.offset-1))}return(i[0].inline||i[0].block_expand)&&(i[0].inline&&3==g.nodeType&&0!==v||(g=o(!0)),i[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=o())),i[0].selector&&i[0].expand!==it&&!i[0].inline&&(g=d(g,"previousSibling"),y=d(y,"nextSibling")),(i[0].block||i[0].selector)&&(g=h(g,"previousSibling"),y=h(y,"nextSibling"),i[0].block&&(J(g)||(g=o(!0)),J(y)||(y=o()))),1==g.nodeType&&(v=Z(g),g=g.parentNode),1==y.nodeType&&(b=Z(y)+1,y=y.parentNode),{startContainer:g,startOffset:v,endContainer:y,endOffset:b}}function O(e,t){return t.links&&"A"==e.tagName}function H(e,t,i,n){var o,r,s;if(!k(i,e)&&!O(i,e))return it;if("all"!=e.remove)for(st(e.styles,function(o,r){o=M(D(o,t),r),"number"==typeof r&&(r=o,n=0),(e.remove_similar||!n||A(E(n,r),o))&&Y.setStyle(i,r,""),s=1}),s&&""===Y.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),st(e.attributes,function(e,o){var r;if(e=D(e,t),"number"==typeof o&&(o=e,n=0),!n||A(Y.getAttrib(n,o),e)){if("class"==o&&(e=Y.getAttrib(i,o),e&&(r="",st(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(r+=(r?" ":"")+e)}),r)))return void Y.setAttrib(i,o,r);"class"==o&&i.removeAttribute("className"),tt.test(o)&&i.removeAttribute("data-mce-"+o),i.removeAttribute(o)}}),st(e.classes,function(e){e=D(e,t),(!n||Y.hasClass(n,e))&&Y.removeClass(i,e)}),r=Y.getAttribs(i),o=0;o<r.length;o++)if(0!==r[o].nodeName.indexOf("_"))return it;return"none"!=e.remove?(F(i,e),nt):void 0}function F(e,t){function i(e,t,i){return e=I(e,t,i),!e||"BR"==e.nodeName||J(e)}var n,o=e.parentNode;t.block&&(Q?o==Y.getRoot()&&(t.list_block&&A(e,t.list_block)||st(at(e.childNodes),function(e){X(Q,e.nodeName.toLowerCase())?n?n.appendChild(e):(n=N(e,Q),Y.setAttribs(n,s.settings.forced_root_block_attrs)):n=0})):J(e)&&!J(o)&&(i(e,it)||i(e.firstChild,nt,1)||e.insertBefore(Y.create("br"),e.firstChild),i(e,nt)||i(e.lastChild,it,1)||e.appendChild(Y.create("br")))),t.selector&&t.inline&&!A(t.inline,e)||Y.remove(e,1)}function I(e,t,i){if(e)for(t=t?"nextSibling":"previousSibling",e=i?e:e[t];e;e=e[t])if(1==e.nodeType||!R(e))return e}function B(e,t){function i(e,t){for(o=e;o;o=o[t]){if(3==o.nodeType&&0!==o.nodeValue.length)return e;if(1==o.nodeType&&!rt(o))return o}return e}var o,r,s=new n(Y);if(e&&t&&(e=i(e,"previousSibling"),t=i(t,"nextSibling"),s.compare(e,t))){for(o=e.nextSibling;o&&o!=t;)r=o,o=o.nextSibling,e.appendChild(r);return Y.remove(t),st(at(t.childNodes),function(t){e.appendChild(t)}),e}return t}function z(t,i){var n,o,r;return n=t[i?"startContainer":"endContainer"],o=t[i?"startOffset":"endOffset"],1==n.nodeType&&(r=n.childNodes.length-1,!i&&o&&o--,n=n.childNodes[o>r?r:o]),3===n.nodeType&&i&&o>=n.nodeValue.length&&(n=new e(n,s.getBody()).next()||n),3!==n.nodeType||i||0!==o||(n=new e(n,s.getBody()).prev()||n),n}function L(t,i,n,o){function r(e){var t=Y.create("span",{id:g,"data-mce-bogus":!0,style:b?"color:red":""});return e&&t.appendChild(s.getDoc().createTextNode(et)),t}function l(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==et||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function c(e){for(;e;){if(e.id===g)return e;e=e.parentNode}}function u(t){var i;if(t)for(i=new e(t,t),t=i.current();t;t=i.next())if(3===t.nodeType)return t}function d(e,t){var i,n;if(e)n=G.getRng(!0),l(e)?(t!==!1&&(n.setStartBefore(e),n.setEndBefore(e)),Y.remove(e)):(i=u(e),i.nodeValue.charAt(0)===et&&(i.deleteData(0,1),n.startContainer==i&&n.startOffset>0&&n.setStart(i,n.startOffset-1),n.endContainer==i&&n.endOffset>0&&n.setEnd(i,n.endOffset-1)),Y.remove(e,1)),G.setRng(n);else if(e=c(G.getStart()),!e)for(;e=Y.get(g);)d(e,!1)}function f(){var e,t,o,s,a,l,d;e=G.getRng(!0),s=e.startOffset,l=e.startContainer,d=l.nodeValue,t=c(G.getStart()),t&&(o=u(t)),d&&s>0&&s<d.length&&/\w/.test(d.charAt(s))&&/\w/.test(d.charAt(s-1))?(a=G.getBookmark(),e.collapse(!0),e=P(e,h(i)),e=K.split(e),v(i,n,e),G.moveToBookmark(a)):(t&&o.nodeValue===et?v(i,n,t):(t=r(!0),o=t.firstChild,e.insertNode(t),s=1,v(i,n,t)),G.setCursorLocation(o,s))}function p(){var e,t,s,l,c,u,d,f,p=G.getRng(!0),m=[];for(e=p.startContainer,t=p.startOffset,c=e,3==e.nodeType&&(t!=e.nodeValue.length&&(l=!0),c=c.parentNode);c;){if(w(c,i,n,o)){u=c;break}c.nextSibling&&(l=!0),m.push(c),c=c.parentNode}if(u)if(l)s=G.getBookmark(),p.collapse(!0),p=P(p,h(i),!0),p=K.split(p),y(i,n,p),G.moveToBookmark(s);else{for(f=r(),c=f,d=m.length-1;d>=0;d--)c.appendChild(Y.clone(m[d],!1)),c=c.firstChild;c.appendChild(Y.doc.createTextNode(et)),c=c.firstChild;var g=Y.getParent(u,a);g&&Y.isEmpty(g)?u.parentNode.replaceChild(f,u):Y.insertAfter(f,u),G.setCursorLocation(c,1),Y.isEmpty(u)&&Y.remove(u)}}function m(){var e;e=c(G.getStart()),e&&!Y.isEmpty(e)&&lt(e,function(e){1!=e.nodeType||e.id===g||Y.isEmpty(e)||Y.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var g="_mce_caret",b=s.settings.caret_debug;s._hasCaretEvents||(U=function(){var e,t=[];if(l(c(G.getStart()),t))for(e=t.length;e--;)Y.setAttrib(t[e],"data-mce-bogus","1")},q=function(e){var t=e.keyCode;d(),(8==t||37==t||39==t)&&d(c(G.getStart())),m()},s.on("SetContent",function(e){e.selection&&m()}),s._hasCaretEvents=!0),"apply"==t?f():p()}function W(t){var i,n,o,r,s,a=t.startContainer,l=t.startOffset;if(3==a.nodeType&&l>=a.nodeValue.length&&(l=Z(a),a=a.parentNode,i=!0),1==a.nodeType)for(r=a.childNodes,a=r[Math.min(l,r.length-1)],n=new e(a,Y.getParent(a,Y.isBlock)),(l>r.length-1||i)&&n.next(),o=n.current();o;o=n.next())if(3==o.nodeType&&!R(o))return s=Y.create("a",{"data-mce-bogus":"all"},et),o.parentNode.insertBefore(s,o),t.setStart(o,0),G.setRng(t),void Y.remove(s)}var V,j,q,U,$={},Y=s.dom,G=s.selection,K=new t(Y),X=s.schema.isValidChild,J=Y.isBlock,Q=s.settings.forced_root_block,Z=Y.nodeIndex,et="\ufeff",tt=/^(src|href|style)$/,it=!1,nt=!0,ot=Y.getContentEditable,rt=i.isBookmarkNode,st=o.each,at=o.grep,lt=o.walk,ct=o.extend;ct(this,{get:h,register:f,unregister:p,apply:v,remove:y,toggle:b,match:_,matchAll:C,matchNode:w,canApply:x,formatChanged:T,getCssText:S}),u(),d(),s.on("BeforeGetContent",function(e){U&&"raw"!=e.format&&U()}),s.on("mouseup keydown",function(e){q&&q(e)})}}),/**
 * UndoManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/UndoManager",["tinymce/Env","tinymce/util/Tools","tinymce/html/SaxParser"],function(e,t,i){var n,o=t.trim;return n=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[\u200b\ufeff]+<\\/span>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function r(){var e,r,s,a,l,c=t.getContent({format:"raw",no_events:1}),u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,d=t.schema;for(c=c.replace(n,""),l=d.getShortEndedElements();a=u.exec(c);)r=u.lastIndex,s=a[0].length,e=l[a[1]]?r:i.findEndTag(d,c,r),c=c.substring(0,r-s)+c.substring(e),u.lastIndex=r-s;return o(c)}function s(e){c.typing=!1,c.add({},e)}var a,l,c=this,u=0,d=[],h=0;return t.on("init",function(){c.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&c.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&s(e)}),t.on("ObjectResizeStart",function(){c.beforeChange()}),t.on("SaveContent ObjectResized blur",s),t.on("DragEnd",s),t.on("KeyUp",function(i){var n=i.keyCode;(n>=33&&36>=n||n>=37&&40>=n||45==n||13==n||i.ctrlKey)&&(s(),t.nodeChanged()),(46==n||8==n||e.mac&&(91==n||93==n))&&t.nodeChanged(),l&&c.typing&&(t.isDirty()||(t.isNotDirty=!d[0]||r()==d[0].content,t.isNotDirty||t.fire("change",{level:d[0],lastLevel:null})),t.fire("TypingUndo"),l=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?void(c.typing&&s(e)):void((16>t||t>20)&&224!=t&&91!=t&&!c.typing&&(c.beforeChange(),c.typing=!0,c.add({},e),l=!0))}),t.on("MouseDown",function(e){c.typing&&s(e)}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||t.nodeChanged()}),c={data:d,typing:!1,beforeChange:function(){h||(a=t.selection.getBookmark(2,!0))},add:function(e,i){var n,o,s=t.settings;if(e=e||{},e.content=r(),h||t.removed)return null;if(o=d[u],t.fire("BeforeAddUndo",{level:e,lastLevel:o,originalEvent:i}).isDefaultPrevented())return null;if(o&&o.content==e.content)return null;if(d[u]&&(d[u].beforeBookmark=a),s.custom_undo_redo_levels&&d.length>s.custom_undo_redo_levels){for(n=0;n<d.length-1;n++)d[n]=d[n+1];d.length--,u=d.length}e.bookmark=t.selection.getBookmark(2,!0),u<d.length-1&&(d.length=u+1),d.push(e),u=d.length-1;var l={level:e,lastLevel:o,originalEvent:i};return t.fire("AddUndo",l),u>0&&(t.isNotDirty=!1,t.fire("change",l)),e},undo:function(){var e;return c.typing&&(c.add(),c.typing=!1),u>0&&(e=d[--u],0===u&&(t.isNotDirty=!0),t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return u<d.length-1&&(e=d[++u],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){d=[],u=0,c.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return u>0||c.typing&&d[0]&&r()!=d[0].content},hasRedo:function(){return u<d.length-1&&!this.typing},transact:function(e){c.beforeChange();try{h++,e()}finally{h--}c.add()}}}}),/**
 * EnterKey.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/EnterKey",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/Env"],function(e,t,i){var n=i.ie&&i.ie<11;return function(o){function r(r){function h(e){return e&&s.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==s.getContentEditable(e)}function f(e){var t;s.isBlock(e)&&(t=a.getRng(),e.appendChild(s.create("span",null,"\xa0")),a.select(e),e.lastChild.outerHTML="",a.setRng(t))}function p(e){var t,i=e,n=[];if(i){for(;i=i.firstChild;){if(s.isBlock(i))return;1!=i.nodeType||d[i.nodeName.toLowerCase()]||n.push(i)}for(t=n.length;t--;)i=n[t],!i.hasChildNodes()||i.firstChild==i.lastChild&&""===i.firstChild.nodeValue?s.remove(i):"A"==i.nodeName&&" "===(i.innerText||i.textContent)&&s.remove(i)}}function m(t){function n(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var o,r,l,c,u=t;if(t){if(i.ie&&i.ie<9&&D&&D.firstChild&&D.firstChild==D.lastChild&&"BR"==D.firstChild.tagName&&s.remove(D.firstChild),/^(LI|DT|DD)$/.test(t.nodeName)){var h=n(t.firstChild);h&&/^(UL|OL|DL)$/.test(h.nodeName)&&t.insertBefore(s.doc.createTextNode("\xa0"),t.firstChild)}if(l=s.createRng(),i.ie||t.normalize(),t.hasChildNodes()){for(o=new e(t,t);r=o.current();){if(3==r.nodeType){l.setStart(r,0),l.setEnd(r,0);break}if(d[r.nodeName.toLowerCase()]){l.setStartBefore(r),l.setEndBefore(r);break}u=r,r=o.next()}r||(l.setStart(u,0),l.setEnd(u,0))}else"BR"==t.nodeName?t.nextSibling&&s.isBlock(t.nextSibling)?((!R||9>R)&&(c=s.create("br"),t.parentNode.insertBefore(c,t)),l.setStartBefore(t),l.setEndBefore(t)):(l.setStartAfter(t),l.setEndAfter(t)):(l.setStart(t,0),l.setEnd(t,0));a.setRng(l),s.remove(c),a.scrollIntoView(t)}}function g(e){var t=l.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&s.setAttribs(e,l.forced_root_block_attrs)}function v(e){var t,i,o,r=E,a=u.getTextInlineElements();if(e||"TABLE"==F?(t=s.create(e||B),g(t)):t=D.cloneNode(!1),o=t,l.keep_styles!==!1)do if(a[r.nodeName]){if("_mce_caret"==r.id)continue;i=r.cloneNode(!1),s.setAttrib(i,"id",""),t.hasChildNodes()?(i.appendChild(t.firstChild),t.appendChild(i)):(o=i,t.appendChild(i))}while(r=r.parentNode);return n||(o.innerHTML='<br data-mce-bogus="1">'),t}function y(t){var i,n,o;if(3==E.nodeType&&(t?M>0:M<E.nodeValue.length))return!1;if(E.parentNode==D&&z&&!t)return!0;if(t&&1==E.nodeType&&E==D.firstChild)return!0;if("TABLE"===E.nodeName||E.previousSibling&&"TABLE"==E.previousSibling.nodeName)return z&&!t||!z&&t;for(i=new e(E,D),3==E.nodeType&&(t&&0===M?i.prev():t||M!=E.nodeValue.length||i.next());n=i.current();){if(1===n.nodeType){if(!n.getAttribute("data-mce-bogus")&&(o=n.nodeName.toLowerCase(),d[o]&&"br"!==o))return!1}else if(3===n.nodeType&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;t?i.prev():i.next()}return!0}function b(e,t){var i,n,r,a,l,c,d=B||"P";if(n=s.getParent(e,s.isBlock),c=o.getBody().nodeName.toLowerCase(),!n||!h(n)){if(n=n||A,!n.hasChildNodes())return i=s.create(d),g(i),n.appendChild(i),S.setStart(i,0),S.setEnd(i,0),i;for(a=e;a.parentNode!=n;)a=a.parentNode;for(;a&&!s.isBlock(a);)r=a,a=a.previousSibling;if(r&&u.isValidChild(c,d.toLowerCase())){for(i=s.create(d),g(i),r.parentNode.insertBefore(i,r),a=r;a&&!s.isBlock(a);)l=a.nextSibling,i.appendChild(a),a=l;S.setStart(e,t),S.setEnd(e,t)}}return e}function w(){function e(e){for(var t=H[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===D}function t(){var e=H.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:H}var i=H.parentNode.nodeName;/^(OL|UL|LI)$/.test(i)&&(B="LI"),P=B?v(B):s.create("BR"),e(!0)&&e()?"LI"==i?s.insertAfter(P,t()):s.replace(P,H):e(!0)?"LI"==i?(s.insertAfter(P,t()),P.appendChild(s.doc.createTextNode(" ")),P.appendChild(H)):H.parentNode.insertBefore(P,H):e()?(s.insertAfter(P,t()),f(P)):(H=t(),k=S.cloneRange(),k.setStartAfter(D),k.setEndAfter(H),O=k.extractContents(),"LI"==B&&"LI"==O.firstChild.nodeName?(P=O.firstChild,s.insertAfter(O,H)):(s.insertAfter(O,H),s.insertAfter(P,H))),s.remove(D),m(P),c.add()}function _(){o.execCommand("InsertLineBreak",!1,r)}function C(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function x(e){var t,i,n=s.getRoot();for(t=e;t!==n&&"false"!==s.getContentEditable(t);)"true"===s.getContentEditable(t)&&(i=t),t=t.parentNode;return t!==n?i:n}function T(e){var t;n||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(s.getStyle(t,"float",!0)))&&s.add(e,"br"))}var S,k,A,E,M,D,R,N,P,O,H,F,I,B,z;if(S=a.getRng(!0),!r.isDefaultPrevented()){if(!S.collapsed)return void o.execCommand("Delete");if(new t(s).normalize(S),E=S.startContainer,M=S.startOffset,B=(l.force_p_newlines?"p":"")||l.forced_root_block,B=B?B.toUpperCase():"",R=s.doc.documentMode,N=r.shiftKey,1==E.nodeType&&E.hasChildNodes()&&(z=M>E.childNodes.length-1,E=E.childNodes[Math.min(M,E.childNodes.length-1)]||E,M=z&&3==E.nodeType?E.nodeValue.length:0),A=x(E)){if(c.beforeChange(),!s.isBlock(A)&&A!=s.getRoot())return void((!B||N)&&_());if((B&&!N||!B&&N)&&(E=b(E,M)),D=s.getParent(E,s.isBlock),H=D?s.getParent(D.parentNode,s.isBlock):null,F=D?D.nodeName.toUpperCase():"",I=H?H.nodeName.toUpperCase():"","LI"!=I||r.ctrlKey||(D=H,F=I),/^(LI|DT|DD)$/.test(F)){if(!B&&N)return void _();if(s.isEmpty(D))return void w()}if("PRE"==F&&l.br_in_pre!==!1){if(!N)return void _()}else if(!B&&!N&&"LI"!=F||B&&N)return void _();B&&D===o.getBody()||(B=B||"P",y()?(P=/^(H[1-6]|PRE|FIGURE)$/.test(F)&&"HGROUP"!=I?v(B):v(),l.end_container_on_empty_block&&h(H)&&s.isEmpty(D)?P=s.split(H,D):s.insertAfter(P,D),m(P)):y(!0)?(P=D.parentNode.insertBefore(v(),D),f(P),m(D)):(k=S.cloneRange(),k.setEndAfter(D),O=k.extractContents(),C(O),P=O.firstChild,s.insertAfter(O,D),p(P),T(D),m(P)),s.setAttrib(P,"id",""),o.fire("NewBlock",{newBlock:P}),c.add())}}}var s=o.dom,a=o.selection,l=o.settings,c=o.undoManager,u=o.schema,d=u.getNonEmptyElements();o.on("keydown",function(e){13==e.keyCode&&r(e)!==!1&&e.preventDefault()})}}),/**
 * ForceBlocks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ForceBlocks",[],function(){return function(e){function t(){var t,a,l,c,u,d,h,f,p,m,g,v,y=o.getStart(),b=e.getBody(),w=-16777215;if(v=i.forced_root_block,y&&1===y.nodeType&&v){for(;y&&y!=b;){if(s[y.nodeName])return;y=y.parentNode}if(t=o.getRng(),t.setStart){a=t.startContainer,l=t.startOffset,c=t.endContainer,u=t.endOffset;try{p=e.getDoc().activeElement===b}catch(_){}}else t.item&&(y=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(y)),p=t.parentElement().ownerDocument===e.getDoc(),m=t.duplicate(),m.collapse(!0),l=-1*m.move("character",w),m.collapsed||(m=t.duplicate(),m.collapse(!1),u=-1*m.move("character",w)-l);for(y=b.firstChild,g=b.nodeName.toLowerCase();y;)if((3===y.nodeType||1==y.nodeType&&!s[y.nodeName])&&r.isValidChild(g,v.toLowerCase())){if(3===y.nodeType&&0===y.nodeValue.length){h=y,y=y.nextSibling,n.remove(h);continue}d||(d=n.create(v,e.settings.forced_root_block_attrs),y.parentNode.insertBefore(d,y),f=!0),h=y,y=y.nextSibling,d.appendChild(h)}else d=null,y=y.nextSibling;if(f&&p){if(t.setStart)t.setStart(a,l),t.setEnd(c,u),o.setRng(t);else try{t=e.getDoc().body.createTextRange(),t.moveToElementText(b),t.collapse(!0),t.moveStart("character",l),u>0&&t.moveEnd("character",u),t.select()}catch(_){}e.nodeChanged()}}}var i=e.settings,n=e.dom,o=e.selection,r=e.schema,s=r.getBlockElements();i.forced_root_block&&e.on("NodeChange",t)}}),/**
 * EditorCommands.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/EditorCommands",["tinymce/html/Serializer","tinymce/Env","tinymce/util/Tools","tinymce/dom/ElementUtils","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker"],function(e,i,n,o,r,s){var a=n.each,l=n.extend,c=n.map,u=n.inArray,d=n.explode,h=i.gecko,f=i.ie,p=i.ie&&i.ie<11,m=!0,g=!1;return function(n){function v(e,t,i){var n;return e=e.toLowerCase(),(n=M.exec[e])?(n(e,t,i),m):g}function y(e){var t;return e=e.toLowerCase(),(t=M.state[e])?t(e):-1}function b(e){var t;return e=e.toLowerCase(),(t=M.value[e])?t(e):g}function w(e,t){t=t||"exec",a(e,function(e,i){a(i.toLowerCase().split(","),function(i){M[t][i]=e})})}function _(e,i,o){return i===t&&(i=g),o===t&&(o=null),n.getDoc().execCommand(e,i,o)}function C(e){return R.match(e)}function x(e,i){R.toggle(e,i?{value:i}:t),n.nodeChanged()}function T(e){k=E.getBookmark(e)}function S(){E.moveToBookmark(k)}var k,A=n.dom,E=n.selection,M={state:{},exec:{},value:{}},D=n.settings,R=n.formatter;l(this,{execCommand:v,queryCommandState:y,queryCommandValue:b,addCommands:w}),w({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(e){var t,o=n.getDoc();try{_(e)}catch(r){t=m}if(t||!o.queryCommandSupported(e)){var s=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");i.mac&&(s=s.replace(/Ctrl\+/g,"\u2318+")),n.windowManager.alert(s)}},unlink:function(){if(E.isCollapsed()){var e=E.getNode();return void("A"==e.tagName&&n.dom.remove(e,!0))}R.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),a("left,center,right,justify".split(","),function(e){t!=e&&R.remove("align"+e)}),x("align"+t),v("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,i;_(e),t=A.getParent(E.getNode(),"ol,ul"),t&&(i=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(T(),A.split(i,t),S()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){x(e)},"ForeColor,HiliteColor,FontName":function(e,t,i){x(e,i)},FontSize:function(e,t,i){var n,o;i>=1&&7>=i&&(o=d(D.font_size_style_values),n=d(D.font_size_classes),i=n?n[i-1]||i:o[i-1]||i),x(e,i)},RemoveFormat:function(e){R.remove(e)},mceBlockQuote:function(){x("blockquote")},FormatBlock:function(e,t,i){return x(i||"p")},mceCleanup:function(){var e=E.getBookmark();n.setContent(n.getContent({cleanup:m}),{cleanup:m}),E.moveToBookmark(e)},mceRemoveNode:function(e,t,i){var o=i||E.getNode();o!=n.getBody()&&(T(),n.dom.remove(o,m),S())},mceSelectNodeDepth:function(e,t,i){var o=0;A.getParent(E.getNode(),function(e){return 1==e.nodeType&&o++==i?(E.select(e),g):void 0},n.getBody())},mceSelectNode:function(e,t,i){E.select(i)},mceInsertContent:function(t,i,r){function s(e){function t(e){return n[e]&&3==n[e].nodeType}var i,n,o;return i=E.getRng(!0),n=i.startContainer,o=i.startOffset,3==n.nodeType&&(o>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),o<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function l(e){if(C)for(b=e.firstChild;b;b=b.walk(!0))x[b.name]&&b.attr("data-mce-new","true")}function c(){if(C){var e=n.getBody(),t=new o(A);a(A.select("*[data-mce-new]"),function(i){i.removeAttribute("data-mce-new");for(var n=i.parentNode;n&&n!=e;n=n.parentNode)t.compare(n,i)&&A.remove(i,!0)})}}var u,d,h,p,m,g,v,y,b,w,_,C,x=n.schema.getTextInlineElements();"string"!=typeof r&&(C=r.merge,r=r.content),/^ | $/.test(r)&&(r=s(r)),u=n.parser,d=new e({},n.schema),_='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',g={content:r,format:"html",selection:!0},n.fire("BeforeSetContent",g),r=g.content,-1==r.indexOf("{$caret}")&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,_),y=E.getRng();var T=y.startContainer||(y.parentElement?y.parentElement():null),S=n.getBody();T===S&&E.isCollapsed()&&A.isBlock(S.firstChild)&&A.isEmpty(S.firstChild)&&(y=A.createRng(),y.setStart(S.firstChild,0),y.setEnd(S.firstChild,0),E.setRng(y)),E.isCollapsed()||n.getDoc().execCommand("Delete",!1,null),h=E.getNode();var k={context:h.nodeName.toLowerCase()};if(m=u.parse(r,k),l(m),b=m.lastChild,"mce_marker"==b.attr("id"))for(v=b,b=b.prev;b;b=b.walk(!0))if(3==b.type||!A.isBlock(b.name)){n.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(v,b,"br"===b.name);break}if(k.invalid){for(E.setContent(_),h=E.getNode(),p=n.getBody(),9==h.nodeType?h=b=p:b=h;b!==p;)h=b,b=b.parentNode;r=h==p?p.innerHTML:A.getOuterHTML(h),r=d.serialize(u.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return d.serialize(m)}))),h==p?A.setHTML(p,r):A.setOuterHTML(h,r)}else r=d.serialize(m),b=h.firstChild,w=h.lastChild,!b||b===w&&"BR"===b.nodeName?A.setHTML(h,r):E.setContent(r);c(),v=A.get("mce_marker"),E.scrollIntoView(v),y=A.createRng(),b=v.previousSibling,b&&3==b.nodeType?(y.setStart(b,b.nodeValue.length),f||(w=v.nextSibling,w&&3==w.nodeType&&(b.appendData(w.data),w.parentNode.removeChild(w)))):(y.setStartBefore(v),y.setEndBefore(v)),A.remove(v),E.setRng(y),n.fire("SetContent",g),n.addVisual()},mceInsertRawHTML:function(e,t,i){E.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(e,t,i){x(i)},mceSetContent:function(e,t,i){n.setContent(i)},"Indent,Outdent":function(e){var t,i,o;t=D.indentation,i=/[a-z%]+$/i.exec(t),t=parseInt(t,10),y("InsertUnorderedList")||y("InsertOrderedList")?_(e):(D.forced_root_block||A.getParent(E.getNode(),A.isBlock)||R.apply("div"),a(E.getSelectedBlocks(),function(r){if("LI"!=r.nodeName){var s=n.getParam("indent_use_margin",!1)?"margin":"padding";s+="rtl"==A.getStyle(r,"direction",!0)?"Right":"Left","outdent"==e?(o=Math.max(0,parseInt(r.style[s]||0,10)-t),A.setStyle(r,s,o?o+i:"")):(o=parseInt(r.style[s]||0,10)+t+i,A.setStyle(r,s,o))}}))},mceRepaint:function(){if(h)try{T(m),E.getSel()&&E.getSel().selectAllChildren(n.getBody()),E.collapse(m),S()}catch(e){}},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(e,t,i){n.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,E.getContent({format:"text"})))},mceInsertLink:function(e,t,i){var n;"string"==typeof i&&(i={href:i}),n=A.getParent(E.getNode(),"a"),i.href=i.href.replace(" ","%20"),n&&i.href||R.remove("link"),i.href&&R.apply("link",i,n)},selectAll:function(){var e,t=A.getRoot();E.getRng().setStart?(e=A.createRng(),e.setStart(t,0),e.setEnd(t,t.childNodes.length),E.setRng(e)):(e=E.getRng(),e.item||(e.moveToElementText(t),e.select()))},"delete":function(){_("Delete");var e=n.getBody();A.isEmpty(e)&&(n.setContent(""),e.firstChild&&A.isBlock(e.firstChild)?n.selection.setCursorLocation(e.firstChild,0):n.selection.setCursorLocation(e,0))},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(e,t,i){function o(){for(var e,t=new s(f,v),i=n.schema.getNonEmptyElements();e=t.next();)if(i[e.nodeName.toLowerCase()]||e.length>0)return!0}var a,l,c,u=i,d=E.getRng(!0);new r(A).normalize(d);var h=d.startOffset,f=d.startContainer;if(1==f.nodeType&&f.hasChildNodes()){var g=h>f.childNodes.length-1;f=f.childNodes[Math.min(h,f.childNodes.length-1)]||f,h=g&&3==f.nodeType?f.nodeValue.length:0}var v=A.getParent(f,A.isBlock),y=v?v.nodeName.toUpperCase():"",b=v?A.getParent(v.parentNode,A.isBlock):null,w=b?b.nodeName.toUpperCase():"",_=u&&u.ctrlKey;"LI"!=w||_||(v=b,y=w),f&&3==f.nodeType&&h>=f.nodeValue.length&&(p||o()||(a=A.create("br"),d.insertNode(a),d.setStartAfter(a),d.setEndAfter(a),l=!0)),a=A.create("br"),d.insertNode(a);var C=A.doc.documentMode;return p&&"PRE"==y&&(!C||8>C)&&a.parentNode.insertBefore(A.doc.createTextNode("\r"),a),c=A.create("span",{},"&nbsp;"),a.parentNode.insertBefore(c,a),E.scrollIntoView(c),A.remove(c),l?(d.setStartBefore(a),d.setEndBefore(a)):(d.setStartAfter(a),d.setEndAfter(a)),E.setRng(d),n.undoManager.add(),m}}),w({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),i=E.isCollapsed()?[A.getParent(E.getNode(),A.isBlock)]:E.getSelectedBlocks(),n=c(i,function(e){return!!R.matchNode(e,t)});return-1!==u(n,m)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return C(e)},mceBlockQuote:function(){return C("blockquote")},Outdent:function(){var e;if(D.inline_styles){if((e=A.getParent(E.getStart(),A.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m;if((e=A.getParent(E.getEnd(),A.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m}return y("InsertUnorderedList")||y("InsertOrderedList")||!D.inline_styles&&!!A.getParent(E.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=A.getParent(E.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),w({"FontSize,FontName":function(e){var t,i=0;return(t=A.getParent(E.getNode(),"span"))&&(i="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),i}},"value"),w({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}),/**
 * URI.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/URI",["tinymce/util/Tools"],function(e){function t(e,r){var s,a,l=this;if(e=n(e),r=l.settings=r||{},s=r.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(l.source=e);var c=0===e.indexOf("//");0!==e.indexOf("/")||c||(e=(s?s.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(a=r.base_uri?r.base_uri.path:new t(location.href).directory,""===r.base_uri.protocol?e="//mce_host"+l.toAbsPath(a,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(s&&s.protocol||"http")+"://mce_host"+l.toAbsPath(a,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),i(o,function(t,i){var n=e[i];n&&(n=n.replace(/\(mce_at\)/g,"@@")),l[t]=n}),s&&(l.protocol||(l.protocol=s.protocol),l.userInfo||(l.userInfo=s.userInfo),l.port||"mce_host"!==l.host||(l.port=s.port),l.host&&"mce_host"!==l.host||(l.host=s.host),l.source=""),c&&(l.protocol="")}var i=e.each,n=e.trim,o="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),r={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var i,n=this;if("./"===e)return e;if(e=new t(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var o=n.getURI(),r=e.getURI();return o==r||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==r?o:(i=n.toRelPath(n.path,e.path),e.query&&(i+="?"+e.query),e.anchor&&(i+="#"+e.anchor),i)},toAbsolute:function(e,i){return e=new t(e,{base_uri:this}),e.getURI(i&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=r[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var i,n,o,r=0,s="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),i=t.split("/"),e.length>=i.length)for(n=0,o=e.length;o>n;n++)if(n>=i.length||e[n]!=i[n]){r=n+1;break}if(e.length<i.length)for(n=0,o=i.length;o>n;n++)if(n>=e.length||e[n]!=i[n]){r=n+1;break}if(1===r)return t;for(n=0,o=e.length-(r-1);o>n;n++)s+="../";for(n=r-1,o=i.length;o>n;n++)s+=n!=r-1?"/"+i[n]:i[n];return s},toAbsPath:function(e,t){var n,o,r,s=0,a=[];for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),i(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?s>0?s--:a.push(t[n]):s++);return n=e.length-s,r=0>=n?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/"),0!==r.indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r},getURI:function(e){var t,i=this;return(!i.source||e)&&(t="",e||(t+=i.protocol?i.protocol+"://":"//",i.userInfo&&(t+=i.userInfo+"@"),i.host&&(t+=i.host),i.port&&(t+=":"+i.port)),i.path&&(t+=i.path),i.query&&(t+="?"+i.query),i.anchor&&(t+="#"+i.anchor),i.source=t),i.source}},t}),/**
 * Class.js
 *
 * Copyright 2003-2012, Moxiecode Systems AB, All rights reserved.
 */
n("tinymce/util/Class",["tinymce/util/Tools"],function(e){function t(){}var i,n,o=e.each,r=e.extend;return t.extend=i=function(e){function t(){var e,t,i,o=this;if(!n&&(o.init&&o.init.apply(o,arguments),t=o.Mixins))for(e=t.length;e--;)i=t[e],i.init&&i.init.apply(o,arguments)}function s(){return this}function a(e,t){return function(){var i,n=this,o=n._super;return n._super=h[e],i=t.apply(n,arguments),n._super=o,i}}var l,c,u,d=this,h=d.prototype;n=!0,l=new d,n=!1,e.Mixins&&(o(e.Mixins,function(t){t=t;for(var i in t)"init"!==i&&(e[i]=t[i])}),h.Mixins&&(e.Mixins=h.Mixins.concat(e.Mixins))),e.Methods&&o(e.Methods.split(","),function(t){e[t]=s}),e.Properties&&o(e.Properties.split(","),function(t){var i="_"+t;e[t]=function(e){var t,n=this;return e!==t?(n[i]=e,n):n[i]}}),e.Statics&&o(e.Statics,function(e,i){t[i]=e}),e.Defaults&&h.Defaults&&(e.Defaults=r({},h.Defaults,e.Defaults));for(c in e)u=e[c],l[c]="function"==typeof u&&h[c]?a(c,u):u;return t.prototype=l,t.constructor=t,t.extend=i,t},t}),/**
 * EventDispatcher.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/EventDispatcher",["tinymce/util/Tools"],function(e){function t(e){function t(){return!1}function i(){return!0}function n(n,o){var s,a,c,u;if(n=n.toLowerCase(),o=o||{},o.type=n,o.target||(o.target=l),o.preventDefault||(o.preventDefault=function(){o.isDefaultPrevented=i},o.stopPropagation=function(){o.isPropagationStopped=i},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=i},o.isDefaultPrevented=t,o.isPropagationStopped=t,o.isImmediatePropagationStopped=t),e.beforeFire&&e.beforeFire(o),s=d[n])for(a=0,c=s.length;c>a;a++){if(s[a]=u=s[a],u.once&&r(n,u),o.isImmediatePropagationStopped())return o.stopPropagation(),o;if(u.call(l,o)===!1)return o.preventDefault(),o}return o}function o(e,i,n){var o,r,s;if(i===!1&&(i=t),i)for(r=e.toLowerCase().split(" "),s=r.length;s--;)e=r[s],o=d[e],o||(o=d[e]=[],c(e,!0)),n?o.unshift(i):o.push(i);return u}function r(e,t){var i,n,o,r,s;if(e)for(r=e.toLowerCase().split(" "),i=r.length;i--;){if(e=r[i],n=d[e],!e){for(o in d)c(o,!1),delete d[o];return u}if(n){if(t)for(s=n.length;s--;)n[s]===t&&(n=n.slice(0,s).concat(n.slice(s+1)),d[e]=n);else n.length=0;n.length||(c(e,!1),delete d[e])}}else{for(e in d)c(e,!1);d={}}return u}function s(e,t,i){return t.once=!0,o(e,t,i)}function a(e){return e=e.toLowerCase(),!(!d[e]||0===d[e].length)}var l,c,u=this,d={};e=e||{},l=e.scope||u,c=e.toggleEvent||t,u.fire=n,u.on=o,u.off=r,u.once=s,u.has=a}var i=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchend"," ");return t.isNative=function(e){return!!i[e.toLowerCase()]},t}),/**
 * Selector.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Selector",["tinymce/util/Class"],function(e){function t(e){for(var t,i=[],n=e.length;n--;)t=e[n],t.__checked||(i.push(t),t.__checked=1);for(n=i.length;n--;)delete i[n].__checked;return i}var i,n=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,o=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=/^\s*|\s*$/g,s=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function i(e){return e?function(t){return t._name===e}:void 0}function s(e){return e?(e=e.split("."),function(t){for(var i=e.length;i--;)if(!t.hasClass(e[i]))return!1;return!0}):void 0}function a(e,t,i){return e?function(n){var o=n[e]?n[e]():"";return t?"="===t?o===i:"*="===t?o.indexOf(i)>=0:"~="===t?(" "+o+" ").indexOf(" "+i+" ")>=0:"!="===t?o!=i:"^="===t?0===o.indexOf(i):"$="===t?o.substr(o.length-i.length)===i:!1:!!i}:void 0}function l(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=u(e[1],[]),function(e){return!d(e,t)}):(e=e[2],function(t,i,n){return"first"===e?0===i:"last"===e?i===n-1:"even"===e?i%2===0:"odd"===e?i%2===1:t[e]?t[e]():!1})):void 0}function c(e,o,c){function u(e){e&&o.push(e)}var d;return d=n.exec(e.replace(r,"")),u(t(d[1])),u(i(d[2])),u(s(d[3])),u(a(d[4],d[5],d[6])),u(l(d[7])),o.psuedo=!!d[7],o.direct=c,o}function u(e,t){var i,n,r,s=[];do if(o.exec(""),n=o.exec(e),n&&(e=n[3],s.push(n[1]),n[2])){i=n[3];break}while(n);for(i&&u(i,t),e=[],r=0;r<s.length;r++)">"!=s[r]&&e.push(c(s[r],[],">"===s[r-1]));return t.push(e),t}var d=this.match;this._selectors=u(e,[])},match:function(e,t){var i,n,o,r,s,a,l,c,u,d,h,f,p;for(t=t||this._selectors,i=0,n=t.length;n>i;i++){for(s=t[i],r=s.length,p=e,f=0,o=r-1;o>=0;o--)for(c=s[o];p;){if(c.psuedo)for(h=p.parent().items(),u=d=h.length;u--&&h[u]!==p;);for(a=0,l=c.length;l>a;a++)if(!c[a](p,u,d)){a=l+1;break}if(a===l){f++;break}if(o===r-1)break;p=p.parent()}if(f===r)return!0}return!1},find:function(e){function n(e,t,i){var o,r,s,l,c,u=t[i];for(o=0,r=e.length;r>o;o++){for(c=e[o],s=0,l=u.length;l>s;s++)if(!u[s](c,o,r)){s=l+1;break}if(s===l)i==t.length-1?a.push(c):c.items&&n(c.items(),t,i+1);else if(u.direct)return;c.items&&n(c.items(),t,i)}}var o,r,a=[],l=this._selectors;if(e.items){for(o=0,r=l.length;r>o;o++)n(e.items(),l[o],0);r>1&&(a=t(a))}return i||(i=s.Collection),new i(a)}});return s}),/**
 * Collection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Collection",["tinymce/util/Tools","tinymce/ui/Selector","tinymce/util/Class"],function(e,t,i){var n,o,r=Array.prototype.push,s=Array.prototype.slice;return o={length:0,init:function(e){e&&this.add(e)},add:function(t){var i=this;return e.isArray(t)?r.apply(i,t):t instanceof n?i.add(t.toArray()):r.call(i,t),i},set:function(e){var t,i=this,n=i.length;for(i.length=0,i.add(e),t=i.length;n>t;t++)delete i[t];return i},filter:function(e){var i,o,r,s,a=this,l=[];for("string"==typeof e?(e=new t(e),s=function(t){return e.match(t)}):s=e,i=0,o=a.length;o>i;i++)r=a[i],s(r)&&l.push(r);return new n(l)},slice:function(){return new n(s.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,i=t.length;i--&&t[i]!==e;);return i},reverse:function(){return new n(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,t){var i,n,o=this;return t!==i?(o.each(function(i){i[e]&&i[e](t)}),o):(n=o[0],n&&n[e]?n[e]():void 0)},exec:function(t){var i=this,n=e.toArray(arguments).slice(1);return i.each(function(e){e[t]&&e[t].apply(e,n)}),i},remove:function(){for(var e=this.length;e--;)this[e].remove();return this}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){o[t]=function(){var i=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,i)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){o[e]=function(t){return this.prop(e,t)}}),n=i.extend(o),t.Collection=n,n}),/**
 * DOMUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/DomUtils",["tinymce/util/Tools","tinymce/dom/DOMUtils"],function(e,t){var i=0;return{id:function(){return"mceu_"+i++},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,i;if(e.getBoundingClientRect){var n=e.getBoundingClientRect();t=Math.max(n.width||n.right-n.left,e.offsetWidth),i=Math.max(n.height||n.bottom-n.bottom,e.offsetHeight)}else t=e.offsetWidth,i=e.offsetHeight;return{width:t,height:i}},getPos:function(e,i){return t.DOM.getPos(e,i)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,i){return t.DOM.addClass(e,i)},removeClass:function(e,i){return t.DOM.removeClass(e,i)},hasClass:function(e,i){return t.DOM.hasClass(e,i)},toggleClass:function(e,i,n){return t.DOM.toggleClass(e,i,n)},css:function(e,i,n){return t.DOM.setStyle(e,i,n)},getRuntimeStyle:function(e,i){return t.DOM.getStyle(e,i,!0)},on:function(e,i,n,o){return t.DOM.bind(e,i,n,o)},off:function(e,i,n){return t.DOM.unbind(e,i,n)},fire:function(e,i,n){return t.DOM.fire(e,i,n)},innerHtml:function(e,i){t.DOM.setHTML(e,i)}}}),/**
 * Control.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Control",["tinymce/util/Class","tinymce/util/Tools","tinymce/util/EventDispatcher","tinymce/ui/Collection","tinymce/ui/DomUtils"],function(e,t,i,n,o){function r(e){return e._eventDispatcher||(e._eventDispatcher=new i({scope:e,toggleEvent:function(t,n){n&&i.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e._rendered&&e.bindPendingEvents())}})),e._eventDispatcher}var s="onmousewheel"in document,a=!1,l="mce-",c=e.extend({Statics:{classPrefix:l},isRtl:function(){return c.rtl},classPrefix:l,init:function(e){var i,n,r=this;if(r.settings=e=t.extend({},r.Defaults,e),r._id=e.id||o.id(),r._text=r._name="",r._width=r._height=0,r._aria={role:e.role},this._elmCache={},i=e.classes)for(i=i.split(" "),i.map={},n=i.length;n--;)i.map[i[n]]=!0;r._classes=i||[],r.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var i,n=e[t];n!==i?r[t](n):r["_"+t]===i&&(r["_"+t]=!1)}),r.on("click",function(){return r.disabled()?!1:void 0}),e.classes&&t.each(e.classes.split(" "),function(e){r.addClass(e)}),r.settings=e,r._borderBox=r.parseBox(e.border),r._paddingBox=r.parseBox(e.padding),r._marginBox=r.parseBox(e.margin),e.hidden&&r.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t,i=this.getRoot().controlIdLookup;e&&i&&!(t=i[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t,i=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],i)||0,right:parseInt(e[1],i)||0,bottom:parseInt(e[2],i)||0,left:parseInt(e[3],i)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function i(t){var i=document.defaultView;return i?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),i.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function n(e){var t=parseFloat(i(e),10);return isNaN(t)?0:t}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}},initLayoutRect:function(){var e,t,i,n,r,s,a,l,c,u,d=this,h=d.settings,f=d.getEl();e=d._borderBox=d._borderBox||d.measureBox(f,"border"),d._paddingBox=d._paddingBox||d.measureBox(f,"padding"),d._marginBox=d._marginBox||d.measureBox(f,"margin"),u=o.getSize(f),l=h.minWidth,c=h.minHeight,r=l||u.width,s=c||u.height,i=h.width,n=h.height,a=h.autoResize,a="undefined"!=typeof a?a:!i&&!n,i=i||r,n=n||s;var p=e.left+e.right,m=e.top+e.bottom,g=h.maxWidth||65535,v=h.maxHeight||65535;return d._layoutRect=t={x:h.x||0,y:h.y||0,w:i,h:n,deltaW:p,deltaH:m,contentW:i-p,contentH:n-m,innerW:i-p,innerH:n-m,startMinWidth:l||0,startMinHeight:c||0,minW:Math.min(r,g),minH:Math.min(s,v),maxW:g,maxH:v,autoResize:a,scrollW:0},d._lastLayoutRect={},t},layoutRect:function(e){var t,i,n,o,r,s,a=this,l=a._layoutRect;return l||(l=a.initLayoutRect()),e?(n=l.deltaW,o=l.deltaH,e.x!==r&&(l.x=e.x),e.y!==r&&(l.y=e.y),e.minW!==r&&(l.minW=e.minW),e.minH!==r&&(l.minH=e.minH),i=e.w,i!==r&&(i=i<l.minW?l.minW:i,i=i>l.maxW?l.maxW:i,l.w=i,l.innerW=i-n),i=e.h,i!==r&&(i=i<l.minH?l.minH:i,i=i>l.maxH?l.maxH:i,l.h=i,l.innerH=i-o),i=e.innerW,i!==r&&(i=i<l.minW-n?l.minW-n:i,i=i>l.maxW-n?l.maxW-n:i,l.innerW=i,l.w=i+n),i=e.innerH,i!==r&&(i=i<l.minH-o?l.minH-o:i,i=i>l.maxH-o?l.maxH-o:i,l.innerH=i,l.h=i+o),e.contentW!==r&&(l.contentW=e.contentW),e.contentH!==r&&(l.contentH=e.contentH),t=a._lastLayoutRect,(t.x!==l.x||t.y!==l.y||t.w!==l.w||t.h!==l.h)&&(s=c.repaintControls,s&&s.map&&!s.map[a._id]&&(s.push(a),s.map[a._id]=!0),t.x=l.x,t.y=l.y,t.w=l.w,t.h=l.h),a):l},repaint:function(){var e,t,i,n,o,r,s=this,a=0,l=0;r=document.createRange?function(e){return e}:Math.round,e=s.getEl().style,i=s._layoutRect,o=s._lastRepaintRect||{},n=s._borderBox,a=n.left+n.right,l=n.top+n.bottom,i.x!==o.x&&(e.left=r(i.x)+"px",o.x=i.x),i.y!==o.y&&(e.top=r(i.y)+"px",o.y=i.y),i.w!==o.w&&(e.width=r(i.w-a)+"px",o.w=i.w),i.h!==o.h&&(e.height=r(i.h-l)+"px",o.h=i.h),s._hasBody&&i.innerW!==o.innerW&&(t=s.getEl("body").style,t.width=r(i.innerW)+"px",o.innerW=i.innerW),s._hasBody&&i.innerH!==o.innerH&&(t=t||s.getEl("body").style,t.height=r(i.innerH)+"px",o.innerH=i.innerH),s._lastRepaintRect=o,s.fire("repaint",{},!1)},on:function(e,t){function i(e){var t,i;return"string"!=typeof e?e:function(o){return t||n.parentsAndSelf().each(function(n){var o=n.settings.callbacks;return o&&(t=o[e])?(i=n,!1):void 0}),t.call(i,o)}}var n=this;return r(n).on(e,i(t)),n},off:function(e,t){return r(this).off(e,t),this},fire:function(e,t,i){var n=this;if(t=t||{},t.control||(t.control=n),t=r(n).fire(e,t),i!==!1&&n.parent)for(var o=n.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},hasEventListeners:function(e){return r(this).has(e)},parents:function(e){var t,i=this,o=new n;for(t=i.parent();t;t=t.parent())o.add(t);return e&&(o=o.filter(e)),o},parentsAndSelf:function(e){return new n(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var i;e;){for(i=t;i&&e!=i;)i=i.parent();if(e==i)break;e=e.parent()}return e},hasClass:function(e,t){var i=this._classes[t||"control"];return e=this.classPrefix+e,i&&!!i.map[e]},addClass:function(e,t){var i,n,o=this;return e=this.classPrefix+e,i=o._classes[t||"control"],i||(i=[],i.map={},o._classes[t||"control"]=i),i.map[e]||(i.map[e]=e,i.push(e),o._rendered&&(n=o.getEl(t),n&&(n.className=i.join(" ")))),o},removeClass:function(e,t){var i,n,o,r=this;if(e=this.classPrefix+e,i=r._classes[t||"control"],i&&i.map[e])for(delete i.map[e],n=i.length;n--;)i[n]===e&&i.splice(n,1);return r._rendered&&(o=r.getEl(t),o&&(o.className=i.join(" "))),r},toggleClass:function(e,t,i){var n=this;return t?n.addClass(e,i):n.removeClass(e,i),n},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},innerHtml:function(e){return o.innerHtml(this.getEl(),e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=o.get(t)),this._elmCache[t]},visible:function(e){var t,i=this;return"undefined"!=typeof e?(i._visible!==e&&(i._rendered&&(i.getEl().style.display=e?"":"none"),i._visible=e,t=i.parent(),t&&(t._lastRect=null),i.fire(e?"show":"hide")),i):i._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var i=this,n=i.getEl(i.ariaTarget);return"undefined"==typeof t?i._aria[e]:(i._aria[e]=t,i._rendered&&n.setAttribute("role"==e?e:"aria-"+e,t),i)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return c.translate?c.translate(e):e},before:function(e){var t=this,i=t.parent();return i&&i.insert(e,i.items().indexOf(t),!0),t},after:function(e){var t=this,i=t.parent();return i&&i.insert(e,i.items().indexOf(t)),t},remove:function(){var e,t,i=this,n=i.getEl(),r=i.parent();if(i.items){var s=i.items().toArray();for(t=s.length;t--;)s[t].remove()}r&&r.items&&(e=[],r.items().each(function(t){t!==i&&e.push(t)}),r.items().set(e),r._lastRect=null),i._eventsRoot&&i._eventsRoot==i&&o.off(n);var a=i.getRoot().controlIdLookup;return a&&delete a[i._id],n&&n.parentNode&&n.parentNode.removeChild(n),i._rendered=!1,i},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(o.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(o.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e,t,i,n,r,s=this,a=s.settings;for(n in a)0===n.indexOf("on")&&s.on(n.substr(2),a[n]);if(s._eventsRoot){for(i=s.parent();!r&&i;i=i.parent())r=i._eventsRoot;if(r)for(n in r._nativeEvents)s._nativeEvents[n]=!0}s.bindPendingEvents(),a.style&&(e=s.getEl(),e&&(e.setAttribute("style",a.style),e.style.cssText=a.style)),s._visible||o.css(s.getEl(),"display","none"),s.settings.border&&(t=s.borderBox(),o.css(s.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=s.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[s._id]=s;for(var c in s._aria)s.aria(c,s._aria[c]);s.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var i,n,o=e;for(i=n=0;o&&o!=t&&o.nodeType;)i+=o.offsetLeft||0,n+=o.offsetTop||0,o=o.offsetParent;return{x:i,y:n}}var i,n,o,r,s,a,l=this.getEl(),c=l.parentNode,u=t(l,c);return i=u.x,n=u.y,o=l.offsetWidth,r=l.offsetHeight,s=c.clientWidth,a=c.clientHeight,"end"==e?(i-=s-o,n-=a-r):"center"==e&&(i-=s/2-o/2,n-=a/2-r/2),c.scrollLeft=i,c.scrollTop=n,this},bindPendingEvents:function(){function e(e){var t=f.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=u._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),u._lastHoverCtrl=null)}function i(e){var t,i,n,o=f.getParentCtrl(e.target),r=u._lastHoverCtrl,s=0;if(o!==r){if(u._lastHoverCtrl=o,i=o.parents().toArray().reverse(),i.push(o),r){for(n=r.parents().toArray().reverse(),n.push(r),s=0;s<n.length&&i[s]===n[s];s++);for(t=n.length-1;t>=s;t--)r=n[t],r.fire("mouseleave",{target:r.getEl()})}for(t=s;t<i.length;t++)o=i[t],o.fire("mouseenter",{target:o.getEl()})}}function n(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=f.fire("wheel",e)}var r,l,c,u,d,h,f=this;if(f._rendered=!0,d=f._nativeEvents){for(c=f.parents().toArray(),c.unshift(f),r=0,l=c.length;!u&&l>r;r++)u=c[r]._eventsRoot;for(u||(u=c[c.length-1]||f),f._eventsRoot=u,l=r,r=0;l>r;r++)c[r]._eventsRoot=u;var p=u._delegates;p||(p=u._delegates={});for(h in d){if(!d)return!1;"wheel"!==h||a?("mouseenter"===h||"mouseleave"===h?u._hasMouseEnter||(o.on(u.getEl(),"mouseleave",t),o.on(u.getEl(),"mouseover",i),u._hasMouseEnter=1):p[h]||(o.on(u.getEl(),h,e),p[h]=!0),d[h]=!1):s?o.on(f.getEl(),"mousewheel",n):o.on(f.getEl(),"DOMMouseScroll",n)}}},getRoot:function(){for(var e,t=this,i=[];t;){if(t.rootControl){e=t.rootControl;break}i.push(t),e=t,t=t.parent()}e||(e=this);for(var n=i.length;n--;)i[n].rootControl=e;return e},reflow:function(){return this.repaint(),this}});return c}),/**
 * Factory.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Factory",[],function(){var e,t={};return{add:function(e,i){t[e.toLowerCase()]=i},has:function(e){return!!t[e.toLowerCase()]},create:function(i,n){var o,r,s;if(!e){s=tinymce.ui;for(r in s)t[r.toLowerCase()]=s[r];e=!0}if("string"==typeof i?(n=n||{},n.type=i):(n=i,i=n.type),i=i.toLowerCase(),o=t[i],!o)throw new Error("Could not find control by type: "+i);return o=new o(n),o.type=i,o}}}),/**
 * KeyboardNavigation.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/KeyboardNavigation",[],function(){return function(e){function t(e){return e=e||y,e&&e.getAttribute("role")}function i(e){for(var i,n=e||y;n=n.parentNode;)if(i=t(n))return i}function n(e){var t=y;return t?t.getAttribute("aria-"+e):void 0}function o(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function r(e){return o(e)&&!e.hidden?!0:/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(t(e))?!0:!1}function s(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display){r(e)&&i.push(e);for(var n=0;n<e.childNodes.length;n++)t(e.childNodes[n])}}var i=[];return t(e||w.getEl()),i}function a(e){var t,i;e=e||b,i=e.parents().toArray(),i.unshift(e);for(var n=0;n<i.length&&(t=i[n],!t.settings.ariaRoot);n++);return t}function l(e){var t=a(e),i=s(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,i):c(0,i)}function c(e,t){return 0>e?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function u(e,t){var i=-1,n=a();t=t||s(n.getEl());for(var o=0;o<t.length;o++)t[o]===y&&(i=o);i+=e,n.lastAriaIndex=c(i,t)}function d(){var e=i();"tablist"==e?u(-1,s(y.parentNode)):b.parent().submenu?g():u(-1)}function h(){var e=t(),o=i();"tablist"==o?u(1,s(y.parentNode)):"menuitem"==e&&"menu"==o&&n("haspopup")?v():u(1)}function f(){u(-1)}function p(){var e=t(),o=i();"menuitem"==e&&"menubar"==o?v():"button"==e&&n("haspopup")?v({key:"down"}):u(1)}function m(e){var t=i();if("tablist"==t){var n=s(b.getEl("body"))[0];n&&n.focus()}else u(e.shiftKey?-1:1)}function g(){b.fire("cancel")}function v(e){e=e||{},b.fire("click",{target:y,aria:e})}var y,b,w=e.root;try{y=document.activeElement}catch(_){y=document.body}return b=w.getParentCtrl(y),w.on("keydown",function(e){function t(e,t){o(y)||t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,d);break;case 39:t(e,h);break;case 38:t(e,f);break;case 40:t(e,p);break;case 27:g();break;case 14:case 13:case 32:t(e,v);break;case 9:m(e)!==!1&&e.preventDefault()}}),w.on("focusin",function(e){y=e.target,b=e.control}),{focusFirst:l}}}),/**
 * Container.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Container",["tinymce/ui/Control","tinymce/ui/Collection","tinymce/ui/Selector","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/util/Tools","tinymce/ui/DomUtils"],function(e,t,i,n,o,r,s){var a={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var i=this;i._super(e),e=i.settings,i._fixed=e.fixed,i._items=new t,i.isRtl()&&i.addClass("rtl"),i.addClass("container"),i.addClass("container-body","body"),e.containerCls&&i.addClass(e.containerCls),i._layout=n.create((e.layout||i.layout)+"layout"),i.settings.items&&i.add(i.settings.items),i._hasBody=!0},items:function(){return this._items},find:function(e){return e=a[e]=a[e]||new i(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,i,n,o=this;return e&&(i=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav)?void i.focusFirst(o):(n=o.find("*"),o.statusbar&&n.add(o.statusbar.items()),n.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),o)},replace:function(e,t){for(var i,n=this.items(),o=n.length;o--;)if(n[o]===e){n[o]=t;break}o>=0&&(i=t.getEl(),i&&i.parentNode.removeChild(i),i=e.getEl(),i&&i.parentNode.removeChild(i)),t.parent(this)},create:function(t){var i,o=this,s=[];return r.isArray(t)||(t=[t]),r.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),i=r.extend({},o.settings.defaults,t),t.type=i.type=i.type||t.type||o.settings.defaultType||(i.defaults?i.defaults.type:null),t=n.create(i)),s.push(t))}),s},renderNew:function(){var e=this;return e.items().each(function(t,i){var n,o;t.parent(e),t._rendered||(n=e.getEl("body"),o=s.createFragment(t.renderHtml()),n.hasChildNodes()&&i<=n.childNodes.length-1?n.insertBefore(o,n.childNodes[i]):n.appendChild(o),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,i){var n,o,r,s=this;return e=s.create(e),n=s.items(),!i&&t<n.length-1&&(t+=1),t>=0&&t<n.length&&(o=n.slice(0,t).toArray(),r=n.slice(t).toArray(),n.set(o.concat(e,r))),s.renderNew()},fromJSON:function(e){var t=this;for(var i in e)t.find("#"+i).value(e[i]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var i=e.name(),n=e.value();i&&"undefined"!=typeof n&&(t[i]=n)}),t},preRender:function(){},renderHtml:function(){var e=this,t=e._layout,i=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"'+(i?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t._rendered=!0,t.settings.style&&s.css(t.getEl(),t.settings.style),t.settings.border&&(e=t.borderBox(),s.css(t.getEl(),{"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=new o({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,i=e._lastRect;return i&&i.w==t.w&&i.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),/**
 * DragHelper.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/DragHelper",["tinymce/ui/DomUtils"],function(e){function t(){var e,t,i,n,o,r,s,a,l=document,c=Math.max;return e=l.documentElement,t=l.body,i=c(e.scrollWidth,t.scrollWidth),n=c(e.clientWidth,t.clientWidth),o=c(e.offsetWidth,t.offsetWidth),r=c(e.scrollHeight,t.scrollHeight),s=c(e.clientHeight,t.clientHeight),a=c(e.offsetHeight,t.offsetHeight),{width:o>i?n:i,height:a>r?s:r}}return function(i,n){function o(){return h.getElementById(n.handle||i)}var r,s,a,l,c,u,d,h=document;n=n||{},a=function(i){var a,f,p=t();i.preventDefault(),s=i.button,a=o(),u=i.screenX,d=i.screenY,f=window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue("cursor"):a.runtimeStyle.cursor,r=h.createElement("div"),e.css(r,{position:"absolute",top:0,left:0,width:p.width,height:p.height,zIndex:2147483647,opacity:1e-4,cursor:f}),h.body.appendChild(r),e.on(h,"mousemove",c),e.on(h,"mouseup",l),n.start(i)},c=function(e){return e.button!==s?l(e):(e.deltaX=e.screenX-u,e.deltaY=e.screenY-d,e.preventDefault(),void n.drag(e))},l=function(t){e.off(h,"mousemove",c),e.off(h,"mouseup",l),r.parentNode.removeChild(r),n.stop&&n.stop(t)},this.destroy=function(){e.off(o())},e.on(o(),"mousedown",a)}}),/**
 * Scrollable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Scrollable",["tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function i(){function t(t,s,a,l,c,u){var d,h,f,p,m,g,v,y,b;if(h=o.getEl("scroll"+t)){if(y=s.toLowerCase(),b=a.toLowerCase(),o.getEl("absend")&&e.css(o.getEl("absend"),y,o.layoutRect()[l]-1),!c)return void e.css(h,"display","none");e.css(h,"display","block"),d=o.getEl("body"),f=o.getEl("scroll"+t+"t"),p=d["client"+a]-2*r,p-=i&&n?h["client"+u]:0,m=d["scroll"+a],g=p/m,v={},v[y]=d["offset"+s]+r,v[b]=p,e.css(h,v),v={},v[y]=d["scroll"+s]*g,v[b]=p*g,e.css(f,v)}}var i,n,s;s=o.getEl("body"),i=s.scrollWidth>s.clientWidth,n=s.scrollHeight>s.clientHeight,t("h","Left","Width","contentW",i,"Height"),t("v","Top","Height","contentH",n,"Width")}function n(){function i(i,n,s,a,l){var c,u=o._id+"-scroll"+i,d=o.classPrefix;o.getEl().appendChild(e.createFragment('<div id="'+u+'" class="'+d+"scrollbar "+d+"scrollbar-"+i+'"><div id="'+u+'t" class="'+d+'scrollbar-thumb"></div></div>')),o.draghelper=new t(u+"t",{start:function(){c=o.getEl("body")["scroll"+n],e.addClass(e.get(u),d+"active")},drag:function(e){var t,u,d,h,f=o.layoutRect();u=f.contentW>f.innerW,d=f.contentH>f.innerH,h=o.getEl("body")["client"+s]-2*r,h-=u&&d?o.getEl("scroll"+i)["client"+l]:0,t=h/o.getEl("body")["scroll"+s],o.getEl("body")["scroll"+n]=c+e["delta"+a]/t},stop:function(){e.removeClass(e.get(u),d+"active")}})}o.addClass("scroll"),i("v","Top","Height","Y","Width"),i("h","Left","Width","X","Height")}var o=this,r=2;o.settings.autoScroll&&(o._hasScroll||(o._hasScroll=!0,n(),o.on("wheel",function(e){var t=o.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,i()}),e.on(o.getEl("body"),"scroll",i)),i())}}}),/**
 * Panel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Panel",["tinymce/ui/Container","tinymce/ui/Scrollable"],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,i=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof i?i='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":("function"==typeof i&&(i=i.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+i+"</div>"}})}),/**
 * Movable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Movable",["tinymce/ui/DomUtils"],function(e){function t(t,i,n){var o,r,s,a,l,c,u,d,h,f;return h=e.getViewPort(),r=e.getPos(i),s=r.x,a=r.y,t._fixed&&"static"==e.getRuntimeStyle(document.body,"position")&&(s-=h.x,a-=h.y),o=t.getEl(),f=e.getSize(o),l=f.width,c=f.height,f=e.getSize(i),u=f.width,d=f.height,n=(n||"").split(""),"b"===n[0]&&(a+=d),"r"===n[1]&&(s+=u),"c"===n[0]&&(a+=Math.round(d/2)),"c"===n[1]&&(s+=Math.round(u/2)),"b"===n[3]&&(a-=c),"r"===n[4]&&(s-=l),"c"===n[3]&&(a-=Math.round(c/2)),"c"===n[4]&&(s-=Math.round(l/2)),{x:s,y:a,w:l,h:c}}return{testMoveRel:function(i,n){for(var o=e.getViewPort(),r=0;r<n.length;r++){var s=t(this,i,n[r]);if(this._fixed){if(s.x>0&&s.x+s.w<o.w&&s.y>0&&s.y+s.h<o.h)return n[r]}else if(s.x>o.x&&s.x+s.w<o.w+o.x&&s.y>o.y&&s.y+s.h<o.h+o.y)return n[r]}return n[0]},moveRel:function(e,i){"string"!=typeof i&&(i=this.testMoveRel(e,i));var n=t(this,e,i);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var i=this,n=i.layoutRect();return i.moveTo(n.x+e,n.y+t),i},moveTo:function(t,i){function n(e,t,i){return 0>e?0:e+i>t?(e=t-i,0>e?0:e):e}var o=this;if(o.settings.constrainToViewport){var r=e.getViewPort(window),s=o.layoutRect();t=n(t,r.w+r.x,s.w),i=n(i,r.h+r.y,s.h)}return o._rendered?o.layoutRect({x:t,y:i}).repaint():(o.settings.x=t,o.settings.y=i),o.fire("move",{x:t,y:i}),o}}}),/**
 * Resizable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Resizable",["tinymce/ui/DomUtils"],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,i){if(1>=t||1>=i){var n=e.getWindowSize();t=1>=t?t*n.w:t,i=1>=i?i*n.h:i}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:i,w:t,h:i}).reflow()},resizeBy:function(e,t){var i=this,n=i.layoutRect();return i.resizeTo(n.w+e,n.h+t)}}}),/**
 * FloatPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/FloatPanel",["tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/DomUtils"],function(e,t,i,n){function o(){function e(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}u||(u=function(t){if(2!=t.button)for(var i=p.length;i--;){var n=p[i],o=n.getParentCtrl(t.target);if(n.settings.autohide){if(o&&(e(o,n)||n.parent()===o))continue;t=n.fire("autohide",{target:t.target}),t.isDefaultPrevented()||n.hide()}}},n.on(document,"click",u))}function r(){d||(d=function(){var e;for(e=p.length;e--;)a(p[e])},n.on(window,"scroll",d))}function s(){if(!h){var e=document.documentElement,t=e.clientWidth,i=e.clientHeight;h=function(){document.all&&t==e.clientWidth&&i==e.clientHeight||(t=e.clientWidth,i=e.clientHeight,g.hideAll())},n.on(window,"resize",h)}}function a(e){function t(t,i){for(var n,o=0;o<p.length;o++)if(p[o]!=e)for(n=p[o].parent();n&&(n=n.parent());)n==e&&p[o].fixed(t).moveBy(0,i).repaint()}var i=n.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>i&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-i)):(e._autoFixY=e.layoutRect().y,e._autoFixY<i&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,i-e._autoFixY))))}function l(e,t){var i,o,r=g.zIndex||65535;if(e)m.push(t);else for(i=m.length;i--;)m[i]===t&&m.splice(i,1);if(m.length)for(i=0;i<m.length;i++)m[i].modal&&(r++,o=m[i]),m[i].getEl().style.zIndex=r,m[i].zIndex=r,r++;var s=document.getElementById(t.classPrefix+"modal-block");o?n.css(s,"z-index",o.zIndex-1):s&&(s.parentNode.removeChild(s),f=!1),g.currentZIndex=r}function c(e){var t;for(t=p.length;t--;)p[t]===e&&p.splice(t,1);for(t=m.length;t--;)m[t]===e&&m.splice(t,1)}var u,d,h,f,p=[],m=[],g=e.extend({Mixins:[t,i],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.addClass("floatpanel"),e.autohide&&(o(),s(),p.push(t)),e.autofix&&(r(),t.on("move",function(){a(this)})),t.on("postrender show",function(e){if(e.control==t){var i,o=t.classPrefix;t.modal&&!f&&(i=n.createFragment('<div id="'+o+'modal-block" class="'+o+"reset "+o+'fade"></div>'),i=i.firstChild,t.getContainerElm().appendChild(i),setTimeout(function(){n.addClass(i,o+"in"),n.addClass(t.getEl(),o+"in")},0),f=!0),l(!0,t)}}),t.on("show",function(){t.parents().each(function(e){return e._fixed?(t.fixed(!0),!1):void 0})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.addClass("popover").addClass("bottom").addClass(t.isRtl()?"end":"start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var i=n.getViewPort();e?t.layoutRect().y-=i.y:t.layoutRect().y+=i.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e,t=this,i=t._super();for(e=p.length;e--&&p[e]!==t;);return-1===e&&p.push(t),i},hide:function(){return c(this),l(!1,this),this._super()},hideAll:function(){g.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),l(!1,e)),e},remove:function(){c(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return g.hideAll=function(){for(var e=p.length;e--;){var t=p[e];t&&t.settings.autohide&&(t.hide(),p.splice(e,1))}},g}),/**
 * Window.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Window",["tinymce/ui/FloatPanel","tinymce/ui/Panel","tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(e,t,i,n){var o=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var i=this;i._super(e),i.isRtl()&&i.addClass("rtl"),i.addClass("window"),i._fixed=!0,e.buttons&&(i.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:i.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),i.statusbar.addClass("foot"),i.statusbar.parent(i)),i.on("click",function(e){-1!=e.target.className.indexOf(i.classPrefix+"close")&&i.close()}),i.on("cancel",function(){i.close()}),i.aria("describedby",i.describedBy||i._id+"-none"),i.aria("label",e.title),i._fullscreen=!1},recalc:function(){var e,t,n,o,r=this,s=r.statusbar;r._fullscreen&&(r.layoutRect(i.getWindowSize()),r.layoutRect().contentH=r.layoutRect().innerH),r._super(),e=r.layoutRect(),r.settings.title&&!r._fullscreen&&(t=e.headerW,t>e.w&&(n=e.x-Math.max(0,t/2),r.layoutRect({w:t,x:n}),o=!0)),s&&(s.layoutRect({w:r.layoutRect().innerW}).recalc(),t=s.layoutRect().minW+e.deltaW,t>e.w&&(n=e.x-Math.max(0,t-e.w),r.layoutRect({w:t,x:n}),o=!0)),o&&r.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),o=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var r=i.getSize(e);n.headerW=r.width,n.headerH=r.height,o+=n.headerH}t.statusbar&&(o+=t.statusbar.layoutRect().h),n.deltaH+=o,n.minH+=o,n.h+=o;var s=i.getWindowSize();return n.x=Math.max(0,s.w/2-n.w/2),n.y=Math.max(0,s.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,i=e._id,n=e.classPrefix,o=e.settings,r="",s="",a=o.html;return e.preRender(),t.preRender(e),o.title&&(r='<div id="'+i+'-head" class="'+n+'window-head"><div id="'+i+'-title" class="'+n+'title">'+e.encode(o.title)+'</div><button type="button" class="'+n+'close" aria-hidden="true">\xd7</button><div id="'+i+'-dragh" class="'+n+'dragh"></div></div>'),o.url&&(a='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),"undefined"==typeof a&&(a=t.renderHtml(e)),e.statusbar&&(s=e.statusbar.renderHtml()),'<div id="'+i+'" class="'+e.classes()+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+r+'<div id="'+i+'-body" class="'+e.classes("body")+'">'+a+"</div>"+s+"</div></div>"},fullscreen:function(e){var t,n,o=this,r=document.documentElement,s=o.classPrefix;if(e!=o._fullscreen)if(i.on(window,"resize",function(){var e;if(o._fullscreen)if(t)o._timer||(o._timer=setTimeout(function(){var e=i.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h),o._timer=0},50));else{e=(new Date).getTime();var n=i.getWindowSize();o.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-e>50&&(t=!0)}}),n=o.layoutRect(),o._fullscreen=e,e){o._initial={x:n.x,y:n.y,w:n.w,h:n.h},o._borderBox=o.parseBox("0"),o.getEl("head").style.display="none",n.deltaH-=n.headerH+2,i.addClass(r,s+"fullscreen"),i.addClass(document.body,s+"fullscreen"),o.addClass("fullscreen");var a=i.getWindowSize();o.moveTo(0,0).resizeTo(a.w,a.h)}else o._borderBox=o.parseBox(o.settings.border),o.getEl("head").style.display="",n.deltaH+=n.headerH,i.removeClass(r,s+"fullscreen"),i.removeClass(document.body,s+"fullscreen"),o.removeClass("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.addClass("in")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new n(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(i){t.moveTo(e.x+i.deltaX,e.y+i.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t=e.classPrefix;e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),e._fullscreen&&(i.removeClass(document.documentElement,t+"fullscreen"),i.removeClass(document.body,t+"fullscreen"))},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return o}),/**
 * MessageBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/MessageBox",["tinymce/ui/Window"],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(i){function n(e,t,i){return{type:"button",text:e,subtype:i?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}var o,r=i.callback||function(){};switch(i.buttons){case t.OK_CANCEL:o=[n("Ok",!0,!0),n("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:o=[n("Yes",1,!0),n("No",0)],i.buttons==t.YES_NO_CANCEL&&o.push(n("Cancel",-1));break;default:o=[n("Ok",!0,!0)]}return new e({padding:20,x:i.x,y:i.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:o,title:i.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:i.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:i.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(e,i){return"string"==typeof e&&(e={text:e}),e.callback=i,t.msgBox(e)},confirm:function(e,i){return"string"==typeof e&&(e={text:e}),e.callback=i,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),/**
 * WindowManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],function(e,t){return function(i){function n(){return r.length?r[r.length-1]:void 0}var o=this,r=[];o.windows=r,i.on("remove",function(){for(var e=r.length;e--;)r[e].close()}),o.open=function(t,n){var o;return i.editorManager.setActive(i),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),o=new e(t),r.push(o),o.on("close",function(){for(var e=r.length;e--;)r[e]===o&&r.splice(e,1);r.length||i.focus()}),t.data&&o.on("postRender",function(){this.find("*").each(function(e){var i=e.name();i in t.data&&e.value(t.data[i])})}),o.features=t||{},o.params=n||{},1===r.length&&i.nodeChanged(),o.renderTo().reflow()},o.alert=function(e,n,o){t.alert(e,function(){n?n.call(o||this):i.focus()})},o.confirm=function(e,i,n){t.confirm(e,function(e){i.call(n||this,e)})},o.close=function(){n()&&n().close()},o.getParams=function(){return n()?n().params:null},o.setParams=function(e){n()&&(n().params=e)},o.getWindows=function(){return r}}}),/**
 * Quirks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */
n("tinymce/util/Quirks",["tinymce/util/VK","tinymce/dom/RangeUtils","tinymce/html/Node","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools"],function(e,t,i,n,o,r){return function(s){function a(e,t){try{s.getDoc().execCommand(e,!1,t)}catch(i){}}function l(){var e=s.getDoc().documentMode;return e?e:6}function c(e){return e.isDefaultPrevented()}function u(){function t(e){var t=new l(function(){});r.each(s.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&s.dom.setAttrib(e,"style",s.dom.getAttrib(e,"style"))}),t.observe(s.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),s.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null);var i=s.selection.getRng(),n=i.startContainer.parentNode;r.each(t.takeRecords(),function(e){if(U.isChildOf(e.target,s.getBody())){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}r.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,o;e==n&&(t=i.startOffset,o=e.firstChild),U.remove(e,!0),o&&(i.setStart(o,t),i.setEnd(o,t),s.selection.setRng(i))}})}}),t.disconnect(),r.each(s.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")})}var i,n,o=s.getDoc(),a="data:text/mce-internal,",l=window.MutationObserver;l||(i=!0,l=function(){function e(e){var t=e.relatedNode||e.target;n.push({target:t,addedNodes:[t]})}function t(e){var t=e.relatedNode||e.target;n.push({target:t,attributeName:e.attrName})}var i,n=[];this.observe=function(n){i=n,i.addEventListener("DOMSubtreeModified",e,!1),i.addEventListener("DOMNodeInsertedIntoDocument",e,!1),i.addEventListener("DOMNodeInserted",e,!1),i.addEventListener("DOMAttrModified",t,!1)},this.disconnect=function(){i.removeEventListener("DOMSubtreeModified",e,!1),i.removeEventListener("DOMNodeInsertedIntoDocument",e,!1),i.removeEventListener("DOMNodeInserted",e,!1),i.removeEventListener("DOMAttrModified",t,!1)},this.takeRecords=function(){return n}}),s.on("keydown",function(i){var n=i.keyCode==q,o=e.metaKeyPressed(i);if(!c(i)&&(n||i.keyCode==j)){var r=s.selection.getRng(),a=r.startContainer,l=r.startOffset;if(!o&&r.collapsed&&3==a.nodeType&&(n?l<a.data.length:l>0))return;i.preventDefault(),o&&s.selection.getSel().modify("extend",n?"forward":"backward","word"),t(n)}}),s.on("keypress",function(i){c(i)||$.isCollapsed()||!i.charCode||e.metaKeyPressed(i)||(i.preventDefault(),t(!0),s.selection.setContent(String.fromCharCode(i.charCode)))}),s.addCommand("Delete",function(){t()}),s.addCommand("ForwardDelete",function(){t(!0)}),i||(s.on("dragstart",function(e){var t;s.selection.isCollapsed()&&"IMG"==e.target.tagName&&$.select(e.target),n=$.getRng(),t=s.selection.getContent(),t.length>0&&e.dataTransfer.setData("URL","data:text/mce-internal,"+escape(t))}),s.on("drop",function(e){if(!c(e)){var i=e.dataTransfer.getData("URL");if(!i||-1==i.indexOf(a)||!o.caretRangeFromPoint)return;i=unescape(i.substr(a.length)),o.caretRangeFromPoint&&(e.preventDefault(),window.setTimeout(function(){var r=o.caretRangeFromPoint(e.x,e.y);n&&($.setRng(n),n=null),t(),$.setRng(r),s.insertContent(i)},0))}}),s.on("cut",function(e){!c(e)&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",s.selection.getContent()),e.clipboardData.setData("text/plain",s.selection.getContent({format:"text"})),t(!0))}))}function d(){function e(e){var t=U.create("body"),i=e.cloneContents();return t.appendChild(i),$.serializer.serialize(t,{format:"html"})}function i(i){if(!i.setStart){if(i.item)return!1;var n=i.duplicate();return n.moveToElementText(s.getBody()),t.compareRanges(i,n)}var o=e(i),r=U.createRng();r.selectNode(s.getBody());var a=e(r);return o===a}s.on("keydown",function(e){var t,n,o=e.keyCode;if(!c(e)&&(o==q||o==j)){if(t=s.selection.isCollapsed(),n=s.getBody(),t&&!U.isEmpty(n))return;if(!t&&!i(s.selection.getRng()))return;e.preventDefault(),s.setContent(""),n.firstChild&&U.isBlock(n.firstChild)?s.selection.setCursorLocation(n.firstChild,0):s.selection.setCursorLocation(n,0),s.nodeChanged()}})}function h(){s.shortcuts.add("ctrl+a",null,"SelectAll")}function f(){s.settings.content_editable||(U.bind(s.getDoc(),"focusin",function(){$.setRng($.getRng())}),U.bind(s.getDoc(),"mousedown mouseup",function(e){e.target==s.getDoc().documentElement&&(s.getBody().focus(),"mousedown"==e.type?$.placeCaretAt(e.clientX,e.clientY):$.setRng($.getRng()))}))}function p(){s.on("keydown",function(e){if(!c(e)&&e.keyCode===j){if(!s.getBody().getElementsByTagName("hr").length)return;if($.isCollapsed()&&0===$.getRng(!0).startOffset){var t=$.getNode(),i=t.previousSibling;if("HR"==t.nodeName)return U.remove(t),void e.preventDefault();i&&i.nodeName&&"hr"===i.nodeName.toLowerCase()&&(U.remove(i),e.preventDefault())}}})}function m(){window.Range.prototype.getClientRects||s.on("mousedown",function(e){if(!c(e)&&"HTML"===e.target.nodeName){var t=s.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function g(){s.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&(e.preventDefault(),$.getSel().setBaseAndExtent(t,0,t,1),s.nodeChanged()),"A"==t.nodeName&&U.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),$.select(t))})}function v(){function e(){var e=U.getAttribs($.getStart().cloneNode(!1));return function(){var t=$.getStart();t!==s.getBody()&&(U.setAttrib(t,"style",null),V(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!$.isCollapsed()&&U.getParent($.getStart(),U.isBlock)!=U.getParent($.getEnd(),U.isBlock)}s.on("keypress",function(i){var n;return c(i)||8!=i.keyCode&&46!=i.keyCode||!t()?void 0:(n=e(),s.getDoc().execCommand("delete",!1,null),n(),i.preventDefault(),!1)}),U.bind(s.getDoc(),"cut",function(i){var n;!c(i)&&t()&&(n=e(),setTimeout(function(){n()},0))})}function y(){document.body.setAttribute("role","application")}function b(){s.on("keydown",function(e){if(!c(e)&&e.keyCode===j&&$.isCollapsed()&&0===$.getRng(!0).startOffset){var t=$.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function w(){l()>7||(a("RespectVisibilityInDesign",!0),s.contentStyles.push(".mceHideBrInPre pre br {display: none}"),U.addClass(s.getBody(),"mceHideBrInPre"),G.addNodeFilter("pre",function(e){for(var t,n,o,r,s=e.length;s--;)for(t=e[s].getAll("br"),n=t.length;n--;)o=t[n],r=o.prev,r&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":o.parent.insert(new i("#text",3),o,!0).value="\n"}),K.addNodeFilter("pre",function(e){for(var t,i,n,o,r=e.length;r--;)for(t=e[r].getAll("br"),i=t.length;i--;)n=t[i],o=n.prev,o&&3==o.type&&(o.value=o.value.replace(/\r?\n$/,""))}))}function _(){U.bind(s.getBody(),"mouseup",function(){var e,t=$.getNode();"IMG"==t.nodeName&&((e=U.getStyle(t,"width"))&&(U.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),U.setStyle(t,"width","")),(e=U.getStyle(t,"height"))&&(U.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),U.setStyle(t,"height","")))})}function C(){s.on("keydown",function(t){var i,n,o,r,a;if(!c(t)&&t.keyCode==e.BACKSPACE&&(i=$.getRng(),n=i.startContainer,o=i.startOffset,r=U.getRoot(),a=n,i.collapsed&&0===o)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=r;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(s.formatter.toggle("blockquote",null,a),i=U.createRng(),i.setStart(n,0),i.setEnd(n,0),$.setRng(i))}})}function x(){function e(){s._refreshContentEditable(),a("StyleWithCSS",!1),a("enableInlineTableEditing",!1),Y.object_resizing||a("enableObjectResizing",!1)}Y.readonly||s.on("BeforeExecCommand MouseDown",e)}function T(){function e(){V(U.select("a"),function(e){var t=e.parentNode,i=U.getRoot();if(t.lastChild===e){for(;t&&!U.isBlock(t);){if(t.parentNode.lastChild!==t||t===i)return;t=t.parentNode}U.add(t,"br",{"data-mce-bogus":1})}})}s.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function S(){Y.forced_root_block&&s.on("init",function(){a("DefaultParagraphSeparator",Y.forced_root_block)})}function k(){s.on("Undo Redo SetContent",function(e){e.initial||s.execCommand("mceRepaint")})}function A(){s.on("keydown",function(e){var t;c(e)||e.keyCode!=j||(t=s.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),s.undoManager.beforeChange(),U.remove(t.item(0)),s.undoManager.add()))})}function E(){var e;l()>=10&&(e="",V("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,i){e+=(i>0?",":"")+t+":empty"}),s.contentStyles.push(e+"{padding-right: 1px !important}"))}function M(){l()<9&&(G.addNodeFilter("noscript",function(e){for(var t,i,n=e.length;n--;)t=e[n],i=t.firstChild,i&&t.attr("data-mce-innertext",i.value)}),K.addNodeFilter("noscript",function(e){for(var t,o,r,s=e.length;s--;)t=e[s],o=e[s].firstChild,o?o.value=n.decode(o.value):(r=t.attributes.map["data-mce-innertext"],r&&(t.attr("data-mce-innertext",null),o=new i("#text",3),o.value=r,o.raw=!0,t.append(o)))}))}function D(){function e(e,t){var i=a.createTextRange();try{i.moveToPoint(e,t)}catch(n){i=null}return i}function t(t){var n;t.button?(n=e(t.x,t.y),n&&(n.compareEndPoints("StartToStart",o)>0?n.setEndPoint("StartToStart",o):n.setEndPoint("EndToEnd",o),n.select())):i()}function i(){var e=s.selection.createRange();o&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&o.select(),U.unbind(s,"mouseup",i),U.unbind(s,"mousemove",t),o=n=0}var n,o,r,s=U.doc,a=s.body;s.documentElement.unselectable=!0,U.bind(s,"mousedown contextmenu",function(a){if("HTML"===a.target.nodeName){if(n&&i(),r=s.documentElement,r.scrollHeight>r.clientHeight)return;n=1,o=e(a.x,a.y),o&&(U.bind(s,"mouseup",i),U.bind(s,"mousemove",t),U.getRoot().focus(),o.select())}})}function R(){s.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||$.normalize()},!0)}function N(){s.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function P(){s.inline||s.on("keydown",function(){document.activeElement==document.body&&s.getWin().focus()})}function O(){s.inline||(s.contentStyles.push("body {min-height: 150px}"),s.on("click",function(e){"HTML"==e.target.nodeName&&(s.getBody().focus(),s.selection.normalize(),s.nodeChanged())}))}function H(){o.mac&&s.on("keydown",function(t){!e.metaKeyPressed(t)||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),s.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","word"))})}function F(){a("AutoUrlDetect",!1)}function I(){s.inline||s.on("focus blur beforegetcontent",function(){var e=s.dom.create("br");s.getBody().appendChild(e),e.parentNode.removeChild(e)},!0)}function B(){s.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),s.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function z(){s.on("touchstart",function(e){var t,i,n,o;t=e.target,i=(new Date).getTime(),o=e.changedTouches,!o||o.length>1||(n=o[0],s.once("touchend",function(e){var o,r=e.changedTouches[0];(new Date).getTime()-i>500||Math.abs(n.clientX-r.clientX)>5||Math.abs(n.clientY-r.clientY)>5||(o={target:t},V("pageX pageY clientX clientY screenX screenY".split(" "),function(e){o[e]=r[e]}),o=s.fire("click",o),o.isDefaultPrevented()||(s.selection.placeCaretAt(r.clientX,r.clientY),s.nodeChanged()))}))})}function L(){s.on("init",function(){s.dom.bind(s.getBody(),"submit",function(e){e.preventDefault()})})}function W(){G.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}var V=r.each,j=e.BACKSPACE,q=e.DELETE,U=s.dom,$=s.selection,Y=s.settings,G=s.parser,K=s.serializer,X=o.gecko,J=o.ie,Q=o.webkit;C(),d(),R(),Q&&(u(),f(),g(),S(),L(),b(),W(),z(),o.iOS?(P(),O(),B()):h()),J&&o.ie<11&&(p(),y(),w(),_(),A(),E(),M(),D()),o.ie>=11&&(O(),I(),b()),o.ie&&(h(),F()),X&&(p(),m(),v(),x(),T(),k(),N(),H(),b())}}),/**
 * Observable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/Observable",["tinymce/util/EventDispatcher"],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(i,n){e.isNative(i)&&t.toggleNativeEvent&&t.toggleNativeEvent(i,n)}})),t._eventDispatcher}return{fire:function(e,i,n){var o=this;if(o.removed&&"remove"!==e)return i;if(i=t(o).fire(e,i,n),n!==!1&&o.parent)for(var r=o.parent();r&&!i.isPropagationStopped();)r.fire(e,i,!1),r=r.parent();return i},on:function(e,i,n){return t(this).on(e,i,n)},off:function(e,i){return t(this).off(e,i)},once:function(e,i){return t(this).once(e,i)},hasEventListeners:function(e){return t(this).has(e)}}}),/**
 * EditorObservable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/EditorObservable",["tinymce/util/Observable","tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t,i){function n(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=s.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function o(e,t){var i,o=n(e,t);if(e.delegates||(e.delegates={}),!e.delegates[t])if(e.settings.event_root){if(r||(r={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&r){for(t in r)e.dom.unbind(n(e,t));r=null}})),r[t])return;i=function(i){for(var n=i.target,o=e.editorManager.editors,r=o.length;r--;){var a=o[r].getBody();(a===n||s.isChildOf(n,a))&&(o[r].hidden||o[r].fire(t,i))}},r[t]=i,s.bind(o,t,i)}else i=function(i){e.hidden||e.fire(t,i)},s.bind(o,t,i),e.delegates[t]=i}var r,s=t.DOM,a={bindPendingEventDelegates:function(){var e=this;i.each(e._pendingNativeEvents,function(t){o(e,t)})},toggleNativeEvent:function(e,t){var i=this;i.settings.readonly||"focus"!=e&&"blur"!=e&&(t?i.initialized?o(i,e):i._pendingNativeEvents?i._pendingNativeEvents.push(e):i._pendingNativeEvents=[e]:i.initialized&&(i.dom.unbind(n(i,e),e,i.delegates[e]),delete i.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(n(t,e),e,t.delegates[e]);delete t.delegates}t.inline||(t.getBody().onload=null,t.dom.unbind(t.getWin()),t.dom.unbind(t.getDoc())),t.dom.unbind(t.getBody()),t.dom.unbind(t.getContainer())}};return a=i.extend({},e,a)}),/**
 * Shortcuts.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/Shortcuts",["tinymce/util/Tools","tinymce/Env"],function(e,t){var i=e.each,n=e.explode,o={f9:120,f10:121,f11:122};return function(r){var s=this,a={};r.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&!e.isDefaultPrevented()&&i(a,function(i){var n=t.mac?e.metaKey:e.ctrlKey;if(i.ctrl==n&&i.alt==e.altKey&&i.shift==e.shiftKey)return e.keyCode==i.keyCode||e.charCode&&e.charCode==i.charCode?(e.preventDefault(),"keydown"==e.type&&i.func.call(i.scope),!0):void 0})}),s.add=function(t,s,l,c){var u;return u=l,"string"==typeof l?l=function(){r.execCommand(u,!1,null)}:e.isArray(u)&&(l=function(){r.execCommand(u[0],u[1],u[2])}),i(n(t.toLowerCase()),function(e){var t={func:l,scope:c||r,desc:r.translate(s),alt:!1,ctrl:!1,shift:!1};i(n(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=o[e]||e.toUpperCase().charCodeAt(0))}}),a[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),/**
 * Editor.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/Editor",["tinymce/dom/DOMUtils","tinymce/dom/DomQuery","tinymce/AddOnManager","tinymce/NodeChange","tinymce/html/Node","tinymce/dom/Serializer","tinymce/html/Serializer","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/dom/ScriptLoader","tinymce/dom/EventUtils","tinymce/WindowManager","tinymce/html/Schema","tinymce/html/DomParser","tinymce/util/Quirks","tinymce/Env","tinymce/util/Tools","tinymce/EditorObservable","tinymce/Shortcuts"],function(e,i,n,o,r,s,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_,C,x,T){function S(e,t,o){var r,s,a=this;r=a.documentBaseUrl=o.documentBaseURL,s=o.baseURI,a.settings=t=M({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:r,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:a.convertURL,url_converter_scope:a,ie7_compat:!0},t),n.language=t.language||"en",n.languageLoad=t.language_load,n.baseURL=o.baseURL,a.id=t.id=e,a.isNotDirty=!0,a.plugins={},a.documentBaseURI=new p(t.document_base_url||r,{base_uri:s}),a.baseURI=s,a.contentCSS=[],a.contentStyles=[],a.shortcuts=new T(a),a.execCommands={},a.queryStateCommands={},a.queryValueCommands={},a.loadedCSS={},t.target&&(a.targetElm=t.target),a.suffix=o.suffix,a.editorManager=o,a.inline=t.inline,o.fire("SetupEditor",a),a.execCallback("setup",a),a.$=i.overrideDefaults(function(){return{context:a.inline?a.getBody():a.getDoc(),element:a.getBody()}})}var k=e.DOM,A=n.ThemeManager,E=n.PluginManager,M=C.extend,D=C.each,R=C.explode,N=C.inArray,P=C.trim,O=C.resolve,H=g.Event,F=_.gecko,I=_.ie;return S.prototype={render:function(){function e(){k.unbind(window,"ready",e),i.render()}function t(){var e=m.ScriptLoader;if(n.language&&"en"!=n.language&&!n.language_url&&(n.language_url=i.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&e.add(n.language_url),n.theme&&"function"!=typeof n.theme&&"-"!=n.theme.charAt(0)&&!A.urls[n.theme]){var t=n.theme_url;t=t?i.documentBaseURI.toAbsolute(t):"themes/"+n.theme+"/theme"+r+".js",A.load(n.theme,t)}C.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),D(n.external_plugins,function(e,t){E.load(t,e),n.plugins+=" "+t}),D(n.plugins.split(/[ ,]/),function(e){if(e=P(e),e&&!E.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=E.dependencies(e);D(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"};e=E.createUrl(t,e),E.load(e.resource,e)})}else E.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"})}),e.loadQueue(function(){i.removed||i.init()})}var i=this,n=i.settings,o=i.id,r=i.suffix;if(!H.domLoaded)return void k.bind(window,"ready",e);if(i.getElement()&&_.contentEditable){n.inline?i.inline=!0:(i.orgVisibility=i.getElement().style.visibility,i.getElement().style.visibility="hidden");var s=i.getElement().form||k.getParent(o,"form");s&&(i.formElement=s,n.hidden_input&&!/TEXTAREA|INPUT/i.test(i.getElement().nodeName)&&(k.insertAfter(k.create("input",{type:"hidden",name:o}),o),i.hasHiddenInput=!0),i.formEventDelegate=function(e){i.fire(e.type,e)},k.bind(s,"submit reset",i.formEventDelegate),i.on("reset",function(){i.setContent(i.startContent,{format:"raw"})}),!n.submit_patch||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=function(){return i.editorManager.triggerSave(),i.isNotDirty=!0,s._mceOldSubmit(s)})),i.windowManager=new v(i),"xml"==n.encoding&&i.on("GetContent",function(e){e.save&&(e.content=k.encode(e.content))}),n.add_form_submit_trigger&&i.on("submit",function(){i.initialized&&i.save()}),n.add_unload_trigger&&(i._beforeUnload=function(){!i.initialized||i.destroyed||i.isHidden()||i.save({format:"raw",no_events:!0,set_dirty:!1})},i.editorManager.on("BeforeUnload",i._beforeUnload)),t()}},init:function(){function e(t){var i,n,o=E.get(t);i=E.urls[t]||h.documentBaseUrl.replace(/\/$/,""),t=P(t),o&&-1===N(m,t)&&(D(E.dependencies(t),function(t){e(t)}),n=new o(h,i,h.$),h.plugins[t]=n,n.init&&(n.init(h,i),m.push(t)))}var t,i,n,o,r,s,a,l,c,u,d,h=this,f=h.settings,p=h.getElement(),m=[];if(h.rtl=this.editorManager.i18n.rtl,h.editorManager.add(h),f.aria_label=f.aria_label||k.getAttrib(p,"aria-label",h.getLang("aria.rich_text_area")),f.theme&&("function"!=typeof f.theme?(f.theme=f.theme.replace(/-/,""),s=A.get(f.theme),h.theme=new s(h,A.urls[f.theme]),h.theme.init&&h.theme.init(h,A.urls[f.theme]||h.documentBaseUrl.replace(/\/$/,""),h.$)):h.theme=f.theme),D(f.plugins.replace(/\-/g,"").split(/[ ,]/),e),f.render_ui&&h.theme&&(h.orgDisplay=p.style.display,"function"!=typeof f.theme?(t=f.width||p.style.width||p.offsetWidth,i=f.height||p.style.height||p.offsetHeight,n=f.min_height||100,u=/^[0-9\.]+(|px)$/i,u.test(""+t)&&(t=Math.max(parseInt(t,10),100)),u.test(""+i)&&(i=Math.max(parseInt(i,10),n)),r=h.theme.renderUI({targetNode:p,width:t,height:i,deltaWidth:f.delta_width,deltaHeight:f.delta_height}),f.content_editable||(i=(r.iframeHeight||i)+("number"==typeof i?r.deltaHeight||0:""),n>i&&(i=n))):(r=f.theme(h,p),r.editorContainer.nodeType&&(r.editorContainer=r.editorContainer.id=r.editorContainer.id||h.id+"_parent"),r.iframeContainer.nodeType&&(r.iframeContainer=r.iframeContainer.id=r.iframeContainer.id||h.id+"_iframecontainer"),i=r.iframeHeight||p.offsetHeight),h.editorContainer=r.editorContainer),f.content_css&&D(R(f.content_css),function(e){h.contentCSS.push(h.documentBaseURI.toAbsolute(e))}),f.content_style&&h.contentStyles.push(f.content_style),f.content_editable)return p=o=r=null,h.initContentBody();for(h.iframeHTML=f.doctype+"<html><head>",f.document_base_url!=h.documentBaseUrl&&(h.iframeHTML+='<base href="'+h.documentBaseURI.getURI()+'" />'),!_.caretAfter&&f.ie7_compat&&(h.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),h.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',d=0;d<h.contentCSS.length;d++){var g=h.contentCSS[d];h.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+g+'" />',h.loadedCSS[g]=!0}l=f.body_id||"tinymce",-1!=l.indexOf("=")&&(l=h.getParam("body_id","","hash"),l=l[h.id]||l),c=f.body_class||"",-1!=c.indexOf("=")&&(c=h.getParam("body_class","","hash"),c=c[h.id]||""),f.content_security_policy&&(h.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+f.content_security_policy+'" />'),h.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+c+'" data-id="'+h.id+'"><br></body></html>';var v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+h.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&(a=v);var y=k.create("iframe",{id:h.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:h.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:i,display:"block"}});if(y.onload=function(){y.onload=null,h.fire("load")},k.setAttrib(y,"src",a||'javascript:""'),h.contentAreaContainer=r.iframeContainer,h.iframeElement=y,o=k.add(r.iframeContainer,y),I)try{h.getDoc()}catch(b){o.src=a=v}r.editorContainer&&(k.get(r.editorContainer).style.display=h.orgDisplay,h.hidden=k.isHidden(r.editorContainer)),h.getElement().style.display="none",k.setAttrib(h.id,"aria-hidden",!0),a||h.initContentBody(),p=o=r=null},initContentBody:function(t){var i,n,a=this,p=a.settings,m=a.getElement(),g=a.getDoc();p.inline||(a.getElement().style.visibility=a.orgVisibility),t||p.content_editable||(g.open(),g.write(a.iframeHTML),g.close()),p.content_editable&&(a.on("remove",function(){var e=this.getBody();k.removeClass(e,"mce-content-body"),k.removeClass(e,"mce-edit-focus"),k.setAttrib(e,"contentEditable",null)}),k.addClass(m,"mce-content-body"),a.contentDocument=g=p.content_document||document,a.contentWindow=p.content_window||window,a.bodyElement=m,p.content_document=p.content_window=null,p.root_name=m.nodeName.toLowerCase()),i=a.getBody(),i.disabled=!0,p.readonly||(a.inline&&"static"==k.getStyle(i,"position",!0)&&(i.style.position="relative"),i.contentEditable=a.getParam("content_editable_state",!0)),i.disabled=!1,a.schema=new y(p),a.dom=new e(g,{keep_values:!0,url_converter:a.convertURL,url_converter_scope:a,hex_colors:p.force_hex_style_colors,class_filter:p.class_filter,update_styles:!0,root_element:a.inline?a.getBody():null,collect:p.content_editable,schema:a.schema,onSetAttrib:function(e){a.fire("SetAttrib",e)}}),a.parser=new b(p,a.schema),a.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var i,n,o,r=e.length,s=a.dom;r--;)i=e[r],n=i.attr(t),o="data-mce-"+t,i.attributes.map[o]||("style"===t?(n=s.serializeStyle(s.parseStyle(n),i.name),n.length||(n=null),i.attr(o,n),i.attr(t,n)):"tabindex"===t?(i.attr(o,n),i.attr(t,null)):i.attr(o,a.convertURL(n,t,i.name)))}),a.parser.addNodeFilter("script",function(e){for(var t,i=e.length;i--;)t=e[i],t.attr("type","mce-"+(t.attr("type")||"no/type"))}),a.parser.addNodeFilter("#cdata",function(e){for(var t,i=e.length;i--;)t=e[i],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),a.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,i=e.length,n=a.schema.getNonEmptyElements();i--;)t=e[i],t.isEmpty(n)&&(t.append(new r("br",1)).shortEnded=!0)}),a.serializer=new s(p,a),a.selection=new l(a.dom,a.getWin(),a.serializer,a),a.formatter=new c(a),a.undoManager=new u(a),a.forceBlocks=new h(a),a.enterKey=new d(a),a.editorCommands=new f(a),a._nodeChangeDispatcher=new o(a),a.fire("PreInit"),p.browser_spellcheck||p.gecko_spellcheck||(g.body.spellcheck=!1,k.setAttrib(i,"spellcheck","false")),a.fire("PostRender"),a.quirks=new w(a),p.directionality&&(i.dir=p.directionality),p.nowrap&&(i.style.whiteSpace="nowrap"),p.protect&&a.on("BeforeSetContent",function(e){D(p.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),a.on("SetContent",function(){a.addVisual(a.getBody())}),p.padd_empty_editor&&a.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),a.load({initial:!0,format:"html"}),a.startContent=a.getContent({format:"raw"}),a.initialized=!0,a.bindPendingEventDelegates(),a.fire("init"),a.focus(!0),a.nodeChanged({initial:!0}),a.execCallback("init_instance_callback",a),a.contentStyles.length>0&&(n="",D(a.contentStyles,function(e){n+=e+"\r\n"}),a.dom.addStyle(n)),D(a.contentCSS,function(e){a.loadedCSS[e]||(a.dom.loadCSS(e),a.loadedCSS[e]=!0)}),p.auto_focus&&setTimeout(function(){var e;e=p.auto_focus===!0?a:a.editorManager.get(p.auto_focus),e.focus()},100),m=g=i=null},focus:function(e){var t,i,n,o=this,r=o.selection,s=o.settings.content_editable,a=o.getDoc();if(!e){if(t=r.getRng(),t.item&&(i=t.item(0)),o._refreshContentEditable(),s||(_.opera||o.getBody().focus(),o.getWin().focus()),F||s){if(n=o.getBody(),n.setActive)try{n.setActive()}catch(l){n.focus()}else n.focus();s&&r.normalize()}i&&i.ownerDocument==a&&(t=a.body.createControlRange(),t.addElement(i),t.select())}o.editorManager.setActive(o)},execCallback:function(e){var t,i=this,n=i.settings[e];if(n)return i.callbackLookup&&(t=i.callbackLookup[e])&&(n=t.func,t=t.scope),"string"==typeof n&&(t=n.replace(/\.\w+$/,""),t=t?O(t):0,n=O(n),i.callbackLookup=i.callbackLookup||{},i.callbackLookup[e]={func:n,scope:t}),n.apply(t||i,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",i=this.editorManager.i18n;return e?i.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,n){return i.data[t+"."+n]||"{#"+n+"}"}):""},getLang:function(e,i){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(i!==t?i:"{#"+e+"}")},getParam:function(e,t,i){var n,o=e in this.settings?this.settings[e]:t;return"hash"===i?(n={},"string"==typeof o?D(o.split(o.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(e){e=e.split("="),n[P(e[0])]=P(e.length>1?e[1]:e)}):n=o,n):o},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),i.buttons=i.buttons||{},t.tooltip=t.tooltip||t.title,i.buttons[e]=t},addMenuItem:function(e,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)}),i.menuItems=i.menuItems||{},i.menuItems[e]=t},addCommand:function(e,t,i){this.execCommands[e]={func:t,scope:i||this}},addQueryStateHandler:function(e,t,i){this.queryStateCommands[e]={func:t,scope:i||this}},addQueryValueHandler:function(e,t,i){this.queryValueCommands[e]={func:t,scope:i||this}},addShortcut:function(e,t,i,n){this.shortcuts.add(e,t,i,n)},execCommand:function(e,t,i,n){var o,r=this,s=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||n&&n.skip_focus||r.focus(),n=M({},n),n=r.fire("BeforeExecCommand",{command:e,ui:t,value:i}),n.isDefaultPrevented())return!1;if((o=r.execCommands[e])&&o.func.call(o.scope,t,i)!==!0)return r.fire("ExecCommand",{command:e,ui:t,value:i}),!0;if(D(r.plugins,function(n){return n.execCommand&&n.execCommand(e,t,i)?(r.fire("ExecCommand",{command:e,ui:t,value:i}),s=!0,!1):void 0}),s)return s;if(r.theme&&r.theme.execCommand&&r.theme.execCommand(e,t,i))return r.fire("ExecCommand",{command:e,ui:t,value:i}),!0;if(r.editorCommands.execCommand(e,t,i))return r.fire("ExecCommand",{command:e,ui:t,value:i}),!0;try{s=r.getDoc().execCommand(e,t,i)}catch(a){}return s?(r.fire("ExecCommand",{command:e,ui:t,value:i}),!0):!1},queryCommandState:function(e){var t,i,n=this;if(!n._isHidden()){if((t=n.queryStateCommands[e])&&(i=t.func.call(t.scope),i===!0||i===!1))return i;if(i=n.editorCommands.queryCommandState(e),-1!==i)return i;try{return n.getDoc().queryCommandState(e)}catch(o){}}},queryCommandValue:function(e){var i,n,o=this;if(!o._isHidden()){if((i=o.queryValueCommands[e])&&(n=i.func.call(i.scope),n!==!0))return n;if(n=o.editorCommands.queryCommandValue(e),n!==t)return n;try{return o.getDoc().queryCommandValue(e)}catch(r){}}},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(k.show(e.getContainer()),k.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(I&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(k.hide(e.getContainer()),k.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var i,n=this,o=n.getElement();return o?(e=e||{},e.load=!0,i=n.setContent(o.value!==t?o.value:o.innerHTML,e),e.element=o,e.no_events||n.fire("LoadContent",e),e.element=o=null,i):void 0},save:function(e){var t,i,n=this,o=n.getElement();if(o&&n.initialized)return e=e||{},e.save=!0,e.element=o,t=e.content=n.getContent(e),e.no_events||n.fire("SaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(n.inline||(o.innerHTML=t),(i=k.getParent(n.id,"form"))&&D(i.elements,function(e){return e.name==n.id?(e.value=t,!1):void 0})),e.element=o=null,e.set_dirty!==!1&&(n.isNotDirty=!0),t},setContent:function(e,t){var i,n=this,o=n.getBody();return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(i=n.settings.forced_root_block,i&&n.schema.isValidChild(o.nodeName.toLowerCase(),i.toLowerCase())?(e=I&&11>I?"":'<br data-mce-bogus="1">',e=n.dom.createHTML(i,n.settings.forced_root_block_attrs,e)):I||(e='<br data-mce-bogus="1">'),n.dom.setHTML(o,e),n.fire("SetContent",t)):("raw"!==t.format&&(e=new a({},n.schema).serialize(n.parser.parse(e,{isRootContent:!0}))),t.content=P(e),n.dom.setHTML(o,t.content),t.no_events||n.fire("SetContent",t)),t.content},getContent:function(e){var t,i=this,n=i.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||i.fire("BeforeGetContent",e),t="raw"==e.format?n.innerHTML:"text"==e.format?n.innerText||n.textContent:i.serializer.serialize(n,e),e.content="text"!=e.format?P(t):t,e.no_events||i.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=M({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=k.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=k.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement,e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,i){var n=this,o=n.settings;return o.urlconverter_callback?n.execCallback("urlconverter_callback",e,i,!0,t):!o.convert_urls||i&&"LINK"==i.nodeName||0===e.indexOf("file:")||0===e.length?e:o.relative_urls?n.documentBaseURI.toRelative(e):e=n.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var i,n=this,o=n.settings,r=n.dom;e=e||n.getBody(),n.hasVisual===t&&(n.hasVisual=o.visual),D(r.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return i=o.visual_table_class||"mce-item-table",t=r.getAttrib(e,"border"),void(t&&"0"!=t||!n.hasVisual?r.removeClass(e,i):r.addClass(e,i));case"A":return void(r.getAttrib(e,"href",!1)||(t=r.getAttrib(e,"name")||e.id,i=o.visual_anchor_class||"mce-item-anchor",t&&n.hasVisual?r.addClass(e,i):r.removeClass(e,i)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&k.remove(e.getElement().nextSibling),e.inline||(I&&10>I&&e.getDoc().execCommand("SelectAll",!1,null),k.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),k.remove(e.getContainer()),e.destroy())},destroy:function(e){var t,i=this;if(!i.destroyed){if(!e&&!i.removed)return void i.remove();e||(i.editorManager.off("beforeunload",i._beforeUnload),i.theme&&i.theme.destroy&&i.theme.destroy(),i.selection.destroy(),i.dom.destroy()),t=i.formElement,t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),k.unbind(t,"submit reset",i.formEventDelegate)),i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null,i.selection&&(i.selection=i.selection.win=i.selection.dom=i.selection.dom.doc=null),i.destroyed=1}},_refreshContentEditable:function(){var e,t,i=this;i._isHidden()&&(e=i.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return F?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},M(S.prototype,x),S}),/**
 * I18n.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/I18n",[],function(){var e={};return{rtl:!1,add:function(t,i){for(var n in i)e[n]=i[n];this.rtl=this.rtl||"rtl"===e._dir},translate:function(t){if("undefined"==typeof t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var i=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return i[t]})}return e[t]||t},data:e}}),/**
 * FocusManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/FocusManager",["tinymce/dom/DOMUtils","tinymce/Env"],function(e,t){function i(e){function a(){try{return document.activeElement}catch(e){return document.body}}function l(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function c(e,t){var i;return t.startContainer?(i=e.getDoc().createRange(),i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset)):i=t,i}function u(e){return!!s.getParent(e,i.isEditorUIElement)}function d(i){var d=i.editor;d.on("init",function(){(d.inline||t.ie)&&("onbeforedeactivate"in document&&t.ie<9?d.dom.bind(d.getBody(),"beforedeactivate",function(e){if(e.target==d.getBody())try{d.lastRng=d.selection.getRng()}catch(t){}}):d.on("nodechange mouseup keyup",function(e){var t=a();"nodechange"==e.type&&e.selectionChange||(t&&t.id==d.id+"_ifr"&&(t=d.getBody()),d.dom.isChildOf(t,d.getBody())&&(d.lastRng=d.selection.getRng()))}),t.webkit&&!n&&(n=function(){var t=e.activeEditor;if(t&&t.selection){var i=t.selection.getRng();i&&!i.collapsed&&(d.lastRng=i)}},s.bind(document,"selectionchange",n)))}),d.on("setcontent",function(){d.lastRng=null}),d.on("mousedown",function(){d.selection.lastFocusBookmark=null}),d.on("focusin",function(){var t=e.focusedEditor;d.selection.lastFocusBookmark&&(d.selection.setRng(c(d,d.selection.lastFocusBookmark)),d.selection.lastFocusBookmark=null),t!=d&&(t&&t.fire("blur",{focusedEditor:d}),e.setActive(d),e.focusedEditor=d,d.fire("focus",{blurredEditor:t}),d.focus(!0)),d.lastRng=null}),d.on("focusout",function(){window.setTimeout(function(){var t=e.focusedEditor;u(a())||t!=d||(d.fire("blur",{focusedEditor:null}),e.focusedEditor=null,d.selection&&(d.selection.lastFocusBookmark=null))},0)}),o||(o=function(t){var i=e.activeEditor;i&&t.target.ownerDocument==document&&(i.selection&&t.target!=i.getBody()&&(i.selection.lastFocusBookmark=l(i.dom,i.lastRng)),t.target==document.body||u(t.target)||e.focusedEditor!=i||(i.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},s.bind(document,"focusin",o)),d.inline&&!r&&(r=function(t){var i=e.activeEditor;if(i.inline&&!i.dom.isChildOf(t.target,i.getBody())){var n=i.selection.getRng();n.collapsed||(i.lastRng=n)}},s.bind(document,"mouseup",r))}function h(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(s.unbind(document,"selectionchange",n),s.unbind(document,"focusin",o),s.unbind(document,"mouseup",r),n=o=r=null)}e.on("AddEditor",d),e.on("RemoveEditor",h)}var n,o,r,s=e.DOM;return i.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},i}),/**
 * EditorManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DomQuery","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager"],function(e,t,i,n,o,r,s,a,l){function c(e){var t,i=h.editors;delete i[e.id];for(var n=0;n<i.length;n++)if(i[n]==e){i.splice(n,1),t=!0;break}return h.activeEditor==e&&(h.activeEditor=i[0]),h.focusedEditor==e&&(h.focusedEditor=null),t}function u(e){return e&&!(e.getContainer()||e.getBody()).parentNode&&(c(e),e.unbindAllNativeEvents(),e.destroy(!0),e=null),e}var d,h,f=i.DOM,p=r.explode,m=r.each,g=r.extend,v=0;return h={$:t,majorVersion:"4",minorVersion:"1.6",releaseDate:"2014-10-08",editors:[],i18n:a,activeEditor:null,setup:function(){var e,t,i,o,r=this,s="";if(t=document.location.href,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),i=window.tinymce||window.tinyMCEPreInit)e=i.base||i.baseURL,s=i.suffix;else{for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++)if(o=a[c].src,/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!=o.indexOf(".min")&&(s=".min"),e=o.substring(0,o.lastIndexOf("/"));break}!e&&document.currentScript&&(o=document.currentScript.src,-1!=o.indexOf(".min")&&(s=".min"),e=o.substring(0,o.lastIndexOf("/")))}r.baseURL=new n(t).toAbsolute(e),r.documentBaseURL=t,r.baseURI=new n(r.baseURL),r.suffix=s,r.focusManager=new l(r)},init:function(t){function i(e){var t=e.id;return t||(t=e.name,t=t&&!f.get(t)?e.name:f.uniqueId(),e.setAttribute("id",t)),t}function n(t,i,n){if(!u(a.get(t))){var o=new e(t,i,a);o.targetElm=o.targetElm||n,l.push(o),o.render()}}function o(e){var i=t[e];if(i)return i.apply(a,Array.prototype.slice.call(arguments,2))}function r(e,t){return t.constructor===RegExp?t.test(e.className):f.hasClass(e,t)}function s(){var e,a;if(f.unbind(window,"ready",s),o("onpageload"),t.types)return void m(t.types,function(e){m(f.select(e.selector),function(o){n(i(o),g({},t,e),o)})});if(t.selector)return void m(f.select(t.selector),function(e){n(i(e),t,e)});switch(t.target&&n(i(t.target),t),t.mode){case"exact":e=t.elements||"",e.length>0&&m(p(e),function(e){var i;(i=f.get(e))?n(e,t,i):m(document.forms,function(i){m(i.elements,function(i){i.name===e&&(e="mce_editor_"+v++,f.setAttrib(i,"id",e),n(e,t,i))})})});break;case"textareas":case"specific_textareas":m(f.select("textarea"),function(e){t.editor_deselector&&r(e,t.editor_deselector)||(!t.editor_selector||r(e,t.editor_selector))&&n(i(e),t,e)})}t.oninit&&(e=a=0,m(l,function(t){a++,t.initialized?e++:t.on("init",function(){e++,e==a&&o("oninit")}),e==a&&o("oninit")}))}var a=this,l=[];a.settings=t,f.bind(window,"ready",s)},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,i=t.editors;return i[e.id]=e,i.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),d||(d=function(){t.fire("BeforeUnload")},f.bind(window,"beforeunload",d)),e},createEditor:function(t,i){return this.add(new e(t,i,this))},remove:function(e){var t,i,n=this,o=n.editors;{if(e)return"string"==typeof e?(e=e.selector||e,void m(f.select(e),function(e){i=o[e.id],i&&n.remove(i)})):(i=e,o[i.id]?(c(i)&&n.fire("RemoveEditor",{editor:i}),o.length||f.unbind(window,"beforeunload",d),i.remove(),i):null);for(t=o.length-1;t>=0;t--)n.remove(o[t])}},execCommand:function(t,i,n){var o=this,r=o.get(n);switch(t){case"mceAddEditor":return o.get(n)||new e(n,o.settings,o).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(o.execCommand("mceAddEditor",0,n),!0)}return o.activeEditor?o.activeEditor.execCommand(t,i,n):!1},triggerSave:function(){m(this.editors,function(e){e.save()})},addI18n:function(e,t){a.add(e,t)},translate:function(e){return a.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},g(h,s),h.setup(),window.tinymce=window.tinyMCE=h,h}),/**
 * LegacyInput.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/LegacyInput",["tinymce/EditorManager","tinymce/util/Tools"],function(e,t){var i=t.each,n=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){i(t,function(t,i){t&&a.setStyle(e,i,t)}),a.rename(e,"span")}function o(e){a=t.dom,l.convert_fonts_to_spans&&i(a.select("font,u,strike",e.node),function(e){r[e.nodeName.toLowerCase()](a,e)})}var r,s,a,l=t.settings;l.inline_styles&&(s=n(l.font_size_legacy_values),r={font:function(t,i){e(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:s[parseInt(i.size,10)-1]})},u:function(t,i){e(i,{textDecoration:"underline"})},strike:function(t,i){e(i,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",o))})})}),/**
 * XHR.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/XHR",["tinymce/util/Observable","tinymce/util/Tools"],function(e,t){var i={send:function(e){function t(){!e.async||4==n.readyState||o++>1e4?(e.success&&1e4>o&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,o=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(n.withCredentials=!0),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n=i.fire("beforeSend",{xhr:n,settings:e}).xhr,n.send(e.data),!e.async)return t();setTimeout(t,10)}}};return t.extend(i,e),i}),/**
 * JSON.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/JSON",[],function(){function e(t,i){var n,o,r,s;if(i=i||'"',null===t)return"null";if(r=typeof t,"string"==r)return o="\bb	t\nn\ff\rr\"\"''\\\\",i+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===i&&"'"===e?e:(n=o.indexOf(t),n+1?"\\"+o.charAt(n+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+i;if("object"==r){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(n=0,o="[";n<t.length;n++)o+=(n>0?",":"")+e(t[n],i);return o+"]"}o="{";for(s in t)t.hasOwnProperty(s)&&(o+="function"!=typeof t[s]?(o.length>1?","+i:i)+s+i+":"+e(t[s],i):"");return o+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),/**
 * JSONRequest.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],function(e,t,i){function n(e){this.settings=o({},e),this.count=0}var o=i.extend;return n.sendRPC=function(e){return(new n).send(e)},n.prototype={send:function(i){var n=i.error,r=i.success;i=o(this.settings,i),i.success=function(t,o){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?n.call(i.error_scope||i.scope,t.error,o):r.call(i.success_scope||i.scope,t.result)},i.error=function(e,t){n&&n.call(i.error_scope||i.scope,e,t)},i.data=e.serialize({id:i.id||"c"+this.count++,method:i.method,params:i.params}),i.content_type="application/json",t.send(i)}},n}),/**
 * JSONP.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/JSONP",["tinymce/dom/DOMUtils"],function(e){return{callbacks:{},count:0,send:function(i){var n=this,o=e.DOM,r=i.count!==t?i.count:n.count,s="tinymce_jsonp_"+r;n.callbacks[r]=function(e){o.remove(s),delete n.callbacks[r],i.callback(e)},o.add(o.doc.body,"script",{id:s,src:i.url,type:"text/javascript"}),n.count++}}}),/**
 * LocalStorage.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/LocalStorage",[],function(){function e(){a=[];for(var e in s)a.push(e);o.length=a.length}function i(){function i(e){var i,n;return n=e!==t?u+e:o.indexOf(",",u),-1===n||n>o.length?null:(i=o.substring(u,n),u=n+1,i)}var n,o,a,u=0;if(s={},c){r.load(l),o=r.getAttribute(l)||"";do{var d=i();if(null===d)break;if(n=i(parseInt(d,32)||0),null!==n){if(d=i(),null===d)break;a=i(parseInt(d,32)||0),n&&(s[n]=a)}}while(null!==n);e()}}function n(){var t,i="";if(c){for(var n in s)t=s[n],i+=(i?",":"")+n.length.toString(32)+","+n+","+t.length.toString(32)+","+t;r.setAttribute(l,i);try{r.save(l)}catch(o){}e()}}var o,r,s,a,l,c;try{if(window.localStorage)return localStorage}catch(u){}return l="tinymce",r=document.documentElement,c=!!r.addBehavior,c&&r.addBehavior("#default#userData"),o={key:function(e){return a[e]},getItem:function(e){return e in s?s[e]:null},setItem:function(e,t){s[e]=""+t,n()},removeItem:function(e){delete s[e],n()},clear:function(){s={},n()}},i(),o}),/**
 * Compat.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/Compat",["tinymce/dom/DOMUtils","tinymce/dom/EventUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/util/Tools","tinymce/Env"],function(e,t,i,n,o,r){var s=window.tinymce;return s.DOM=e.DOM,s.ScriptLoader=i.ScriptLoader,s.PluginManager=n.PluginManager,s.ThemeManager=n.ThemeManager,s.dom=s.dom||{},s.dom.Event=t.Event,o.each(o,function(e,t){s[t]=e}),o.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){s[e]=r[e.substr(2).toLowerCase()]}),{}}),/**
 * Layout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Layout",["tinymce/util/Class","tinymce/util/Tools"],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t,i,n,o=this,r=o.settings;t=e.items().filter(":visible"),i=r.firstControlClass,n=r.lastControlClass,t.each(function(e){e.removeClass(i).removeClass(n),r.controlClass&&e.addClass(r.controlClass)}),t.eq(0).addClass(i),t.eq(-1).addClass(n)},renderHtml:function(e){var t,i=this,n=i.settings,o="";return t=e.items(),t.eq(0).addClass(n.firstControlClass),t.eq(-1).addClass(n.lastControlClass),t.each(function(e){n.controlClass&&e.addClass(n.controlClass),o+=e.renderHtml()}),o},recalc:function(){},postRender:function(){}})}),/**
 * AbsoluteLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/AbsoluteLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),/**
 * Tooltip.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Tooltip",["tinymce/ui/Control","tinymce/ui/Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div></div>"},repaint:function(){var e,t,i=this;e=i.getEl().style,t=i._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),/**
 * Widget.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Widget",["tinymce/ui/Control","tinymce/ui/Tooltip"],function(e,t){var i,n=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&n.tooltips!==!1&&(t.on("mouseenter",function(i){var n=t.tooltip().moveTo(-65535);if(i.control==t){var o=n.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);n.toggleClass("tooltip-n","bc-tc"==o),n.toggleClass("tooltip-nw","bc-tl"==o),n.toggleClass("tooltip-ne","bc-tr"==o),n.moveRel(t.getEl(),o)}else n.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return i||(i=new t({type:"tooltip"}),i.renderTo()),i},active:function(e){var t,i=this;return e!==t&&(i.aria("pressed",e),i.toggleClass("active",e)),i._super(e)},disabled:function(e){var t,i=this;return e!==t&&(i.aria("disabled",e),i.toggleClass("disabled",e)),i._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},remove:function(){this._super(),i&&(i.remove(),i=null)}});return n}),/**
 * Button.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Button",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,i=this;i.on("click mousedown",function(e){e.preventDefault()}),i._super(e),t=e.size,e.subtype&&i.addClass(e.subtype),t&&i.addClass("btn-"+t)},icon:function(e){var t=this,i=t.classPrefix;if("undefined"==typeof e)return t.settings.icon;if(t.settings.icon=e,e=e?i+"ico "+i+"i-"+t.settings.icon:"",t._rendered){var n=t.getEl().firstChild,o=n.getElementsByTagName("i")[0];e?(o&&o==n.firstChild||(o=document.createElement("i"),n.insertBefore(o,n.firstChild)),o.className=e):o&&n.removeChild(o),t.text(t._text)}return t},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},text:function(e){var t=this;if(t._rendered){var i=t.getEl().lastChild.lastChild;i&&(i.data=t.translate(e))}return t._super(e)},renderHtml:function(){var e,t=this,i=t._id,n=t.classPrefix,o=t.settings.icon;return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=t.settings.icon?n+"ico "+n+"i-"+o:"",'<div id="'+i+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+i+'"><button role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+(t._text?(o?"\xa0":"")+t.encode(t._text):"")+"</button></div>"}})}),/**
 * ButtonGroup.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/ButtonGroup",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),/**
 * Checkbox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Checkbox",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return"undefined"!=typeof e?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,i=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+i+"ico "+i+'i-checkbox"></i><span id="'+t+'-al" class="'+i+'label">'+e.encode(e._text)+"</span></div>"}})}),/**
 * ComboBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils"],function(e,t,i){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("combobox"),t.subinput=!0,t.ariaTarget="inp",e=t.settings,e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(i){for(var n=i.target,o=t.getEl();n&&n!=o;)n.id&&-1!=n.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),i.aria&&t.menu.items()[0].focus())),n=n.parentNode}),t.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&t.parents().reverse().each(function(i){return e.preventDefault(),t.fire("change"),i.hasEventListeners("submit")&&i.toJSON?(i.fire("submit",{data:i.toJSON()}),!1):void 0})}),e.placeholder&&(t.addClass("placeholder"),t.on("focusin",function(){t._hasOnChange||(i.on(t.getEl("inp"),"change",function(){t.fire("change")}),t._hasOnChange=!0),t.hasClass("placeholder")&&(t.getEl("inp").value="",t.removeClass("placeholder"))}),t.on("focusout",function(){0===t.value().length&&(t.getEl("inp").value=e.placeholder,t.addClass("placeholder"))}))},showMenu:function(){var e,i=this,n=i.settings;i.menu||(e=n.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",i.menu=t.create(e).parent(i).renderTo(i.getContainerElm()),i.fire("createmenu"),i.menu.reflow(),i.menu.on("cancel",function(e){e.control===i.menu&&i.focus()}),i.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==i.value())})}).fire("show"),i.menu.on("select",function(e){i.value(e.control.value())}),i.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&i.menu.hide()}),i.aria("expanded",!0)),i.menu.show(),i.menu.layoutRect({w:i.layoutRect().w}),i.menu.moveRel(i.getEl(),i.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value,e!=t.settings.placeholder?e:""):t._value},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl("inp").disabled=e),t._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,n=this,o=n.getEl(),r=n.getEl("open"),s=n.layoutRect();e=r?s.w-i.getSize(r).width-10:s.w-10;var a=document;return a.all&&(!a.documentMode||a.documentMode<=8)&&(t=n.layoutRect().h-2+"px"),i.css(o.firstChild,{width:e,lineHeight:t}),n._super(),n},postRender:function(){var e=this;return i.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},remove:function(){i.off(this.getEl("inp")),this._super()},renderHtml:function(){var e,t,i=this,n=i._id,o=i.settings,r=i.classPrefix,s=o.value||o.placeholder||"",a="",l="";return"spellcheck"in o&&(l+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(l+=' maxlength="'+o.maxLength+'"'),o.size&&(l+=' size="'+o.size+'"'),o.subtype&&(l+=' type="'+o.subtype+'"'),i.disabled()&&(l+=' disabled="disabled"'),e=o.icon,e&&"caret"!=e&&(e=r+"ico "+r+"i-"+o.icon),t=i._text,(e||t)&&(a='<div id="'+n+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+n+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+r+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",i.addClass("has-open")),'<div id="'+n+'" class="'+i.classes()+'"><input id="'+n+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+s+'" hidefocus="1"'+l+" />"+a+"</div>"}})}),/**
 * ColorBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/ColorBox",["tinymce/ui/ComboBox"],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.addClass("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl().getElementsByTagName("i")[0];if(t)try{t.style.background=e}catch(i){}},value:function(e){var t=this;return"undefined"!=typeof e&&t._rendered&&t.repaintColor(e),t._super(e)}})}),/**
 * PanelButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/PanelButton",["tinymce/ui/Button","tinymce/ui/FloatPanel"],function(e,t){return e.extend({showPanel:function(){var e=this,i=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var n=i.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new t(n).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),i.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),/**
 * ColorButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/ColorButton",["tinymce/ui/PanelButton","tinymce/dom/DOMUtils"],function(e,t){var i=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,i=e.classPrefix,n=e.settings.icon?i+"ico "+i+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(n?'<i class="'+n+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+i+'preview"></span>'+(e._text?(n?" ":"")+e._text:"")+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1"> <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(n){n.aria&&"down"==n.aria.key||n.control!=e||i.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))}),delete e.settings.onclick,e._super()}})}),/**
 * Color.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/util/Color",[],function(){function e(e){function o(e,o,r){var s,a,l,c,u,d;return s=0,a=0,l=0,e/=255,o/=255,r/=255,u=t(e,t(o,r)),d=i(e,i(o,r)),u==d?(l=u,{h:0,s:0,v:100*l}):(c=e==u?o-r:r==u?e-o:r-e,s=e==u?3:r==u?1:5,s=60*(s-c/(d-u)),a=(d-u)/d,l=d,{h:n(s),s:n(100*a),v:n(100*l)})}function r(e,o,r){var s,a,l,c;if(e=(parseInt(e,10)||0)%360,o=parseInt(o,10)/100,r=parseInt(r,10)/100,o=i(0,t(o,1)),r=i(0,t(r,1)),0===o)return void(d=h=f=n(255*r));switch(s=e/60,a=r*o,l=a*(1-Math.abs(s%2-1)),c=r-a,Math.floor(s)){case 0:d=a,h=l,f=0;break;case 1:d=l,h=a,f=0;break;case 2:d=0,h=a,f=l;break;case 3:d=0,h=l,f=a;break;case 4:d=l,h=0,f=a;break;case 5:d=a,h=0,f=l;break;default:d=h=f=0}d=n(255*(d+c)),h=n(255*(h+c)),f=n(255*(f+c))}function s(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(d)+e(h)+e(f)}function a(){return{r:d,g:h,b:f}}function l(){return o(d,h,f)}function c(e){var t;return"object"==typeof e?"r"in e?(d=e.r,h=e.g,f=e.b):"v"in e&&r(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(d=parseInt(t[1],10),h=parseInt(t[2],10),f=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(d=parseInt(t[1],16),h=parseInt(t[2],16),f=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(d=parseInt(t[1]+t[1],16),h=parseInt(t[2]+t[2],16),f=parseInt(t[3]+t[3],16)),d=0>d?0:d>255?255:d,h=0>h?0:h>255?255:h,f=0>f?0:f>255?255:f,u}var u=this,d=0,h=0,f=0;e&&c(e),u.toRgb=a,u.toHsv=l,u.toHex=s,u.parse=c}var t=Math.min,i=Math.max,n=Math.round;return e}),/**
 * ColorPicker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/ColorPicker",["tinymce/ui/Widget","tinymce/ui/DragHelper","tinymce/ui/DomUtils","tinymce/util/Color"],function(e,t,i,n){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var n,o,r=i.getPos(e);return n=t.pageX-r.x,o=t.pageY-r.y,n=Math.max(0,Math.min(n/e.clientWidth,1)),o=Math.max(0,Math.min(o/e.clientHeight,1)),{x:n,y:o}}function o(e,t){var o=(360-e.h)/360;i.css(c,{top:100*o+"%"}),t||i.css(d,{left:e.s+"%",top:100-e.v+"%"}),u.style.background=new n({s:100,v:100,h:e.h}).toHex(),h.color().parse({s:e.s,v:e.v,h:e.h})}function r(t){var i;i=e(u,t),a.s=100*i.x,a.v=100*(1-i.y),o(a),h.fire("change")}function s(t){var i;i=e(l,t),a=f.toHsv(),a.h=360*(1-i.y),o(a,!0),h.fire("change")}var a,l,c,u,d,h=this,f=h.color();l=h.getEl("h"),c=h.getEl("hp"),u=h.getEl("sv"),d=h.getEl("svp"),h._repaint=function(){a=f.toHsv(),o(a)},h._super(),h._svdraghelper=new t(h._id+"-sv",{start:r,drag:r}),h._hdraghelper=new t(h._id+"-h",{start:s,drag:s}),h._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new n),this._color},renderHtml:function(){function e(){var e,t,i,n,s="";for(i="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",n=r.split(","),e=0,t=n.length-1;t>e;e++)s+='<div class="'+o+'colorpicker-h-chunk" style="height:'+100/t+"%;"+i+n[e]+",endColorstr="+n[e+1]+");-ms-"+i+n[e]+",endColorstr="+n[e+1]+')"></div>';return s}var t,i=this,n=i._id,o=i.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",s="background: -ms-linear-gradient(top,"+r+");background: linear-gradient(to bottom,"+r+");";return t='<div id="'+n+'-h" class="'+o+'colorpicker-h" style="'+s+'">'+e()+'<div id="'+n+'-hp" class="'+o+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+i.classes()+'"><div id="'+n+'-sv" class="'+o+'colorpicker-sv"><div class="'+o+'colorpicker-overlay1"><div class="'+o+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+o+'colorpicker-selector1"><div class="'+o+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}})}),/**
 * Path.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Path",["tinymce/ui/Widget"],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="\xbb"),t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var i,n=e.target;(i=n.getAttribute("data-index"))&&t.fire("select",{value:t.data()[i],index:i})})},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},data:function(e){var t=this;return"undefined"!=typeof e?(t._data=e,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes()+'">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e,t,i=this,n=i._data||[],o="",r=i.classPrefix;for(e=0,t=n.length;t>e;e++)o+=(e>0?'<div class="'+r+'divider" aria-hidden="true"> '+i.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(e==t-1?" "+r+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+i._id+"-"+e+'" aria-level="'+e+'">'+n[e].name+"</div>";return o||(o='<div class="'+r+'path-item">\xa0</div>'),o}})}),/**
 * ElementPath.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/ElementPath",["tinymce/ui/Path","tinymce/EditorManager"],function(e,t){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var i=this,n=t.activeEditor;return i.on("select",function(e){n.focus(),n.selection.select(this.data()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(t){for(var o=[],r=t.parents,s=r.length;s--;)if(1==r[s].nodeType&&!e(r[s])){var a=n.fire("ResolveName",{name:r[s].nodeName.toLowerCase(),target:r[s]});if(a.isDefaultPrevented()||o.push({name:a.name,element:r[s]}),a.isPropagationStopped())break}i.data(o)}),i._super()}})}),/**
 * FormItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/FormItem",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,i=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+i+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),/**
 * Form.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Form",["tinymce/ui/Container","tinymce/ui/FormItem","tinymce/util/Tools"],function(e,t,i){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,n=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),n.each(function(n){var o,r=n.settings.label;r&&(o=new t(i.extend({items:{type:"label",id:n._id+"-l",text:r,flex:0,forId:n._id,disabled:n.disabled()}},e.settings.formItemDefaults)),o.type="formitem",n.aria("labelledby",n._id+"-l"),"undefined"==typeof n.settings.flex&&(n.settings.flex=1),e.replace(n,o),o.add(n))})},recalcLabels:function(){var e,t,i,n=this,o=0,r=[];if(n.settings.labelGapCalc!==!1)for(i="children"==n.settings.labelGapCalc?n.find("formitem"):n.items(),i.filter("formitem").each(function(e){var t=e.items()[0],i=t.getEl().clientWidth;o=i>o?i:o,r.push(t)}),t=n.settings.labelGap||0,e=r.length;e--;)r[e].settings.minWidth=o+t},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),/**
 * FieldSet.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/FieldSet",["tinymce/ui/Form"],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,i=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+i+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),/**
 * FilePicker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/FilePicker",["tinymce/ui/ComboBox","tinymce/util/Tools"],function(e,t){return e.extend({init:function(e){var i,n,o,r=this,s=tinymce.activeEditor,a=s.settings;e.spellcheck=!1,o=a.file_picker_types||a.file_browser_callback_types,o&&(o=t.makeMap(o,/[, ]/)),(!o||o[e.filetype])&&(n=a.file_picker_callback,!n||o&&!o[e.filetype]?(n=a.file_browser_callback,!n||o&&!o[e.filetype]||(i=function(){n(r.getEl("inp").id,r.value(),e.filetype,window)})):i=function(){var i=r.fire("beforecall").meta;i=t.extend({filetype:e.filetype},i),n.call(s,function(e,t){r.value(e).fire("change",{meta:t})},r.value(),i)}),i&&(e.icon="browse",e.onaction=i),r._super(e)}})}),/**
 * FitLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/FitLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),i=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:i.left,y:i.top,w:t.innerW-i.right-i.left,h:t.innerH-i.top-i.bottom}),e.recalc&&e.recalc()})}})}),/**
 * FlexLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,i,n,o,r,s,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_,C,x,T,S,k,A,E,M,D,R,N,P,O,H,F,I,B,z=[],L=Math.max,W=Math.min;for(n=e.items().filter(":visible"),o=e.layoutRect(),r=e._paddingBox,s=e.settings,h=e.isRtl()?s.direction||"row-reversed":s.direction,a=s.align,l=e.isRtl()?s.pack||"end":s.pack,c=s.spacing||0,("row-reversed"==h||"column-reverse"==h)&&(n=n.set(n.toArray().reverse()),h=h.split("-")[0]),"column"==h?(S="y",x="h",T="minH",k="maxH",E="innerH",A="top",M="deltaH",D="contentH",H="left",P="w",R="x",N="innerW",O="minW",F="right",I="deltaW",B="contentW"):(S="x",x="w",T="minW",k="maxW",E="innerW",A="left",M="deltaW",D="contentW",H="top",P="h",R="y",N="innerH",O="minH",F="bottom",I="deltaH",B="contentH"),d=o[E]-r[A]-r[A],C=u=0,t=0,i=n.length;i>t;t++)f=n[t],p=f.layoutRect(),m=f.settings,g=m.flex,d-=i-1>t?c:0,g>0&&(u+=g,p[k]&&z.push(f),p.flex=g),d-=p[T],v=r[H]+p[O]+r[F],v>C&&(C=v);if(w={},w[T]=0>d?o[T]-d+o[M]:o[E]-d+o[M],w[O]=C+o[I],w[D]=o[E]-d,w[B]=C,w.minW=W(w.minW,o.maxW),w.minH=W(w.minH,o.maxH),w.minW=L(w.minW,o.startMinWidth),w.minH=L(w.minH,o.startMinHeight),!o.autoResize||w.minW==o.minW&&w.minH==o.minH){for(b=d/u,t=0,i=z.length;i>t;t++)f=z[t],p=f.layoutRect(),y=p[k],v=p[T]+p.flex*b,v>y?(d-=p[k]-p[T],u-=p.flex,p.flex=0,p.maxFlexSize=y):p.maxFlexSize=0;for(b=d/u,_=r[A],w={},0===u&&("end"==l?_=d+r[A]:"center"==l?(_=Math.round(o[E]/2-(o[E]-d)/2)+r[A],0>_&&(_=r[A])):"justify"==l&&(_=r[A],c=Math.floor(d/(n.length-1)))),w[R]=r[H],t=0,i=n.length;i>t;t++)f=n[t],p=f.layoutRect(),v=p.maxFlexSize||p[T],"center"===a?w[R]=Math.round(o[N]/2-p[P]/2):"stretch"===a?(w[P]=L(p[O]||0,o[N]-r[H]-r[F]),w[R]=r[H]):"end"===a&&(w[R]=o[N]-p[P]-r.top),p.flex>0&&(v+=p.flex*b),w[x]=v,w[S]=_,f.layoutRect(w),f.recalc&&f.recalc(),_+=v+c}else if(w.w=w.minW,w.h=w.minH,e.layoutRect(w),this.recalc(e),null===e._lastRect){var V=e.parent();V&&(V._lastRect=null,V.recalc())}}})}),/**
 * FlowLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/FlowLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),/**
 * FormatControls.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/FormatControls",["tinymce/ui/Control","tinymce/ui/Widget","tinymce/ui/FloatPanel","tinymce/util/Tools","tinymce/EditorManager","tinymce/Env"],function(e,t,i,n,o,r){function s(e){function t(t,i){return function(){var n=this;e.on("nodeChange",function(o){var r=e.formatter,s=null;a(o.parents,function(e){return a(t,function(t){return i?r.matchNode(e,i,{value:t.value})&&(s=t.value):r.matchNode(e,t.value)&&(s=t.value),s?!1:void 0}),s?!1:void 0}),n.value(s)})}}function n(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function o(){function t(e){var i=[];if(e)return a(e,function(e){var r={text:e.title,icon:e.icon};if(e.items)r.menu=t(e.items);else{var s=e.format||"custom"+n++;e.format||(e.name=s,o.push(e)),r.format=s,r.cmd=e.cmd}i.push(r)}),i}function i(){var i;return i=t(e.settings.style_formats_merge?e.settings.style_formats?r.concat(e.settings.style_formats):r:e.settings.style_formats||r)}var n=0,o=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){a(o,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:i(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?e.formatter.getCssText(this.settings.format):void 0},onPostRender:function(){var t=this;t.parent().on("show",function(){var i,n;i=t.settings.format,i&&(t.disabled(!e.formatter.canApply(i)),t.active(e.formatter.match(i))),n=t.settings.cmd,n&&t.active(e.queryCommandState(n))})},onclick:function(){this.settings.format&&l(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function r(t){return function(){function i(){return e.undoManager?e.undoManager[t]():!1}var n=this;t="redo"==t?"hasRedo":"hasUndo",n.disabled(!i()),e.on("Undo Redo AddUndo TypingUndo ClearUndos",function(){n.disabled(!i())})}}function s(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function l(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var c;c=o(),a({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,i){e.addButton(i,{tooltip:t,onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(i,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(i,function(e){t.active(e)})})},onclick:function(){l(i)}})}),a({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,i){e.addButton(i,{tooltip:t[0],cmd:t[1]})}),a({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,i){e.addButton(i,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(i,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(i,function(e){t.active(e)})})}})}),e.addButton("undo",{tooltip:"Undo",onPostRender:r("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:r("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:r("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:r("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:s,cmd:"mceToggleVisualAid"}),a({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,i){e.addMenuItem(i,{text:t[0],icon:i,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){i.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:c}),e.addButton("formatselect",function(){var i=[],o=n(e.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6");return a(o,function(t){i.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:o[0][0],values:i,fixedWidth:!0,onselect:l,onPostRender:t(i)}}),e.addButton("fontselect",function(){var i="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",o=[],r=n(e.settings.font_formats||i);return a(r,function(e){o.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:o,fixedWidth:!0,onPostRender:t(o,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var i=[],n="8pt 10pt 12pt 14pt 18pt 24pt 36pt",o=e.settings.fontsize_formats||n;return a(o.split(" "),function(e){var t=e,n=e,o=e.split("=");o.length>1&&(t=o[0],n=o[1]),i.push({text:t,value:n})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:i,fixedWidth:!0,onPostRender:t(i,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:c})}var a=n.each;o.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),s(t.editor)}),e.translate=function(e){return o.translate(e)},t.tooltips=!r.iOS}),/**
 * GridLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,i,n,o,r,s,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_,C,x,T,S,k,A,E,M=e.settings,D=[],R=[];M=e.settings,n=e.items().filter(":visible"),o=e.layoutRect(),i=M.columns||Math.ceil(Math.sqrt(n.length)),t=Math.ceil(n.length/i),v=M.spacingH||M.spacing||0,y=M.spacingV||M.spacing||0,b=M.alignH||M.align,w=M.alignV||M.align,m=e._paddingBox,A="reverseRows"in M?M.reverseRows:e.isRtl(),b&&"string"==typeof b&&(b=[b]),w&&"string"==typeof w&&(w=[w]);for(u=0;i>u;u++)D.push(0);for(d=0;t>d;d++)R.push(0);for(d=0;t>d;d++)for(u=0;i>u&&(c=n[d*i+u],c);u++)l=c.layoutRect(),x=l.minW,T=l.minH,D[u]=x>D[u]?x:D[u],R[d]=T>R[d]?T:R[d];for(S=o.innerW-m.left-m.right,_=0,u=0;i>u;u++)_+=D[u]+(u>0?v:0),S-=(u>0?v:0)+D[u];for(k=o.innerH-m.top-m.bottom,C=0,d=0;t>d;d++)C+=R[d]+(d>0?y:0),k-=(d>0?y:0)+R[d];if(_+=m.left+m.right,C+=m.top+m.bottom,a={},a.minW=_+(o.w-o.innerW),a.minH=C+(o.h-o.innerH),a.contentW=a.minW-o.deltaW,a.contentH=a.minH-o.deltaH,a.minW=Math.min(a.minW,o.maxW),a.minH=Math.min(a.minH,o.maxH),a.minW=Math.max(a.minW,o.startMinWidth),a.minH=Math.max(a.minH,o.startMinHeight),!o.autoResize||a.minW==o.minW&&a.minH==o.minH){o.autoResize&&(a=e.layoutRect(a),a.contentW=a.minW-o.deltaW,a.contentH=a.minH-o.deltaH);var N;N="start"==M.packV?0:k>0?Math.floor(k/t):0;var P=0,O=M.flexWidths;if(O)for(u=0;u<O.length;u++)P+=O[u];else P=i;var H=S/P;for(u=0;i>u;u++)D[u]+=O?O[u]*H:H;for(f=m.top,d=0;t>d;d++){for(h=m.left,s=R[d]+N,u=0;i>u&&(E=A?d*i+i-1-u:d*i+u,c=n[E],c);u++)p=c.settings,l=c.layoutRect(),r=Math.max(D[u],l.startMinWidth),l.x=h,l.y=f,g=p.alignH||(b?b[u]||b[0]:null),"center"==g?l.x=h+r/2-l.w/2:"right"==g?l.x=h+r-l.w:"stretch"==g&&(l.w=r),g=p.alignV||(w?w[u]||w[0]:null),"center"==g?l.y=f+s/2-l.h/2:"bottom"==g?l.y=f+s-l.h:"stretch"==g&&(l.h=s),c.layoutRect(l),h+=r+v,c.recalc&&c.recalc();f+=s+y}}else if(a.w=a.minW,a.h=a.minH,e.layoutRect(a),this.recalc(e),null===e._lastRect){var F=e.parent();F&&(F._lastRect=null,F.recalc())}}})}),/**
 * Iframe.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Iframe",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var i=this,n=this.getEl().contentWindow.document.body;return n?(n.innerHTML=e,t&&t()):setTimeout(function(){i.html(e)},0),this}})}),/**
 * Label.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Label",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,i=e._super();if(e.settings.multiline){var n=t.getSize(e.getEl());n.width>i.maxW&&(i.minW=i.maxW,e.addClass("multiline")),e.getEl().style.width=i.minW+"px",i.startMinH=i.h=i.minH=Math.min(i.maxH,t.getSize(e.getEl()).height)}return i},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&this.innerHtml(t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t+'"':"")+">"+e.encode(e._text)+"</label>"}})}),/**
 * Toolbar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Toolbar",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e._super()}})}),/**
 * MenuBar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/MenuBar",["tinymce/ui/Toolbar"],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),/**
 * MenuButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/MenuButton",["tinymce/ui/Button","tinymce/ui/Factory","tinymce/ui/MenuBar"],function(e,t,i){function n(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var o=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e,i=this,n=i.settings;return i.menu&&i.menu.visible()?i.hideMenu():(i.menu||(e=n.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",i.menu=t.create(e).parent(i).renderTo(),i.fire("createmenu"),i.menu.reflow(),i.menu.on("cancel",function(e){e.control.parent()===i.menu&&(e.stopPropagation(),i.focus(),i.hideMenu())}),i.menu.on("select",function(){i.focus()}),i.menu.on("show hide",function(e){e.control==i.menu&&i.activeMenu("show"==e.type),i.aria("expanded","show"==e.type)}).fire("show")),i.menu.show(),i.menu.layoutRect({w:i.layoutRect().w}),void i.menu.moveRel(i.getEl(),i.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e,t=this,n=t._id,o=t.classPrefix,r=t.settings.icon;return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",r=t.settings.icon?o+"ico "+o+"i-"+r:"",t.aria("role",t.parent()instanceof i?"menuitem":"button"),'<div id="'+n+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+n+'"><button id="'+n+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+"<span>"+(t._text?(r?"\xa0":"")+t.encode(t._text):"")+'</span> <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&n(t.target,e.getEl())&&(e.showMenu(),t.aria&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var i,n=t.control,r=e.parent();n&&r&&n instanceof o&&n.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(i=!0),e.hideMenu())}),i&&(n.focus(),n.showMenu()))}),e._super()},text:function(e){var t,i,n=this;if(n._rendered)for(i=n.getEl("open").getElementsByTagName("span"),t=0;t<i.length;t++)i[t].innerHTML=(n.settings.icon&&e?"\xa0":"")+n.encode(e);return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return o}),/**
 * ListBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/ListBox",["tinymce/ui/MenuButton"],function(e){return e.extend({init:function(e){function t(i){for(var r=0;r<i.length;r++){if(n=i[r].selected||e.value===i[r].value){o=o||i[r].text,s._value=i[r].value;break}i[r].menu&&t(i[r].menu)}}var i,n,o,r,s=this;s._values=i=e.values,i&&("undefined"!=typeof e.value&&t(i),!n&&i.length>0&&(o=i[0].text,s._value=i[0].value),e.menu=i),e.text=e.text||o||i[0].text,s._super(e),s.addClass("listbox"),s.on("select",function(t){var i=t.control;r&&(t.lastControl=r),e.multiple?i.active(!i.active()):s.value(t.control.settings.value),r=i})},value:function(e){function t(e,i){e.items().each(function(e){n=e.value()===i,n&&(o=o||e.text()),e.active(n),e.menu&&t(e.menu,i)})}function i(t){for(var r=0;r<t.length;r++)n=t[r].value==e,n&&(o=o||t[r].text),t[r].active=n,t[r].menu&&i(t[r].menu)}var n,o,r,s=this;return"undefined"!=typeof e&&(s.menu?t(s.menu,e):(r=s.settings.menu,i(r)),s.text(o||this.settings.text)),s._super(e)}})}),/**
 * MenuItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/MenuItem",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/Env"],function(e,t,i){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.addClass("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.addClass("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,i=this,n=i.settings,o=i.parent();if(o.items().each(function(e){e!==i&&e.hideMenu()}),n.menu){e=i.menu,e?e.show():(e=n.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",o.settings.itemDefaults&&(e.itemDefaults=o.settings.itemDefaults),e=i.menu=t.create(e).parent(i).renderTo(),e.reflow(),e.on("cancel",function(t){t.stopPropagation(),i.focus(),e.hide()}),e.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&i.removeClass("selected")}),e.submenu=!0),e._parentMenu=o,e.addClass("menu-sub");var r=e.testMoveRel(i.getEl(),i.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(i.getEl(),r),e.rel=r,r="menu-sub-"+r,e.removeClass(e._lastRel),e.addClass(r),e._lastRel=r,i.addClass("selected"),i.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,o=e.classPrefix,r=e.encode(e._text),s=e.settings.icon,a="",l=n.shortcut;return s&&e.parent().addClass("menu-has-icons"),n.image&&(s="none",a=" style=\"background-image: url('"+n.image+"')\""),l&&i.mac&&(l=l.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;"),l=l.replace(/ctrl\+/i,"&#x2318;"),l=l.replace(/alt\+/i,"&#x2325;"),l=l.replace(/shift\+/i,"&#x21E7;")),s=o+"ico "+o+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==r?'<i class="'+s+'"'+a+"></i>\xa0":"")+("-"!==r?'<span id="'+t+'-text" class="'+o+'text">'+r+"</span>":"")+(l?'<div id="'+t+'-shortcut" class="'+o+'menu-shortcut">'+l+"</div>":"")+(n.menu?'<div class="'+o+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,i=t.textStyle;if("function"==typeof i&&(i=i.call(this)),i){var n=e.getEl("text");n&&n.setAttribute("style",i)}return e.on("mouseenter click",function(i){i.control===e&&(t.menu||"click"!==i.type?(e.showMenu(),i.aria&&e.menu.focus(!0)):(e.fire("select"),e.parent().hideAll()))}),e._super(),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),/**
 * Menu.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Menu",["tinymce/ui/FloatPanel","tinymce/ui/MenuItem","tinymce/util/Tools"],function(e,t,i){var n=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,e.itemDefaults)for(var n=e.items,o=n.length;o--;)n[o]=i.extend({},e.itemDefaults,n[o]);t._super(e),t.addClass("menu")},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var i=t.settings;return i.icon||i.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}});return n}),/**
 * Radio.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Radio",["tinymce/ui/Checkbox"],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),/**
 * ResizeHandle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/ResizeHandle",["tinymce/ui/Widget","tinymce/ui/DragHelper"],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),"both"==e.settings.direction&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),/**
 * Spacer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Spacer",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),/**
 * SplitButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/SplitButton",["tinymce/ui/MenuButton","tinymce/ui/DomUtils"],function(e,t){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,i,n=this,o=n.getEl(),r=n.layoutRect();return n._super(),e=o.firstChild,i=o.lastChild,t.css(e,{width:r.w-t.getSize(i).width,height:r.h-2}),t.css(i,{height:r.h-2}),n},activeMenu:function(e){var i=this;t.toggleClass(i.getEl().lastChild,i.classPrefix+"active",e)},renderHtml:function(){var e,t=this,i=t._id,n=t.classPrefix,o=t.settings.icon;return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=t.settings.icon?n+"ico "+n+"i-"+o:"",'<div id="'+i+'" class="'+t.classes()+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+(t._text?(o?" ":"")+t._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(o?"\xa0":"")+t._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var i=e.target;if(e.control==this)for(;i;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==i.nodeName&&-1==i.className.indexOf("open"))return e.stopImmediatePropagation(),void t.call(this,e);i=i.parentNode}}),delete e.settings.onclick,e._super()}})}),/**
 * StackLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/StackLayout",["tinymce/ui/FlowLayout"],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),/**
 * TabPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/TabPanel",["tinymce/ui/Panel","tinymce/ui/DomUtils"],function(e,t){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var i;this.activeTabId&&(i=this.getEl(this.activeTabId),t.removeClass(i,this.classPrefix+"active"),i.setAttribute("aria-selected","false")),this.activeTabId="t"+e,i=this.getEl("t"+e),i.setAttribute("aria-selected","true"),t.addClass(i,this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,i){e!=i&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,i="",n=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,o){var r=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",r),i+='<div id="'+r+'" class="'+n+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+n+'tabs" role="tablist">'+i+'</div><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var i=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var n=i.childNodes.length;n--;)i.childNodes[n]==t.target&&e.activateTab(n)})},initLayoutRect:function(){var e,i,n,o=this;i=t.getSize(o.getEl("head")).width,i=0>i?0:i,n=0,o.items().each(function(e){i=Math.max(i,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)}),o.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=i,e.settings.h=n,e.layoutRect({x:0,y:0,w:i,h:n})});var r=t.getSize(o.getEl("head")).height;return o.settings.minWidth=i,o.settings.minHeight=n+r,e=o._super(),e.deltaH+=r,e.innerH=e.h-e.deltaH,e}})}),/**
 * TextBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/TextBox",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){13==e.keyCode&&t.parents().reverse().each(function(t){return e.preventDefault(),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})})},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl().disabled=e),t._super(e)},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e,t,i,n,o=this,r=0,s=0;e=o.getEl().style,t=o._layoutRect,n=o._lastRepaintRect||{};var a=document;return!o.settings.multiline&&a.all&&(!a.documentMode||a.documentMode<=8)&&(e.lineHeight=t.h-s+"px"),i=o._borderBox,r=i.left+i.right+8,s=i.top+i.bottom+(o.settings.multiline?8:0),t.x!==n.x&&(e.left=t.x+"px",n.x=t.x),t.y!==n.y&&(e.top=t.y+"px",n.y=t.y),t.w!==n.w&&(e.width=t.w-r+"px",n.w=t.w),t.h!==n.h&&(e.height=t.h-s+"px",n.h=t.h),o._lastRepaintRect=n,o.fire("repaint",{},!1),o},renderHtml:function(){var e=this,t=e._id,i=e.settings,n=e.encode(e._value,!1),o="";return"spellcheck"in i&&(o+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(o+=' maxlength="'+i.maxLength+'"'),i.size&&(o+=' size="'+i.size+'"'),i.subtype&&(o+=' type="'+i.subtype+'"'),e.disabled()&&(o+=' disabled="disabled"'),i.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(i.rows?' rows="'+i.rows+'"':"")+' hidefocus="1"'+o+">"+n+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+n+'" hidefocus="1"'+o+" />"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()},remove:function(){t.off(this.getEl()),this._super()}})}),/**
 * Throbber.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
n("tinymce/ui/Throbber",["tinymce/ui/DomUtils","tinymce/ui/Control"],function(e,t){return function(i,n){var o,r=this,s=t.classPrefix;r.show=function(t){return r.hide(),o=!0,window.setTimeout(function(){o&&i.appendChild(e.createFragment('<div class="'+s+"throbber"+(n?" "+s+"throbber-inline":"")+'"></div>'))},t||0),r},r.hide=function(){var e=i.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),o=!1,r}}}),r(["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/dom/DOMUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/html/DomParser","tinymce/html/Writer","tinymce/html/Serializer","tinymce/dom/Serializer","tinymce/dom/TridentSelection","tinymce/util/VK","tinymce/dom/ControlSelection","tinymce/dom/BookmarkManager","tinymce/dom/Selection","tinymce/dom/ElementUtils","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/util/Class","tinymce/util/EventDispatcher","tinymce/ui/Selector","tinymce/ui/Collection","tinymce/ui/DomUtils","tinymce/ui/Control","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/ui/Container","tinymce/ui/DragHelper","tinymce/ui/Scrollable","tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/FloatPanel","tinymce/ui/Window","tinymce/ui/MessageBox","tinymce/WindowManager","tinymce/util/Quirks","tinymce/util/Observable","tinymce/EditorObservable","tinymce/Shortcuts","tinymce/Editor","tinymce/util/I18n","tinymce/FocusManager","tinymce/EditorManager","tinymce/LegacyInput","tinymce/util/XHR","tinymce/util/JSON","tinymce/util/JSONRequest","tinymce/util/JSONP","tinymce/util/LocalStorage","tinymce/Compat","tinymce/ui/Layout","tinymce/ui/AbsoluteLayout","tinymce/ui/Tooltip","tinymce/ui/Widget","tinymce/ui/Button","tinymce/ui/ButtonGroup","tinymce/ui/Checkbox","tinymce/ui/ComboBox","tinymce/ui/ColorBox","tinymce/ui/PanelButton","tinymce/ui/ColorButton","tinymce/util/Color","tinymce/ui/ColorPicker","tinymce/ui/Path","tinymce/ui/ElementPath","tinymce/ui/FormItem","tinymce/ui/Form","tinymce/ui/FieldSet","tinymce/ui/FilePicker","tinymce/ui/FitLayout","tinymce/ui/FlexLayout","tinymce/ui/FlowLayout","tinymce/ui/FormatControls","tinymce/ui/GridLayout","tinymce/ui/Iframe","tinymce/ui/Label","tinymce/ui/Toolbar","tinymce/ui/MenuBar","tinymce/ui/MenuButton","tinymce/ui/ListBox","tinymce/ui/MenuItem","tinymce/ui/Menu","tinymce/ui/Radio","tinymce/ui/ResizeHandle","tinymce/ui/Spacer","tinymce/ui/SplitButton","tinymce/ui/StackLayout","tinymce/ui/TabPanel","tinymce/ui/TextBox","tinymce/ui/Throbber"])}(this),tinymce.ThemeManager.add("modern",function(e){function t(){function t(t){var n,o=[];return t?(d(t.split(/[ ,]/),function(t){function i(){var i=e.selection;"bullist"==r&&i.selectorChanged("ul > li",function(e,i){for(var n,o=i.parents.length;o--&&(n=i.parents[o].nodeName,"OL"!=n&&"UL"!=n););t.active(e&&"UL"==n)}),"numlist"==r&&i.selectorChanged("ol > li",function(e,i){for(var n,o=i.parents.length;o--&&(n=i.parents[o].nodeName,"OL"!=n&&"UL"!=n););t.active(e&&"OL"==n)}),t.settings.stateSelector&&i.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&i.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var r;"|"==t?n=null:u.has(t)?(t={type:t},c.toolbar_items_size&&(t.size=c.toolbar_items_size),o.push(t),n=null):(n||(n={type:"buttongroup",items:[]},o.push(n)),e.buttons[t]&&(r=t,t=e.buttons[r],"function"==typeof t&&(t=t()),t.type=t.type||"button",c.toolbar_items_size&&(t.size=c.toolbar_items_size),t=u.create(t),n.items.push(t),e.initialized?i():e.on("init",i)))}),i.push({type:"toolbar",layout:"flow",items:o}),!0):void 0}var i=[];if(tinymce.isArray(c.toolbar)){if(0===c.toolbar.length)return;tinymce.each(c.toolbar,function(e,t){c["toolbar"+(t+1)]=e}),delete c.toolbar}for(var n=1;10>n&&t(c["toolbar"+n]);n++);return i.length||c.toolbar===!1||t(c.toolbar||p),i.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:i}:void 0}function i(){function t(t){var i;return"|"==t?{text:"|"}:i=e.menuItems[t]}function i(i){var n,o,r,s,a;if(a=tinymce.makeMap((c.removed_menuitems||"").split(/[ ,]/)),c.menu?(o=c.menu[i],s=!0):o=f[i],o){n={text:o.title},r=[],d((o.items||"").split(/[ ,]/),function(e){var i=t(e);i&&!a[e]&&r.push(t(e))}),s||d(e.menuItems,function(e){e.context==i&&("before"==e.separator&&r.push({text:"|"}),e.prependToContext?r.unshift(e):r.push(e),"after"==e.separator&&r.push({text:"|"}))});for(var l=0;l<r.length;l++)"|"==r[l].text&&(0===l||l==r.length-1)&&r.splice(l,1);if(n.menu=r,!n.menu.length)return null}return n}var n,o=[],r=[];if(c.menu)for(n in c.menu)r.push(n);else for(n in f)r.push(n);for(var s="string"==typeof c.menubar?c.menubar.split(/[ ,]/):r,a=0;a<s.length;a++){var l=s[a];l=i(l),l&&o.push(l)}return o}function n(t){function i(e){var i=t.find(e)[0];i&&i.focus(!0)}e.shortcuts.add("Alt+F9","",function(){i("menubar")}),e.shortcuts.add("Alt+F10","",function(){i("toolbar")}),e.shortcuts.add("Alt+F11","",function(){i("elementpath")}),t.on("cancel",function(){e.focus()})}function o(t,i){function n(e){return{width:e.clientWidth,height:e.clientHeight}}var o,r,s,a;o=e.getContainer(),r=e.getContentAreaContainer().firstChild,s=n(o),a=n(r),null!==t&&(t=Math.max(c.min_width||100,t),t=Math.min(c.max_width||65535,t),h.setStyle(o,"width",t+(s.width-a.width)),h.setStyle(r,"width",t)),i=Math.max(c.min_height||100,i),i=Math.min(c.max_height||65535,i),h.setStyle(r,"height",i),e.fire("ResizeEditor")}function r(t,i){var n=e.getContentAreaContainer();l.resizeTo(n.clientWidth+t,n.clientHeight+i)}function s(o){function r(){if(f&&f.moveRel&&f.visible()&&!f._fixed){var t=e.selection.getScrollContainer(),i=e.getBody(),n=0,o=0;if(t){var r=h.getPos(i),s=h.getPos(t);n=Math.max(0,s.x-r.x),o=Math.max(0,s.y-r.y)}f.fixed(!1).moveRel(i,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(n,o)}}function s(){f&&(f.show(),r(),h.addClass(e.getBody(),"mce-edit-focus"))}function a(){f&&(f.hide(),h.removeClass(e.getBody(),"mce-edit-focus"))}function d(){return f?void(f.visible()||s()):(f=l.panel=u.create({type:p?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!p,border:1,items:[c.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:i()},t()]}),e.fire("BeforeRenderUI"),f.renderTo(p||document.body).reflow(),n(f),s(),e.on("nodeChange",r),e.on("activate",s),e.on("deactivate",a),void e.nodeChanged())}var f,p;return c.fixed_toolbar_container&&(p=h.select(c.fixed_toolbar_container)[0]),c.content_editable=!0,e.on("focus",function(){o.skinUiCss?tinymce.DOM.styleSheetLoader.load(o.skinUiCss,d,d):d()}),e.on("blur hide",a),e.on("remove",function(){f&&(f.remove(),f=null)}),o.skinUiCss&&tinymce.DOM.styleSheetLoader.load(o.skinUiCss),{}}function a(r){var s,a,d;return r.skinUiCss&&tinymce.DOM.loadCSS(r.skinUiCss),s=l.panel=u.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[c.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:i()},t(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),c.resize!==!1&&(a={type:"resizehandle",direction:c.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;d={width:t.clientWidth,height:t.clientHeight}},onResize:function(e){"both"==c.resize?o(d.width+e.deltaX,d.height+e.deltaY):o(null,d.height+e.deltaY)}}),c.statusbar!==!1&&s.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},a]}),c.readonly&&s.find("*").disabled(!0),e.fire("BeforeRenderUI"),s.renderBefore(r.targetNode).reflow(),c.width&&tinymce.DOM.setStyle(s.getEl(),"width",c.width),e.on("remove",function(){s.remove(),s=null}),n(s),{iframeContainer:s.find("#iframe")[0].getEl(),editorContainer:s.getEl()}}var l=this,c=e.settings,u=tinymce.ui.Factory,d=tinymce.each,h=tinymce.DOM,f={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},p="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";l.renderUI=function(t){var i=c.skin!==!1?c.skin||"lightgray":!1;if(i){var n=c.skin_url;n=n?e.documentBaseURI.toAbsolute(n):tinymce.baseURL+"/skins/"+i,t.skinUiCss=tinymce.Env.documentMode<=7?n+"/skin.ie7.min.css":n+"/skin.min.css",e.contentCSS.push(n+"/content"+(e.inline?".inline":"")+".min.css")}return e.on("ProgressState",function(e){l.throbber=l.throbber||new tinymce.ui.Throbber(l.panel.getEl("body")),e.state?l.throbber.show(e.time):l.throbber.hide()}),c.inline?s(t):a(t)},l.resizeTo=o,l.resizeBy=r}),!function(e,t){"use strict";function i(e,t){for(var i,n=[],r=0;r<e.length;++r){if(i=s[e[r]]||o(e[r]),!i)throw"module definition dependecy not found: "+e[r];n.push(i)}t.apply(null,n)}function n(e,n,o){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(n===t)throw"invalid module definition, dependencies must be specified";if(o===t)throw"invalid module definition, definition function must be specified";i(n,function(){s[e]=o.apply(null,arguments)})}function o(t){for(var i=e,n=t.split(/[.\/]/),o=0;o<n.length;++o){if(!i[n[o]])return;i=i[n[o]]}return i}function r(i){for(var n=0;n<i.length;n++){for(var o=e,r=i[n],a=r.split(/[.\/]/),l=0;l<a.length-1;++l)o[a[l]]===t&&(o[a[l]]={}),o=o[a[l]];o[a[a.length-1]]=s[r]}}var s={};n("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(e,t,i){function n(t,i){return e.each(i,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}function o(o){function r(e){var t=e.name,i=e;if("br"===t)return void(l+="\n");if(c[t]&&(l+=" "),u[t])return void(l+=" ");if(3==e.type&&(l+=e.value),!e.shortEnded&&(e=e.firstChild))do r(e);while(e=e.next);d[t]&&i.next&&(l+="\n","p"==t&&(l+="\n"))}var s=new i,a=new t({},s),l="",c=s.getShortEndedElements(),u=e.makeMap("script noscript style textarea video audio iframe object"," "),d=s.getBlockElements();return o=n(o,[/<!\[[^\]]+\]>/g]),r(a.parse(o)),l}function r(e){function t(e,t,i){return t||i?"\xa0":" "}return e=n(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br>$/i])}return{filter:n,innerText:o,trimHtml:r}}),n("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/util/VK","tinymce/pasteplugin/Utils"],function(e,t,i){return function(n){function o(e){var t,i=n.dom;if(t=n.fire("BeforePastePreProcess",{content:e}),t=n.fire("PastePreProcess",t),e=t.content,!t.isDefaultPrevented()){if(n.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()){var o=i.add(n.getBody(),"div",{style:"display:none"},e);t=n.fire("PastePostProcess",{node:o}),i.remove(o),e=t.node.innerHTML}t.isDefaultPrevented()||n.insertContent(e,{merge:n.settings.paste_merge_formats!==!1})}}function r(e){e=n.dom.encode(e).replace(/\r\n/g,"\n");var t,r=n.dom.getParent(n.selection.getStart(),n.dom.isBlock),s=n.settings.forced_root_block;s&&(t=n.dom.createHTML(s,n.settings.forced_root_block_attrs),t=t.substr(0,t.length-3)+">"),r&&/^(PRE|DIV)$/.test(r.nodeName)||!s?e=i.filter(e,[[/\n/g,"<br>"]]):(e=i.filter(e,[[/\n\n/g,"</p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]]),-1!=e.indexOf("<p>")&&(e=t+e)),o(e)}function s(){function t(e){var t,i,n,r=e.startContainer;if(t=e.getClientRects(),t.length)return t[0];if(e.collapsed&&1==r.nodeType){for(n=r.childNodes[y.startOffset];n&&3==n.nodeType&&!n.data.length;)n=n.nextSibling;if(n)return"BR"==n.tagName&&(i=o.doc.createTextNode("\ufeff"),n.parentNode.insertBefore(i,n),e=o.createRng(),e.setStartBefore(i),e.setEndAfter(i),t=e.getClientRects(),o.remove(i)),t.length?t[0]:void 0}}var i,o=n.dom,r=n.getBody(),s=n.dom.getViewPort(n.getWin()),a=s.y,l=20;if(y=n.selection.getRng(),n.inline&&(i=n.selection.getScrollContainer(),i&&i.scrollTop>0&&(a=i.scrollTop)),y.getClientRects){var c=t(y);if(c)l=a+(c.top-o.getPos(r).y);else{l=a;var u=y.startContainer;u&&(3==u.nodeType&&u.parentNode!=r&&(u=u.parentNode),1==u.nodeType&&(l=o.getPos(u,i||r).y))}}v=o.add(n.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+l+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},x),(e.ie||e.gecko)&&o.setStyle(v,"left","rtl"==o.getStyle(r,"direction",!0)?65535:-65535),o.bind(v,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),v.focus(),n.selection.select(v,!0)}function a(){if(v){for(var e;e=n.dom.get("mcepastebin");)n.dom.remove(e),n.dom.unbind(e);y&&n.selection.setRng(y)}v=y=null}function l(){var e,t,i,o,r="";for(e=n.dom.select("div[id=mcepastebin]"),t=0;t<e.length;t++)i=e[t],i.firstChild&&"mcepastebin"==i.firstChild.id&&(i=i.firstChild),o=i.innerHTML,r!=x&&(r+=o);return r}function c(e){var t={};if(e){if(e.getData){var i=e.getData("Text");i&&i.length>0&&(t["text/plain"]=i)}if(e.types)for(var n=0;n<e.types.length;n++){var o=e.types[n];t[o]=e.getData(o)}}return t}function u(e){return c(e.clipboardData||n.getDoc().dataTransfer)}function d(e,t){function i(i){function r(){t&&(n.selection.setRng(t),t=null),o('<img src="'+l.result+'">')}var s,a,l;if(i)for(s=0;s<i.length;s++)if(a=i[s],/^image\/(jpeg|png|gif)$/.test(a.type))return l=new FileReader,l.onload=r,l.readAsDataURL(a.getAsFile?a.getAsFile():a),e.preventDefault(),!0}var r=e.clipboardData||e.dataTransfer;return n.settings.paste_data_images&&r?i(r.items)||i(r.files):void 0}function h(e){var t=e.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}function f(e){var t,i,o=n.getDoc();if(o.caretPositionFromPoint)i=o.caretPositionFromPoint(e.clientX,e.clientY),t=o.createRange(),t.setStart(i.offsetNode,i.offset),t.collapse(!0);else if(o.caretRangeFromPoint)t=o.caretRangeFromPoint(e.clientX,e.clientY);else if(o.body.createTextRange){t=o.body.createTextRange();try{t.moveToPoint(e.clientX,e.clientY),t.collapse(!0)}catch(r){t.collapse(e.clientY<o.body.clientHeight)}}return t}function p(e,t){return t in e&&e[t].length>0}function m(e){return t.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function g(){n.on("keydown",function(t){function i(e){m(e)&&!e.isDefaultPrevented()&&a()}if(m(t)&&!t.isDefaultPrevented()){if(b=t.shiftKey&&86==t.keyCode,b&&e.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),_=(new Date).getTime(),e.ie&&b)return t.preventDefault(),void n.fire("paste",{ieFake:!0});a(),s(),n.once("keyup",i),n.once("paste",function(){n.off("keyup",i)})}}),n.on("paste",function(t){var c=(new Date).getTime(),f=u(t),m=(new Date).getTime()-c,g=(new Date).getTime()-_-m<1e3,y="text"==w.pasteFormat||b;return b=!1,t.isDefaultPrevented()||h(t)?void a():d(t)?void a():(g||t.preventDefault(),!e.ie||g&&!t.ieFake||(s(),n.dom.bind(v,"paste",function(e){e.stopPropagation()}),n.getDoc().execCommand("Paste",!1,null),f["text/html"]=l()),void setTimeout(function(){var e;return p(f,"text/html")?e=f["text/html"]:(e=l(),e==x&&(y=!0)),e=i.trimHtml(e),v&&v.firstChild&&"mcepastebin"===v.firstChild.id&&(y=!0),a(),e.length||(y=!0),y&&(e=p(f,"text/plain")&&-1==e.indexOf("</p>")?f["text/plain"]:i.innerText(e)),e==x?void(g||n.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(y?r(e):o(e))},0))}),n.on("dragstart dragend",function(e){C="dragstart"==e.type}),n.on("drop",function(e){var t=f(e);if(!e.isDefaultPrevented()&&!C&&!d(e,t)&&t&&n.settings.paste_filter_drop!==!1){var s=c(e.dataTransfer),a=s["mce-internal"]||s["text/html"]||s["text/plain"];a&&(e.preventDefault(),n.undoManager.transact(function(){s["mce-internal"]&&n.execCommand("Delete"),n.selection.setRng(t),a=i.trimHtml(a),s["text/html"]?o(a):r(a)}))}}),n.on("dragover dragend",function(e){var t,i=e.dataTransfer;if(n.settings.paste_data_images&&i)for(t=0;t<i.types.length;t++)if("Files"==i.types[t])return e.preventDefault(),!1})}var v,y,b,w=this,_=0,C=!1,x="%MCEPASTEBIN%";w.pasteHtml=o,w.pasteText=r,n.on("preInit",function(){g(),n.parser.addNodeFilter("img",function(t){if(!n.settings.paste_data_images)for(var i=t.length;i--;){var o=t[i].attributes.map.src;o&&/^(data:image|webkit\-fake\-url)/.test(o)&&(t[i].attr("data-mce-object")||o===e.transparentSrc||t[i].remove())}})})}}),n("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(e,t,i,n,o,r){function s(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function a(t){var i,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(n,function(e){return e.test(t)?(i=!0,!1):void 0}),i}function l(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u00d8\u25CF]\s*/.test(e)}function c(c){var u=c.settings;c.on("BeforePastePreProcess",function(d){function h(e){function t(e){var i="";if(3===e.type)return e.value;if(e=e.firstChild)do i+=t(e);while(e=e.next);return i}function i(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do if(!i(e,t))return!1;while(e=e.next);return!0}function n(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do n(e);while(e=e.next)}function r(e,t,r){var a=e._listLevel||u;a!=u&&(u>a?s&&(s=s.parent.parent):(c=s,s=null)),s&&s.name==t?s.append(e):(c=c||s,s=new o(t,1),r>1&&s.attr("start",""+r),e.wrap(s)),e.name="li",a>u&&c&&c.lastChild.append(s),u=a,n(e),i(e,/^\u00a0+/),i(e,/^\s*([\u2022\u00b7\u00a7\u00d8\u25CF]|\w+\.)/),i(e,/^\u00a0+/)}for(var s,c,u=1,d=[],h=e.firstChild;"undefined"!=typeof h&&null!==h;)if(d.push(h),h=h.walk(),null!==h)for(;"undefined"!=typeof h&&h.parent!==e;)h=h.walk();for(var f=0;f<d.length;f++)if(e=d[f],"p"==e.name&&e.firstChild){var p=t(e);if(l(p)){r(e,"ul");continue}if(a(p)){var m=/([0-9]+)\./.exec(p),g=1;m&&(g=parseInt(m[1],10)),r(e,"ol",g);continue}if(e._listLevel){r(e,"ul",1);continue}s=null}else c=s,s=null}function f(t,i){var n,r={},s=c.dom.parseStyle(i);return e.each(s,function(e,o){switch(o){case"mso-list":n=/\w+ \w+([0-9]+)/i.exec(i),n&&(t._listLevel=parseInt(n[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":o="text-align";break;case"vert-align":o="vertical-align";break;case"font-color":case"mso-foreground":o="color";break;case"mso-background":case"mso-highlight":o="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(r[o]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}return 0===o.indexOf("mso-comment")?void t.remove():void(0!==o.indexOf("mso-")&&("all"==p||m&&m[o])&&(r[o]=e))}),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],t.wrap(new o("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],t.wrap(new o("i",1))),r=c.dom.serializeStyle(r,t.name),r?r:null}var p,m,g=d.content;if(p=u.paste_retain_style_properties,p&&(m=e.makeMap(p.split(/[, ]/))),u.paste_enable_default_filters!==!1&&s(d.content)){d.wordContent=!0,g=r.filter(g,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("\xa0"):""}]]);var v=u.paste_word_valid_elements;v||(v="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var y=new i({valid_elements:v,valid_children:"-li[p]"});e.each(y.elements,function(e){e.attributes["class"]||(e.attributes["class"]={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var b=new t({},y);b.addAttributeFilter("style",function(e){for(var t,i=e.length;i--;)t=e[i],t.attr("style",f(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),b.addAttributeFilter("class",function(e){for(var t,i,n=e.length;n--;)t=e[n],i=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel|MsoCaption)$/i.test(i)&&t.remove(),t.attr("class",null)}),b.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),b.addNodeFilter("a",function(e){for(var t,i,n,o=e.length;o--;)if(t=e[o],i=t.attr("href"),n=t.attr("name"),i&&-1!=i.indexOf("#_msocom_"))t.remove();else if(i&&0===i.indexOf("file://")&&(i=i.split("#")[1],i&&(i="#"+i)),i||n){if(n&&!/^_?(?:toc|edn|ftn)/i.test(n)){t.unwrap();continue}t.attr({href:i,name:n})}else t.unwrap()});var w=b.parse(g);h(w),d.content=new n({},y).serialize(w)}})}return c.isWordContent=s,c}),n("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(e,t,i,n){return function(o){function r(e){o.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function s(e){if(!i.isWordContent(e))return e;var r=[];t.each(o.schema.getBlockElements(),function(e,t){r.push(t)});var s=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+r.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=n.filter(e,[[s,"$1"]]),e=n.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function a(e){if(i.isWordContent(e))return e;var t=o.settings.paste_webkit_styles;if(o.settings.paste_remove_styles_if_webkit===!1||"all"==t)return e;if(t&&(t=t.split(/[, ]/)),t){var n=o.dom,r=o.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,i,o,s){var a=n.parseStyle(o,"span"),l={};if("none"===t)return i+s;for(var c=0;c<t.length;c++){var u=a[t[c]],d=n.getStyle(r,t[c],!0);/color/.test(t[c])&&(u=n.toHex(u),d=n.toHex(d)),d!=u&&(l[t[c]]=u)}return l=n.serializeStyle(l,"span"),l?i+' style="'+l+'"'+s:i+s})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,i,n){return t+' style="'+i+'"'+n})}e.webkit&&r(a),e.ie&&r(s)}}),n("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(e,t,i,n){var o;e.add("paste",function(e){function r(){"text"==s.pasteFormat?(this.active(!1),s.pasteFormat="html"):(s.pasteFormat="text",this.active(!0),o||(e.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),o=!0))}var s,a=this,l=e.settings;a.clipboard=s=new t(e),a.quirks=new n(e),a.wordFilter=new i(e),e.settings.paste_as_text&&(a.clipboard.pasteFormat="text"),l.paste_preprocess&&e.on("PastePreProcess",function(e){l.paste_preprocess.call(a,a,e)}),l.paste_postprocess&&e.on("PastePostProcess",function(e){l.paste_postprocess.call(a,a,e)}),e.addCommand("mceInsertClipboardContent",function(e,t){t.content&&a.clipboard.pasteHtml(t.content),t.text&&a.clipboard.pasteText(t.text)}),e.paste_block_drop&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),e.settings.paste_data_images||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:r,active:"text"==a.clipboard.pasteFormat}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:s.pasteFormat,onclick:r})})}),r(["tinymce/pasteplugin/Utils","tinymce/pasteplugin/WordFilter"])}(this),tinymce.PluginManager.add("link",function(e){function t(t){return function(){var i=e.settings.link_list;"string"==typeof i?tinymce.util.XHR.send({url:i,success:function(e){t(tinymce.util.JSON.parse(e))}}):"function"==typeof i?i(t):t(i)}}function i(e,t,i){function n(e,i){return i=i||[],tinymce.each(e,function(e){var o={text:e.text||e.title};e.menu?o.menu=n(e.menu):(o.value=e.value,t&&t(o)),i.push(o)}),i}return n(e,i||[])}function n(t){function n(e){var t=d.find("#text");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),d.find("#href").value(e.control.value())}function o(t){var i=[];return tinymce.each(e.dom.select("a:not([href])"),function(e){var n=e.name||e.id;n&&i.push({text:n,value:"#"+n,selected:-1!=t.indexOf("#"+n)})}),i.length?(i.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:i,onselect:n}):void 0}function r(){!u&&0===w.text.length&&h&&this.parent().parent().find("#text")[0].value(this.value())}function s(t){var i=t.meta||{};p&&p.value(e.convertURL(this.value(),"href")),tinymce.each(t.meta,function(e,t){d.find("#"+t).value(e)}),i.text||r.call(this)}function a(e){var t=_.getContent();if(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1==t.indexOf("href=")))return!1;if(e){var i,n=e.childNodes;if(0===n.length)return!1;for(i=n.length-1;i>=0;i--)if(3!=n[i].nodeType)return!1}return!0}var l,c,u,d,h,f,p,m,g,v,y,b,w={},_=e.selection,C=e.dom;l=_.getNode(),c=C.getParent(l,"a[href]"),h=a(),w.text=u=c?c.innerText||c.textContent:_.getContent({format:"text"}),w.href=c?C.getAttrib(c,"href"):"",(b=C.getAttrib(c,"target"))?w.target=b:e.settings.default_link_target&&(w.target=e.settings.default_link_target),(b=C.getAttrib(c,"rel"))&&(w.rel=b),(b=C.getAttrib(c,"class"))&&(w["class"]=b),(b=C.getAttrib(c,"title"))&&(w.title=b),h&&(f={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){w.text=this.value()}}),t&&(p={type:"listbox",label:"Link list",values:i(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:n,value:e.convertURL(w.href,"href"),onPostRender:function(){p=this}}),e.settings.target_list!==!1&&(e.settings.target_list||(e.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),g={name:"target",type:"listbox",label:"Target",values:i(e.settings.target_list)}),e.settings.rel_list&&(m={name:"rel",type:"listbox",label:"Rel",values:i(e.settings.rel_list)}),e.settings.link_class_list&&(v={name:"class",type:"listbox",label:"Class",values:i(e.settings.link_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),e.settings.link_title!==!1&&(y={name:"title",type:"textbox",label:"Title",value:w.title}),d=e.windowManager.open({title:"Insert link",data:w,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:s,onkeyup:r},f,y,o(w.href),p,m,g,v],onSubmit:function(t){function i(t,i){var n=e.selection.getRng();window.setTimeout(function(){e.windowManager.confirm(t,function(t){e.selection.setRng(n),i(t)})},0)}function n(){var t={href:o,target:w.target?w.target:null,rel:w.rel?w.rel:null,"class":w["class"]?w["class"]:null,title:w.title?w.title:null};c?(e.focus(),h&&w.text!=u&&("innerText"in c?c.innerText=w.text:c.textContent=w.text),C.setAttribs(c,t),_.select(c),e.undoManager.add()):h?e.insertContent(C.createHTML("a",t,C.encode(w.text))):e.execCommand("mceInsertLink",!1,t)}var o;return w=tinymce.extend(w,t.data),(o=w.href)?o.indexOf("@")>0&&-1==o.indexOf("//")&&-1==o.indexOf("mailto:")?void i("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(o="mailto:"+o),n()}):/^\s*www\./i.test(o)?void i("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(o="http://"+o),n()}):void n():void e.execCommand("unlink")}})}e.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:t(n),stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),e.addShortcut("Ctrl+K","",t(n)),e.addCommand("mceLink",t(n)),this.showDialog=n,e.addMenuItem("link",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:t(n),stateSelector:"a[href]",context:"insert",prependToContext:!0})}),tinymce.PluginManager.add("image",function(e){function t(e,t){function i(e,i){n.parentNode&&n.parentNode.removeChild(n),t({width:e,height:i})}var n=document.createElement("img");n.onload=function(){i(n.clientWidth,n.clientHeight)},n.onerror=function(){i()};var o=n.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left=0,o.width=o.height="auto",document.body.appendChild(n),n.src=e}function i(e,t,i){function n(e,i){return i=i||[],tinymce.each(e,function(e){var o={text:e.text||e.title};e.menu?o.menu=n(e.menu):(o.value=e.value,t(o)),i.push(o)}),i}return n(e,i||[])}function n(t){return function(){var i=e.settings.image_list;"string"==typeof i?tinymce.util.XHR.send({url:i,success:function(e){t(tinymce.util.JSON.parse(e))}}):"function"==typeof i?i(t):t(i)}}function o(n){function o(){var e,t,i,n;e=c.find("#width")[0],t=c.find("#height")[0],e&&t&&(i=e.value(),n=t.value(),c.find("#constrain")[0].checked()&&u&&d&&i&&n&&(u!=i?(n=Math.round(i/u*n),t.value(n)):(i=Math.round(n/d*i),e.value(i))),u=i,d=n)}function r(){function t(t){function i(){t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())}t.onload=function(){p.width||p.height||!v||m.setAttribs(t,{width:t.clientWidth,height:t.clientHeight}),i()},t.onerror=i}l(),o(),p=tinymce.extend(p,c.toJSON()),p.alt||(p.alt=""),""===p.width&&(p.width=null),""===p.height&&(p.height=null),p.style||(p.style=null),p={src:p.src,alt:p.alt,width:p.width,height:p.height,style:p.style,"class":p["class"]},e.undoManager.transact(function(){return p.src?(g?m.setAttribs(g,p):(p.id="__mcenew",e.focus(),e.selection.setContent(m.createHTML("img",p)),g=m.get("__mcenew"),m.setAttrib(g,"id",null)),void t(g)):void(g&&(m.remove(g),e.focus(),e.nodeChanged()))})}function s(e){return e&&(e=e.replace(/px$/,"")),e}function a(i){var n=i.meta||{};h&&h.value(e.convertURL(this.value(),"src")),tinymce.each(n,function(e,t){c.find("#"+t).value(e)}),n.width||n.height||t(this.value(),function(e){e.width&&e.height&&v&&(u=e.width,d=e.height,c.find("#width").value(u),c.find("#height").value(d))})}function l(){function t(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e}if(e.settings.image_advtab){var i=c.toJSON(),n=m.parseStyle(i.style);delete n.margin,n["margin-top"]=n["margin-bottom"]=t(i.vspace),n["margin-left"]=n["margin-right"]=t(i.hspace),n["border-width"]=t(i.border),c.find("#style").value(m.serializeStyle(m.parseStyle(m.serializeStyle(n))))}}var c,u,d,h,f,p={},m=e.dom,g=e.selection.getNode(),v=e.settings.image_dimensions!==!1;u=m.getAttrib(g,"width"),d=m.getAttrib(g,"height"),"IMG"!=g.nodeName||g.getAttribute("data-mce-object")||g.getAttribute("data-mce-placeholder")?g=null:p={src:m.getAttrib(g,"src"),alt:m.getAttrib(g,"alt"),"class":m.getAttrib(g,"class"),width:u,height:d},n&&(h={type:"listbox",label:"Image list",values:i(n,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:p.src&&e.convertURL(p.src,"src"),onselect:function(e){var t=c.find("#alt");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),c.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){h=this}}),e.settings.image_class_list&&(f={name:"class",type:"listbox",label:"Class",values:i(e.settings.image_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})});var y=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:a},h];e.settings.image_description!==!1&&y.push({name:"alt",type:"textbox",label:"Image description"}),v&&y.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:o,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:o,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),y.push(f),e.settings.image_advtab?(g&&(p.hspace=s(g.style.marginLeft||g.style.marginRight),p.vspace=s(g.style.marginTop||g.style.marginBottom),p.border=s(g.style.borderWidth),p.style=e.dom.serializeStyle(e.dom.parseStyle(e.dom.getAttrib(g,"style")))),c=e.windowManager.open({title:"Insert/edit image",data:p,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox"},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:l},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:r})):c=e.windowManager.open({title:"Insert/edit image",data:p,body:y,onSubmit:r})
}e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:n(o),stateSelector:"img:not([data-mce-object],[data-mce-placeholder])"}),e.addMenuItem("image",{icon:"image",text:"Insert image",onclick:n(o),context:"insert",prependToContext:!0}),e.addCommand("mceImage",n(o))}),tinymce.PluginManager.add("textcolor",function(e){function t(t){var i;return e.dom.getParents(e.selection.getStart(),function(e){var n;(n=e.style["forecolor"==t?"color":"background-color"])&&(i=n)}),i}function i(){var t,i,n=[];for(i=e.settings.textcolor_map||["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],t=0;t<i.length;t+=2)n.push({text:i[t+1],color:"#"+i[t]});return n}function n(){function t(e,t){var i="transparent"==e;return'<td class="mce-grid-cell'+(i?" mce-colorbtn-trans":"")+'"><div id="'+f+"-"+p++ +'" data-mce-color="'+(e?e:"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+tinymce.translate(t)+'">'+(i?"&#215;":"")+"</div></td>"}var n,o,r,s,a,u,d,h=this,f=h._id,p=0;for(n=i(),n.push({text:tinymce.translate("No color"),color:"transparent"}),r='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',s=n.length-1,u=0;c>u;u++){for(r+="<tr>",a=0;l>a;a++)d=u*l+a,d>s?r+="<td></td>":(o=n[d],r+=t(o.color,o.text));r+="</tr>"}if(e.settings.color_picker_callback){for(r+='<tr><td colspan="'+l+'" class="mce-custom-color-btn"><div id="'+f+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+f+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button></div></td></tr>",r+="<tr>",a=0;l>a;a++)r+=t("","Custom color");r+="</tr>"}return r+="</tbody></table>"}function o(t,i){e.focus(),e.formatter.apply(t,{value:i}),e.nodeChanged()}function r(t){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()}function s(i){function n(e){c.hidePanel(),c.color(e),o(c.settings.format,e)}function s(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var a,c=this.parent();if(tinymce.DOM.getParent(i.target,".mce-custom-color-btn")&&(c.hidePanel(),e.settings.color_picker_callback.call(e,function(e){var t,i,o,r=c.panel.getEl().getElementsByTagName("table")[0];for(t=tinymce.map(r.rows[r.rows.length-1].childNodes,function(e){return e.firstChild}),o=0;o<t.length&&(i=t[o],i.getAttribute("data-mce-color"));o++);if(o==l)for(o=0;l-1>o;o++)s(t[o],t[o+1].getAttribute("data-mce-color"));s(i,e),n(e)},t(c.settings.format))),a=i.target.getAttribute("data-mce-color")){if(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),i.target.setAttribute("aria-selected",!0),this.lastId=i.target.id,"transparent"==a)return r(c.settings.format),void c.hidePanel();n(a)}else null!==a&&c.hidePanel()}function a(){var e=this;e._color&&o(e.settings.format,e._color)}var l,c;c=e.settings.textcolor_rows||5,l=e.settings.textcolor_cols||8,e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:n,onclick:s},onclick:a}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:n,onclick:s},onclick:a})}),tinymce.PluginManager.add("code",function(e){function t(){var t=e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:e.getParam("code_dialog_width",600),minHeight:e.getParam("code_dialog_height",Math.min(tinymce.DOM.getViewPort().h-200,500)),spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){e.focus(),e.undoManager.transact(function(){e.setContent(t.data.code)}),e.selection.setCursorLocation(),e.nodeChanged()}});t.find("#code").value(e.getContent({source_view:!0}))}e.addCommand("mceCodeEditor",t),e.addButton("code",{icon:"code",tooltip:"Source code",onclick:t}),e.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:t})}),// Copyright (c) 2011-2014 Thomas Pedersen
Backbone.Validation=function(e){"use strict";var t={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},i={formatLabel:function(e,i){return l[t.labelFormatter](e,i)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})}},n=function(t,i,o){return i=i||{},o=o||"",e.each(t,function(e,r){t.hasOwnProperty(r)&&(e&&"object"==typeof e&&!(e instanceof Array||e instanceof Date||e instanceof RegExp||e instanceof Backbone.Model||e instanceof Backbone.Collection)?n(e,i,o+r+"."):i[o+r]=e)}),i},o=function(){var o=function(t){return e.reduce(e.keys(e.result(t,"validation")||{}),function(e,t){return e[t]=void 0,e},{})},s=function(t,i){var n=t.validation?e.result(t,"validation")[i]||{}:{};return(e.isFunction(n)||e.isString(n))&&(n={fn:n}),e.isArray(n)||(n=[n]),e.reduce(n,function(t,i){return e.each(e.without(e.keys(i),"msg"),function(e){t.push({fn:c[e],val:i[e],msg:i.msg})}),t},[])},a=function(t,n,o,r){return e.reduce(s(t,n),function(s,a){var l=e.extend({},i,c),u=a.fn.call(l,o,n,a.val,t,r);return u===!1||s===!1?!1:u&&!s?e.result(a,"msg")||u:s},"")},l=function(t,i){var o,r={},s=!0,l=e.clone(i),c=n(i);return e.each(c,function(e,i){o=a(t,i,e,l),o&&(r[i]=o,s=!1)}),{invalidAttrs:r,isValid:s}},u=function(t,i){return{preValidate:function(t,i){var n,o=this,r={};return e.isObject(t)?(e.each(t,function(e,t){n=o.preValidate(t,e),n&&(r[t]=n)}),e.isEmpty(r)?void 0:r):a(this,t,i,e.extend({},this.attributes))},isValid:function(t){var i=n(this.attributes);return e.isString(t)?!a(this,t,i[t],e.extend({},this.attributes)):e.isArray(t)?e.reduce(t,function(t,n){return t&&!a(this,n,i[n],e.extend({},this.attributes))},!0,this):(t===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(r,s){var a=this,c=!r,u=e.extend({},i,s),d=o(a),h=e.extend({},d,a.attributes,r),f=n(r||h),p=l(a,h);return a._isValid=p.isValid,e.each(d,function(e,i){var n=p.invalidAttrs.hasOwnProperty(i);n||u.valid(t,i,u.selector)}),e.each(d,function(e,i){var n=p.invalidAttrs.hasOwnProperty(i),o=f.hasOwnProperty(i);n&&(o||c)&&u.invalid(t,i,p.invalidAttrs[i],u.selector)}),e.defer(function(){a.trigger("validated",a._isValid,a,p.invalidAttrs),a.trigger("validated:"+(a._isValid?"valid":"invalid"),a,p.invalidAttrs)}),!u.forceUpdate&&e.intersection(e.keys(p.invalidAttrs),e.keys(f)).length>0?p.invalidAttrs:void 0}}},d=function(t,i,n){e.extend(i,u(t,n))},h=function(e){delete e.validate,delete e.preValidate,delete e.isValid},f=function(e){d(this.view,e,this.options)},p=function(e){h(e)};return{version:"0.9.1",configure:function(i){e.extend(t,i)},bind:function(i,n){n=e.extend({},t,r,n);var o=n.model||i.model,s=n.collection||i.collection;if("undefined"==typeof o&&"undefined"==typeof s)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";o?d(i,o,n):s&&(s.each(function(e){d(i,e,n)}),s.bind("add",f,{view:i,options:n}),s.bind("remove",p))},unbind:function(t,i){i=e.extend({},i);var n=i.model||t.model,o=i.collection||t.collection;n?h(n):o&&(o.each(function(e){h(e)}),o.unbind("add",f),o.unbind("remove",p))},mixin:u(null,t)}}(),r=o.callbacks={valid:function(e,t,i){e.$("["+i+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,i,n){e.$("["+n+'~="'+t+'"]').addClass("invalid").attr("data-error",i)}},s=o.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},a=o.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},l=o.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace(/_/g," ")},label:function(e,t){return t.labels&&t.labels[e]||l.sentenceCase(e,t)}},c=o.validators=function(){var t=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,i=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(i,"")},i=function(t){return e.isNumber(t)||e.isString(t)&&t.match(s.number)},n=function(i){return!(e.isNull(i)||e.isUndefined(i)||e.isString(i)&&""===t(i)||e.isArray(i)&&e.isEmpty(i))};return{fn:function(t,i,n,o,r){return e.isString(n)&&(n=o[n]),n.call(o,t,i,r)},required:function(t,i,o,r,s){var l=e.isFunction(o)?o.call(r,t,i,s):o;return l||n(t)?l&&!n(t)?this.format(a.required,this.formatLabel(i,r)):void 0:!1},acceptance:function(t,i,n,o){return"true"===t||e.isBoolean(t)&&t!==!1?void 0:this.format(a.acceptance,this.formatLabel(i,o))},min:function(e,t,n,o){return!i(e)||n>e?this.format(a.min,this.formatLabel(t,o),n):void 0},max:function(e,t,n,o){return!i(e)||e>n?this.format(a.max,this.formatLabel(t,o),n):void 0},range:function(e,t,n,o){return!i(e)||e<n[0]||e>n[1]?this.format(a.range,this.formatLabel(t,o),n[0],n[1]):void 0},length:function(t,i,n,o){return e.isString(t)&&t.length===n?void 0:this.format(a.length,this.formatLabel(i,o),n)},minLength:function(t,i,n,o){return!e.isString(t)||t.length<n?this.format(a.minLength,this.formatLabel(i,o),n):void 0},maxLength:function(t,i,n,o){return!e.isString(t)||t.length>n?this.format(a.maxLength,this.formatLabel(i,o),n):void 0},rangeLength:function(t,i,n,o){return!e.isString(t)||t.length<n[0]||t.length>n[1]?this.format(a.rangeLength,this.formatLabel(i,o),n[0],n[1]):void 0},oneOf:function(t,i,n,o){return e.include(n,t)?void 0:this.format(a.oneOf,this.formatLabel(i,o),n.join(", "))},equalTo:function(e,t,i,n,o){return e!==o[i]?this.format(a.equalTo,this.formatLabel(t,n),this.formatLabel(i,n)):void 0},pattern:function(e,t,i,o){return n(e)&&e.toString().match(s[i]||i)?void 0:this.format(a[i]||a.inlinePattern,this.formatLabel(t,o),i)}}}();return e.each(c,function(t,n){c[n]=e.bind(c[n],e.extend({},i,c))}),o}(_),function(e){function t(e){this.init(e)}t.prototype={value:0,size:100,startAngle:-Math.PI,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,easing:"circleProgressEasing"},animationStartValue:0,reverse:!1,lineCap:"butt",constructor:t,el:null,canvas:null,ctx:null,radius:0,arcFill:null,lastFrameValue:0,init:function(t){e.extend(this,t),this.radius=this.size/2,this.initWidget(),this.initFill(),this.draw()},initWidget:function(){var t=this.canvas=this.canvas||e("<canvas>").prependTo(this.el)[0];t.width=this.size,t.height=this.size,this.ctx=t.getContext("2d")},initFill:function(){function t(){var t=e("<canvas>")[0];t.width=i.size,t.height=i.size,t.getContext("2d").drawImage(f,0,0,r,r),i.arcFill=i.ctx.createPattern(t,"no-repeat"),i.drawFrame(i.lastFrameValue)}var i=this,n=this.fill,o=this.ctx,r=this.size;if(!n)throw Error("The fill is not specified!");if(n.color&&(this.arcFill=n.color),n.gradient){var s=n.gradient;if(1==s.length)this.arcFill=s[0];else if(s.length>1){for(var a=n.gradientAngle||0,l=n.gradientDirection||[r/2*(1-Math.cos(a)),r/2*(1+Math.sin(a)),r/2*(1+Math.cos(a)),r/2*(1-Math.sin(a))],c=o.createLinearGradient.apply(o,l),u=0;u<s.length;u++){var d=s[u],h=u/(s.length-1);e.isArray(d)&&(h=d[1],d=d[0]),c.addColorStop(h,d)}this.arcFill=c}}if(n.image){var f;n.image instanceof Image?f=n.image:(f=new Image,f.src=n.image),f.complete?t():f.onload=t}},draw:function(){this.animation?this.drawAnimated(this.value):this.drawFrame(this.value)},drawFrame:function(e){this.lastFrameValue=e,this.ctx.clearRect(0,0,this.size,this.size),this.drawEmptyArc(e),this.drawArc(e)},drawArc:function(e){var t=this.ctx,i=this.radius,n=this.getThickness(),o=this.startAngle;t.save(),t.beginPath(),this.reverse?t.arc(i,i,i-n/2,o-2*Math.PI*e,o):t.arc(i,i,i-n/2,o,o+2*Math.PI*e),t.lineWidth=n,t.lineCap=this.lineCap,t.strokeStyle=this.arcFill,t.stroke(),t.restore()},drawEmptyArc:function(e){var t=this.ctx,i=this.radius,n=this.getThickness(),o=this.startAngle;1>e&&(t.save(),t.beginPath(),0>=e?t.arc(i,i,i-n/2,0,2*Math.PI):this.reverse?t.arc(i,i,i-n/2,o,o-2*Math.PI*e):t.arc(i,i,i-n/2,o+2*Math.PI*e,o),t.lineWidth=n,t.strokeStyle=this.emptyFill,t.stroke(),t.restore())},drawAnimated:function(t){var i=this,n=this.el;n.trigger("circle-animation-start"),e(this.canvas).stop(!0,!0).css({animationProgress:0}).animate({animationProgress:1},e.extend({},this.animation,{step:function(e){var o=i.animationStartValue*(1-e)+t*e;i.drawFrame(o),n.trigger("circle-animation-progress",[e,o])},complete:function(){n.trigger("circle-animation-end")}}))},getThickness:function(){return e.isNumeric(this.thickness)?this.thickness:this.size/14}},e.circleProgress={defaults:t.prototype},e.easing.circleProgressEasing=function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},e.fn.circleProgress=function(i){var n="circle-progress";if("widget"==i){var o=this.data(n);return o&&o.canvas}return this.each(function(){var o=e(this),r=o.data(n),s=e.isPlainObject(i)?i:{};r?r.init(s):(s.el=o,r=new t(s),o.data(n,r))})}}(jQuery);var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,n=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(o,r,s){var a=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(o)||/\d/.test(o)||(r=o,o=void 0),o=o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");r=String(a.masks[r]||r||a.masks["default"]),"UTC:"==r.slice(0,4)&&(r=r.slice(4),s=!0);var l=s?"getUTC":"get",c=o[l+"Date"](),u=o[l+"Day"](),d=o[l+"Month"](),h=o[l+"FullYear"](),f=o[l+"Hours"](),p=o[l+"Minutes"](),m=o[l+"Seconds"](),g=o[l+"Milliseconds"](),v=s?0:o.getTimezoneOffset(),y={d:c,dd:n(c),ddd:a.i18n.dayNames[u],dddd:a.i18n.dayNames[u+7],m:d+1,mm:n(d+1),mmm:a.i18n.monthNames[d],mmmm:a.i18n.monthNames[d+12],yy:String(h).slice(2),yyyy:h,h:f%12||12,hh:n(f%12||12),H:f,HH:n(f),M:p,MM:n(p),s:m,ss:n(m),l:n(g,3),L:n(g>99?Math.round(g/10):g),t:12>f?"a":"p",tt:12>f?"am":"pm",T:12>f?"A":"P",TT:12>f?"AM":"PM",Z:s?"UTC":(String(o).match(t)||[""]).pop().replace(i,""),o:(v>0?"-":"+")+n(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return r.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return dateFormat(this,e,t)},/*
 *
 * Copyright (c) 2006-2014 Sam Collett (http://www.texotela.co.uk)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version 1.4.1
 * Demo: http://www.texotela.co.uk/code/jquery/numeric/
 *
 */
function(e){e.fn.numeric=function(t,i){"boolean"==typeof t&&(t={decimal:t,negative:!0,decimalPlaces:-1}),t=t||{},"undefined"==typeof t.negative&&(t.negative=!0);var n=t.decimal===!1?"":t.decimal||".",o=t.negative===!0?!0:!1,r="undefined"==typeof t.decimalPlaces?-1:t.decimalPlaces;return i="function"==typeof i?i:function(){},this.data("numeric.decimal",n).data("numeric.negative",o).data("numeric.callback",i).data("numeric.decimalPlaces",r).keypress(e.fn.numeric.keypress).keyup(e.fn.numeric.keyup).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(t){var i=e.data(this,"numeric.decimal"),n=e.data(this,"numeric.negative"),o=e.data(this,"numeric.decimalPlaces"),r=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==r&&"input"==this.nodeName.toLowerCase())return!0;if(13==r)return!1;var s=!1;if(t.ctrlKey&&97==r||t.ctrlKey&&65==r)return!0;if(t.ctrlKey&&120==r||t.ctrlKey&&88==r)return!0;if(t.ctrlKey&&99==r||t.ctrlKey&&67==r)return!0;if(t.ctrlKey&&122==r||t.ctrlKey&&90==r)return!0;if(t.ctrlKey&&118==r||t.ctrlKey&&86==r||t.shiftKey&&45==r)return!0;if(48>r||r>57){var a=e(this).val();if(0!==e.inArray("-",a.split(""))&&n&&45==r&&(0===a.length||0===parseInt(e.fn.getSelectionStart(this),10)))return!0;i&&r==i.charCodeAt(0)&&-1!=e.inArray(i,a.split(""))&&(s=!1),8!=r&&9!=r&&13!=r&&35!=r&&36!=r&&37!=r&&39!=r&&46!=r?s=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!==t.which?(s=!0,46==t.which&&(s=!1)):0!==t.keyCode&&0===t.charCode&&0===t.which&&(s=!0)),i&&r==i.charCodeAt(0)&&(s=-1==e.inArray(i,a.split(""))?!0:!1)}else if(s=!0,i&&o>0){var l=e.inArray(i,e(this).val().split(""));l>=0&&e(this).val().length>l+o&&(s=!1)}return s},e.fn.numeric.keyup=function(){var t=e(this).val();if(t&&t.length>0){var i=e.fn.getSelectionStart(this),n=e.fn.getSelectionEnd(this),o=e.data(this,"numeric.decimal"),r=e.data(this,"numeric.negative"),s=e.data(this,"numeric.decimalPlaces");if(""!==o&&null!==o){var a=e.inArray(o,t.split(""));0===a&&(this.value="0"+t,i++,n++),1==a&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1),i++,n++),t=this.value}for(var l=[0,1,2,3,4,5,6,7,8,9,"-",o],c=t.length,u=c-1;u>=0;u--){var d=t.charAt(u);0!==u&&"-"==d?t=t.substring(0,u)+t.substring(u+1):0!==u||r||"-"!=d||(t=t.substring(1));for(var h=!1,f=0;f<l.length;f++)if(d==l[f]){h=!0;break}h&&" "!=d||(t=t.substring(0,u)+t.substring(u+1))}var p=e.inArray(o,t.split(""));if(p>0)for(var m=c-1;m>p;m--){var g=t.charAt(m);g==o&&(t=t.substring(0,m)+t.substring(m+1))}if(o&&s>0){var a=e.inArray(o,t.split(""));a>=0&&(t=t.substring(0,a+s+1),n=Math.min(t.length,n))}this.value=t,e.fn.setSelection(this,[i,n])}},e.fn.numeric.blur=function(){var t=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.callback"),n=e.data(this,"numeric.negative"),o=this.value;if(""!==o){var r=new RegExp(n?"-?":"^\\d+$|^\\d*"+t+"\\d+$");r.exec(o)||i.apply(this)}},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",e.fn.numeric.keypress).unbind("keyup",e.fn.numeric.keyup).unbind("blur",e.fn.numeric.blur)},e.fn.getSelectionStart=function(e){if("number"===e.type)return void 0;if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:Math.max(0,e.value.lastIndexOf(t.text))}try{return e.selectionStart}catch(i){return 0}},e.fn.getSelectionEnd=function(e){if("number"===e.type)return void 0;if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveStart("character",-e.value.length),t.text.length}return e.selectionEnd},e.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if("number"===e.type)e.focus();else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",t[0]),i.moveEnd("character",t[1]-t[0]),i.select()}else{e.focus();try{e.setSelectionRange&&e.setSelectionRange(t[0],t[1])}catch(n){}}}}(jQuery),function(e){"function"==typeof define&&define.amd?define(e):window.purl=e()}(function(){function e(e,t){for(var i=decodeURI(e),n=m[t?"strict":"loose"].exec(i),o={attr:{},param:{},seg:{}},s=14;s--;)o.attr[f[s]]=n[s]||"";return o.param.query=r(o.attr.query),o.param.fragment=r(o.attr.fragment),o.seg.path=o.attr.path.replace(/^\/+|\/+$/g,"").split("/"),o.seg.fragment=o.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),o.attr.base=o.attr.host?(o.attr.protocol?o.attr.protocol+"://"+o.attr.host:o.attr.host)+(o.attr.port?":"+o.attr.port:""):"",o}function t(e){var t=e.tagName;return"undefined"!=typeof t?h[t.toLowerCase()]:t}function i(e,t){if(0===e[t].length)return e[t]={};var i={};for(var n in e[t])i[n]=e[t][n];return e[t]=i,i}function n(e,t,o,r){var s=e.shift();if(s){var a=t[o]=t[o]||[];"]"==s?c(a)?""!==r&&a.push(r):"object"==typeof a?a[u(a).length]=r:a=t[o]=[t[o],r]:~s.indexOf("]")?(s=s.substr(0,s.length-1),!g.test(s)&&c(a)&&(a=i(t,o)),n(e,a,s,r)):(!g.test(s)&&c(a)&&(a=i(t,o)),n(e,a,s,r))}else c(t[o])?t[o].push(r):t[o]="object"==typeof t[o]?r:"undefined"==typeof t[o]?r:[t[o],r]}function o(e,t,i){if(~t.indexOf("]")){var o=t.split("[");n(o,e,"base",i)}else{if(!g.test(t)&&c(e.base)){var r={};for(var a in e.base)r[a]=e.base[a];e.base=r}""!==t&&s(e.base,t,i)}return e}function r(e){return l(String(e).split(/&|;/),function(e,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(i){}var n=t.indexOf("="),r=a(t),s=t.substr(0,r||n),l=t.substr(r||n,t.length);return l=l.substr(l.indexOf("=")+1,l.length),""===s&&(s=t,l=""),o(e,s,l)},{base:{}}).base}function s(e,t,i){var n=e[t];"undefined"==typeof n?e[t]=i:c(n)?n.push(i):e[t]=[n,i]}function a(e){for(var t,i,n=e.length,o=0;n>o;++o)if(i=e[o],"]"==i&&(t=!1),"["==i&&(t=!0),"="==i&&!t)return o}function l(e,t){for(var i=0,n=e.length>>0,o=arguments[2];n>i;)i in e&&(o=t.call(void 0,o,e[i],i,e)),++i;return o}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}function d(t,i){return 1===arguments.length&&t===!0&&(i=!0,t=void 0),i=i||!1,t=t||window.location.toString(),{data:e(t,i),attr:function(e){return e=p[e]||e,"undefined"!=typeof e?this.data.attr[e]:this.data.attr},param:function(e){return"undefined"!=typeof e?this.data.param.query[e]:this.data.param.query},fparam:function(e){return"undefined"!=typeof e?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return"undefined"==typeof e?this.data.seg.path:(e=0>e?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return"undefined"==typeof e?this.data.seg.fragment:(e=0>e?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}var h={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},f=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],p={anchor:"fragment"},m={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},g=/^[0-9]+$/;return d.jQuery=function(e){null!=e&&(e.fn.url=function(i){var n="";return this.length&&(n=e(this).attr(t(this[0]))||""),d(n,i)},e.url=d)},d.jQuery(window.jQuery),d}),tinymce.PluginManager.add("merge_fields",function(e){e.addButton("text_merge_field",{text:"+ Text Field",icon:!1,onclick:function(){e.windowManager.open({title:"Add Textbox Field",body:[{type:"textbox",name:"field_name",label:"Field Name",autofocus:!0}],onsubmit:function(t){var i=t.data.field_name;""!==i&&e.insertContent("{!"+t.data.field_name+"}")}})}}),e.addButton("dropdown_merge_field",{text:"+ Dropdown Field",icon:!1,onclick:function(){e.windowManager.open({title:"Add Dropdown Field",body:[{type:"textbox",name:"field_name",label:"Field Name",autofocus:!0},{type:"textbox",name:"option_1",label:"Option 1"},{type:"textbox",name:"option_2",label:"Option 2"},{type:"textbox",name:"option_3",label:"Option 3"},{type:"textbox",name:"option_4",label:"Option 4"},{type:"textbox",name:"option_5",label:"Option 5"}],width:400,height:275,onsubmit:function(t){for(var i=t.data.field_name,n=[t.data.option_1,t.data.option_2,t.data.option_3,t.data.option_4,t.data.option_5],o=[],r=0;r<n.length;r++)""!==n[r]&&o.push(n[r]);""!==i&&o.length>0&&e.insertContent("{!"+i+">"+o.join("|")+"}")}})}})}),//     Copyright (c) 2010-2012 Robert Kieffer
function(){function e(e,t,i){var n=t&&i||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>o&&(t[n+o++]=h[e])});16>o;)t[n+o++]=0;return t}function t(e,t){var i=t||0,n=d;return n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]}function i(e,i,n){var o=i&&n||0,r=i||[];e=e||{};var s=null!=e.clockseq?e.clockseq:g,a=null!=e.msecs?e.msecs:(new Date).getTime(),l=null!=e.nsecs?e.nsecs:y+1,c=a-v+(l-y)/1e4;if(0>c&&null==e.clockseq&&(s=s+1&16383),(0>c||a>v)&&null==e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=a,y=l,g=s,a+=122192928e5;var u=(1e4*(268435455&a)+l)%4294967296;r[o++]=u>>>24&255,r[o++]=u>>>16&255,r[o++]=u>>>8&255,r[o++]=255&u;var d=a/4294967296*1e4&268435455;r[o++]=d>>>8&255,r[o++]=255&d,r[o++]=d>>>24&15|16,r[o++]=d>>>16&255,r[o++]=s>>>8|128,r[o++]=255&s;for(var h=e.node||m,f=0;6>f;f++)r[o+f]=h[f];return i?i:t(r)}function n(e,i,n){var r=i&&n||0;"string"==typeof e&&(i="binary"==e?new u(16):null,e=null),e=e||{};var s=e.random||(e.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,i)for(var a=0;16>a;a++)i[r+a]=s[a];return i||t(s)}var o,r=this;if("function"==typeof r.require)try{var s=r.require("crypto").randomBytes;o=s&&function(){return s(16)}}catch(a){}if(!o&&r.crypto&&crypto.getRandomValues){var l=new Uint8Array(16);o=function(){return crypto.getRandomValues(l),l}}if(!o){var c=new Array(16);o=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),c[t]=e>>>((3&t)<<3)&255;return c}}for(var u="function"==typeof r.Buffer?r.Buffer:Array,d=[],h={},f=0;256>f;f++)d[f]=(f+256).toString(16).substr(1),h[d[f]]=f;var p=o(),m=[1|p[0],p[1],p[2],p[3],p[4],p[5]],g=16383&(p[6]<<8|p[7]),v=0,y=0,b=n;if(b.v1=i,b.v4=n,b.parse=e,b.unparse=t,b.BufferClass=u,"undefined"!=typeof module&&module.exports)module.exports=b;else if("function"==typeof define&&define.amd)define(function(){return b});else{var w=r.uuid;b.noConflict=function(){return r.uuid=w,b},r.uuid=b}}.call(this),function(e,t){if(!t.__SV){var i,n,o,r;window.mixpanel=t,t._i=[],t.init=function(e,i,n){function s(e,t){var i=t.split(".");2==i.length&&(e=e[i[0]],t=i[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var a=t;for("undefined"!=typeof n?a=t[n]=[]:n="mixpanel",a.people=a.people||[],a.toString=function(e){var t="mixpanel";return"mixpanel"!==n&&(t+="."+n),e||(t+=" (stub)"),t},a.people.toString=function(){return a.toString(1)+".people (stub)"},o="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" "),r=0;r<o.length;r++)s(a,o[r]);t._i.push([e,i,n])},t.__SV=1.2,i=e.createElement("script"),i.type="text/javascript",i.async=!0,i.src="//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js",n=e.getElementsByTagName("script")[0],n.parentNode.insertBefore(i,n)}}(document,window.mixpanel||[]),window.App=new Backbone.Marionette.Application,App.navigate=function(e,t){t||(t={}),Backbone.history.navigate(e,t)},App.getCurrentRoute=function(){return Backbone.history.fragment};var Yesware=Yesware||{};Yesware.RequestHelper={accessToken:function(){return App.config.get("userAccessToken")},insertToken:function(e){this.accessToken()?this._appendAccessToken(e):this._appendAuthToken(e)},_appendAccessToken:function(e){var t=this;e.beforeSend=function(e){e.setRequestHeader("Authorization","Bearer "+t.accessToken())}},_appendAuthToken:function(e){if(!e.data||!e.data.auth_token){var t;t=-1!==e.url.indexOf("?")?"&":"?";var i=this.tokenString();-1===e.url.indexOf(i)&&(e.url+=t+i)}},tokenString:function(){return this.accessToken()?"access_token="+encodeURIComponent(this.accessToken()):"auth_token="+encodeURIComponent(App.config.get("userAuthToken"))}},Backbone.ajax=function(e){return Yesware.RequestHelper.insertToken(e),Backbone.$.ajax.call(Backbone.$,e)},App.isEmailValid=function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},_.templateSettings={interpolate:/\{\{=(.+?)\}\}/g,evaluate:/\{\{(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g};var Yesware=Yesware||{};Yesware.Utils={prettyDate:function(e){return e.format("mm/dd/yyyy h:MM TT")},_logUsage:function(e,t,i,n){var o,r=App.config.get("user");mixpanel[e]||mixpanel.init(t,{},e),o=mixpanel[e],o.identify(r.id),this._trackMixpanelPeopleProperties(n,o),o.track(i,_.extend({},_.omit(n,"peopleProperties"),r))},_trackMixpanelPeopleProperties:function(e,t){if(e&&e.peopleProperties){var i="Last "+e.peopleProperties+" At",n="Number Of Times "+e.peopleProperties,o={};o[i]=new Date,t.people.set(o),t.people.increment(n)}},logPurpleProjectsUsage:function(e,t){this._logUsage("Purple Projects",App.config.get("mixpanelPurpleProjectsToken"),e,t)},logMasterUsage:function(e,t){this._logUsage("Yesware Master",App.config.get("mixpanelMasterToken"),e,t)},flattenJSON:function(e){function t(e,n){if(Object(e)!==e)i[n]=e;else if(Array.isArray(e)){for(var o=0,r=e.length;r>o;o++)t(e[o],n?n+"."+o:""+o);0===r&&(i[n]=[])}else{var s=!0;for(var a in e)s=!1,t(e[a],n?n+"."+a:a);s&&(i[n]={})}}var i={};return t(e,""),i}},App.module("AvalancheApi",function(e){function t(){return App.config.get("avalancheUrl")}function i(e,i){return Backbone.ajax({url:t()+e,type:"GET",data:i})}function n(e,t){var i={search_text:e,contacts:!0,leads:!0,related_fields:["Account.Name","Account.Id","Company"]};if(t){var n={related_fields:_.union(i.related_fields,t.related_fields||[])};_.extend(i,t,n)}return i}e.getListViews=function(){var e=$.Deferred(),t=i("/list_views",{object_type:"Contact"}),n=i("/list_views",{object_type:"Lead"});return $.when(t,n).done(function(t,i){var n={contactLists:t[0],leadLists:i[0]};e.resolve(n)}).fail(e.reject),e.promise()},e.buildListResultsUrl=function(e,i,n){return[t(),"/list_views/",e,"/results/as_recipient_list?","object_type=",i,"&limit=",n].join("")},e.searchPersons=function(e,t){return i("/persons",n(e,t))},e.buildSearchPersonsUrl=function(e,i){return[t(),"/persons?",$.param(n(e,i))].join("")}}),App.module("FrameApi",function(e){e.init=function(){var e={"create.MailMerge.FromRecipients":function(e){App.trigger("mailmerge:create",e.recipients)}};_.each(e,function(e,t){pmrpc.register({publicProcedureName:t,procedure:e})})}}),App.module("Entities",function(e,t){e.DripCampaignModel=Backbone.Model.extend({urlRoot:"/api/drip_campaigns",defaults:function(){return{name:null,send_followup_as_reply:!0,bcc_to_crm:!1,send_to_crm:!1,track_opens:!0,track_links:!1,send_campaign:!1,recipient_data:null,stages:null,cc:[],bcc:[],external_delivery:!1,track_key:null,send_at:null,drip_campaign_blueprint_id:null}},initialize:function(){this.setDefaultName(),this.ensureStages(),this.ensureRecipients(),this.setTrackKey(),this.fieldAnalyzer=t.module("Shared.Add.Helpers").SubstitutionFieldAnalyzer,this.onChangeStages(),this.onChangeRecipientData(),this.listenTo(this,"change:stages",this.onChangeStages),this.listenTo(this.get("recipient_data"),"reset",this.onChangeRecipientData),this.listenTo(this.get("recipient_data"),"add",this.onChangeRecipientData)},ensureRecipients:function(){null==this.get("recipient_data")&&this.set("recipient_data",new t.Entities.RecipientsCollection)},ensureStages:function(){if(null==this.get("stages")){var e=new t.Entities.StagesCollection([new t.Entities.StageModel({campaignId:this.get("id")})],{campaignId:this.get("id")});this.set("stages",e)}},onChangeStages:function(){this.updateRequiredFields(),this.listenTo(this.get("stages"),"add",this.updateRequiredFields),this.listenTo(this.get("stages"),"remove",this.updateRequiredFields),this.listenTo(this.get("stages"),"change:body",this.updateRequiredFields),this.listenTo(this.get("stages"),"change:subject",this.updateRequiredFields)},onChangeRecipientData:function(){this.updateMissingFields(),this.listenTo(this.get("recipient_data"),"add",this.updateMissingFields),this.listenTo(this.get("recipient_data"),"reset",this.updateMissingFields),this.listenTo(this.get("recipient_data"),"change",this.updateMissingFields)},setDefaultName:function(){null==this.get("name")&&this.set("name",(new Date).format("mmmm dd, yyyy")+" Mail Merge")},setTrackKey:function(){null==this.get("track_key")&&this.set("track_key",uuid.v1())},toJSON:function(){return{drip_campaign:_.extend(Backbone.Model.prototype.toJSON.apply(this),{stages:this.get("stages").toJSON(),recipient_data:this.get("recipient_data").toJSON()})}},toViewJSON:function(){var e=this.toJSON().drip_campaign;return{name:e.name,allowStop:e.allowStop,status:e.stats.status,sentAt:Yesware.Utils.prettyDate(new Date(e.stages[0].stage.send_at)),recipientCount:e.stats.recipient_count,opened:this.percentOfRecipients(e.stats.num_opens),clicked:this.percentOfRecipients(e.stats.num_clicks),replied:this.percentOfRecipients(e.stats.num_replies),bounced:this.percentOfRecipients(e.stats.num_bounces),stageStats:this.stageStats()}},percentOfRecipients:function(e){if(e){var t=this.toJSON().drip_campaign,i=t.stats.recipient_count;return 0===i?0:Math.floor(e/i*100)}return 0},stageStats:function(){var e=this.get("stages").toJSON();return 1===e.length?null:$.map(e,function(e){var t=e.stage;return{recipientCount:t.stats.recipient_count,status:t.stats.status}})},parse:function(e,t){return t&&t.noParse?this.attributes:(this.ensureRecipients(),this.ensureStages(),this.get("stages").reset(e.drip_campaign.stages,{parse:!0}),e.drip_campaign.stages=this.get("stages"),e.drip_campaign&&(this.get("recipient_data").reset(e.drip_campaign.recipient_data,{parse:!0}),e.drip_campaign.recipient_data=this.get("recipient_data")),e.drip_campaign)},stop:function(){var e="/drip_campaigns/"+this.get("id")+"/drip_campaigns_action/stop";Backbone.ajax({url:e,type:"POST"}).done(function(){t.notify("Your mail merge has been successfully stopped.",t.Notifications.Type.SUCCESS)}).fail(function(){t.notify("We were unable to stop your mail merge. Please make sure none of your stages are currently sending.",t.Notifications.Type.ERROR)}).always(function(){t.trigger("mailmerge:list")})},convertToTouchplan:function(){var e="/drip_campaign_blueprints/convert_from_campaign/?drip_campaign_id="+this.get("id");return Backbone.ajax({url:e,type:"POST"})},updateRequiredFields:function(){var e=this.fieldAnalyzer.findSubstitutionFields(this.get("stages"));e.unshift("email"),e=_.uniq(e);var t=this.requiredFields;this.requiredFields=e,_.isEqual(e,t)||(this.trigger("change:requiredFields"),this.updateMissingFields())},updateMissingFields:function(){var e=this.getRequiredFields(),t=[];e&&this.get("recipient_data").length>0&&(t=this.fieldAnalyzer.findMissingFields(this.get("recipient_data"),e));var i=this.missingFields;this.missingFields=t,_.isEqual(t,i)||this.trigger("change:missingFields")},getRequiredFields:function(){return this.requiredFields}})}),App.module("Entities",function(e){e.PreviewModel=Backbone.Model.extend({url:"/api/drip_campaigns/apply",defaults:{subject:"",body:""},parse:function(e){return e.messages[0]},fetchPreview:function(e,t){var i={recipient_data:[e.recipient],template_body:e.body,template_subject:e.subject};return t=_.extend({},t,{data:i,parse:!0,type:"POST"}),Backbone.Model.prototype.fetch.call(this,t)}})}),App.module("Entities",function(e,t){e.RecipientModel=Backbone.Model.extend({toViewJSON:function(){return{recipient:Backbone.Model.prototype.toJSON.apply(this)}},isColleague:function(){var e=t.config.get("user").email_domain,i=this.get("email");if(!i||!i.indexOf)return!1;var n=i.length-e.length,o=i.indexOf(e,n);return-1!==o}})}),App.module("Entities",function(e,t){e.StageModel=Backbone.Model.extend({defaults:function(){return{template_ids:[],subject:null,body:null,send_after:null,condition:null,recipient_data:new t.Entities.RecipientsCollection}},ensureRecipients:function(){null==this.get("recipient_data")&&this.set("recipient_data",new t.Entities.RecipientsCollection)},toJSON:function(){return{stage:_.extend(Backbone.Model.prototype.toJSON.apply(this),{recipient_data:this.get("recipient_data").toJSON()})}},toViewJSON:function(){var e=Backbone.Model.prototype.toJSON.apply(this),t=e.stats.recipient_count,i="";switch(e.condition){case"no_reply":i="not replied to";break;case"no_open":i="not opened";break;default:i="received"}return{id:e.id,condition:e.condition,plainCondition:i,status:e.stats.status,isScheduled:"scheduled"===e.stats.status,isSending:"sending"===e.stats.status,isCompleted:"completed"===e.stats.status,isFailed:"failed"===e.stats.status,isStopped:"stopped"===e.stats.status,isCancelled:"cancelled"===e.stats.status,sentAt:Yesware.Utils.prettyDate(new Date(e.send_at)),sendAfter:e.send_after,sendAfterDays:Math.floor(e.send_after/24),recipientCount:t,multipleRecipients:t>1}},getRecipients:function(){var e=this,t=e.get("recipient_data");return t.each(function(t,i){var n=e.get("stats").recipient_status[i];t.set("stats",{successfullySent:n.sent&&!n.send_error,failedToSend:!n.sent&&n.send_error,send_error:n.send_error,isColleague:t.isColleague(),open:_.contains(n.events,"open"),click:_.contains(n.events,"click"),reply:_.contains(n.events,"reply"),bounce:_.contains(n.events,"bounce")})}),t},hasEmptyBody:function(){if(!this.get("body"))return!0;var e=$($.parseHTML(this.get("body"))[0]),t=e.text().trim();return!(t||e.find("img").length)},parse:function(e){return this.ensureRecipients(),this.get("recipient_data").reset(e.stage.recipient_data,{parse:!0}),e.stage.recipient_data=this.get("recipient_data"),e.stage}})}),App.module("Entities",function(e){e.TouchplanModel=Backbone.Model.extend({url:function(){return"/drip_campaign_blueprints/"+this.get("id")}})}),App.module("Entities",function(e,t){e.DripCampaignsCollection=Backbone.Collection.extend({model:t.Entities.DripCampaignModel,url:"/api/drip_campaigns",sortColumn:"sentAt",sortDirection:-1,parse:function(e){return e.drip_campaigns},comparator:function(e,t){return"sentAt"===this.sortColumn?(e=new Date(e.get("stages").at(0).get("send_at")),t=new Date(t.get("stages").at(0).get("send_at"))):(e=e.toViewJSON()[this.sortColumn],t=t.toViewJSON()[this.sortColumn],_.isString(e)&&(e=e.toLowerCase(),t=t.toLowerCase())),e==t?0:this.sortDirection*(e>t?1:-1)}})}),App.module("Entities",function(e,t){e.RecipientsCollection=Backbone.Collection.extend({model:t.Entities.RecipientModel})}),App.module("Entities",function(e,t){e.StagesCollection=Backbone.Collection.extend({model:t.Entities.StageModel,DEFAULT_SEND_AFTER_HOURS:72,DEFAULT_CONDITION:"no_reply",url:function(){return"/api/drip_campaigns/"+this.campaignId+"/campaign_stages"},initialize:function(e,t){this.on("add",this.collectionUpdate,this),this.on("remove",this.collectionUpdate,this),t&&t.campaignId&&(this.campaignId=t.campaignId)},collectionUpdate:function(){var e=this;this.each(function(t){t.set("send_after",e.defaultSendAfter(t)),t.set("condition",e.defaultCondition(t))})},defaultSendAfter:function(e){return 0===this.indexOf(e)?null:!e.has("send_after")&&this.indexOf(e)>0?this.DEFAULT_SEND_AFTER_HOURS:e.get("send_after")},defaultCondition:function(e){return 0===this.indexOf(e)?null:!e.has("condition")&&this.indexOf(e)>0?this.DEFAULT_CONDITION:e.get("condition")}})}),App.module("Entities",function(e,t){e.TouchplansCollection=Backbone.Collection.extend({model:t.Entities.TouchplanModel,url:"/drip_campaign_blueprints"})}),App.module("Entities",function(e,t){e.AppConfig=Backbone.Model.extend({url:"/api/app_config",defaults:function(){return{userAuthToken:null,userAccessToken:null,backendUrl:null,mixpanelMasterToken:null,mixpanelPurpleProjectsToken:null,mailMergePolicyEnabled:!1,mailMergeCapabilityEnabled:!1,features:{linkTrackingEnabled:!1,salesforceEnabled:!1,multistageEnabled:!1,externalSender:!1},recipientLimit:0,monthlyRecipientLimit:null,stageLimit:10,mailboxType:null,defaults:{bccToCrmAddress:null,trackLinksChecked:!1,sendToSalesforceChecked:!1}}},validation:{userAuthToken:{required:!1,minLength:1},userAccessToken:{required:!1,minLength:1},mixpanelMasterToken:{required:!0,minLength:1},mixpanelPurpleProjectsToken:{required:!0,minLength:1}},fetch:function(t,i){return i=i||{},i.data=_.extend(i.data||{},{platform:t}),e.AppConfig.__super__.fetch.call(this,i)}}),_.extend(t.Entities.AppConfig.prototype,Backbone.Validation.mixin)}),App.module("Factories",function(e){e.DripCampaignFactory={fromTouchplan:function(e){var t=new App.Entities.DripCampaignModel,i=["name","send_followup_as_reply","bcc_to_crm","send_to_crm","track_opens","track_links","cc","bcc","external_delivery"],n=_.pick(e.attributes,i);return n.drip_campaign_blueprint_id=e.get("id"),t.set(n),t.set("stages",App.Factories.StageFactory.fromStageBlueprints(e.get("sorted_stage_blueprints"))),t}}}),App.module("Factories",function(e){e.StageFactory={fromStageBlueprints:function(e){var t=[],i=["template_ids","subject","body","send_after","condition"];return _.each(e,function(e){var n=new App.Entities.StageModel,o=_.pick(e,i);n.set(o),t.push(n)}),new App.Entities.StagesCollection(t)}}}),App.module("Notifications",function(e){e.NotificationModel=Backbone.Model.extend({defaults:{message:null,type:null}})}),App.module("Notifications",function(e){e.NotificationView=Marionette.ItemView.extend({template:"#notification-view-template",className:"notification-container",fadeDuration:250,onRender:function(){this.$el.hide()},onShow:function(){this.$el.fadeIn(this.fadeDuration)},remove:function(){this.$el.fadeOut(this.fadeDuration,function(){$(this).remove()})}})}),App.module("Notifications",function(e,t){e.Type={NOTICE:"notice",SUCCESS:"success",ERROR:"error"},e.hideDelay=4e3,e.initialize=function(){e.collection=new e.NotificationsCollection([],{model:e.NotificationModel}),e.view=new e.NotificationsView({collection:e.collection}),t.notificationsRegion.show(e.view),t.notify=function(t,i){_.isUndefined(i)&&(i=e.Type.NOTICE),e.collection.unshift({message:t,type:i}),setTimeout(function(){e.collection.pop()},e.hideDelay)}}}),App.module("Notifications",function(e){e.NotificationsCollection=Backbone.Collection.extend({model:e.NotificationModel})}),App.module("Notifications",function(e){e.NotificationsView=Marionette.CollectionView.extend({className:"notifications",childView:e.NotificationView})}),App.module("Salesforce",function(e,t){e.SearchBarView=Marionette.ItemView.extend({initialize:function(){this.AvalancheApi=t.module("AvalancheApi")},template:"#salesforce-search-bar-view-template",className:"salesforce-search-bar",ui:{icon:".salesforce-search-icon",input:".salesforce-search-input"},events:{"keyup @ui.input":"onKeyUpInput"},onKeyUpInput:function(e){var i=$.trim(this.ui.input.val());if(this.ui.icon.toggle(!i),_.isEmpty(i))return void this.trigger("salesforce:search:clear");var n=e.keyCode||e.which;if(13===n){var o=this;this.AvalancheApi.searchPersons(i,{related_fields:o.model.getRequiredFields()}).done(function(e){e=_.map(e.result,function(e){return _.extend(Yesware.Utils.flattenJSON(e),{email:e.Email})});var t=new Backbone.Collection(e);o.trigger("salesforce:search:results",t)}).fail(function(e){return 404===e.status?void o.trigger("salesforce:search:results",new Backbone.Collection):(t.notify("Sorry, something went wrong with your search. The error we get from Salesforce is:"+e.responseJSON.errors.join(" "),t.Notifications.Type.ERROR),void o.trigger("salesforce:search:error",e))}).always(function(){o.logSalesforceSearchPersonUsage()})}},logSalesforceSearchPersonUsage:function(){Yesware.Utils.logPurpleProjectsUsage("QuerySalesforceRecipient")}})}),App.module("Salesforce",function(){this.SearchContactsView=Marionette.ItemView.extend({initialize:function(e){this.campaignModel=e.campaignModel,this.contactsCollection=this.collection,this.recipientsCollection=e.recipientsCollection},template:"#salesforce-search-contacts-view-template",className:"salesforce-search-contacts",ui:{addSalesforceContact:".salesforce-add-contact-button"},events:{"click @ui.addSalesforceContact":"onClickAddSalesforceContact"},onClickAddSalesforceContact:function(e){e.preventDefault();var t=$(e.target).data("contactIndex"),i=this.contactsCollection.at(t);this.addSalesforceContact(i),this.setSource(),this.logAddSalesforceContactUsage()},addSalesforceContact:function(e){this.recipientsCollection.add(e)},setSource:function(){var e=this.campaignModel.get("recipientListSource");e?-1===e.indexOf("Salesforce-manual")&&(e+=", Salesforce-manual"):e="Salesforce-manual",this.campaignModel.set("recipientListSource",e)},logAddSalesforceContactUsage:function(){Yesware.Utils.logPurpleProjectsUsage("AddSingleRecipient")}})}),App.module("Spinners",function(e,t){e.HeaderLogoSpinner={initialize:function(){t.on("busy",function(t){e.isOverlay(t)||$(".yesware-icon").removeClass("yesware-icon").addClass("yesware-icon-spinner")}),t.on("idle",function(t){e.isOverlay(t)||$(".yesware-icon-spinner").removeClass("yesware-icon-spinner").addClass("yesware-icon")})}}}),App.module("Spinners",function(e,t){e.isOverlay=function(e){return e&&e.overlay},e.OverlaySpinnerView=Marionette.ItemView.extend({className:"overlay-spinner",template:function(){return"<div class='logo'></div>"},ui:{$spinner:".logo"},onRender:function(){this.$el.hide()},showOverlay:function(){this.isVisible||(this.isVisible=!0,this.$el.stop(!0).show(),this.spinTimeout=setTimeout(_.bind(function(){this.ui.$spinner.addClass("spin")},this),500))},hideOverlay:function(){this.isVisible&&(this.isVisible=!1,clearTimeout(this.spinTimeout),this.$el.fadeOut(200,_.bind(function(){this.ui.$spinner.removeClass("spin")},this)))},onShow:function(){var i=this;this.listenTo(t,"busy",function(t){e.isOverlay(t)&&i.showOverlay()}),this.listenTo(t,"idle",function(t){e.isOverlay(t)&&i.hideOverlay()}),this.render()}})}),App.module("Search",function(e,t){function i(i){function r(){return n!==i}if(!r()){o&&4!==o.readyState&&o.abort(),t.trigger("busy",{overlay:!0});var s=new e.SearchRecipientsCollection;o=s.search(i),o.fail(function(e,i,n){r()||"abort"===i||(t.notify("An error was encountered while searching.",t.Notifications.Type.ERROR),console.log("Error searching for recipients: "+i+" - "+n))}).done(function(){if(!r()){var i=new e.SearchResultsView({collection:s});t.searchResultsRegion.show(i)}}).always(function(){r()||t.trigger("idle",{overlay:!0})})}}var n=null;e.SEARCH_DELAY=320,e.initialize=function(){var o=_.debounce(i,e.SEARCH_DELAY);t.on("search",function(e){return n=e,""===$.trim(e)?(t.trigger("idle",{overlay:!0}),void t.searchResultsRegion.empty()):void o(e)}),t.on("route",function(){t.searchResultsRegion.empty()})};var o=null}),App.module("Search",function(e){e.SearchRecipientModel=Backbone.Model.extend({defaults:function(){return{email_address:null,recipient_id:null,campaigns:[]}},toViewJSON:function(){var e=this.toJSON();return e.campaigns=_.map(e.campaigns,function(e){return e.send_at=Yesware.Utils.prettyDate(new Date(e.send_at)),e}),e}})}),App.module("Search",function(e){e.SearchRecipientsCollection=Backbone.Collection.extend({model:e.SearchRecipientModel,query:"",url:function(){return"/search_recipients?q="+this.query},search:function(e){return this.query=e,this.fetch({reset:!0})},parse:function(e){return e.recipients}})}),App.module("Search",function(e){e.SearchResultsTableBodyView=Marionette.ItemView.extend({template:"#list-search-recipient-table-body-template",events:{"click .table-search-row":"clickCampaign"},initialize:function(){this.render()},serializeData:function(){return this.model.toViewJSON()},clickCampaign:function(e){document.location.hash="details/"+$(e.currentTarget).data("id"),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeSearchResult")}})}),App.module("Search",function(e){e.SearchResultsView=Marionette.ItemView.extend({className:"search-results-container",template:"#list-search-recipient-view-template",ui:{$collectionTable:".table-search"},templateHelpers:function(){return{recipientCount:this.collection.length}},initialize:function(){this.render()},onRender:function(){var t=document.createDocumentFragment();this.collection.each(function(i){var n=new e.SearchResultsTableBodyView({model:i,tagName:"tbody",className:"table-search-body"});t.appendChild(n.el)},this),this.ui.$collectionTable.append(t)},onShow:function(){var e=$("#container");e.height(this.$el.height()),e.css("overflow","hidden")},onDestroy:function(){var e=$("#container");e.css("height",""),e.css("overflow","")}})}),App.module("MailMerge",function(e,t){e.Router=Marionette.AppRouter.extend({appRoutes:{list:"listMailMerges",create:"createMailMerge","details/:id":"detailsForMailMerge","":"defaultAction"},onRoute:function(){t.trigger("route",arguments)}}),e.Controller={listMailMerges:function(){t.Pages.List.Controller.listMailMerges()},createMailMerge:function(e){t.Pages.Create.Controller.createMailMerge(e)},detailsForMailMerge:function(e){t.Pages.Details.Controller.detailsForMailMerge(e)},defaultAction:function(){t.trigger("mailmerge:list")}},t.on("mailmerge:list",function(){t.navigate("list"),e.Controller.listMailMerges()}),t.on("mailmerge:create",function(i){t.navigate("create"),e.Controller.createMailMerge(i)}),t.on("mailmerge:details",function(i){t.navigate("details/"+i),e.Controller.detailsForMailMerge(i)})}),App.module("Pages.Create",function(e,t){e.BasicsView=Marionette.ItemView.extend({template:"#create-basics-view-template",events:{"change .mail-merge-name":"setNameInModel","change #send-stage-as-reply":"setSendAsReplyInModel"},ui:{mailMergeName:".mail-merge-name",sendAsReply:"#send-stage-as-reply"},templateHelpers:function(){return{isMultistageEnabled:t.config.get("features").multistageEnabled}},onShow:function(){this.initName(),this.highlightNameInput()},highlightNameInput:function(){this.ui.mailMergeName.select()},initName:function(){this.ui.mailMergeName.val(this.model.get("name"))},setNameInModel:function(){this.model.set({name:this.ui.mailMergeName.val()})},setSendAsReplyInModel:function(){this.model.set({send_followup_as_reply:this.ui.sendAsReply.is(":checked")})}})}),function(e){e.module("Pages.Create",function(e,t,i,n){e.ComposeStageControlView=n.ItemView.extend({tagName:"div",className:function(){var e="stage-controls";return t.config.get("features").multistageEnabled&&(e+=" multistage"),e},template:"#create-compose-stage-control-view-template",templateHelpers:function(){return{isMultistageEnabled:t.config.get("features").multistageEnabled,stageIndex:this.model.collection.indexOf(this.model)+1}},initialize:function(){this.recipients=this.model.get("recipient_data"),this.listenTo(this.recipients,"reset",this.setPreviewState),this.listenTo(this.recipients,"add",this.setPreviewState),this.listenTo(this.recipients,"remove",this.setPreviewState),this.listenTo(this.model,"refresh",this.render)},onRender:function(){this.setPreviewState()},setPreviewState:function(){var e=this.recipients.isEmpty();this.$el.find(".tab-disabled").toggleClass("tab-disabled",e)}})})}(window.App),App.module("Pages.Create",function(e,t){e.ComposeStageView=Marionette.LayoutView.extend({tagName:"li",className:"create-compose-stage",template:"#create-compose-stage-view-template",templateHelpers:function(){return{isMultistageEnabled:t.config.get("features").multistageEnabled}},events:{"click .stage-controls li:not(.tab-disabled)":"clickStageTab"},triggers:{"click .remove-stage":"remove:stage"},regions:{conditionRegion:".stage-condition-region",schedulingRegion:".touchpoint-scheduling-region",controlRegion:".stage-control-region",messageRegion:".stage-message-region",previewRegion:".stage-preview-region"},initialize:function(e){this.model.set("recipient_data",e.recipient_data),this.campaignModel=e.campaignModel},onShow:function(){var i=t.module("Shared");this.model.collection.indexOf(this.model)>0?this.conditionRegion.show(new i.ComposeStageConditionView({model:this.model})):this.schedulingRegion.show(new i.SchedulingView({model:this.campaignModel})),this.controlRegion.show(new e.ComposeStageControlView({model:this.model})),this.messageRegion.show(new i.EmailComposeView({model:this.model}))},onCreateStageControlTabClicked:function(e){var i=e.attr("data-tab-name");if("compose"===i)this.previewRegion.$el.hide(),this.messageRegion.$el.show();else if("preview"===i){var n=t.module("Shared");this.previewRegion.hasView()||this.previewRegion.show(new n.EmailPreviewView({model:this.model})),this.messageRegion.$el.hide(),this.previewRegion.$el.show()}Yesware.Utils.logPurpleProjectsUsage("clickMailMergeStage-"+i)},clickStageTab:function(e){var t=$(e.currentTarget);t.hasClass("tab-selected")||t.hasClass("tab-disabled")||(t.closest("ul").find("li").removeClass("tab-selected"),t.addClass("tab-selected")),this.onCreateStageControlTabClicked(t)}})}),function(e){e.module("Pages.Create",function(e,t,i,n){function o(e){$("html, body").animate({scrollTop:e.top,scrollLeft:e.left})}e.ComposeStagesView=n.CompositeView.extend({template:"#create-compose-stages-view-template",templateHelpers:function(){return{isMultistageEnabled:t.config.get("features").multistageEnabled}},childView:e.ComposeStageView,childViewOptions:function(){return{recipient_data:this.model.get("recipient_data"),campaignModel:this.model}},childViewContainer:".compose-stages-list",ui:{addStage:".compose-stages-add-stage"},events:{"click @ui.addStage":"addStage"},modelEvents:{"change:send_followup_as_reply":"setSendAsReplyState"},initialize:function(){this.on("childview:remove:stage",this.removeStage),this.listenTo(this.collection.at(0),"change:subject",this.setStageSubjectsToFirst)},onAddChild:function(e){this.collection.length===t.config.get("stageLimit")&&this.ui.addStage.hide();var i=e.$el.offset();o(i)},onRemoveChild:function(e){this.collection.length<t.config.get("stageLimit")&&this.ui.addStage.show(),this.collection.each(function(t){t.cid!==e.model.cid&&t.trigger("refresh")})},addStage:function(){var e={};this.model.get("send_followup_as_reply")&&(e={disableSubject:!0,subject:"RE: "+this.firstStageSubject()}),this.collection.add(new t.Entities.StageModel(e)),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeAddStage")},removeStage:function(e){var t=this.collection.indexOf(e.model);if(t&&t===this.collection.length-1){var i=this.children.findByIndex(this.children.length-2).$el.offset();o(i)}this.collection.remove(e.model),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeRemoveStage")},setSendAsReplyState:function(){this.collection.each(function(e,t){if(t){var i=this.model.get("send_followup_as_reply");i&&this.setStageSubjectToFirst(e),e.set("disableSubject",i)}},this)},setStageSubjectsToFirst:function(){this.model.get("send_followup_as_reply")&&this.collection.each(function(e,t){t&&this.setStageSubjectToFirst(e)},this)},setStageSubjectToFirst:function(e){e.set({subject:"RE: "+this.firstStageSubject()})},firstStageSubject:function(){var e=this.collection.at(0).get("subject");return e||""}})})}(window.App),App.module("Pages.Create",function(e,t){e.Controller={createMailMerge:function(i){var n=new e.CreateLayout({recipients:i});t.containerRegion.show(n),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeStartNew")}}}),App.module("Pages.Create",function(e,t){e.CreateLayout=Marionette.LayoutView.extend({template:"#create-view-template",regions:{basicsRegion:"#basics-region",recipientsTableRegion:"#recipients-table-region",importRecipientsRegion:"#import-recipients-region",composeStagesRegion:"#compose-stages-region",finalizeRegion:"#finalize-region",scheduleAndSendRegion:"#schedule-and-send-region"},templateHelpers:function(){return{linkTrackingEnabled:this.linkTrackingEnabled,salesforceEnabled:this.salesforceEnabled}},initialize:function(e){_.bindAll(this,"renderRecipientsTable"),this.model=new t.Entities.DripCampaignModel,e.recipients&&this.model.set("recipient_data",new t.Entities.RecipientsCollection(e.recipients)),this.model.get("recipient_data").on("add",this.renderRecipientsTable),this.model.get("recipient_data").on("reset",this.renderRecipientsTable)
},renderRecipientsTable:function(){var e=t.module("Shared.Add");this.recipientsTableRegion.show(new e.RecipientsTableView({model:this.model,showEmptyUI:!1}))},onShow:function(){var i=t.module("Shared.Add");this.basicsRegion.show(new e.BasicsView({model:this.model})),this.renderRecipientsTable(),this.importRecipientsRegion.show(new i.ImportRecipientsView({model:this.model})),this.composeStagesRegion.show(new e.ComposeStagesView({model:this.model,collection:this.model.get("stages")})),this.finalizeRegion.show(new i.FinalizeView({model:this.model})),this.scheduleAndSendRegion.show(new e.ScheduleAndSendView({model:this.model}))}})}),function(e,t){t.module("Pages.Create",function(t){t.PreviewView=e.ItemView.extend({})})}(window.Marionette,window.App),App.module("Pages.Create",function(e,t){e.ScheduleAndSendView=Marionette.ItemView.extend({template:"#create-schedule-and-send-view-template",templateHelpers:function(){return{agreement:this.agreementMessage}},ui:{sendButton:".send-campaign",agreementCheckbox:".gmail-agreement"},events:{"click @ui.sendButton":"clickSend","focus @ui.sendButton":"toggleErrorsTooltip","blur @ui.sendButton":"closeErrorsTooltip","mouseenter @ui.sendButton":"toggleErrorsTooltip","mouseleave @ui.sendButton":"closeErrorsTooltip","change @ui.agreementCheckbox":"validateSend"},modelEvents:{change:"validateSend"},initialize:function(){this.validationErrors=[],this.isNonGmailMailboxType="gmail"!==t.config.get("mailboxType"),this.agreementMessage=this.isNonGmailMailboxType?"Please keep Outlook open while we process your Mail Merge":["I understand that Gmail has daily message limits and by","sending this Mail Merge,<br>","I am contributing to this limit."].join(" "),this.listenTo(this.model.get("stages"),"all",this.validateSend),this.listenTo(this.model.get("recipient_data"),"all",this.validateSend)},onShow:function(){this.validateSend()},onDestroy:function(){this.closeErrorsTooltip()},clickSend:function(e){var i=this;e.preventDefault(),this.ui.sendButton.hasClass("disabled")||(this.ui.sendButton.addClass("disabled"),this.model.set("send_campaign",!0),this.model.save(null).done(function(){t.notify("Your mail merge has been successfully scheduled.",t.Notifications.Type.SUCCESS),t.trigger(t.config.get("features").touchpointsEnabled?"touchpoints:list":"mailmerge:list"),Yesware.Utils.logPurpleProjectsUsage("sentMailMerge",{"BCC to CRM":i.model.get("bcc_to_crm"),"Scheduled At":i.model.get("stages").at(0).get("send_at"),"Recipient List Source":i.model.recipientListSource}),Yesware.Utils.logMasterUsage("Mail Merge",{action:"Sent",peopleProperties:"Mail Merge Sent"})}).fail(function(e){t.notify("Sorry, your mail merge couldn't be sent. The error we got is: "+e.responseJSON.errors,t.Notifications.Type.ERROR)}))},validateSend:function(){this.validationErrors=[],this.validateName(),this.validateRecipients(),this.validateSecondaryRecipients(),this.validateStages(),this.validateSendTime(),this.validateAgreement(),this.ui.sendButton.toggleClass("disabled",!!this.validationErrors.length)},validateName:function(){this.model.get("name").trim().length||this.validationErrors.push("You must name your Mail Merge.")},validateRecipients:function(){this.model.get("recipient_data").length||this.validationErrors.push("You must add recipients.")},validateSecondaryRecipients:function(){this.validateCCRecipients(this.model.get("cc")),this.validateCCRecipients(this.model.get("bcc"),!0)},validateCCRecipients:function(e,i){_.each(e,function(e){t.isEmailValid(e)||this.validationErrors.push([i?"BCC":"CC","Address",e,"is an invalid email address."].join(" "))},this)},validateStages:function(){var e=!1,t=!1,i=!1;this.model.get("stages").each(function(n,o){o||$.trim(n.get("subject"))||this.validationErrors.push("You must add a subject to the first stage."),e||!o||$.trim(n.get("subject"))||(e=!0,this.validationErrors.push("You must add a subject to all followup stages.")),i||!o||n.get("send_after")||(i=!0,this.validationErrors.push("You must provide number of days to all followup stage conditions.")),!t&&n.hasEmptyBody()&&(t=!0,this.validationErrors.push("You must provide email bodies for all stages."))},this)},validateSendTime:function(){var e=this.model.get("send_at");if(e)if(e.isValid()){var t=moment().add(1,"hour");e.isBefore(t,"minute")&&this.validationErrors.push("The scheduled time must be at least one hour in the future.")}else this.validationErrors.push("You must provide a valid date/time for scheduled mail merges.")},validateAgreement:function(){if(!this.ui.agreementCheckbox.is(":checked")){var e=this.isNonGmailMailboxType?"Please acknowledge that Outlook must be open to send.":"You must acknowledge the daily message limit.";this.validationErrors.push(e)}},toggleErrorsTooltip:function(){this.validationErrors.length?this.renderErrorsTooltip():this.closeErrorsTooltip()},renderErrorsTooltip:function(){var e=["<span class='yw-icon-attention'>","Please correct the following errors before sending:","</span>"].join(""),t=_.map(this.validationErrors,function(e){return"<li>"+e+"</li>"}),i="<ul>"+t.join("")+"</ul>";this.$qtip=this.ui.sendButton.qtip({content:{title:e,text:i},position:{my:"bottom center",at:"top center"},show:{ready:!0,delay:0},style:{classes:"qtip-light validation-errors",tip:{width:15,height:10,offset:-119,corner:"bottom center"}}})},closeErrorsTooltip:function(){this.$qtip&&(this.$qtip.qtip("api").destroy(!0),this.$qtip=null)}})}),App.module("Pages.Details",function(e){e.StageRecipientPreviewView=Marionette.ItemView.extend({tagName:"tr",className:"details-preview-row",template:"#details-stage-recipient-preview-view-template",templateHelpers:function(){return{stageCompleted:"completed"===this.stageData.status,stageScheduled:"scheduled"===this.stageData.status,sendError:this.getOption("sendError")}},initialize:function(){this.stageData=this.getOption("stageData")}})}),App.module("Pages.Details",function(e,t){e.Controller={detailsForMailMerge:function(i){t.trigger("busy",{overlay:!0});var n=new t.Entities.DripCampaignModel({id:i}),o=new e.LayoutView({model:n});n.fetch().done(function(){t.containerRegion.show(o)}).fail(function(e,i,n){t.notify("Oops, something went wrong while fetching mail merge data.",t.Notifications.Type.ERROR),console.log("Error fetching mail merge: "+i+" - "+n)}).always(function(){t.trigger("idle",{overlay:!0})})}}}),App.module("Pages.Details",function(e){e.Dispatcher=_.clone(Backbone.Events)}),App.module("Pages.Details",function(e){e.HeaderView=Marionette.ItemView.extend({tagName:"header",className:"details-header app-header",template:"#details-header-view-template",ui:{stopButton:".details-stop",refreshButton:".details-refresh"},events:{"click @ui.refreshButton":"refreshMailMerge","click @ui.stopButton":"stopMailMerge"},templateHelpers:function(){return{allowStop:this.allowStop()}},serializeData:function(){return this.model.toViewJSON()},refreshMailMerge:function(){this.model.fetch()},allowStop:function(){var e=this.model.get("stats")?this.model.get("stats").status:!1,t=this.model.get("stages"),i=!1;if(e&&t.length){var n=t.at(t.length-1).get("stats"),o=n?n.status:!1;"sending"!==e&&"scheduled"!==e||!o||"sending"===o||(i=!0)}return i},stopMailMerge:function(e){e.preventDefault();var t=window.confirm("Stopping this mail merge will prevent any scheduled stages from being sent. Click OK below to continue.");t&&(this.model.stop(),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeStopConfirm")),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeStop")}})}),App.module("Pages.Details",function(e){e.LayoutView=Marionette.LayoutView.extend({template:"#details-layout-view-template",regions:{detailsHeaderRegion:"#details-header-region",detailsStagesRegion:"#details-stages-region"},initialize:function(){this.bindDispatcher()},onDestroy:function(){this.unbindDispatcher()},onBeforeShow:function(){var t=[{region:this.detailsHeaderRegion,view:e.HeaderView,viewOptions:{model:this.model}},{region:this.detailsStagesRegion,view:e.StagesView,viewOptions:{collection:this.model.get("stages"),model:this.model}}];_.each(t,function(e){e.region.show(new e.view(e.viewOptions))},this)},bindDispatcher:function(){e.Dispatcher.on("removeStageRecipientFailed",this.refreshMailMerge,this)},unbindDispatcher:function(){e.Dispatcher.off("removeStageRecipientFailed")},refreshMailMerge:function(){this.model.fetch()}})}),App.module("Pages.Details",function(e){e.StageConditionView=Marionette.ItemView.extend({className:"stage-condition-container",template:"#details-stage-condition-view-template",templateHelpers:function(){return{stageNumber:Marionette.getOption(this,"stageNumber")}},serializeData:function(){return this.model.toViewJSON()}})}),App.module("Pages.Details",function(e){e.StageHeaderView=Marionette.ItemView.extend({className:"stage-header",template:"#details-stage-header-view-template",events:{"click .stage-report-button":"clickStageReportButton"},templateHelpers:function(){return{stageNumber:this.getOption("stageNumber")}},initialize:function(){this.bindDispatcher()},onDestroy:function(){this.unbindDispatcher()},serializeData:function(){return this.model.toViewJSON()},clickStageReportButton:function(e){e.preventDefault();var t=$(e.target),i=t.attr("data-stage-id");Yesware.Utils.logPurpleProjectsUsage("clickMailMergeStageCsvReport"),this.accessCsv(i)},accessCsv:function(e){location.href="/drip_campaigns/"+this.getOption("mailMergeId")+"/campaign_stages/"+e+"/stage_csv_report?"+Yesware.RequestHelper.tokenString()},onStageRecipientRemoved:function(e){e==this.options.stageNumber&&this.render()},bindDispatcher:function(){e.Dispatcher.on("removeStageRecipient",this.onStageRecipientRemoved,this)},unbindDispatcher:function(){e.Dispatcher.off("removeStageRecipient")}})}),App.module("Pages.Details",function(e,t){e.StageRecipientTableRowView=Marionette.ItemView.extend({tagName:"tr",template:"#details-stage-recipient-table-row-view-template",ui:{previewToggle:".recipient-preview-toggle",removeRecipient:".remove-recipient-button",recipientStatusFailed:".recipient-status-failed"},events:{"click @ui.previewToggle":"togglePreview","click @ui.removeRecipient":"removeRecipient"},initialize:function(){this.stageData=this.getOption("stage").toViewJSON(),this.stats=this.model.get("stats")},onShow:function(){this.wireFailureTip()},onDestroy:function(){this.ui.recipientStatusFailed.qtip("destroy")},attributes:function(){return{"data-recipient-email":this.model.get("email"),"class":"recipient-row"}},templateHelpers:function(){return{index:this.recipientIndex(),stageStatus:this.stageData.status,stageCompleted:"completed"===this.stageData.status,stageScheduled:"scheduled"===this.stageData.status}},recipientIndex:function(){return this.getOption("index")},getPreview:function(i){var n=this;this.previewModel=new t.Entities.PreviewModel,this.previewModel.fetchPreview({recipient:this.model.toJSON(),subject:this.getOption("stage").get("subject"),body:this.getOption("stage").get("body")}).done(function(){n.previewView=new e.StageRecipientPreviewView({model:n.previewModel,sendError:n.stats.send_error,stageData:n.stageData}),n.previewView.render(),n.togglePreview(i)})},togglePreview:function(e){if(e.preventDefault(),!this.previewView)return void this.getPreview(e);var t=$(e.currentTarget);t.toggleClass("recipient-preview-closed"),t.find(">span").toggleClass("yw-icon-down-open-big yw-icon-up-open-big"),t.hasClass("recipient-preview-closed")?t.parent().next().remove():t.parent().after(this.previewView.el)},removeRecipient:function(i){var n=$(i.target).closest("tr"),o=n.attr("data-recipient-email"),r=confirm("Are you sure you want to remove "+o+"?");if(r){var s=this,a=this.getOption("stage"),l=a.get("removed_recipient_emails");l?l.push(o):a.set("removed_recipient_emails",[o]),a.save(null,{success:function(){e.Dispatcher.trigger("removeStageRecipient",s.getOption("stageNumber"),o)},error:function(i,n){var o="We were unable to remove this recipient. Please make sure the stage is not currently sending.";t.notify(o,t.Notifications.Type.ERROR),e.Dispatcher.trigger("removeStageRecipientFailed"),console.log("recipient remove failed: status = "+(n.status||"???")+", response text = "+(n.responseText||"???"))},wait:!0}),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeRemoveRecipient")}},wireFailureTip:function(){this.ui.recipientStatusFailed.qtip({content:{attr:"data-err-string"},position:{my:"bottom center",at:"top center"},style:{classes:"qtip-light qtip-shadow recipient-failure-popup",width:250},show:{delay:0}})}})}),App.module("Pages.Details",function(e){e.StageRecipientTableEmptyView=Marionette.ItemView.extend({tagName:"tr",className:"stage-recipients-empty",template:"#details-stage-recipient-table-empty-view-template"}),e.StageCancelledView=Marionette.ItemView.extend({tagName:"tr",className:"stage-recipients-empty",template:"#details-stage-cancelled-view-template"}),e.StageRecipientTableView=Marionette.CompositeView.extend({tagName:"div",className:"stage-recipients-container",template:"#details-stage-recipient-table-view-template",childView:e.StageRecipientTableRowView,childViewContainer:"tbody",childViewOptions:function(e,t){return{stage:this.model,model:e,index:t,stageNumber:this.getOption("stageNumber")}},getEmptyView:function(){return this.model.toViewJSON().isCancelled?e.StageCancelledView:e.StageRecipientTableEmptyView},ui:{mailMergeFromSelected:".campaign-from-selected-btn",recipientsFilter:".stage-recipients-filter",recipientCheckbox:".stage-recipient-checkbox"},events:{"click @ui.mailMergeFromSelected":"clickMailMergeFromSelected","click @ui.recipientsFilter":"clickRecipientsFilter","change @ui.recipientCheckbox":"changeRecipientCheckbox"},collectionEvents:{sync:"render"},initialize:function(){this.model.toViewJSON().isCancelled&&(this.collection=new App.Entities.RecipientsCollection),this.filter="all",this.recipients=this.collection.clone(),this.listenTo(this.collection,"reset",this.resetRecipients),this.bindDispatcher()},onDestroy:function(){this.unbindDispatcher()},onRender:function(){this.collection.isEmpty()&&(this.$el.find("table").children().hide(),this.$el.find("tbody").addClass("recipients-table-empty").show()),this.ui.recipientsFilter.removeClass("btn-pressed"),this.$el.find(".stage-recipients-filter[data-filter="+this.filter+"]").addClass("btn-pressed")},serializeData:function(){return this.model.toViewJSON()},resetRecipients:function(){this.collection=this.model.getRecipients(),this.model.get("stats").recipient_count=this.collection.length},clickMailMergeFromSelected:function(){var e=[],t=this;this.$el.find(".stage-recipient-checkbox:checked").not(".all").each(function(){var i=$(this).attr("data-id"),n=_.omit(t.model.get("recipient_data").at(i).toJSON(),"stats");e.push(n)}),App.trigger("mailmerge:create",e),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeNewFromSelected")},clickRecipientsFilter:function(e){var t=$(e.target);this.filter=t.attr("data-filter"),this.collection.reset(this.recipients.filter(function(e){return!e.get("stats")[this.filter]},this),{silent:!0}),this.render(),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeStageRecipientsFilter",{filter:this.filter})},changeRecipientCheckbox:function(e){var t=$(e.target),i=!0,n=this.$el.find(".stage-recipient-checkbox").not(".all");if(t.hasClass("all"))n.prop("checked",t.is(":checked"));else{var o=this.$el.find(".stage-recipient-checkbox:checked").not(".all"),r=o.length===this.recipients.length;this.$el.find(".stage-recipient-checkbox.all").prop("checked",r)}i=!n.is(":checked"),this.ui.mailMergeFromSelected.prop("disabled",i).toggleClass("disabled",i)},onOtherStageRecipientRemoved:function(e,t){if(e<this.options.stageNumber){var i=this.collection.where({email:t});this.collection.remove(i,{silent:!0}),this.render()}},bindDispatcher:function(){e.Dispatcher.on("removeStageRecipient",this.onOtherStageRecipientRemoved,this)},unbindDispatcher:function(){e.Dispatcher.off("removeStageRecipient")}})}),App.module("Pages.Details",function(e){e.StageView=Marionette.LayoutView.extend({template:"#details-stage-view-template",ui:{conditionSection:"section.condition"},regions:{stageConditionRegion:"#stage-condition-region",stageHeaderRegion:"#stage-header-region",stageRecipientTableRegion:"#stage-recipient-table-region"},onRender:function(){var t=[{region:this.stageConditionRegion,view:e.StageConditionView,options:{model:this.model,stageNumber:this.getOption("stageNumber")},condition:this.getOption("stageNumber")>1},{region:this.stageHeaderRegion,view:e.StageHeaderView,options:{model:this.model,stageNumber:this.getOption("stageNumber"),mailMergeId:this.getOption("mailMergeId")}},{region:this.stageRecipientTableRegion,view:e.StageRecipientTableView,options:{model:this.model,collection:this.model.getRecipients(),stageNumber:this.getOption("stageNumber")}}];_.each(t,function(e){(_.isUndefined(e.condition)||e.condition)&&e.region.show(new e.view(e.options))},this)},onShow:function(){this.getOption("stageNumber")<2&&this.ui.conditionSection.hide()}})}),App.module("Pages.Details",function(e){e.StagesView=Marionette.CollectionView.extend({className:"details-stages-container",childView:e.StageView,childViewOptions:function(e,t){return{model:e,stageNumber:t+1,mailMergeId:this.model.get("id")}}})}),App.module("Pages.List",function(e,t){e.Controller={listMailMerges:function(){var i=new e.ListLayoutView({collection:new t.Entities.DripCampaignsCollection});t.containerRegion.show(i),Yesware.Utils.logPurpleProjectsUsage("clickMailMergeBackToList")}}}),App.module("Pages.List",function(e,t){e.ListLayoutView=Marionette.LayoutView.extend({tagName:"div",className:"list-layout",template:"#list-layout-view-template",regions:{listHeaderRegion:"#list-header-region",listTableRegion:"#list-table-region"},initialize:function(){var e=t.module("Shared.List");this.listenTo(this.collection,"sync",function(){this.listTableRegion.show(new e.TableView({collection:this.collection}))}),this.listPromise=this.collection.fetch()},onShow:function(){var e=t.module("Shared.List"),i=[{region:this.listHeaderRegion,view:e.ListHeaderView},{region:this.listTableRegion,view:e.TableView}];_.each(i,function(e){e.region.show(new e.view({collection:this.collection,recipients:this.recipients}))},this),t.trigger("busy",{overlay:!0}),this.listPromise.always(function(){t.trigger("idle",{overlay:!0})})}})}),App.module("Shared",function(e,t,i,n){e.EmailComposeView=n.ItemView.extend({className:"email-compose",template:"#shared-email-compose-view-template",templateHelpers:function(){return{tinyMCEId:this.tinyMCEId}},ui:{subject:".email-compose-subject",body:".email-compose-body",templates:".email-compose-templates"},events:{"input @ui.subject":function(e){this.onSubjectInput(e)}},modelEvents:{"change:disableSubject":"setSubjectState","change:subject":"setSubjectValue"},initialize:function(){this.tinyMCEId=(new Date).getTime(),this.tinyMCEComposerId="email-compose-body-"+this.tinyMCEId,this.tinyMCESelector="#"+this.tinyMCEComposerId,Yesware.MadLibs.init({requestDomain:t.config.get("backendUrl"),userAccessToken:t.config.get("userAccessToken"),userAuthToken:t.config.get("userAuthToken")}),Yesware.MadLibs.config.requestScheme=t.config.get("backendProtocol")},onRender:function(){this.onSubjectInput=_.debounce(this.onSubjectInput,300),this.updateBody=_.debounce(this.updateBody,300)},onShow:function(){this.wireEditor(),this.wireTemplatesWidget()},onSubjectInput:function(){this.model.set("subject",this.ui.subject.val())},onDestroy:function(){this.templatesDialog&&this.templatesDialog.destroy(),tinymce.remove(this.tinyMCESelector)},updateBody:function(e){this.model.set("body",e)},wireEditor:function(){var e=this;tinymce.init({font_formats:"Sans Serif=arial, helvetica,sans-serif;Serif=times new roman,serif;Wide=arial black,sans-serif;Narrow=arial narrow,sans-serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,monospace;Garamond=garamond,serif;Georgia=georgia,serif;Tahoma=tahoma,sans-serif;Trebuchet MS=trebuchet ms,sans-serif;Verdana=verdana,sans-serif",selector:this.tinyMCESelector,plugins:"paste link image textcolor merge_fields code",menubar:!1,toolbar:["fontselect | fontsizeselect | bold italic underline | forecolor | numlist bullist outdent indent | removeformat","text_merge_field | alignleft aligncenter alignright | link unlink | image | code"],statusbar:!1,fontsize_formats:"10px 13px 18px 32px",height:270,paste_data_image:!0,keep_styles:!0,paste_webkit_styles:"all",paste_retain_style_properties:"all",forced_root_block:"div",browser_spellcheck:!0,skin:!1,setup:function(t){e.editor=t,t.on("init",function(){this.getDoc().body.style.fontFamily="Sans-Serif",this.getDoc().body.style.fontSize="13px",_.isEmpty(e.model.get("body"))||t.setContent(e.model.get("body"))}),t.on("keypress keyup change",function(){setTimeout(function(){e.updateBody(t.getContent())},0)})}})},wireTemplatesWidget:function(){var e=this;this.templatesDialog=Yesware.MadLibs.build({el:e.ui.templates,templateInsertCallback:function(t){e.model.get("disableSubject")||e.ui.subject.val(t.subject).trigger("input"),tinymce.get(e.tinyMCEComposerId).insertContent(t.bodies.html),e.editor.fire("change"),e.model.get("template_ids").push(t.id),Yesware.Utils.logPurpleProjectsUsage("insertTemplate")},my:"bottom left",at:"top right"}),this.templatesDialog.on("usage",function(e){Yesware.Utils.logPurpleProjectsUsage("templates:"+e)})},setSubjectState:function(){this.ui.subject.prop("disabled",this.model.get("disableSubject"))},setSubjectValue:function(){this.ui.subject.val()!==this.model.get("subject")&&this.ui.subject.val(this.model.get("subject"))}})}),App.module("Shared",function(e,t,i,n){e.EmailPreviewView=n.ItemView.extend({className:"email-preview",template:"#shared-email-preview-view-template",ui:{recipient:".email-preview-recipient",subject:".email-preview-subject",body:".email-preview-body"},events:{"click @ui.recipient":"onClickRecipient"},initialize:function(){this.previewModel=new t.Entities.PreviewModel,this.recipientsCollection=this.model.get("recipient_data"),this.listenTo(this.recipientsCollection,"reset",this.render),this.listenTo(this.recipientsCollection,"update",this.render)},onRender:function(){this.ui.recipient.first().click()},onClickRecipient:function(e){var t=$(e.currentTarget);if(!t.hasClass("selected")){this.ui.recipient.removeClass("selected"),t.addClass("selected"),this.recipient=this.recipientsCollection.at(t.data("index"));var i=this;this.previewModel.fetchPreview({recipient:this.recipient.toJSON(),body:this.model.get("body"),subject:this.model.get("subject")}).done(function(){i.ui.subject.html(i.previewModel.get("subject")),i.ui.body.html(i.previewModel.get("body")),i.applyTargetBlankToBody()}),Yesware.Utils.logPurpleProjectsUsage("clickPreviewRecipient")}},applyTargetBlankToBody:function(){this.ui.body.find("a").each(function(){$(this).attr("target","_blank")})}})}),App.module("Shared",function(e){e.HintView=Marionette.ItemView.extend({className:"hint",template:"#hint-view-template",ui:{closeLink:".hint-close"},events:{"click @ui.closeLink":"onClickClose"},templateHelpers:function(){return{message:this.message}},initialize:function(e){if(this.localStorageKey=e.localStorageKey,_.isUndefined(this.localStorageKey))throw"Invalid initialization: localStorageKey is required.";localStorage.getItem(this.localStorageKey+".hint.hidden")?this.$el.hide():this.message=$(e.contentTemplate).html()},onClickClose:function(e){e.preventDefault(),localStorage.setItem(this.localStorageKey+".hint.hidden",!0),this.$el.hide()}})}),App.module("Shared",function(e){e.TabView=Marionette.ItemView.extend({template:"#shared-tab-view-template",initialize:function(e){this.tabs=e.tabs},templateHelpers:function(){return{tabs:this.tabs}},onShow:function(){$("body").addClass("with-tabs")},onDestroy:function(){$("body").removeClass("with-tabs")}})}),App.module("Shared",function(e){e.ComposeStageConditionView=Marionette.ItemView.extend({NO_REPLY:"no_reply",NO_OPEN:"no_open",REGARDLESS:"regardless",tagName:"div",className:"stage-condition",template:"#create-compose-stage-condition-view-template",templateHelpers:function(){var e=this.model.get("condition");return{stageIndex:this.model.collection.indexOf(this.model)+1,isNoReply:e===this.NO_REPLY,isNoOpen:e===this.NO_OPEN,isRegardless:e===this.REGARDLESS,conditionDays:this.model.get("send_after")/24}},ui:{condition:".stage-condition-condition>select",sendAfter:".stage-condition-send-after"},events:{"change @ui.condition":"changeCondition","input @ui.sendAfter":"changeSendAfter"},modelEvents:{refresh:"render"},onRender:function(){this.ui.sendAfter.numeric({negative:!1,decimal:!1})},changeCondition:function(){this.model.set("condition",this.ui.condition.val())},changeSendAfter:function(){this.model.set("send_after",24*this.ui.sendAfter.val())}})}),App.module("Shared.Add",function(e,t){e.FinalizeView=Marionette.ItemView.extend({template:"#create-finalize-view-template",events:{"change #track-links-toggle":"setTrackLinksInModel","change #send-to-sf-toggle":"setSendToSalesforceInModel","input #cc-address":"setCcAddressInModel","input #bcc-address":"setBccAddressInModel"},initialize:function(){this.features=t.config.get("features"),this.defaults=t.config.get("defaults"),this.model.set("send_to_crm",this.isSendToCrmForcedOrPreferred()),this.model.set("track_links",this.isTrackLinksPreferred()),this.model.set({bcc:this.stringToEmailArray(this.defaults.bccToCrmAddress),bcc_to_crm:this.stringToEmailArray(this.defaults.bccToCrmAddress).length>0})},templateHelpers:function(){return{linkTrackingEnabled:this.features.linkTrackingEnabled,salesforceEnabled:this.features.salesforceEnabled,forceCrmSync:this.features.forceCrmSync}},isSendToCrmForcedOrPreferred:function(){return this.features.salesforceEnabled&&this.features.forceCrmSync||this.defaults.sendToSalesforceChecked&&this.features.salesforceEnabled},isTrackLinksPreferred:function(){return this.defaults.trackLinksChecked&&this.features.linkTrackingEnabled},stringToEmailArray:function(e){return e&&e.length>0?$.map(e.split(","),$.trim):[]},setTrackLinksInModel:function(){this.model.set({track_links:this.$el.find("#track-links-toggle").is(":checked")})},setSendToSalesforceInModel:function(){this.model.set({send_to_crm:this.$el.find("#send-to-sf-toggle").is(":checked")})},setCcAddressInModel:function(){var e=this.ccAddress();this.model.set("cc",e)},setBccAddressInModel:function(){var e=this.bccAddress();this.model.set({bcc:e,bcc_to_crm:e.length>0})},ccAddress:function(){var e=$.trim(this.$el.find("#cc-address").val());return this.stringToEmailArray(e)},bccAddress:function(){var e=$.trim(this.$el.find("#bcc-address").val());return this.stringToEmailArray(e)}})}),App.module("Shared.Add",function(e,t){e.ImportRecipientsView=Marionette.LayoutView.extend({template:"#create-import-recipients-view-template",templateHelpers:function(){return{isSalesforceImportEnabled:this.isSalesforceImportEnabled()}},isSalesforceImportEnabled:function(){var e=t.config.get("features");return e.salesforceEnabled},ui:{uploadButton:".upload-csv-button",salesforceImportSelect:"#salesforce-import-select",monthlyRecipientCount:".mail-merge-monthly-recipients-count"},events:{"change @ui.salesforceImportSelect":"onSalesforceListSelected"},initialize:function(){_.bindAll(this,"hideHints","renderSalesforceLists","onParseFail"),this.isSalesforceImportEnabled()&&(this.avalancheApi=t.module("AvalancheApi"),this.salesforceListsPromise=this.avalancheApi.getListViews()),this.recipients=this.model.get("recipient_data"),this.recipients.on("reset",this.hideHints),this.model.set("recipientLimit",t.config.get("recipientLimit"));var e=t.config.get("monthlyRecipientLimit");this.model.set("monthlyRecipientLimit",e),e>0&&this.initMonthlyRecipients()},initMonthlyRecipients:function(){var e=this;e.fetchMonthlyRecipientCount().done(function(t){e.handleRecipientCount(t.count)}).fail(function(){var t="Sorry, we were unable to fetch your Mail Merge usage. Please try again.";e.disableRecipientInputs(t)})},fetchMonthlyRecipientCount:function(){return Backbone.ajax({url:"/api/drip_campaigns/monthly_count",type:"GET"})},handleRecipientCount:function(e){this.model.set("monthlyRecipientCount",e),this.ui.monthlyRecipientCount.text(e),e>=this.model.get("monthlyRecipientLimit")?this.disableRecipientInputs():this.initFileUpload()},disableRecipientInputs:function(e){var t=this.$(".mail-merge-over-monthly-recipient-limit");e&&t.text(e),t.show(),this.$(".yw-import-content select").prop("disabled",!0),this.$(".yw-import-content input").prop("disabled",!0),this.$(".upload-csv-button").addClass("disabled-upload-csv-button")},computedMonthlyRecipients:function(){var e=t.config.get("recipientLimit"),i=t.config.get("monthlyRecipientLimit");if(i>0){var n=i-this.model.get("monthlyRecipientCount");e>n&&(e=n)}return e},onRender:function(){var e=t.config.get("monthlyRecipientLimit");(!e||1>e)&&this.initFileUpload(),this.isSalesforceImportEnabled()&&this.initSalesforceImport(),this.hideHints()},onBusy:function(){t.trigger("recipientTable:showSpinner")},onIdle:function(){t.trigger("recipientTable:hideSpinner")},buildParseEndpointUrl:function(){return"/api/drip_campaigns/parse?recipient_limit="+this.computedMonthlyRecipients()},initFileUpload:function(){var e=this;this.$el.on("click",".upload-csv",function(){return e.ui.uploadButton.hasClass("disabled")?!1:void 0});var t={dataType:"json",paramName:"csv",url:this.buildParseEndpointUrl(),send:function(){e.onBeforeParse(),Yesware.Utils.logPurpleProjectsUsage("clickUploadRecipients")},done:function(t,i){e.model.recipientListSource="csv",e.ui.salesforceImportSelect.find("option").first().prop("selected",!0),Yesware.Utils.logPurpleProjectsUsage("uploadedRecipients"),e.onParseSuccess(i.result.recipients)},fail:this.onParseFail};Yesware.RequestHelper.insertToken(t),this.$el.find(".upload-csv").fileupload(t)},onBeforeParse:function(){this.ui.uploadButton.addClass("disabled"),this.triggerMethod("busy")},onParseSuccess:function(e){this.ui.uploadButton.removeClass("disabled"),this.recipients.reset(e),this.onAfterParse()},onParseFail:function(e){var i=null,n="";503==e.status?n="Sorry, your recipient list is taking a long time to load. Please try again.":(e.responseText&&(i=JSON.parse(e.responseText)),n="Sorry, we can't seem to find email addresses in your data.",i&&(n+=" The error we get is: "+i.errors)),this.recipients.reset([]),t.trigger("recipientTable:showError",n),this.onAfterParse()},onAfterParse:function(){this.triggerMethod("idle"),this.ui.uploadButton.removeClass("disabled"),this.ui.uploadButton.find("span").text("Replace Recipients List (.csv)")},hideHints:function(){this.recipients.length&&this.$(".hint-block, .empty-recipient").hide()},initSalesforceImport:function(){var e=this;this.salesforceListsPromise.done(this.renderSalesforceLists).fail(function(){e.$("#salesforce-import-select option").first().text("Sorry, we weren't able to fetch your Salesforce lists.")})},renderSalesforceLists:function(e){function t(e,t){if(e.length>0){var i=$("<optgroup/>").attr("label",t+" Lists");return _.each(e,function(e){$("<option/>").attr("data-list-object-type",t).attr("data-list-id",e.id).text(e.label).appendTo(i)}),i}}$(".salesforce-import-placeholder").hide(),this.ui.salesforceImportSelect.find("option").first().prop("selected",!0).text("Select a Salesforce list..."),this.ui.salesforceImportSelect.append(t(e.contactLists,"Contact")),this.ui.salesforceImportSelect.append(t(e.leadLists,"Lead"))},onSalesforceListSelected:function(e){var i=this,n=$(e.target).find("option:selected");this.onBeforeParse(),Yesware.Utils.logPurpleProjectsUsage("clickSalesforceList");var o=this.avalancheApi.buildListResultsUrl(n.data("list-id"),n.data("list-object-type"),t.config.get("recipientLimit"));Backbone.ajax({url:this.buildParseEndpointUrl(),type:"POST",data:{json:o}}).done(function(e){i.model.recipientListSource="salesforce-list",Yesware.Utils.logPurpleProjectsUsage("importedSalesforceList"),i.onParseSuccess(e.recipients)}).fail(this.onParseFail)}})}),App.module("Shared.Add",function(e,t){e.RecipientsTableView=Marionette.ItemView.extend({template:"#touchpoints-add-recipient-table-template",templateHelpers:function(){return{headers:this.requiredFields||["Email"],showEmptyUI:this.showEmptyUI}},ui:{emptyRecipient:".empty-recipient",recipientsTableContainer:".recipients-table-container",recipientsTable:".recipients-table",missingFieldsContainer:".missing-fields-container"},initialize:function(e){_.bindAll(this,"onRequiredFieldsChanged","onMissingFieldsChanged","renderRecipientsTable","onShow","showTableSpinner","hideTableSpinner","showTableMessage"),this.requiredFields=this.model.getRequiredFields(),this.showEmptyUI=e.showEmptyUI,this.recipients=this.model.get("recipient_data"),this.model.on("change:requiredFields",this.onRequiredFieldsChanged),this.model.on("change:missingFields",this.onMissingFieldsChanged),t.on("recipientTable:showSpinner",this.showTableSpinner),t.on("recipientTable:hideSpinner",this.hideTableSpinner),t.on("recipientTable:showError",this.showTableMessage)
},showTableSpinner:function(){$(this.ui.recipientsTableContainer).empty().append($("<div/>").addClass("spinner-overlay"))},hideTableSpinner:function(){$(this.ui.recipientsTableContainer).find(".spinner-overlay").remove()},showTableMessage:function(e){$(this.ui.recipientsTableContainer).empty().append($("<p/>").text(e).addClass("error"))},onShow:function(){this.recipients.length>0&&(this.renderRecipientsTable(),this.requiredFields&&this.onMissingFieldsChanged())},onRequiredFieldsChanged:function(){this.onMissingFieldsChanged()},buildMissingFieldsText:function(e){if(0===e.length)return"";var t,i=e.map(function(e){return'"'+e+'"'});e.length<3?t=i.join(" and "):(t=i.slice(0,i.length-1).join(", "),t+=", and "+i.slice(-1));var n=e.length>1?" columns":" column",o=e.length>1?" are":" is";return"The "+t+n+o+" required for this Mail Merge. Please update your imported data to include the required fields."},onMissingFieldsChanged:function(){var e=this.model.missingFields;$(this.ui.missingFieldsContainer).toggle(0!==e.length),$(this.ui.missingFieldsContainer).text(this.buildMissingFieldsText(e))},renderRecipientsTable:function(){var e=this,t=this.extractTableData();if(t.rows.length){var i=this.ui.recipientsTable.data("handsontable");i&&i.destroy(),this.ui.recipientsTable.handsontable({data:t.rows,colHeaders:t.headers,rowHeaders:!0,stretchH:"all",fixedColumnsLeft:1,height:function(){var e=t.rows.length;return e>15?400:void 0},undo:!1,afterChange:function(i,n){e.updateRecipientsFromEdits(i,n,t)}}),this.ui.recipientsTable.handsontable("getInstance").render(),Yesware.Utils.logPurpleProjectsUsage("renderedRecipients",{rows:t.rows.length,columns:(t.rows[0]||[]).length}),this.ui.emptyRecipient.hide()}},onDestroy:function(){this.$el.handsontable("destroy")},extractTableData:function(){var e=[],t=[],i=this.recipients.toJSON();return _.each(_.keys(i[0]),function(t){"email"===t?e.unshift(t):e.push(t)}),$.each(i,function(i,n){var o=[];_.each(e,function(e){o.push(n[e])}),t.push(o)}),{headers:e,rows:t}},updateRecipientsFromEdits:function(e,t,i){var n=this;"edit"===t&&_.each(e,function(e){var t=i.headers[e[1]],o=e[0],r=e[3];n.recipients.at(o).set(t,r)})}})}),App.module("Shared",function(e){e.SchedulingView=Marionette.ItemView.extend({tagName:"div",className:"scheduling",template:"#shared-scheduling-view-template",ui:{dateTimePicker:".datetimepicker-container"},wireSendDatePicker:function(){var e=this;this.datetimePicker=this.ui.dateTimePicker.ywDatetimePicker({datetime:moment(),datetimeRange:{min:function(){return moment()},max:function(){return moment().add(3,"months")}},showNowAsWords:!0,hideZonepicker:!0}),$(this.datetimePicker).on("change",function(t,i){e.onDatetimePickerChange(i)})},onRender:function(){this.wireSendDatePicker()},onDestroy:function(){this.datetimePicker&&($(this.datetimePicker).off(),this.datetimePicker.destroy())},onDatetimePickerChange:function(e){e.isBefore(moment())||e.isSame(moment(),"minute")?this.model.set("send_at",null):this.model.set("send_at",this.normalizeDate(e))},normalizeDate:function(e){return e?e:moment(null)}})}),App.module("Shared.Add.Helpers",function(e){var t=/\{!([^\}]+)\}/g;e.SubstitutionFieldAnalyzer={findSubstitutionFields:function(e){var i=[],n=function(e){if(e)for(var n;null!==(n=t.exec(e));)i.push(n[1])};return e.each(function(e){n(e.get("body")),n(e.get("subject"))}),_.uniq(i)},findMissingFields:function(e,t){var i={},n=e.toJSON()[0];_.each(_.keys(n),function(e){n[e]&&(i[e.toLowerCase()]=!0)});var o=[];return _.each(t,function(e){i[e.toLowerCase()]||o.push(e)}),_.uniq(o)}}}),App.module("Shared.List",function(e){e.ListHeaderView=Marionette.ItemView.extend({tagName:"header",className:"list-header app-header",template:"#list-header-view-template",ui:{refreshButton:".list-refresh",createButton:".list-create"},events:{"click @ui.refreshButton":"refresh","click .campaigns-search-clear":"clearSearch","input .campaigns-search":"searchRecipients"},templateHelpers:function(){var e=App.config.get("features");return{isTouchpointsEnabled:e.touchpointsEnabled}},initialize:function(e){this.recipients=e.recipients},onRender:function(){this.$searchInput=this.$el.find(".campaigns-search"),this.$searchClearButton=this.$el.find(".campaigns-search-clear")},searchRecipients:function(){var e=$.trim(this.$searchInput.val());this.$searchClearButton.toggle(!!e.length),App.trigger("search",e),Yesware.Utils.logPurpleProjectsUsage("searchMailMerge")},clearSearch:function(e){e&&e.preventDefault(),this.$searchInput.val(""),this.searchRecipients()},refresh:function(){App.trigger("busy",{overlay:!0}),this.$searchInput.val("").trigger("input"),this.collection.fetch({reset:!0}).fail(function(e,t,i){App.notify("An error occurred while fetching the list",App.Notifications.Type.ERROR),console.log("Error fetching mail merge list: "+t+" - "+i)}).always(function(){App.trigger("idle",{overlay:!0})})}})}),App.module("Shared.List",function(e){e.TableEmptyView=Marionette.ItemView.extend({tagName:"tr",className:"list-table-empty",template:"#list-table-empty-view-template"})}),App.module("Shared.List",function(e,t){e.TableRowView=Marionette.ItemView.extend({tagName:"tr",template:"#list-table-row-view-template",events:{"click .convert-button":"convertToTouchplan",click:"navigateToDetails",keyup:"keyupRow"},attributes:function(){return{"data-id":this.model.get("id"),"class":"list-table-row",tabindex:this.model.get("tabindex")}},templateHelpers:function(){var e=t.config.get("features");return{isTouchpointsEnabled:e.touchpointsEnabled,isConversionEnabled:!this.model.get("drip_campaign_blueprint_id")}},initialize:function(){this.model.set("tabindex",0)},serializeData:function(){return this.model.toViewJSON()},keyupRow:function(e){13===e.which&&this.navigateToDetails()},navigateToDetails:function(e){e&&$(e.target).is(".convert-button")||(t.trigger("mailmerge:details",this.model.get("id")),Yesware.Utils.logPurpleProjectsUsage("clickMailMerge"))},convertToTouchplan:function(){t.trigger("busy",{overlay:!0}),this.model.convertToTouchplan().done(function(){Yesware.Utils.logPurpleProjectsUsage("createdTouchpoints"),Yesware.Utils.logMasterUsage("Touchpoints",{action:"Created",peopleProperties:"Touchpoints Created"}),t.notify("Your Mail Merge has been successfully saved as a Mail Merge Template.",t.Notifications.Type.SUCCESS),t.trigger("touchpoints:listTemplates")}).fail(function(){t.notify("We were unable to save your Mail Merge as a Mail Merge Template.",t.Notifications.Type.ERROR)}).always(function(){t.trigger("idle",{overlay:!0})})}})}),App.module("Shared.List",function(e){e.TableView=Marionette.CompositeView.extend({tagName:"table",className:"list-table",template:"#list-table-view-template",childView:e.TableRowView,childViewContainer:"tbody",childViewOptions:function(e,t){return{index:t}},templateHelpers:function(){var e=App.config.get("features");return{isTouchpointsEnabled:e.touchpointsEnabled}},emptyView:e.TableEmptyView,ui:{emptyTable:".list-table-empty",feedbackLink:".list-feedback"},onRender:function(){this.collection.length||(this.$el.children().hide(),this.$el.find("tbody").addClass("list-table-empty").show())}})}),App.module("Touchpoints",function(e,t){e.Controller={list:function(){var e=t.module("Touchpoints.List"),i=new e.LayoutView({collection:new t.Entities.DripCampaignsCollection,whichList:"mailmerges"});t.containerRegion.show(i)},listTemplates:function(){var e=t.module("Touchpoints.List"),i=new e.LayoutView({collection:new t.Entities.TouchplansCollection,whichList:"templates"});t.containerRegion.show(i)},useTemplate:function(e){function i(){var e=new n.LayoutView({touchplanModel:r,campaignModel:t.Factories.DripCampaignFactory.fromTouchplan(r)});t.containerRegion.show(e)}var n=t.module("Touchpoints.Add"),o=isNaN(e),r=o?e:new t.Entities.TouchplanModel({id:e});o?i():(t.trigger("busy",{overlay:!0}),r.fetch().done(i).fail(function(e){var i=JSON.parse(e.responseText);console.log("Error retrieving Touchplan: ",i.message),t.notify("Oops, something went wrong while trying to retrieve that Mail Merge Template",t.Notifications.Type.ERROR)}).always(function(){t.trigger("idle",{overlay:!0})}))},createMailMerge:function(){t.trigger("mailmerge:create")},detailsForMailMerge:function(e){t.trigger("mailmerge:details",e)},defaultAction:function(){t.trigger("touchpoints:list")}},t.on("touchpoints:list",function(){t.navigate("list"),e.Controller.list()}),t.on("touchpoints:listTemplates",function(){t.navigate("list/templates"),e.Controller.listTemplates()}),t.on("touchpoints:useTemplate",function(i){var n=isNaN(i)?i.id:i;t.navigate("template/"+n),e.Controller.useTemplate(i)})}),App.module("Touchpoints",function(e,t){e.HeaderView=Marionette.ItemView.extend({className:"touchplan-header",template:"#touchplan-header-view-template",templateHelpers:function(){return{isAdd:"add"===this.page,isManage:"manage"===this.page,isEdit:"edit"===this.page,openPercentage:100*this.openRate||0,replyPercentage:100*this.replyRate||0,clickPercentage:100*this.clickRate||0}},ui:{name:".touchplan-name",menuLink:".touchplan-menu-link"},events:{"click @ui.menuLink":"onClickMenuLink"},initialize:function(e){this.page=e.page||"add"},onRender:function(){$(document.body).addClass("with-tabs")},onDestroy:function(){$(document.body).removeClass("with-tabs")},onClickMenuLink:function(e){e.preventDefault();var i=$(e.target).data("page");i!==this.page&&t.trigger("touchpoints:"+i,this.model)}})}),App.module("Touchpoints",function(e){e.Router=Marionette.AppRouter.extend({appRoutes:{list:"list","list/templates":"listTemplates","template/:id":"useTemplate",create:"createMailMerge","details/:id":"detailsForMailMerge","":"defaultAction"},onRoute:function(){App.trigger("route",arguments)}})}),App.module("Touchpoints.Add",function(e,t,i,n){e.AddPersonFormView=n.LayoutView.extend({initialize:function(e){this.model=new t.Entities.RecipientModel,this.campaignModel=e.campaignModel,this.recipientModel=this.model,this.recipientsCollection=this.campaignModel.get("recipient_data"),this.fields=this.campaignModel.getRequiredFields()},template:"#add-person-form-view-template",templateHelpers:function(){return{fields:this.fields}},serializeData:function(){return this.model.toViewJSON()},ui:{addPersonField:".add-person-field",addPersonButton:".add-person-button"},events:{"click @ui.addPersonButton":"onClickAddPersonButton"},onClickAddPersonButton:function(e){e.preventDefault(),this.addPerson(),this.setSource(),this.logAddPersonUsage()},addPerson:function(){var e=this;this.ui.addPersonField.each(function(){var t=$(this);e.setPersonField(t),t.val("")}),this.recipientsCollection.push(this.recipientModel.clone()),this.recipientModel.clear()},setPersonField:function(e){this.recipientModel.set(e.attr("name"),e.val())},setSource:function(){var e=this.campaignModel.get("recipientListSource");e?-1===e.indexOf("manual")&&(e+=", manual"):e="manual",this.campaignModel.set("recipientListSource",e)},logAddPersonUsage:function(){Yesware.Utils.logPurpleProjectsUsage("AddSingleRecipient")}})}),App.module("Touchpoints.Add",function(e,t,i,n){e.AddPersonView=n.LayoutView.extend({initialize:function(){this.Salesforce=t.module("Salesforce")},template:"#add-person-view-template",regions:{salesforceSearchRegion:"#salesforce-search-region",addPersonFormRegion:"#add-person-form-region"},className:"add-person",onShow:function(){var e=t.config.get("features");e.salesforceEnabled&&this.showSalesforceSearchBar(),this.showAddPersonForm()},showSalesforceSearchBar:function(){var e=new this.Salesforce.SearchBarView({model:this.model});this.listenTo(e,"salesforce:search:results",this.showSalesforceContacts),this.listenTo(e,"salesforce:search:clear",this.showAddPersonForm),this.salesforceSearchRegion.show(e)},showAddPersonForm:function(){this.addPersonFormRegion.show(new e.AddPersonFormView({campaignModel:this.model}))},showSalesforceContacts:function(e){this.addPersonFormRegion.show(new this.Salesforce.SearchContactsView({campaignModel:this.model,recipientsCollection:this.model.get("recipient_data"),collection:e}))}})}),App.module("Touchpoints.Add",function(e,t){e.AddRecipientsView=Marionette.LayoutView.extend({template:"#touchpoints-add-add-recipients-view-template",className:"touchpoints-add-recipients-layout",regions:{recipientsTableRegion:"#touchpoints-add-recipients-table-region",addRecipientsRegion:"#touchpoints-add-recipients-region"},ui:{controlLink:".control-link"},events:{"click @ui.controlLink":"showPanel"},initialize:function(i){_.bindAll(this,"renderRecipientsTable");var n=t.module("Shared.Add");this.requiredFields=i.requiredFields,this.addPersonView=new e.AddPersonView({model:this.model}),this.importRecipientsView=new n.ImportRecipientsView({model:this.model,requiredFields:this.requiredFields}),this.model.get("recipient_data").on("add",this.renderRecipientsTable),this.model.get("recipient_data").on("reset",this.renderRecipientsTable)},renderRecipientsTable:function(){var e=t.module("Shared.Add");this.recipientsTableRegion.show(new e.RecipientsTableView({model:this.model,showEmptyUI:!0}))},onShow:function(){this.renderRecipientsTable()},showPanel:function(e){var t=$(e.target).data("panel-type");"add-single-recipient"===t?this.addRecipientsRegion.show(this.addPersonView,{preventDestroy:!0}):"import-recipients"===t&&this.addRecipientsRegion.show(this.importRecipientsView,{preventDestroy:!0})}})}),App.module("Touchpoints.Add",function(e,t){e.LayoutView=Marionette.LayoutView.extend({className:"touchpoints-add-layout",template:"#touchpoints-add-layout-view-template",regions:{headerRegion:"#touchpoints-add-header-region",hintRegion:"#touchpoints-add-hint-region",addRecipientsRegion:"#touchpoints-add-add-recipients-region",listRegion:"#touchpoints-add-list-region",finalizeRegion:"#touchpoints-add-finalize-region",sendRegion:"#touchpoints-add-send-region"},initialize:function(e){this.touchplanModel=e.touchplanModel,this.campaignModel=e.campaignModel},onShow:function(){var i=t.module("Touchpoints"),n=t.module("Shared.Add");this.headerRegion.show(new i.HeaderView({model:this.touchplanModel,page:"add"})),this.hintRegion.show(new t.Shared.HintView({localStorageKey:"touchpoints.add",contentTemplate:"#touchpoints-add-hint-content-template"})),this.addRecipientsRegion.show(new e.AddRecipientsView({model:this.campaignModel})),this.listRegion.show(new e.ListView({model:this.campaignModel})),this.finalizeRegion.show(new n.FinalizeView({model:this.campaignModel})),this.sendRegion.show(new e.SendView({model:this.campaignModel}))}})}),App.module("Touchpoints.Add",function(e,t){e.ListItemView=Marionette.LayoutView.extend({tagName:"li",className:"touchpoints-list-item",template:"#touchpoints-add-list-item-view-template",templateHelpers:function(){var e=this.getOption("index"),t="yw-icon-circle",i="yw-icon-down-open",n='style="display:none;"';return 1==e&&(t+=" active",i="yw-icon-up-open",n=""),{index:this.getOption("index"),iconEmailClass:t,iconDrawerClass:i,defaultStyle:n}},regions:{conditionRegion:".stage-condition-region",schedulingRegion:".touchpoint-scheduling-region",contentRegion:".touchpoint-content-region"},ui:{icon:".yw-icon-circle",collapse:".touchpoint-collapse",tabs:".touchpoint-tabs",tab:".touchpoint-tab",content:".touchpoint-content",previewTab:".touchpoint-tab.preview"},events:{"click @ui.collapse":"onClickCollapse","click @ui.tab":"onClickTab"},initialize:function(){var e=t.module("Shared");this.stageIndex=this.getOption("index"),this.campaignModel=this.getOption("campaignModel"),this.recipientsCollection=this.campaignModel.get("recipient_data"),this.model.set("recipient_data",this.recipientsCollection),this.editView=new e.EmailComposeView({model:this.model}),this.previewView=new e.EmailPreviewView({model:this.model}),this.listenTo(this.recipientsCollection,"add",this.setPreviewState),this.listenTo(this.recipientsCollection,"remove",this.setPreviewState),this.listenTo(this.recipientsCollection,"reset",this.setPreviewState)},onShow:function(){var e=t.module("Shared");1===this.stageIndex&&this.schedulingRegion.show(new e.SchedulingView({model:this.campaignModel})),this.stageIndex>1&&this.conditionRegion.show(new e.ComposeStageConditionView({model:this.model})),this.contentRegion.show(this.editView)},onClickCollapse:function(e){e.preventDefault();var t=this;this.conditionRegion.$el.slideToggle(250),this.contentRegion.$el.slideToggle(250,function(){t.ui.tabs.toggle(),t.ui.collapse.children().first().toggleClass("yw-icon-up-open yw-icon-down-open"),t.ui.icon.toggleClass("active")})},onClickTab:function(e){var t=$(e.currentTarget);if(!t.hasClass("selected")&&!t.hasClass("disabled")){this.ui.tab.toggleClass("selected");var i=t.hasClass("edit")?this.editView:this.previewView;this.contentRegion.show(i,{preventDestroy:!0})}},setPreviewState:function(){this.ui.previewTab.toggleClass("disabled",this.recipientsCollection.isEmpty())}})}),App.module("Touchpoints.Add",function(e){e.ListView=Marionette.CollectionView.extend({tagName:"ul",className:"touchpoints-add-list",childView:e.ListItemView,childViewOptions:function(e,t){return{index:t+1,campaignModel:this.model}},initialize:function(){this.collection=this.model.get("stages")}})}),App.module("Touchpoints.Add",function(e,t){e.SendView=Marionette.ItemView.extend({template:"#touchpoints-add-send-view-template",ui:{send:".send-touchplan"},events:{"click @ui.send":"sendTouchplan","focus @ui.send":"toggleErrorsTooltip","blur @ui.send":"closeErrorsTooltip","mouseenter @ui.send":"toggleErrorsTooltip","mouseleave @ui.send":"closeErrorsTooltip"},modelEvents:{change:"validateSend"},initialize:function(){this.validationErrors=[],this.listenTo(this.model.get("stages"),"all",this.validateSend),this.listenTo(this.model.get("recipient_data"),"all",this.validateSend)},onShow:function(){this.validateSend()},onDestroy:function(){this.closeErrorsTooltip()},toggleDisable:function(e){this.ui.send.toggleClass("disabled",!!e)},sendTouchplan:function(e){var i=this;e.preventDefault(),this.ui.send.hasClass("disabled")||(this.toggleDisable(!0),this.model.set("send_campaign",!0),this.model.save(null,{noParse:!0}).done(function(){t.notify("Your Mail Merge has been successfully scheduled.",t.Notifications.Type.SUCCESS),t.trigger("touchpoints:list"),Yesware.Utils.logPurpleProjectsUsage("sentTouchplan",{"BCC to CRM":i.model.get("bcc_to_crm"),"Scheduled At":i.model.get("stages").at(0).get("send_at"),"Recipient List Source":i.model.recipientListSource}),Yesware.Utils.logMasterUsage("Touchpoints",{action:"Sent",peopleProperties:"Touchpoints Sent"})}).fail(function(e){t.notify("Sorry, your Mail Merge couldn't be sent. The error we got is: "+e.responseJSON.errors,t.Notifications.Type.ERROR)}))},validateSend:function(){this.validationErrors=[],this.validateRecipients(),this.validateSecondaryRecipients(),this.validateStages(),this.toggleDisable(this.validationErrors.length)},validateRecipients:function(){this.model.get("recipient_data").length||this.validationErrors.push("You must add recipients.")},validateSecondaryRecipients:function(){this.validateCCRecipients(this.model.get("cc")),this.validateCCRecipients(this.model.get("bcc"),!0)},validateCCRecipients:function(e,i){_.each(e,function(e){t.isEmailValid(e)||this.validationErrors.push([i?"BCC":"CC","Address",e,"is an invalid email address."].join(" "))},this)},validateStages:function(){var e=!1,t=!1,i=!1;this.model.get("stages").each(function(n,o){o||$.trim(n.get("subject"))||this.validationErrors.push("You must add a subject to the first stage."),e||!o||$.trim(n.get("subject"))||(e=!0,this.validationErrors.push("You must add a subject to all followup stages.")),i||!o||n.get("send_after")||(i=!0,this.validationErrors.push("You must provide number of days to all followup stage conditions.")),!t&&n.hasEmptyBody()&&(t=!0,this.validationErrors.push("You must provide email bodies for all stages."))},this)},toggleErrorsTooltip:function(){this.validationErrors.length?this.renderErrorsTooltip():this.closeErrorsTooltip()},renderErrorsTooltip:function(){var e=["<span class='yw-icon-attention'>","Please correct the following errors before sending:","</span>"].join(""),t=_.map(this.validationErrors,function(e){return"<li>"+e+"</li>"}),i="<ul>"+t.join("")+"</ul>";this.$qtip=this.ui.send.qtip({content:{title:e,text:i},position:{my:"bottom center",at:"top center"},show:{ready:!0,delay:0},style:{classes:"qtip-light validation-errors",tip:{width:15,height:10,offset:-119,corner:"bottom center"}}})},closeErrorsTooltip:function(){this.$qtip&&(this.$qtip.qtip("api").destroy(!0),this.$qtip=null)}})}),App.module("Touchpoints.List",function(e,t){var i=t.module("Shared"),n=t.module("Shared.List"),o=t.module("Touchpoints.List");e.LayoutView=Marionette.LayoutView.extend({template:"#touchpoints-list-layout-view-template",regions:{listHeaderRegion:"#list-header-region",tabsRegion:"#list-tabs-region",listContentRegion:"#list-content-region"},initialize:function(e){_.bindAll(this,"showContent"),this.whichList=e.whichList,this.collection.on("reset",this.showContent)},onShow:function(){var e=this;this.listHeaderRegion.show(new n.ListHeaderView({collection:this.collection})),this.tabsRegion.show(new i.TabView({tabs:[{label:"Mail Merges",url:"#list",selected:"mailmerges"===this.whichList},{label:"Mail Merge Templates",url:"#list/templates",selected:"templates"===this.whichList,badge:{url:"https://help.yesware.com/entries/93499977",label:"LABS"}}]})),t.trigger("busy",{overlay:!0}),this.collection.fetch().done(this.showContent).fail(function(i){var n="mailmerges"===e.whichList?"mail merges":"mail merge templates",o="Sorry, we weren't able to retrieve your "+n+". The error we get is: "+i.responseJSON.message;t.notify(o,t.Notifications.Type.ERROR),console.log(o)}).always(function(){t.trigger("idle",{overlay:!0})})},showContent:function(){var e="mailmerges"===this.whichList?n.TableView:o.TouchplansListLayoutView;this.listContentRegion.show(new e({collection:this.collection}))}})}),App.module("Touchpoints.List",function(e,t){e.TouchplanItemView=Marionette.ItemView.extend({template:"#touchplan-item-view-template",ui:{touchplanInfo:".touchplan-info",touchplanName:"span.touchplan-name",touchplanNameInput:"input.touchplan-name",touchplanEditForm:".touchplan-edit-form",cancelEdit:".cancel-edit",useTemplate:".touchplan-use",editButton:".show-edit-buttons",deleteButton:".touchplan-delete"},events:{"click @ui.touchplanInfo":"onClickTouchplanInfo","submit @ui.touchplanEditForm":"onSubmitTouchplanEditForm","click @ui.cancelEdit":"toggleTouchplanInfo","click @ui.useTemplate":"onClickUseTemplate","keyup @ui.touchplanNameInput":"onInputKeyup","keyup @ui.editButton":"onEditButtonKeyup","click @ui.deleteButton":"onClickDelete"},onClickUseTemplate:function(e){e.preventDefault(),t.trigger("touchpoints:useTemplate",this.model),Yesware.Utils.logPurpleProjectsUsage("clickTouchPlanAddPeople")},onClickTouchplanInfo:function(){this.toggleTouchplanInfo()},onSubmitTouchplanEditForm:function(e){var i=this;e.preventDefault(),this.model.set("name",this.ui.touchplanNameInput.val()),this.model.save().done(function(){i.ui.touchplanName.text(i.model.get("name")),i.toggleTouchplanInfo()}).fail(function(e){var i="Sorry, we're having trouble saving your touchplan. The error we get is: "+e.responseJSON.message;t.notify(i,t.Notifications.Type.ERROR),console.log(i)})},toggleTouchplanInfo:function(){if(!this.ui.touchplanEditForm.is(":visible")){var e=200;this.ui.touchplanNameInput.width(Math.max(this.ui.touchplanName.width(),e))}this.ui.touchplanInfo.toggle(),this.ui.touchplanEditForm.toggle(),this.ui.touchplanEditForm.is(":visible")&&this.ui.touchplanNameInput.select()},_editorSelector:function(){return".touchplan-name[data-blueprint-id="+this.model.get("id")+"]"},onInputKeyup:function(e){27===e.keyCode&&(this.ui.cancelEdit.click(),this.ui.editButton.focus())},onEditButtonKeyup:function(e){13===e.keyCode&&(this.toggleTouchplanInfo(),setTimeout(_.bind(function(){this.ui.touchplanNameInput.select()},this),0))},onClickDelete:function(){var e='Are you sure you want to delete the Mail Merge Template named "'+this.model.get("name")+'"?';confirm(e)&&(t.trigger("busy",{overlay:!0}),this.model.save({deleted:!0},{wait:!0}).fail(function(e){t.notify("Sorry, we weren't able to delete your Mail Merge Template. The error we got is: "+e.responseJSON.errors,t.Notifications.Type.ERROR)}).done(function(){t.trigger("touchpoints:listTemplates")}).always(function(){t.trigger("idle",{overlay:!0})}))}})}),App.module("Touchpoints.List",function(e){e.TouchplansEmptyListView=Marionette.ItemView.extend({className:"island island-content",template:"#touchpoints-list-empty-templates-list-template"})}),App.module("Touchpoints.List",function(e,t){e.TouchplansListLayoutView=Marionette.LayoutView.extend({template:"#touchplans-list-layout-view-template",regions:{hintRegion:"#touchplans-hint-region",emptyRegion:"#touchplans-empty-list-region",listRegion:"#touchplans-list-region"},onShow:function(){var i=t.module("Shared");this.hintRegion.show(new i.HintView({localStorageKey:"touchpoints.list",contentTemplate:"#touchpoints-list-hint-content-template"})),0===this.collection.length&&this.emptyRegion.show(new e.TouchplansEmptyListView),this.listRegion.show(new e.TouchplansListView({collection:this.collection}))}})}),App.module("Touchpoints.List",function(e){e.TouchplansListView=Marionette.CompositeView.extend({template:"#touchplans-list-view-template",childView:e.TouchplanItemView,childViewContainer:".touchplans-list"})}),function(){function e(e){if(!e.userAuthToken&&!e.userAccessToken){var t="Error encountered during initialization: Please supply an auth or access token.";throw App.notify(t,App.Notifications.Type.ERROR),t}return _.omit(e,"platform")}function t(){App.Notifications.initialize();var e=App.module("Spinners");App.spinnerRegion.show(new e.OverlaySpinnerView),e.HeaderLogoSpinner.initialize();var t=App.module("Search");t.initialize()}function i(e,t){var i=new App.Entities.AppConfig(e);App.config=i;var n=i.fetch(t),o=Yesware.Availabilities.fetch({domain:e.backendProtocol+e.backendUrl,authToken:e.userAuthToken,accessToken:e.userAccessToken}).done(function(e){App.availabilities=e}),r=$.Deferred();return $.when(n,o).done(r.resolve).fail(r.reject),r}function n(e,t,i){var n=["Error encountered during initialization: Could not retrieve configuration -",i,e.responseText].join(" ");App.notify(n,App.Notifications.Type.ERROR),console.log(n)}function o(e){App.notify(e,App.Notifications.Type.NOTICE),console.log(e)}function r(){App.config.attributes.mailMergeCapabilityEnabled?App.config.attributes.mailMergePolicyEnabled?Backbone.history.start():o("Sorry, your account manager has disabled Mail Merge."):o("Sorry, your Yesware plan doesn't include Mail Merge.")}function s(){var e,t;App.config.get("features").touchpointsEnabled?(e=App.Touchpoints.Router,t=App.Touchpoints.Controller):(e=App.MailMerge.Router,t=App.MailMerge.Controller),new e({controller:t})}function a(){var e=App.config.get("features");e.touchpointsEnabled=App.availabilities.isEnabled("touchpoints")}App.addRegions({containerRegion:"#container",notificationsRegion:"#notifications-region",spinnerRegion:"#spinner-region",searchResultsRegion:"#search-results-region"}),App.on("start",function(o){t();var l=o.platform;o=e(o),i(o,l).done(function(){if(!App.config.isValid(!0))throw"Invalid configuration";a(),s(),this.frameApi=App.module("FrameApi"),this.frameApi.init(),r()}).fail(n)})}();